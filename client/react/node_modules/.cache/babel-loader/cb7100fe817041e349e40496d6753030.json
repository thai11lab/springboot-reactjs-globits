{"ast":null,"code":"import _objectSpread from \"D:\\\\TraniningGlobits\\\\baitap_level2\\\\client\\\\react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"D:\\\\TraniningGlobits\\\\baitap_level2\\\\client\\\\react\\\\src\\\\app\\\\views\\\\scrum-board\\\\BoardList.jsx\";\nimport React, { Component } from \"react\";\nimport { Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { Card, Icon, MenuItem, IconButton, TextField, InputAdornment, ClickAwayListener, Button } from \"@material-ui/core\";\nimport ScrumBoardCard from \"./ScrumBoardCard\";\nimport Scrollbar from \"react-perfect-scrollbar\";\nimport { EgretMenu } from \"egret\";\nimport { connect } from \"react-redux\";\nimport { PropTypes } from \"prop-types\";\nimport { renameListInBoard, deleteListFromBoard, addNewCardInList } from \"../../redux/actions/ScrumBoardActions\";\n\nclass BoardList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      shouldOpenTitleEditor: false,\n      shouldOpenAddCard: false,\n      cardTitleText: \"\",\n      columnTitleText: \"\"\n    };\n\n    this.handleChange = event => {\n      if (event.key === \"Enter\" && !event.shiftKey) {\n        if (event.target.name === \"cardTitleText\") {\n          this.handleAddNewCard();\n        } else {\n          this.handleRenameList();\n        }\n      } else this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleRenameList = () => {\n      this.props.renameListInBoard({\n        boardId: this.props.board.id,\n        listId: this.props.data.column.id,\n        listTitle: this.state.columnTitleText\n      });\n      this.openTitleEditor(false);\n    };\n\n    this.openTitleEditor = value => {\n      this.setState({\n        shouldOpenTitleEditor: value\n      });\n    };\n\n    this.openAddCard = value => {\n      this.setState({\n        shouldOpenAddCard: value\n      });\n    };\n\n    this.handleAddNewCard = () => {\n      let cardTitleText = this.state.cardTitleText;\n\n      if (cardTitleText.trim() !== \"\") {\n        this.props.addNewCardInList({\n          boardId: this.props.board.id,\n          listId: this.props.data.column.id,\n          cardTitle: this.state.cardTitleText\n        });\n        this.setState({\n          cardTitleText: \"\"\n        });\n      }\n    };\n\n    this.handleListDelete = () => {\n      this.props.deleteListFromBoard({\n        boardId: this.props.board.id,\n        listId: this.props.data.column.id\n      });\n    };\n  }\n\n  render() {\n    let _this$props$data = this.props.data,\n        provided = _this$props$data.provided,\n        snapshot = _this$props$data.snapshot,\n        column = _this$props$data.column;\n    let _this$state = this.state,\n        shouldOpenAddCard = _this$state.shouldOpenAddCard,\n        shouldOpenTitleEditor = _this$state.shouldOpenTitleEditor,\n        cardTitleText = _this$state.cardTitleText;\n    let handleCardClick = this.props.handleCardClick;\n    return /*#__PURE__*/React.createElement(Card, Object.assign({\n      className: \"list-column position-relative pt-4\",\n      elevation: snapshot.isDragging ? 10 : 3,\n      ref: provided.innerRef\n    }, provided.draggableProps, provided.dragHandleProps, {\n      style: _objectSpread({\n        minWidth: \"290px\",\n        maxWidth: \"290px\"\n      }, provided.draggableProps.style),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Droppable, {\n      droppableId: column.id,\n      direction: \"vertical\",\n      type: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, (provided, snapshot) => /*#__PURE__*/React.createElement(\"div\", {\n      ref: provided.innerRef,\n      className: \"position-relative px-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-middle flex-space-between py-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }, shouldOpenTitleEditor ? /*#__PURE__*/React.createElement(ClickAwayListener, {\n      onClickAway: () => this.openTitleEditor(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      variant: \"outlined\",\n      defaultValue: column.title,\n      onChange: this.handleChange,\n      onKeyDown: this.handleChange,\n      name: \"columnTitleText\",\n      InputProps: {\n        endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n          position: \"end\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(IconButton, {\n          size: \"small\",\n          onClick: this.handleRenameList,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(Icon, {\n          fontSize: \"small\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 31\n          }\n        }, \"done\")))\n      },\n      inputProps: {\n        style: {\n          padding: \"10px\"\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    })) : /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"m-0 flex-grow-1 py-4 capitalize\",\n      onClick: () => this.openTitleEditor(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 19\n      }\n    }, column.title), /*#__PURE__*/React.createElement(EgretMenu, {\n      horizontalPosition: \"right\",\n      menuButton: /*#__PURE__*/React.createElement(IconButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 23\n        }\n      }, \"more_vert\")),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      className: \"flex flex-middle\",\n      style: {\n        minWidth: 150\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }, \" settings \"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"pl-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }, \" Settings \")), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: this.handleListDelete,\n      className: \"flex flex-middle\",\n      style: {\n        minWidth: 150\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }\n    }, \" delete \"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"pl-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }, \" Delete \")))), /*#__PURE__*/React.createElement(Scrollbar, {\n      className: \"position-relative\",\n      style: {\n        height: \"380px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, column.cardList.map((card, index) => /*#__PURE__*/React.createElement(Draggable, {\n      key: card.id,\n      draggableId: card.id,\n      index: index,\n      type: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, (provided, snapshot) => /*#__PURE__*/React.createElement(Card, Object.assign({\n      className: \"list-column__card borderborder-radius-4 bg-light-gray\",\n      elevation: snapshot.isDragging ? 10 : 3,\n      onClick: () => handleCardClick(_objectSpread(_objectSpread({}, card), {}, {\n        listId: column.id\n      })),\n      ref: provided.innerRef\n    }, provided.draggableProps, provided.dragHandleProps, {\n      style: _objectSpread({}, provided.draggableProps.style),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(ScrumBoardCard, {\n      card: card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    }))))), provided.placeholder)), shouldOpenAddCard ? /*#__PURE__*/React.createElement(ClickAwayListener, {\n      onClickAway: () => this.openAddCard(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"position-bottom border-radius-0 cursor-pointer px-16 pt-16 pb-8 w-100\",\n      elevation: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      className: \"mb-12\",\n      variant: \"outlined\",\n      name: \"cardTitleText\",\n      value: cardTitleText,\n      fullWidth: true,\n      onChange: this.handleChange,\n      onKeyDown: this.handleChange,\n      InputProps: {\n        endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n          position: \"end\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(IconButton, {\n          size: \"small\",\n          onClick: () => this.openAddCard(false),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Icon, {\n          fontSize: \"small\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }\n        }, \"clear\")))\n      },\n      inputProps: {\n        style: {\n          padding: \"10px\"\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleAddNewCard,\n      variant: \"contained\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }\n    }, \"Add\")))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"font-weight-500 flex-grow-1 border-radius-0\",\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => this.openAddCard(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }\n    }, \"+ Add Card\")));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  renameListInBoard: PropTypes.func.isRequired,\n  deleteListFromBoard: PropTypes.func.isRequired,\n  addNewCardInList: PropTypes.func.isRequired,\n  board: state.scrumboard.board\n});\n\nexport default connect(mapStateToProps, {\n  renameListInBoard,\n  deleteListFromBoard,\n  addNewCardInList\n})(BoardList);","map":{"version":3,"sources":["D:/TraniningGlobits/baitap_level2/client/react/src/app/views/scrum-board/BoardList.jsx"],"names":["React","Component","Droppable","Draggable","Card","Icon","MenuItem","IconButton","TextField","InputAdornment","ClickAwayListener","Button","ScrumBoardCard","Scrollbar","EgretMenu","connect","PropTypes","renameListInBoard","deleteListFromBoard","addNewCardInList","BoardList","state","shouldOpenTitleEditor","shouldOpenAddCard","cardTitleText","columnTitleText","handleChange","event","key","shiftKey","target","name","handleAddNewCard","handleRenameList","setState","value","props","boardId","board","id","listId","data","column","listTitle","openTitleEditor","openAddCard","trim","cardTitle","handleListDelete","render","provided","snapshot","handleCardClick","isDragging","innerRef","draggableProps","dragHandleProps","minWidth","maxWidth","style","title","endAdornment","padding","height","cardList","map","card","index","placeholder","mapStateToProps","func","isRequired","scrumboard"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,qBAArC;AACA,SACEC,IADF,EAEEC,IAFF,EAGEC,QAHF,EAIEC,UAJF,EAKEC,SALF,EAMEC,cANF,EAOEC,iBAPF,EAQEC,MARF,QASO,mBATP;AAUA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SACEC,iBADF,EAEEC,mBAFF,EAGEC,gBAHF,QAIO,uCAJP;;AAMA,MAAMC,SAAN,SAAwBnB,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCoB,KADgC,GACxB;AACNC,MAAAA,qBAAqB,EAAE,KADjB;AAENC,MAAAA,iBAAiB,EAAE,KAFb;AAGNC,MAAAA,aAAa,EAAE,EAHT;AAINC,MAAAA,eAAe,EAAE;AAJX,KADwB;;AAAA,SAQhCC,YARgC,GAQjBC,KAAK,IAAI;AACtB,UAAIA,KAAK,CAACC,GAAN,KAAc,OAAd,IAAyB,CAACD,KAAK,CAACE,QAApC,EAA8C;AAC5C,YAAIF,KAAK,CAACG,MAAN,CAAaC,IAAb,KAAsB,eAA1B,EAA2C;AACzC,eAAKC,gBAAL;AACD,SAFD,MAEO;AACL,eAAKC,gBAAL;AACD;AACF,OAND,MAMO,KAAKC,QAAL,CAAc;AAAE,SAACP,KAAK,CAACG,MAAN,CAAaC,IAAd,GAAqBJ,KAAK,CAACG,MAAN,CAAaK;AAApC,OAAd;AACR,KAhB+B;;AAAA,SAkBhCF,gBAlBgC,GAkBb,MAAM;AACvB,WAAKG,KAAL,CAAWnB,iBAAX,CAA6B;AAC3BoB,QAAAA,OAAO,EAAE,KAAKD,KAAL,CAAWE,KAAX,CAAiBC,EADC;AAE3BC,QAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWK,IAAX,CAAgBC,MAAhB,CAAuBH,EAFJ;AAG3BI,QAAAA,SAAS,EAAE,KAAKtB,KAAL,CAAWI;AAHK,OAA7B;AAKA,WAAKmB,eAAL,CAAqB,KAArB;AACD,KAzB+B;;AAAA,SA2BhCA,eA3BgC,GA2BdT,KAAK,IAAI;AACzB,WAAKD,QAAL,CAAc;AAAEZ,QAAAA,qBAAqB,EAAEa;AAAzB,OAAd;AACD,KA7B+B;;AAAA,SA+BhCU,WA/BgC,GA+BlBV,KAAK,IAAI;AACrB,WAAKD,QAAL,CAAc;AAAEX,QAAAA,iBAAiB,EAAEY;AAArB,OAAd;AACD,KAjC+B;;AAAA,SAmChCH,gBAnCgC,GAmCb,MAAM;AAAA,UACjBR,aADiB,GACC,KAAKH,KADN,CACjBG,aADiB;;AAEvB,UAAIA,aAAa,CAACsB,IAAd,OAAyB,EAA7B,EAAiC;AAC/B,aAAKV,KAAL,CAAWjB,gBAAX,CAA4B;AAC1BkB,UAAAA,OAAO,EAAE,KAAKD,KAAL,CAAWE,KAAX,CAAiBC,EADA;AAE1BC,UAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWK,IAAX,CAAgBC,MAAhB,CAAuBH,EAFL;AAG1BQ,UAAAA,SAAS,EAAE,KAAK1B,KAAL,CAAWG;AAHI,SAA5B;AAKA,aAAKU,QAAL,CAAc;AAAEV,UAAAA,aAAa,EAAE;AAAjB,SAAd;AACD;AACF,KA7C+B;;AAAA,SA+ChCwB,gBA/CgC,GA+Cb,MAAM;AACvB,WAAKZ,KAAL,CAAWlB,mBAAX,CAA+B;AAC7BmB,QAAAA,OAAO,EAAE,KAAKD,KAAL,CAAWE,KAAX,CAAiBC,EADG;AAE7BC,QAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWK,IAAX,CAAgBC,MAAhB,CAAuBH;AAFF,OAA/B;AAID,KApD+B;AAAA;;AAsDhCU,EAAAA,MAAM,GAAG;AAAA,2BAC8B,KAAKb,KAAL,CAAWK,IADzC;AAAA,QACDS,QADC,oBACDA,QADC;AAAA,QACSC,QADT,oBACSA,QADT;AAAA,QACmBT,MADnB,oBACmBA,MADnB;AAAA,sBAMH,KAAKrB,KANF;AAAA,QAGLE,iBAHK,eAGLA,iBAHK;AAAA,QAILD,qBAJK,eAILA,qBAJK;AAAA,QAKLE,aALK,eAKLA,aALK;AAAA,QAOD4B,eAPC,GAOmB,KAAKhB,KAPxB,CAODgB,eAPC;AASP,wBACE,oBAAC,IAAD;AACE,MAAA,SAAS,EAAC,oCADZ;AAEE,MAAA,SAAS,EAAED,QAAQ,CAACE,UAAT,GAAsB,EAAtB,GAA2B,CAFxC;AAGE,MAAA,GAAG,EAAEH,QAAQ,CAACI;AAHhB,OAIMJ,QAAQ,CAACK,cAJf,EAKML,QAAQ,CAACM,eALf;AAME,MAAA,KAAK;AACHC,QAAAA,QAAQ,EAAE,OADP;AAEHC,QAAAA,QAAQ,EAAE;AAFP,SAGAR,QAAQ,CAACK,cAAT,CAAwBI,KAHxB,CANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAYE,oBAAC,SAAD;AAAW,MAAA,WAAW,EAAEjB,MAAM,CAACH,EAA/B;AAAmC,MAAA,SAAS,EAAC,UAA7C;AAAwD,MAAA,IAAI,EAAC,MAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAACW,QAAD,EAAWC,QAAX,kBACC;AAAK,MAAA,GAAG,EAAED,QAAQ,CAACI,QAAnB;AAA6B,MAAA,SAAS,EAAC,yBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,0CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGhC,qBAAqB,gBACpB,oBAAC,iBAAD;AACE,MAAA,WAAW,EAAE,MAAM,KAAKsB,eAAL,CAAqB,KAArB,CADrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGE,oBAAC,SAAD;AACE,MAAA,OAAO,EAAC,UADV;AAEE,MAAA,YAAY,EAAEF,MAAM,CAACkB,KAFvB;AAGE,MAAA,QAAQ,EAAE,KAAKlC,YAHjB;AAIE,MAAA,SAAS,EAAE,KAAKA,YAJlB;AAKE,MAAA,IAAI,EAAC,iBALP;AAME,MAAA,UAAU,EAAE;AACVmC,QAAAA,YAAY,eACV,oBAAC,cAAD;AAAgB,UAAA,QAAQ,EAAC,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,UAAD;AACE,UAAA,IAAI,EAAC,OADP;AAEE,UAAA,OAAO,EAAE,KAAK5B,gBAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAIE,oBAAC,IAAD;AAAM,UAAA,QAAQ,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,CADF;AAFQ,OANd;AAkBE,MAAA,UAAU,EAAE;AACV0B,QAAAA,KAAK,EAAE;AACLG,UAAAA,OAAO,EAAE;AADJ;AADG,OAlBd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADoB,gBA8BpB;AACE,MAAA,SAAS,EAAC,iCADZ;AAEE,MAAA,OAAO,EAAE,MAAM,KAAKlB,eAAL,CAAqB,IAArB,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGF,MAAM,CAACkB,KAJV,CA/BJ,eAsCE,oBAAC,SAAD;AACE,MAAA,kBAAkB,EAAC,OADrB;AAEE,MAAA,UAAU,eACR,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQE,oBAAC,QAAD;AACE,MAAA,SAAS,EAAC,kBADZ;AAEE,MAAA,KAAK,EAAE;AAAEH,QAAAA,QAAQ,EAAE;AAAZ,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,eAKE;AAAM,MAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,CARF,eAeE,oBAAC,QAAD;AACE,MAAA,OAAO,EAAE,KAAKT,gBADhB;AAEE,MAAA,SAAS,EAAC,kBAFZ;AAGE,MAAA,KAAK,EAAE;AAAES,QAAAA,QAAQ,EAAE;AAAZ,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,eAME;AAAM,MAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,CAfF,CAtCF,CADF,eAiEE,oBAAC,SAAD;AACE,MAAA,SAAS,EAAC,mBADZ;AAEE,MAAA,KAAK,EAAE;AAAEM,QAAAA,MAAM,EAAE;AAAV,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGrB,MAAM,CAACsB,QAAP,CAAgBC,GAAhB,CAAoB,CAACC,IAAD,EAAOC,KAAP,kBACnB,oBAAC,SAAD;AACE,MAAA,GAAG,EAAED,IAAI,CAAC3B,EADZ;AAEE,MAAA,WAAW,EAAE2B,IAAI,CAAC3B,EAFpB;AAGE,MAAA,KAAK,EAAE4B,KAHT;AAIE,MAAA,IAAI,EAAC,MAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMG,CAACjB,QAAD,EAAWC,QAAX,kBACC,oBAAC,IAAD;AACE,MAAA,SAAS,EAAC,uDADZ;AAEE,MAAA,SAAS,EAAEA,QAAQ,CAACE,UAAT,GAAsB,EAAtB,GAA2B,CAFxC;AAGE,MAAA,OAAO,EAAE,MACPD,eAAe,iCAAMc,IAAN;AAAY1B,QAAAA,MAAM,EAAEE,MAAM,CAACH;AAA3B,SAJnB;AAME,MAAA,GAAG,EAAEW,QAAQ,CAACI;AANhB,OAOMJ,QAAQ,CAACK,cAPf,EAQML,QAAQ,CAACM,eARf;AASE,MAAA,KAAK,oBACAN,QAAQ,CAACK,cAAT,CAAwBI,KADxB,CATP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAaE,oBAAC,cAAD;AAAgB,MAAA,IAAI,EAAEO,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,CAPJ,CADD,CAJH,CAjEF,EAgGGhB,QAAQ,CAACkB,WAhGZ,CAFJ,CAZF,EAoHG7C,iBAAiB,gBAChB,oBAAC,iBAAD;AAAmB,MAAA,WAAW,EAAE,MAAM,KAAKsB,WAAL,CAAiB,KAAjB,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AACE,MAAA,SAAS,EAAC,uEADZ;AAEE,MAAA,SAAS,EAAE,CAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE,oBAAC,SAAD;AACE,MAAA,SAAS,EAAC,OADZ;AAEE,MAAA,OAAO,EAAC,UAFV;AAGE,MAAA,IAAI,EAAC,eAHP;AAIE,MAAA,KAAK,EAAErB,aAJT;AAKE,MAAA,SAAS,MALX;AAME,MAAA,QAAQ,EAAE,KAAKE,YANjB;AAOE,MAAA,SAAS,EAAE,KAAKA,YAPlB;AAQE,MAAA,UAAU,EAAE;AACVmC,QAAAA,YAAY,eACV,oBAAC,cAAD;AAAgB,UAAA,QAAQ,EAAC,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,UAAD;AACE,UAAA,IAAI,EAAC,OADP;AAEE,UAAA,OAAO,EAAE,MAAM,KAAKhB,WAAL,CAAiB,KAAjB,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAIE,oBAAC,IAAD;AAAM,UAAA,QAAQ,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF,CADF;AAFQ,OARd;AAoBE,MAAA,UAAU,EAAE;AACVc,QAAAA,KAAK,EAAE;AACLG,UAAAA,OAAO,EAAE;AADJ;AADG,OApBd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,eA8BE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AACE,MAAA,OAAO,EAAE,KAAK9B,gBADhB;AAEE,MAAA,OAAO,EAAC,WAFV;AAGE,MAAA,KAAK,EAAC,SAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CA9BF,CADF,CADgB,gBA4ChB;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AACE,MAAA,SAAS,EAAC,6CADZ;AAEE,MAAA,OAAO,EAAC,WAFV;AAGE,MAAA,KAAK,EAAC,SAHR;AAIE,MAAA,OAAO,EAAE,MAAM,KAAKa,WAAL,CAAiB,IAAjB,CAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CAhKJ,CADF;AA8KD;;AA7O+B;;AAgPlC,MAAMwB,eAAe,GAAGhD,KAAK,KAAK;AAChCJ,EAAAA,iBAAiB,EAAED,SAAS,CAACsD,IAAV,CAAeC,UADF;AAEhCrD,EAAAA,mBAAmB,EAAEF,SAAS,CAACsD,IAAV,CAAeC,UAFJ;AAGhCpD,EAAAA,gBAAgB,EAAEH,SAAS,CAACsD,IAAV,CAAeC,UAHD;AAIhCjC,EAAAA,KAAK,EAAEjB,KAAK,CAACmD,UAAN,CAAiBlC;AAJQ,CAAL,CAA7B;;AAOA,eAAevB,OAAO,CACpBsD,eADoB,EAEpB;AAAEpD,EAAAA,iBAAF;AAAqBC,EAAAA,mBAArB;AAA0CC,EAAAA;AAA1C,CAFoB,CAAP,CAGbC,SAHa,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Droppable, Draggable } from \"react-beautiful-dnd\";\nimport {\n  Card,\n  Icon,\n  MenuItem,\n  IconButton,\n  TextField,\n  InputAdornment,\n  ClickAwayListener,\n  Button\n} from \"@material-ui/core\";\nimport ScrumBoardCard from \"./ScrumBoardCard\";\nimport Scrollbar from \"react-perfect-scrollbar\";\nimport { EgretMenu } from \"egret\";\nimport { connect } from \"react-redux\";\nimport { PropTypes } from \"prop-types\";\nimport {\n  renameListInBoard,\n  deleteListFromBoard,\n  addNewCardInList\n} from \"../../redux/actions/ScrumBoardActions\";\n\nclass BoardList extends Component {\n  state = {\n    shouldOpenTitleEditor: false,\n    shouldOpenAddCard: false,\n    cardTitleText: \"\",\n    columnTitleText: \"\"\n  };\n\n  handleChange = event => {\n    if (event.key === \"Enter\" && !event.shiftKey) {\n      if (event.target.name === \"cardTitleText\") {\n        this.handleAddNewCard();\n      } else {\n        this.handleRenameList();\n      }\n    } else this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleRenameList = () => {\n    this.props.renameListInBoard({\n      boardId: this.props.board.id,\n      listId: this.props.data.column.id,\n      listTitle: this.state.columnTitleText\n    });\n    this.openTitleEditor(false);\n  };\n\n  openTitleEditor = value => {\n    this.setState({ shouldOpenTitleEditor: value });\n  };\n\n  openAddCard = value => {\n    this.setState({ shouldOpenAddCard: value });\n  };\n\n  handleAddNewCard = () => {\n    let { cardTitleText } = this.state;\n    if (cardTitleText.trim() !== \"\") {\n      this.props.addNewCardInList({\n        boardId: this.props.board.id,\n        listId: this.props.data.column.id,\n        cardTitle: this.state.cardTitleText\n      });\n      this.setState({ cardTitleText: \"\" });\n    }\n  };\n\n  handleListDelete = () => {\n    this.props.deleteListFromBoard({\n      boardId: this.props.board.id,\n      listId: this.props.data.column.id\n    });\n  };\n\n  render() {\n    let { provided, snapshot, column } = this.props.data;\n    let {\n      shouldOpenAddCard,\n      shouldOpenTitleEditor,\n      cardTitleText\n    } = this.state;\n    let { handleCardClick } = this.props;\n\n    return (\n      <Card\n        className=\"list-column position-relative pt-4\"\n        elevation={snapshot.isDragging ? 10 : 3}\n        ref={provided.innerRef}\n        {...provided.draggableProps}\n        {...provided.dragHandleProps}\n        style={{\n          minWidth: \"290px\",\n          maxWidth: \"290px\",\n          ...provided.draggableProps.style\n        }}\n      >\n        <Droppable droppableId={column.id} direction=\"vertical\" type=\"card\">\n          {(provided, snapshot) => (\n            <div ref={provided.innerRef} className=\"position-relative px-16\">\n              <div className=\"flex flex-middle flex-space-between py-8\">\n                {shouldOpenTitleEditor ? (\n                  <ClickAwayListener\n                    onClickAway={() => this.openTitleEditor(false)}\n                  >\n                    <TextField\n                      variant=\"outlined\"\n                      defaultValue={column.title}\n                      onChange={this.handleChange}\n                      onKeyDown={this.handleChange}\n                      name=\"columnTitleText\"\n                      InputProps={{\n                        endAdornment: (\n                          <InputAdornment position=\"end\">\n                            <IconButton\n                              size=\"small\"\n                              onClick={this.handleRenameList}\n                            >\n                              <Icon fontSize=\"small\">done</Icon>\n                            </IconButton>\n                          </InputAdornment>\n                        )\n                      }}\n                      inputProps={{\n                        style: {\n                          padding: \"10px\"\n                        }\n                      }}\n                    />\n                  </ClickAwayListener>\n                ) : (\n                  <h4\n                    className=\"m-0 flex-grow-1 py-4 capitalize\"\n                    onClick={() => this.openTitleEditor(true)}\n                  >\n                    {column.title}\n                  </h4>\n                )}\n                <EgretMenu\n                  horizontalPosition=\"right\"\n                  menuButton={\n                    <IconButton>\n                      <Icon>more_vert</Icon>\n                    </IconButton>\n                  }\n                >\n                  <MenuItem\n                    className=\"flex flex-middle\"\n                    style={{ minWidth: 150 }}\n                  >\n                    <Icon> settings </Icon>\n                    <span className=\"pl-16\"> Settings </span>\n                  </MenuItem>\n                  <MenuItem\n                    onClick={this.handleListDelete}\n                    className=\"flex flex-middle\"\n                    style={{ minWidth: 150 }}\n                  >\n                    <Icon> delete </Icon>\n                    <span className=\"pl-16\"> Delete </span>\n                  </MenuItem>\n                </EgretMenu>\n              </div>\n\n              <Scrollbar\n                className=\"position-relative\"\n                style={{ height: \"380px\" }}\n              >\n                {column.cardList.map((card, index) => (\n                  <Draggable\n                    key={card.id}\n                    draggableId={card.id}\n                    index={index}\n                    type=\"card\"\n                  >\n                    {(provided, snapshot) => (\n                      <Card\n                        className=\"list-column__card borderborder-radius-4 bg-light-gray\"\n                        elevation={snapshot.isDragging ? 10 : 3}\n                        onClick={() =>\n                          handleCardClick({ ...card, listId: column.id })\n                        }\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n                        {...provided.dragHandleProps}\n                        style={{\n                          ...provided.draggableProps.style\n                        }}\n                      >\n                        <ScrumBoardCard card={card}></ScrumBoardCard>\n                      </Card>\n                    )}\n                  </Draggable>\n                ))}\n              </Scrollbar>\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n\n        {/* ===================================================== */}\n        {shouldOpenAddCard ? (\n          <ClickAwayListener onClickAway={() => this.openAddCard(false)}>\n            <Card\n              className=\"position-bottom border-radius-0 cursor-pointer px-16 pt-16 pb-8 w-100\"\n              elevation={5}\n            >\n              <TextField\n                className=\"mb-12\"\n                variant=\"outlined\"\n                name=\"cardTitleText\"\n                value={cardTitleText}\n                fullWidth\n                onChange={this.handleChange}\n                onKeyDown={this.handleChange}\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => this.openAddCard(false)}\n                      >\n                        <Icon fontSize=\"small\">clear</Icon>\n                      </IconButton>\n                    </InputAdornment>\n                  )\n                }}\n                inputProps={{\n                  style: {\n                    padding: \"10px\"\n                  }\n                }}\n              />\n              <div className=\"flex flex-end\">\n                <Button\n                  onClick={this.handleAddNewCard}\n                  variant=\"contained\"\n                  color=\"primary\"\n                >\n                  Add\n                </Button>\n              </div>\n            </Card>\n          </ClickAwayListener>\n        ) : (\n          <div className=\"flex\">\n            <Button\n              className=\"font-weight-500 flex-grow-1 border-radius-0\"\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => this.openAddCard(true)}\n            >\n              + Add Card\n            </Button>\n          </div>\n        )}\n      </Card>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  renameListInBoard: PropTypes.func.isRequired,\n  deleteListFromBoard: PropTypes.func.isRequired,\n  addNewCardInList: PropTypes.func.isRequired,\n  board: state.scrumboard.board\n});\n\nexport default connect(\n  mapStateToProps,\n  { renameListInBoard, deleteListFromBoard, addNewCardInList }\n)(BoardList);\n"]},"metadata":{},"sourceType":"module"}