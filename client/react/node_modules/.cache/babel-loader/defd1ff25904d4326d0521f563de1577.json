{"ast":null,"code":"import _objectSpread from \"D:\\\\TraniningGlobits\\\\baitap_level2\\\\client\\\\react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport Mock from \"../mock\";\nimport shortId from \"shortid\";\nimport * as _ from \"lodash\";\nimport ConstantList from \"../../app/appConfig\";\nconst ChatDB = {\n  user: [{\n    id: \"7863a6802ez0e277a0f98534\",\n    name: \"John Doe\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/face-1.jpg\",\n    status: \"online\",\n    chatInfo: [{\n      chatId: \"89564a680b3249760ea21fe77\",\n      contactId: \"323sa680b3249760ea21rt47\",\n      unread: 4,\n      lastChatTime: \"2017-06-12T02:10:18.931Z\"\n    }, {\n      chatId: \"3289564a680b2134760ea21fe7753\",\n      contactId: \"14663a3406eb47ffa63d4fec9429cb71\",\n      unread: 0,\n      lastChatTime: \"2019-03-10T02:10:18.931Z\"\n    }]\n  }],\n  contacts: [{\n    id: \"323sa680b3249760ea21rt47\",\n    name: \"Frank Powell\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/13.jpg\",\n    status: \"online\",\n    mood: \"\"\n  }, {\n    id: \"7863a6802ez0e277a0f98534\",\n    name: \"John Doe\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/face-1.jpg\",\n    status: \"online\",\n    mood: \"\"\n  }, {\n    id: \"14663a3406eb47ffa63d4fec9429cb71\",\n    name: \"Betty Diaz\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/12.jpg\",\n    status: \"online\",\n    mood: \"\"\n  }, {\n    id: \"43bd9bc59d164b5aea498e3ae1c24c3c\",\n    name: \"Brian Stephens\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/3.jpg\",\n    status: \"online\",\n    mood: \"\"\n  }, {\n    id: \"3fc8e01f3ce649d1caf884fbf4f698e4\",\n    name: \"Jacqueline Day\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/16.jpg\",\n    status: \"offline\",\n    mood: \"\"\n  }, {\n    id: \"e929b1d790ab49968ed8e34648553df4\",\n    name: \"Arthur Mendoza\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/10.jpg\",\n    status: \"online\",\n    mood: \"\"\n  }, {\n    id: \"d6caf04bba614632b5fecf91aebf4564\",\n    name: \"Jeremy Lee\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/9.jpg\",\n    status: \"offline\",\n    mood: \"\"\n  }, {\n    id: \"be0fb188c8e242f097fafa24632107e4\",\n    name: \"Johnny Newman\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/5.jpg\",\n    status: \"offline\",\n    mood: \"\"\n  }, {\n    id: \"dea902191b964a68ba5f2d93cff37e13\",\n    name: \"Jeffrey Little\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/15.jpg\",\n    status: \"online\",\n    mood: \"\"\n  }, {\n    id: \"0bf58f5ccc4543a9f8747350b7bda3c7\",\n    name: \"Barbara Romero\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/4.jpg\",\n    status: \"offline\",\n    mood: \"\"\n  }, {\n    id: \"c5d7498bbcb84d81fc72168871ac6a6e\",\n    name: \"Daniel James\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/2.jpg\",\n    status: \"offline\",\n    mood: \"\"\n  }, {\n    id: \"97bfbdd9413e46efdaca2010400fe18c\",\n    name: \"Alice Sanders\",\n    avatar: ConstantList.ROOT_PATH + \"assets/images/faces/17.jpg\",\n    status: \"offline\",\n    mood: \"\"\n  }],\n  chatCollection: [{\n    id: \"89564a680b3249760ea21fe77\",\n    chats: [{\n      contactId: \"323sa680b3249760ea21rt47\",\n      text: \"Do you ever find yourself falling into the “discount trap?”\",\n      time: \"2018-02-10T08:45:28.291Z\"\n    }, {\n      contactId: \"7863a6802ez0e277a0f98534\",\n      text: \"Giving away your knowledge or product just to gain clients?\",\n      time: \"2018-02-10T08:45:28.291Z\"\n    }, {\n      contactId: \"323sa680b3249760ea21rt47\",\n      text: \"Yes\",\n      time: \"2018-02-10T08:45:28.291Z\"\n    }, {\n      contactId: \"7863a6802ez0e277a0f98534\",\n      text: \"Don’t feel bad. It happens to a lot of us\",\n      time: \"2018-02-10T08:45:28.291Z\"\n    }, {\n      contactId: \"323sa680b3249760ea21rt47\",\n      text: \"Do you ever find yourself falling into the “discount trap?”\",\n      time: \"2018-02-10T08:45:28.291Z\"\n    }, {\n      contactId: \"7863a6802ez0e277a0f98534\",\n      text: \"Giving away your knowledge or product just to gain clients?\",\n      time: \"2018-02-10T08:45:28.291Z\"\n    }, {\n      contactId: \"323sa680b3249760ea21rt47\",\n      text: \"Yes\",\n      time: \"2018-02-10T08:45:28.291Z\"\n    }, {\n      contactId: \"7863a6802ez0e277a0f98534\",\n      text: \"Don’t feel bad. It happens to a lot of us\",\n      time: \"2018-02-10T08:45:28.291Z\"\n    }]\n  }, {\n    id: \"3289564a680b2134760ea21fe7753\",\n    chats: [{\n      contactId: \"14663a3406eb47ffa63d4fec9429cb71\",\n      text: \"Do you ever find yourself falling into the “discount trap?”\",\n      time: \"2019-03-10T08:45:28.291Z\"\n    }, {\n      contactId: \"7863a6802ez0e277a0f98534\",\n      text: \"Giving away your knowledge or product just to gain clients?\",\n      time: \"2019-03-10T08:45:28.291Z\"\n    }, {\n      contactId: \"14663a3406eb47ffa63d4fec9429cb71\",\n      text: \"Yes\",\n      time: \"2019-03-10T08:45:28.291Z\"\n    }, {\n      contactId: \"7863a6802ez0e277a0f98534\",\n      text: \"Don’t feel bad. It happens to a lot of us\",\n      time: \"2019-03-10T08:45:28.291Z\"\n    }]\n  }]\n};\nMock.onGet(ConstantList.ROOT_PATH + \"api/chat\").reply(config => {\n  const id = config.data;\n  const chats = ChatDB.chatCollection.find(collection => collection.id === id).chats;\n  const response = chats.map(chat => {\n    let temp = ChatDB.contacts.find(user => user.id === chat.contactId);\n    return _objectSpread(_objectSpread({}, chat), temp);\n  });\n  return [200, response];\n});\nMock.onGet(ConstantList.ROOT_PATH + \"api/chat/chat-room\").reply(config => {\n  const _JSON$parse = JSON.parse(config.data),\n        currentUser = _JSON$parse.currentUser,\n        contactId = _JSON$parse.contactId;\n\n  const chatUser = ChatDB.user.find(user => user.id === currentUser);\n  const chatRoom = chatUser.chatInfo.find(chat => chat.contactId === contactId);\n\n  if (chatRoom) {\n    const chats = ChatDB.chatCollection.find(collection => collection.id === chatRoom.chatId).chats;\n    const messageList = chats.map(chat => {\n      let temp = ChatDB.contacts.find(user => user.id === chat.contactId);\n      return _objectSpread(_objectSpread({}, chat), temp);\n    });\n    const response = {\n      chatId: chatRoom.chatId,\n      messageList,\n      recentListUpdated: false\n    };\n    return [200, response];\n  } else {\n    let chatId = shortId.generate();\n    ChatDB.user.map(user => {\n      if (currentUser === user.id) {\n        user.chatInfo.push({\n          chatId,\n          contactId,\n          lastChatTime: Date.now(),\n          unread: 0\n        });\n      }\n    });\n    ChatDB.chatCollection.push({\n      id: chatId,\n      chats: []\n    });\n    const response = {\n      chatId,\n      messageList: [],\n      recentListUpdated: true\n    };\n    return [200, response];\n  }\n});\nMock.onGet(ConstantList.ROOT_PATH + \"api/chat/contacts/recent\").reply(config => {\n  let temp = {\n    contact: \"\"\n  };\n  const id = config.data;\n  const contacts = ChatDB.user.find(user => user.id === id).chatInfo;\n  const response = contacts.map(contact => {\n    temp.contact = ChatDB.contacts.find(user => user.id === contact.contactId);\n    return _objectSpread(_objectSpread({}, temp.contact), contact);\n  });\n  return [200, response];\n});\nMock.onGet(ConstantList.ROOT_PATH + \"api/chat/contacts/all\").reply(config => {\n  const id = config.data;\n  const response = ChatDB.contacts.filter(contact => contact.id !== id);\n  return [200, response];\n});\nMock.onGet(ConstantList.ROOT_PATH + \"api/chat/contacts\").reply(config => {\n  const id = config.data;\n  const response = ChatDB.contacts.find(contact => contact.id === id);\n  return [200, response];\n});\nMock.onPost(ConstantList.ROOT_PATH + \"api/chat/add\").reply(config => {\n  let chatDetails = JSON.parse(config.data);\n  let chatId = chatDetails.chatId;\n  ChatDB.chatCollection.map(chatRoom => {\n    if (chatId === chatRoom.id) {\n      delete chatDetails.chatId;\n      chatRoom.chats.push(_objectSpread({}, chatDetails));\n    }\n  });\n  let chats = ChatDB.chatCollection.find(chatRoom => chatRoom.id === chatId).chats;\n  let response = chats.map(chat => {\n    let temp = ChatDB.contacts.find(user => user.id === chat.contactId);\n    return _objectSpread(_objectSpread({}, chat), temp);\n  });\n  return [200, response];\n});","map":{"version":3,"sources":["D:/TraniningGlobits/baitap_level2/client/react/src/fake-db/db/chat.js"],"names":["Mock","shortId","_","ConstantList","ChatDB","user","id","name","avatar","ROOT_PATH","status","chatInfo","chatId","contactId","unread","lastChatTime","contacts","mood","chatCollection","chats","text","time","onGet","reply","config","data","find","collection","response","map","chat","temp","JSON","parse","currentUser","chatUser","chatRoom","messageList","recentListUpdated","generate","push","Date","now","contact","filter","onPost","chatDetails"],"mappings":"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","sourcesContent":["import Mock from \"../mock\";\nimport shortId from \"shortid\";\nimport * as _ from \"lodash\";\nimport ConstantList from \"../../app/appConfig\";\nconst ChatDB = {\n  user: [\n    {\n      id: \"7863a6802ez0e277a0f98534\",\n      name: \"John Doe\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/face-1.jpg\",\n      status: \"online\",\n      chatInfo: [\n        {\n          chatId: \"89564a680b3249760ea21fe77\",\n          contactId: \"323sa680b3249760ea21rt47\",\n          unread: 4,\n          lastChatTime: \"2017-06-12T02:10:18.931Z\"\n        },\n        {\n          chatId: \"3289564a680b2134760ea21fe7753\",\n          contactId: \"14663a3406eb47ffa63d4fec9429cb71\",\n          unread: 0,\n          lastChatTime: \"2019-03-10T02:10:18.931Z\"\n        }\n      ]\n    }\n  ],\n\n  contacts: [\n    {\n      id: \"323sa680b3249760ea21rt47\",\n      name: \"Frank Powell\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/13.jpg\",\n      status: \"online\",\n      mood: \"\"\n    },\n    {\n      id: \"7863a6802ez0e277a0f98534\",\n      name: \"John Doe\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/face-1.jpg\",\n      status: \"online\",\n      mood: \"\"\n    },\n    {\n      id: \"14663a3406eb47ffa63d4fec9429cb71\",\n      name: \"Betty Diaz\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/12.jpg\",\n      status: \"online\",\n      mood: \"\"\n    },\n    {\n      id: \"43bd9bc59d164b5aea498e3ae1c24c3c\",\n      name: \"Brian Stephens\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/3.jpg\",\n      status: \"online\",\n      mood: \"\"\n    },\n    {\n      id: \"3fc8e01f3ce649d1caf884fbf4f698e4\",\n      name: \"Jacqueline Day\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/16.jpg\",\n      status: \"offline\",\n      mood: \"\"\n    },\n    {\n      id: \"e929b1d790ab49968ed8e34648553df4\",\n      name: \"Arthur Mendoza\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/10.jpg\",\n      status: \"online\",\n      mood: \"\"\n    },\n    {\n      id: \"d6caf04bba614632b5fecf91aebf4564\",\n      name: \"Jeremy Lee\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/9.jpg\",\n      status: \"offline\",\n      mood: \"\"\n    },\n    {\n      id: \"be0fb188c8e242f097fafa24632107e4\",\n      name: \"Johnny Newman\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/5.jpg\",\n      status: \"offline\",\n      mood: \"\"\n    },\n    {\n      id: \"dea902191b964a68ba5f2d93cff37e13\",\n      name: \"Jeffrey Little\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/15.jpg\",\n      status: \"online\",\n      mood: \"\"\n    },\n    {\n      id: \"0bf58f5ccc4543a9f8747350b7bda3c7\",\n      name: \"Barbara Romero\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/4.jpg\",\n      status: \"offline\",\n      mood: \"\"\n    },\n    {\n      id: \"c5d7498bbcb84d81fc72168871ac6a6e\",\n      name: \"Daniel James\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/2.jpg\",\n      status: \"offline\",\n      mood: \"\"\n    },\n    {\n      id: \"97bfbdd9413e46efdaca2010400fe18c\",\n      name: \"Alice Sanders\",\n      avatar: ConstantList.ROOT_PATH+\"assets/images/faces/17.jpg\",\n      status: \"offline\",\n      mood: \"\"\n    }\n  ],\n\n  chatCollection: [\n    {\n      id: \"89564a680b3249760ea21fe77\",\n      chats: [\n        {\n          contactId: \"323sa680b3249760ea21rt47\",\n          text: \"Do you ever find yourself falling into the “discount trap?”\",\n          time: \"2018-02-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"7863a6802ez0e277a0f98534\",\n          text: \"Giving away your knowledge or product just to gain clients?\",\n          time: \"2018-02-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"323sa680b3249760ea21rt47\",\n          text: \"Yes\",\n          time: \"2018-02-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"7863a6802ez0e277a0f98534\",\n          text: \"Don’t feel bad. It happens to a lot of us\",\n          time: \"2018-02-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"323sa680b3249760ea21rt47\",\n          text: \"Do you ever find yourself falling into the “discount trap?”\",\n          time: \"2018-02-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"7863a6802ez0e277a0f98534\",\n          text: \"Giving away your knowledge or product just to gain clients?\",\n          time: \"2018-02-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"323sa680b3249760ea21rt47\",\n          text: \"Yes\",\n          time: \"2018-02-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"7863a6802ez0e277a0f98534\",\n          text: \"Don’t feel bad. It happens to a lot of us\",\n          time: \"2018-02-10T08:45:28.291Z\"\n        }\n      ]\n    },\n    {\n      id: \"3289564a680b2134760ea21fe7753\",\n      chats: [\n        {\n          contactId: \"14663a3406eb47ffa63d4fec9429cb71\",\n          text: \"Do you ever find yourself falling into the “discount trap?”\",\n          time: \"2019-03-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"7863a6802ez0e277a0f98534\",\n          text: \"Giving away your knowledge or product just to gain clients?\",\n          time: \"2019-03-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"14663a3406eb47ffa63d4fec9429cb71\",\n          text: \"Yes\",\n          time: \"2019-03-10T08:45:28.291Z\"\n        },\n        {\n          contactId: \"7863a6802ez0e277a0f98534\",\n          text: \"Don’t feel bad. It happens to a lot of us\",\n          time: \"2019-03-10T08:45:28.291Z\"\n        }\n      ]\n    }\n  ]\n};\n\nMock.onGet(ConstantList.ROOT_PATH+\"api/chat\").reply(config => {\n  const id = config.data;\n  const chats = ChatDB.chatCollection.find(collection => collection.id === id)\n    .chats;\n  const response = chats.map(chat => {\n    let temp = ChatDB.contacts.find(user => user.id === chat.contactId);\n    return { ...chat, ...temp };\n  });\n  return [200, response];\n});\n\nMock.onGet(ConstantList.ROOT_PATH+\"api/chat/chat-room\").reply(config => {\n  const { currentUser, contactId } = JSON.parse(config.data);\n\n  const chatUser = ChatDB.user.find(user => user.id === currentUser);\n  const chatRoom = chatUser.chatInfo.find(chat => chat.contactId === contactId);\n\n  if (chatRoom) {\n    const chats = ChatDB.chatCollection.find(\n      collection => collection.id === chatRoom.chatId\n    ).chats;\n    const messageList = chats.map(chat => {\n      let temp = ChatDB.contacts.find(user => user.id === chat.contactId);\n      return { ...chat, ...temp };\n    });\n    const response = {\n      chatId: chatRoom.chatId,\n      messageList,\n      recentListUpdated: false\n    };\n    return [200, response];\n  } else {\n    let chatId = shortId.generate();\n    ChatDB.user.map(user => {\n      if (currentUser === user.id) {\n        user.chatInfo.push({\n          chatId,\n          contactId,\n          lastChatTime: Date.now(),\n          unread: 0\n        });\n      }\n    });\n    ChatDB.chatCollection.push({\n      id: chatId,\n      chats: []\n    });\n\n    const response = {\n      chatId,\n      messageList: [],\n      recentListUpdated: true\n    };\n\n    return [200, response];\n  }\n});\n\nMock.onGet(ConstantList.ROOT_PATH+\"api/chat/contacts/recent\").reply(config => {\n  let temp = { contact: \"\" };\n  const id = config.data;\n  const contacts = ChatDB.user.find(user => user.id === id).chatInfo;\n  const response = contacts.map(contact => {\n    temp.contact = ChatDB.contacts.find(user => user.id === contact.contactId);\n    return { ...temp.contact, ...contact };\n  });\n  return [200, response];\n});\n\nMock.onGet(ConstantList.ROOT_PATH+\"api/chat/contacts/all\").reply(config => {\n  const id = config.data;\n  const response = ChatDB.contacts.filter(contact => contact.id !== id);\n  return [200, response];\n});\n\nMock.onGet(ConstantList.ROOT_PATH+\"api/chat/contacts\").reply(config => {\n  const id = config.data;\n  const response = ChatDB.contacts.find(contact => contact.id === id);\n  return [200, response];\n});\n\nMock.onPost(ConstantList.ROOT_PATH+\"api/chat/add\").reply(config => {\n  let chatDetails = JSON.parse(config.data);\n  let { chatId } = chatDetails;\n  ChatDB.chatCollection.map(chatRoom => {\n    if (chatId === chatRoom.id) {\n      delete chatDetails.chatId;\n      chatRoom.chats.push({ ...chatDetails });\n    }\n  });\n  let chats = ChatDB.chatCollection.find(chatRoom => chatRoom.id === chatId)\n    .chats;\n\n  let response = chats.map(chat => {\n    let temp = ChatDB.contacts.find(user => user.id === chat.contactId);\n    return { ...chat, ...temp };\n  });\n  return [200, response];\n});\n"]},"metadata":{},"sourceType":"module"}