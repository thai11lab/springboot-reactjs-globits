{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nexports.__esModule = true;\n\nvar React = require(\"react\");\n\nvar react_dom_1 = require(\"react-dom\");\n\nvar Utils_1 = require(\"../Utils\"); // import { parse, format } from 'date-fns';\n// import ReactTags from 'react-tag-autocomplete';\n\n\nvar ReactTags = require('react-tag-autocomplete');\n\nvar DEFAULT_DATE_INPUT_FORMAT = 'yyyy-MM-dd';\nvar inputCss = {\n  width: '100%',\n  height: '100%',\n  fontSize: '1em',\n  fontFamily: 'inherit'\n};\n\nvar Editor =\n/** @class */\nfunction (_super) {\n  __extends(Editor, _super);\n\n  function Editor() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      value: '',\n      values: [],\n      autofocus: false\n    };\n    _this.ref = null;\n\n    _this.setValueOnSuccess = function (values) {\n      if (values === void 0) {\n        values = _this.state.values;\n      }\n\n      var _a = _this.props,\n          success = _a.success,\n          cancel = _a.cancel; // console.log('setValueOnSuccess: ', values);\n\n      success(values); // cancel();\n    };\n\n    _this.handleDelete = function (i) {\n      // console.log('- handleDelete ', i);\n      var values = _this.state.values;\n      var newValues = values.filter(function (item, index) {\n        return index !== i;\n      });\n\n      _this.setState({\n        values: newValues\n      }, function () {\n        _this.setValueOnSuccess(newValues);\n      });\n    };\n\n    _this.handleAddition = function (item) {\n      var values = _this.state.values;\n\n      if (item.name) {\n        // console.log('- handleAddition: ', item);\n        values.push({\n          id: item.name,\n          name: item.name\n        });\n\n        _this.setState({\n          values: values\n        }, function () {\n          _this.setValueOnSuccess(values);\n        });\n      }\n    }; // order: handleBlur => sucess() => grid's cellEdited => grid's dataEdited => handleAddition\n\n\n    _this.handleBlur = function () {\n      var cancel = _this.props.cancel;\n      var newValue = _this.ref.input.input.value;\n\n      if (newValue) {\n        // console.log(111, newValue, this.ref);\n        var values = Utils_1.clone(_this.state.values);\n        values.push({\n          id: newValue,\n          name: newValue\n        }); // console.log('- handleBlur ', values);\n\n        _this.setValueOnSuccess(values);\n      } else {\n        cancel();\n      }\n\n      var el = react_dom_1.findDOMNode(_this.ref);\n\n      if (el && el.parentElement.parentElement.parentElement) {\n        el.parentElement.parentElement.parentElement.style.overflow = 'hidden';\n      } // console.log('- handleBlur END');\n\n    };\n\n    return _this;\n  }\n\n  Editor.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.props.onRendered(function () {\n      var el = react_dom_1.findDOMNode(_this.ref);\n      el.style.zIndex = 1;\n      el.parentElement.parentElement.parentElement.style.overflow = 'inherit';\n      el.querySelector('input').focus();\n      var values = (_this.props.cell.getValue() || []).map(function (item) {\n        return typeof item === 'string' ? {\n          id: item,\n          name: item\n        } : item;\n      });\n\n      _this.setState({\n        values: values\n      });\n    });\n  };\n\n  Editor.prototype.render = function () {\n    var _this = this;\n\n    var editorParams = this.props.editorParams;\n    var values = this.state.values;\n    var suggestions = editorParams.values;\n    return React.createElement(\"div\", null, React.createElement(ReactTags, {\n      ref: function ref(_ref) {\n        return _this.ref = _ref;\n      },\n      placeholder: \"Select or Type\",\n      tags: values,\n      suggestions: suggestions,\n      allowNew: true,\n      autoresize: true,\n      autofocus: this.state.autofocus,\n      handleAddition: this.handleAddition,\n      handleDelete: this.handleDelete,\n      handleBlur: this.handleBlur,\n      minQueryLength: 0\n    }));\n  };\n\n  return Editor;\n}(React.Component);\n\nfunction default_1(cell, onRendered, success, cancel, editorParams) {\n  var container = document.createElement('div');\n  container.style.height = '100%';\n  react_dom_1.render(React.createElement(Editor, {\n    cell: cell,\n    onRendered: onRendered,\n    success: success,\n    cancel: cancel,\n    editorParams: editorParams\n  }), container);\n  return container;\n}\n\nexports[\"default\"] = default_1;","map":{"version":3,"sources":["D:/TraniningGlobits/baitap_level2/client/react/node_modules/react-tabulator/lib/editors/MultiSelectEditor.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","exports","__esModule","React","require","react_dom_1","Utils_1","ReactTags","DEFAULT_DATE_INPUT_FORMAT","inputCss","width","height","fontSize","fontFamily","Editor","_super","_this","apply","arguments","state","value","values","autofocus","ref","setValueOnSuccess","_a","props","success","cancel","handleDelete","i","newValues","filter","item","index","setState","handleAddition","name","push","id","handleBlur","newValue","input","clone","el","findDOMNode","parentElement","style","overflow","componentDidMount","onRendered","zIndex","querySelector","focus","cell","getValue","map","render","editorParams","suggestions","createElement","placeholder","tags","allowNew","autoresize","minQueryLength","Component","default_1","container","document"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar React = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\nvar Utils_1 = require(\"../Utils\");\n// import { parse, format } from 'date-fns';\n// import ReactTags from 'react-tag-autocomplete';\nvar ReactTags = require('react-tag-autocomplete');\nvar DEFAULT_DATE_INPUT_FORMAT = 'yyyy-MM-dd';\nvar inputCss = {\n    width: '100%',\n    height: '100%',\n    fontSize: '1em',\n    fontFamily: 'inherit'\n};\nvar Editor = /** @class */ (function (_super) {\n    __extends(Editor, _super);\n    function Editor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { value: '', values: [], autofocus: false };\n        _this.ref = null;\n        _this.setValueOnSuccess = function (values) {\n            if (values === void 0) { values = _this.state.values; }\n            var _a = _this.props, success = _a.success, cancel = _a.cancel;\n            // console.log('setValueOnSuccess: ', values);\n            success(values);\n            // cancel();\n        };\n        _this.handleDelete = function (i) {\n            // console.log('- handleDelete ', i);\n            var values = _this.state.values;\n            var newValues = values.filter(function (item, index) { return index !== i; });\n            _this.setState({ values: newValues }, function () {\n                _this.setValueOnSuccess(newValues);\n            });\n        };\n        _this.handleAddition = function (item) {\n            var values = _this.state.values;\n            if (item.name) {\n                // console.log('- handleAddition: ', item);\n                values.push({ id: item.name, name: item.name });\n                _this.setState({ values: values }, function () {\n                    _this.setValueOnSuccess(values);\n                });\n            }\n        };\n        // order: handleBlur => sucess() => grid's cellEdited => grid's dataEdited => handleAddition\n        _this.handleBlur = function () {\n            var cancel = _this.props.cancel;\n            var newValue = _this.ref.input.input.value;\n            if (newValue) {\n                // console.log(111, newValue, this.ref);\n                var values = Utils_1.clone(_this.state.values);\n                values.push({ id: newValue, name: newValue });\n                // console.log('- handleBlur ', values);\n                _this.setValueOnSuccess(values);\n            }\n            else {\n                cancel();\n            }\n            var el = react_dom_1.findDOMNode(_this.ref);\n            if (el && el.parentElement.parentElement.parentElement) {\n                el.parentElement.parentElement.parentElement.style.overflow = 'hidden';\n            }\n            // console.log('- handleBlur END');\n        };\n        return _this;\n    }\n    Editor.prototype.componentDidMount = function () {\n        var _this = this;\n        this.props.onRendered(function () {\n            var el = react_dom_1.findDOMNode(_this.ref);\n            el.style.zIndex = 1;\n            el.parentElement.parentElement.parentElement.style.overflow = 'inherit';\n            el.querySelector('input').focus();\n            var values = (_this.props.cell.getValue() || []).map(function (item) {\n                return typeof item === 'string' ? { id: item, name: item } : item;\n            });\n            _this.setState({ values: values });\n        });\n    };\n    Editor.prototype.render = function () {\n        var _this = this;\n        var editorParams = this.props.editorParams;\n        var values = this.state.values;\n        var suggestions = editorParams.values;\n        return (React.createElement(\"div\", null,\n            React.createElement(ReactTags, { ref: function (ref) { return (_this.ref = ref); }, placeholder: \"Select or Type\", tags: values, suggestions: suggestions, allowNew: true, autoresize: true, autofocus: this.state.autofocus, handleAddition: this.handleAddition, handleDelete: this.handleDelete, handleBlur: this.handleBlur, minQueryLength: 0 })));\n    };\n    return Editor;\n}(React.Component));\nfunction default_1(cell, onRendered, success, cancel, editorParams) {\n    var container = document.createElement('div');\n    container.style.height = '100%';\n    react_dom_1.render(React.createElement(Editor, { cell: cell, onRendered: onRendered, success: success, cancel: cancel, editorParams: editorParams }), container);\n    return container;\n}\nexports[\"default\"] = default_1;\n"]},"metadata":{},"sourceType":"script"}