{"ast":null,"code":"var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n/* Tabulator v4.6.3 (c) Oliver Folkerd */\n\n\n;\n\n(function (global, factory) {\n  if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined') {\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else {\n    global.Tabulator = factory();\n  }\n})(this, function () {\n  'use strict'; // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n\n  if (!Array.prototype.findIndex) {\n    Object.defineProperty(Array.prototype, 'findIndex', {\n      value: function value(predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined');\n        }\n\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n        if (typeof predicate !== 'function') {\n          throw new TypeError('predicate must be a function');\n        } // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n        var thisArg = arguments[1]; // 5. Let k be 0.\n\n        var k = 0; // 6. Repeat, while k < len\n\n        while (k < len) {\n          // a. Let Pk be ! ToString(k).\n          // b. Let kValue be ? Get(O, Pk).\n          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n          // d. If testResult is true, return k.\n          var kValue = o[k];\n\n          if (predicate.call(thisArg, kValue, k, o)) {\n            return k;\n          } // e. Increase k by 1.\n\n\n          k++;\n        } // 7. Return -1.\n\n\n        return -1;\n      }\n    });\n  } // https://tc39.github.io/ecma262/#sec-array.prototype.find\n\n\n  if (!Array.prototype.find) {\n    Object.defineProperty(Array.prototype, 'find', {\n      value: function value(predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined');\n        }\n\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n        if (typeof predicate !== 'function') {\n          throw new TypeError('predicate must be a function');\n        } // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n        var thisArg = arguments[1]; // 5. Let k be 0.\n\n        var k = 0; // 6. Repeat, while k < len\n\n        while (k < len) {\n          // a. Let Pk be ! ToString(k).\n          // b. Let kValue be ? Get(O, Pk).\n          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n          // d. If testResult is true, return kValue.\n          var kValue = o[k];\n\n          if (predicate.call(thisArg, kValue, k, o)) {\n            return kValue;\n          } // e. Increase k by 1.\n\n\n          k++;\n        } // 7. Return undefined.\n\n\n        return undefined;\n      }\n    });\n  }\n\n  var ColumnManager = function ColumnManager(table) {\n    this.table = table; //hold parent table\n\n    this.blockHozScrollEvent = false;\n    this.headersElement = this.createHeadersElement();\n    this.element = this.createHeaderElement(); //containing element\n\n    this.rowManager = null; //hold row manager object\n\n    this.columns = []; // column definition object\n\n    this.columnsByIndex = []; //columns by index\n\n    this.columnsByField = {}; //columns by field\n\n    this.scrollLeft = 0;\n    this.element.insertBefore(this.headersElement, this.element.firstChild);\n  }; ////////////// Setup Functions /////////////////\n\n\n  ColumnManager.prototype.createHeadersElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-headers\");\n    return el;\n  };\n\n  ColumnManager.prototype.createHeaderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-header\");\n\n    if (!this.table.options.headerVisible) {\n      el.classList.add(\"tabulator-header-hidden\");\n    }\n\n    return el;\n  };\n\n  ColumnManager.prototype.initialize = function () {\n    var self = this; //scroll body along with header\n    // self.element.addEventListener(\"scroll\", function(e){\n    // \tif(!self.blockHozScrollEvent){\n    // \t\tself.table.rowManager.scrollHorizontal(self.element.scrollLeft);\n    // \t}\n    // });\n  }; //link to row manager\n\n\n  ColumnManager.prototype.setRowManager = function (manager) {\n    this.rowManager = manager;\n  }; //return containing element\n\n\n  ColumnManager.prototype.getElement = function () {\n    return this.element;\n  }; //return header containing element\n\n\n  ColumnManager.prototype.getHeadersElement = function () {\n    return this.headersElement;\n  }; // ColumnManager.prototype.tempScrollBlock = function(){\n  // \tclearTimeout(this.blockHozScrollEvent);\n  // \tthis.blockHozScrollEvent = setTimeout(() => {this.blockHozScrollEvent = false;}, 50);\n  // }\n  //scroll horizontally to match table body\n\n\n  ColumnManager.prototype.scrollHorizontal = function (left) {\n    var hozAdjust = 0,\n        scrollWidth = this.element.scrollWidth - this.table.element.clientWidth; // this.tempScrollBlock();\n\n    this.element.scrollLeft = left; //adjust for vertical scrollbar moving table when present\n\n    if (left > scrollWidth) {\n      hozAdjust = left - scrollWidth;\n      this.element.style.marginLeft = -hozAdjust + \"px\";\n    } else {\n      this.element.style.marginLeft = 0;\n    } //keep frozen columns fixed in position\n    //this._calcFrozenColumnsPos(hozAdjust + 3);\n\n\n    this.scrollLeft = left;\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.scrollHorizontal();\n    }\n  }; ///////////// Column Setup Functions /////////////\n\n\n  ColumnManager.prototype.generateColumnsFromRowData = function (data) {\n    var cols = [],\n        row,\n        sorter;\n\n    if (data && data.length) {\n      row = data[0];\n\n      for (var key in row) {\n        var col = {\n          field: key,\n          title: key\n        };\n        var value = row[key];\n\n        switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n          case \"undefined\":\n            sorter = \"string\";\n            break;\n\n          case \"boolean\":\n            sorter = \"boolean\";\n            break;\n\n          case \"object\":\n            if (Array.isArray(value)) {\n              sorter = \"array\";\n            } else {\n              sorter = \"string\";\n            }\n\n            break;\n\n          default:\n            if (!isNaN(value) && value !== \"\") {\n              sorter = \"number\";\n            } else {\n              if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n                sorter = \"alphanum\";\n              } else {\n                sorter = \"string\";\n              }\n            }\n\n            break;\n        }\n\n        col.sorter = sorter;\n        cols.push(col);\n      }\n\n      this.table.options.columns = cols;\n      this.setColumns(this.table.options.columns);\n    }\n  };\n\n  ColumnManager.prototype.setColumns = function (cols, row) {\n    var self = this;\n\n    while (self.headersElement.firstChild) {\n      self.headersElement.removeChild(self.headersElement.firstChild);\n    }\n\n    self.columns = [];\n    self.columnsByIndex = [];\n    self.columnsByField = {}; //reset frozen columns\n\n    if (self.table.modExists(\"frozenColumns\")) {\n      self.table.modules.frozenColumns.reset();\n    }\n\n    cols.forEach(function (def, i) {\n      self._addColumn(def);\n    });\n\n    self._reIndexColumns();\n\n    if (self.table.options.responsiveLayout && self.table.modExists(\"responsiveLayout\", true)) {\n      self.table.modules.responsiveLayout.initialize();\n    }\n\n    self.redraw(true);\n  };\n\n  ColumnManager.prototype._addColumn = function (definition, before, nextToColumn) {\n    var column = new Column(definition, this),\n        colEl = column.getElement(),\n        index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\n    if (nextToColumn && index > -1) {\n      var parentIndex = this.columns.indexOf(nextToColumn.getTopColumn());\n      var nextEl = nextToColumn.getElement();\n\n      if (before) {\n        this.columns.splice(parentIndex, 0, column);\n        nextEl.parentNode.insertBefore(colEl, nextEl);\n      } else {\n        this.columns.splice(parentIndex + 1, 0, column);\n        nextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n      }\n    } else {\n      if (before) {\n        this.columns.unshift(column);\n        this.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n      } else {\n        this.columns.push(column);\n        this.headersElement.appendChild(column.getElement());\n      }\n\n      column.columnRendered();\n    }\n\n    return column;\n  };\n\n  ColumnManager.prototype.registerColumnField = function (col) {\n    if (col.definition.field) {\n      this.columnsByField[col.definition.field] = col;\n    }\n  };\n\n  ColumnManager.prototype.registerColumnPosition = function (col) {\n    this.columnsByIndex.push(col);\n  };\n\n  ColumnManager.prototype._reIndexColumns = function () {\n    this.columnsByIndex = [];\n    this.columns.forEach(function (column) {\n      column.reRegisterPosition();\n    });\n  }; //ensure column headers take up the correct amount of space in column groups\n\n\n  ColumnManager.prototype._verticalAlignHeaders = function () {\n    var self = this,\n        minHeight = 0;\n    self.columns.forEach(function (column) {\n      var height;\n      column.clearVerticalAlign();\n      height = column.getHeight();\n\n      if (height > minHeight) {\n        minHeight = height;\n      }\n    });\n    self.columns.forEach(function (column) {\n      column.verticalAlign(self.table.options.columnHeaderVertAlign, minHeight);\n    });\n    self.rowManager.adjustTableSize();\n  }; //////////////// Column Details /////////////////\n\n\n  ColumnManager.prototype.findColumn = function (subject) {\n    var self = this;\n\n    if ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n      if (subject instanceof Column) {\n        //subject is column element\n        return subject;\n      } else if (subject instanceof ColumnComponent) {\n        //subject is public column component\n        return subject._getSelf() || false;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        //subject is a HTML element of the column header\n        var match = self.columns.find(function (column) {\n          return column.element === subject;\n        });\n        return match || false;\n      }\n    } else {\n      //subject should be treated as the field name of the column\n      return this.columnsByField[subject] || false;\n    } //catch all for any other type of input\n\n\n    return false;\n  };\n\n  ColumnManager.prototype.getColumnByField = function (field) {\n    return this.columnsByField[field];\n  };\n\n  ColumnManager.prototype.getColumnsByFieldRoot = function (root) {\n    var _this = this;\n\n    var matches = [];\n    Object.keys(this.columnsByField).forEach(function (field) {\n      var fieldRoot = field.split(\".\")[0];\n\n      if (fieldRoot === root) {\n        matches.push(_this.columnsByField[field]);\n      }\n    });\n    return matches;\n  };\n\n  ColumnManager.prototype.getColumnByIndex = function (index) {\n    return this.columnsByIndex[index];\n  };\n\n  ColumnManager.prototype.getFirstVisibileColumn = function (index) {\n    var index = this.columnsByIndex.findIndex(function (col) {\n      return col.visible;\n    });\n    return index > -1 ? this.columnsByIndex[index] : false;\n  };\n\n  ColumnManager.prototype.getColumns = function () {\n    return this.columns;\n  };\n\n  ColumnManager.prototype.findColumnIndex = function (column) {\n    return this.columnsByIndex.findIndex(function (col) {\n      return column === col;\n    });\n  }; //return all columns that are not groups\n\n\n  ColumnManager.prototype.getRealColumns = function () {\n    return this.columnsByIndex;\n  }; //travers across columns and call action\n\n\n  ColumnManager.prototype.traverse = function (callback) {\n    var self = this;\n    self.columnsByIndex.forEach(function (column, i) {\n      callback(column, i);\n    });\n  }; //get defintions of actual columns\n\n\n  ColumnManager.prototype.getDefinitions = function (active) {\n    var self = this,\n        output = [];\n    self.columnsByIndex.forEach(function (column) {\n      if (!active || active && column.visible) {\n        output.push(column.getDefinition());\n      }\n    });\n    return output;\n  }; //get full nested definition tree\n\n\n  ColumnManager.prototype.getDefinitionTree = function () {\n    var self = this,\n        output = [];\n    self.columns.forEach(function (column) {\n      output.push(column.getDefinition(true));\n    });\n    return output;\n  };\n\n  ColumnManager.prototype.getComponents = function (structured) {\n    var self = this,\n        output = [],\n        columns = structured ? self.columns : self.columnsByIndex;\n    columns.forEach(function (column) {\n      output.push(column.getComponent());\n    });\n    return output;\n  };\n\n  ColumnManager.prototype.getWidth = function () {\n    var width = 0;\n    this.columnsByIndex.forEach(function (column) {\n      if (column.visible) {\n        width += column.getWidth();\n      }\n    });\n    return width;\n  };\n\n  ColumnManager.prototype.moveColumn = function (from, to, after) {\n    this.moveColumnActual(from, to, after);\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.initialize();\n    }\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n    }\n\n    to.element.parentNode.insertBefore(from.element, to.element);\n\n    if (after) {\n      to.element.parentNode.insertBefore(to.element, from.element);\n    }\n\n    this._verticalAlignHeaders();\n\n    this.table.rowManager.reinitialize();\n  };\n\n  ColumnManager.prototype.moveColumnActual = function (from, to, after) {\n    if (from.parent.isGroup) {\n      this._moveColumnInArray(from.parent.columns, from, to, after);\n    } else {\n      this._moveColumnInArray(this.columns, from, to, after);\n    }\n\n    this._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.initialize();\n    }\n\n    if (this.table.options.columnMoved) {\n      this.table.options.columnMoved.call(this.table, from.getComponent(), this.table.columnManager.getComponents());\n    }\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n      this.table.modules.persistence.save(\"columns\");\n    }\n  };\n\n  ColumnManager.prototype._moveColumnInArray = function (columns, from, to, after, updateRows) {\n    var fromIndex = columns.indexOf(from),\n        toIndex;\n\n    if (fromIndex > -1) {\n      columns.splice(fromIndex, 1);\n      toIndex = columns.indexOf(to);\n\n      if (toIndex > -1) {\n        if (after) {\n          toIndex = toIndex + 1;\n        }\n      } else {\n        toIndex = fromIndex;\n      }\n\n      columns.splice(toIndex, 0, from);\n\n      if (updateRows) {\n        this.table.rowManager.rows.forEach(function (row) {\n          if (row.cells.length) {\n            var cell = row.cells.splice(fromIndex, 1)[0];\n            row.cells.splice(toIndex, 0, cell);\n          }\n        });\n      }\n    }\n  };\n\n  ColumnManager.prototype.scrollToColumn = function (column, position, ifVisible) {\n    var _this2 = this;\n\n    var left = 0,\n        offset = 0,\n        adjust = 0,\n        colEl = column.getElement();\n    return new Promise(function (resolve, reject) {\n      if (typeof position === \"undefined\") {\n        position = _this2.table.options.scrollToColumnPosition;\n      }\n\n      if (typeof ifVisible === \"undefined\") {\n        ifVisible = _this2.table.options.scrollToColumnIfVisible;\n      }\n\n      if (column.visible) {\n        //align to correct position\n        switch (position) {\n          case \"middle\":\n          case \"center\":\n            adjust = -_this2.element.clientWidth / 2;\n            break;\n\n          case \"right\":\n            adjust = colEl.clientWidth - _this2.headersElement.clientWidth;\n            break;\n        } //check column visibility\n\n\n        if (!ifVisible) {\n          offset = colEl.offsetLeft;\n\n          if (offset > 0 && offset + colEl.offsetWidth < _this2.element.clientWidth) {\n            return false;\n          }\n        } //calculate scroll position\n\n\n        left = colEl.offsetLeft + _this2.element.scrollLeft + adjust;\n        left = Math.max(Math.min(left, _this2.table.rowManager.element.scrollWidth - _this2.table.rowManager.element.clientWidth), 0);\n\n        _this2.table.rowManager.scrollHorizontal(left);\n\n        _this2.scrollHorizontal(left);\n\n        resolve();\n      } else {\n        console.warn(\"Scroll Error - Column not visible\");\n        reject(\"Scroll Error - Column not visible\");\n      }\n    });\n  }; //////////////// Cell Management /////////////////\n\n\n  ColumnManager.prototype.generateCells = function (row) {\n    var self = this;\n    var cells = [];\n    self.columnsByIndex.forEach(function (column) {\n      cells.push(column.generateCell(row));\n    });\n    return cells;\n  }; //////////////// Column Management /////////////////\n\n\n  ColumnManager.prototype.getFlexBaseWidth = function () {\n    var self = this,\n        totalWidth = self.table.element.clientWidth,\n        //table element width\n    fixedWidth = 0; //adjust for vertical scrollbar if present\n\n    if (self.rowManager.element.scrollHeight > self.rowManager.element.clientHeight) {\n      totalWidth -= self.rowManager.element.offsetWidth - self.rowManager.element.clientWidth;\n    }\n\n    this.columnsByIndex.forEach(function (column) {\n      var width, minWidth, colWidth;\n\n      if (column.visible) {\n        width = column.definition.width || 0;\n        minWidth = typeof column.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(column.minWidth);\n\n        if (typeof width == \"string\") {\n          if (width.indexOf(\"%\") > -1) {\n            colWidth = totalWidth / 100 * parseInt(width);\n          } else {\n            colWidth = parseInt(width);\n          }\n        } else {\n          colWidth = width;\n        }\n\n        fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n      }\n    });\n    return fixedWidth;\n  };\n\n  ColumnManager.prototype.addColumn = function (definition, before, nextToColumn) {\n    var _this3 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this3._addColumn(definition, before, nextToColumn);\n\n      _this3._reIndexColumns();\n\n      if (_this3.table.options.responsiveLayout && _this3.table.modExists(\"responsiveLayout\", true)) {\n        _this3.table.modules.responsiveLayout.initialize();\n      }\n\n      if (_this3.table.modExists(\"columnCalcs\")) {\n        _this3.table.modules.columnCalcs.recalc(_this3.table.rowManager.activeRows);\n      }\n\n      _this3.redraw();\n\n      if (_this3.table.modules.layout.getMode() != \"fitColumns\") {\n        column.reinitializeWidth();\n      }\n\n      _this3._verticalAlignHeaders();\n\n      _this3.table.rowManager.reinitialize();\n\n      resolve(column);\n    });\n  }; //remove column from system\n\n\n  ColumnManager.prototype.deregisterColumn = function (column) {\n    var field = column.getField(),\n        index; //remove from field list\n\n    if (field) {\n      delete this.columnsByField[field];\n    } //remove from index list\n\n\n    index = this.columnsByIndex.indexOf(column);\n\n    if (index > -1) {\n      this.columnsByIndex.splice(index, 1);\n    } //remove from column list\n\n\n    index = this.columns.indexOf(column);\n\n    if (index > -1) {\n      this.columns.splice(index, 1);\n    }\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.initialize();\n    }\n\n    this.redraw();\n  }; //redraw columns\n\n\n  ColumnManager.prototype.redraw = function (force) {\n    if (force) {\n      if (Tabulator.prototype.helpers.elVisible(this.element)) {\n        this._verticalAlignHeaders();\n      }\n\n      this.table.rowManager.resetScroll();\n      this.table.rowManager.reinitialize();\n    }\n\n    if ([\"fitColumns\", \"fitDataStretch\"].indexOf(this.table.modules.layout.getMode()) > -1) {\n      this.table.modules.layout.layout();\n    } else {\n      if (force) {\n        this.table.modules.layout.layout();\n      } else {\n        if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n          this.table.modules.responsiveLayout.update();\n        }\n      }\n    }\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layout();\n    }\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n    }\n\n    if (force) {\n      if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n        this.table.modules.persistence.save(\"columns\");\n      }\n\n      if (this.table.modExists(\"columnCalcs\")) {\n        this.table.modules.columnCalcs.redraw();\n      }\n    }\n\n    this.table.footerManager.redraw();\n  }; //public column object\n\n\n  var ColumnComponent = function ColumnComponent(column) {\n    this._column = column;\n    this.type = \"ColumnComponent\";\n  };\n\n  ColumnComponent.prototype.getElement = function () {\n    return this._column.getElement();\n  };\n\n  ColumnComponent.prototype.getDefinition = function () {\n    return this._column.getDefinition();\n  };\n\n  ColumnComponent.prototype.getField = function () {\n    return this._column.getField();\n  };\n\n  ColumnComponent.prototype.getCells = function () {\n    var cells = [];\n\n    this._column.cells.forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n\n    return cells;\n  };\n\n  ColumnComponent.prototype.getVisibility = function () {\n    return this._column.visible;\n  };\n\n  ColumnComponent.prototype.show = function () {\n    if (this._column.isGroup) {\n      this._column.columns.forEach(function (column) {\n        column.show();\n      });\n    } else {\n      this._column.show();\n    }\n  };\n\n  ColumnComponent.prototype.hide = function () {\n    if (this._column.isGroup) {\n      this._column.columns.forEach(function (column) {\n        column.hide();\n      });\n    } else {\n      this._column.hide();\n    }\n  };\n\n  ColumnComponent.prototype.toggle = function () {\n    if (this._column.visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  ColumnComponent.prototype.delete = function () {\n    return this._column.delete();\n  };\n\n  ColumnComponent.prototype.getSubColumns = function () {\n    var output = [];\n\n    if (this._column.columns.length) {\n      this._column.columns.forEach(function (column) {\n        output.push(column.getComponent());\n      });\n    }\n\n    return output;\n  };\n\n  ColumnComponent.prototype.getParentColumn = function () {\n    return this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n  };\n\n  ColumnComponent.prototype._getSelf = function () {\n    return this._column;\n  };\n\n  ColumnComponent.prototype.scrollTo = function () {\n    return this._column.table.columnManager.scrollToColumn(this._column);\n  };\n\n  ColumnComponent.prototype.getTable = function () {\n    return this._column.table;\n  };\n\n  ColumnComponent.prototype.headerFilterFocus = function () {\n    if (this._column.table.modExists(\"filter\", true)) {\n      this._column.table.modules.filter.setHeaderFilterFocus(this._column);\n    }\n  };\n\n  ColumnComponent.prototype.reloadHeaderFilter = function () {\n    if (this._column.table.modExists(\"filter\", true)) {\n      this._column.table.modules.filter.reloadHeaderFilter(this._column);\n    }\n  };\n\n  ColumnComponent.prototype.getHeaderFilterValue = function () {\n    if (this._column.table.modExists(\"filter\", true)) {\n      return this._column.table.modules.filter.getHeaderFilterValue(this._column);\n    }\n  };\n\n  ColumnComponent.prototype.setHeaderFilterValue = function (value) {\n    if (this._column.table.modExists(\"filter\", true)) {\n      this._column.table.modules.filter.setHeaderFilterValue(this._column, value);\n    }\n  };\n\n  ColumnComponent.prototype.move = function (to, after) {\n    var toColumn = this._column.table.columnManager.findColumn(to);\n\n    if (toColumn) {\n      this._column.table.columnManager.moveColumn(this._column, toColumn, after);\n    } else {\n      console.warn(\"Move Error - No matching column found:\", toColumn);\n    }\n  };\n\n  ColumnComponent.prototype.getNextColumn = function () {\n    var nextCol = this._column.nextColumn();\n\n    return nextCol ? nextCol.getComponent() : false;\n  };\n\n  ColumnComponent.prototype.getPrevColumn = function () {\n    var prevCol = this._column.prevColumn();\n\n    return prevCol ? prevCol.getComponent() : false;\n  };\n\n  ColumnComponent.prototype.updateDefinition = function (updates) {\n    return this._column.updateDefinition(updates);\n  };\n\n  var Column = function Column(def, parent) {\n    var self = this;\n    this.table = parent.table;\n    this.definition = def; //column definition\n\n    this.parent = parent; //hold parent object\n\n    this.type = \"column\"; //type of element\n\n    this.columns = []; //child columns\n\n    this.cells = []; //cells bound to this column\n\n    this.element = this.createElement(); //column header element\n\n    this.contentElement = false;\n    this.titleElement = false;\n    this.groupElement = this.createGroupElement(); //column group holder element\n\n    this.isGroup = false;\n    this.tooltip = false; //hold column tooltip\n\n    this.hozAlign = \"\"; //horizontal text alignment\n\n    this.vertAlign = \"\"; //vert text alignment\n    //multi dimensional filed handling\n\n    this.field = \"\";\n    this.fieldStructure = \"\";\n    this.getFieldValue = \"\";\n    this.setFieldValue = \"\";\n    this.titleFormatterRendered = false;\n    this.setField(this.definition.field);\n\n    if (this.table.options.invalidOptionWarnings) {\n      this.checkDefinition();\n    }\n\n    this.modules = {}; //hold module variables;\n\n    this.cellEvents = {\n      cellClick: false,\n      cellDblClick: false,\n      cellContext: false,\n      cellTap: false,\n      cellDblTap: false,\n      cellTapHold: false,\n      cellMouseEnter: false,\n      cellMouseLeave: false,\n      cellMouseOver: false,\n      cellMouseOut: false,\n      cellMouseMove: false\n    };\n    this.width = null; //column width\n\n    this.widthStyled = \"\"; //column width prestyled to improve render efficiency\n\n    this.minWidth = null; //column minimum width\n\n    this.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\n\n    this.widthFixed = false; //user has specified a width for this column\n\n    this.visible = true; //default visible state\n\n    this._mapDepricatedFunctionality(); //initialize column\n\n\n    if (def.columns) {\n      this.isGroup = true;\n      def.columns.forEach(function (def, i) {\n        var newCol = new Column(def, self);\n        self.attachColumn(newCol);\n      });\n      self.checkColumnVisibility();\n    } else {\n      parent.registerColumnField(this);\n    }\n\n    if (def.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")) {\n      this.table.modules.moveRow.setHandle(true);\n    }\n\n    this._buildHeader();\n\n    this.bindModuleColumns();\n  };\n\n  Column.prototype.createElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col\");\n    el.setAttribute(\"role\", \"columnheader\");\n    el.setAttribute(\"aria-sort\", \"none\");\n    return el;\n  };\n\n  Column.prototype.createGroupElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col-group-cols\");\n    return el;\n  };\n\n  Column.prototype.checkDefinition = function () {\n    var _this4 = this;\n\n    Object.keys(this.definition).forEach(function (key) {\n      if (_this4.defaultOptionList.indexOf(key) === -1) {\n        console.warn(\"Invalid column definition option in '\" + (_this4.field || _this4.definition.title) + \"' column:\", key);\n      }\n    });\n  };\n\n  Column.prototype.setField = function (field) {\n    this.field = field;\n    this.fieldStructure = field ? this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field] : [];\n    this.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n    this.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n  }; //register column position with column manager\n\n\n  Column.prototype.registerColumnPosition = function (column) {\n    this.parent.registerColumnPosition(column);\n  }; //register column position with column manager\n\n\n  Column.prototype.registerColumnField = function (column) {\n    this.parent.registerColumnField(column);\n  }; //trigger position registration\n\n\n  Column.prototype.reRegisterPosition = function () {\n    if (this.isGroup) {\n      this.columns.forEach(function (column) {\n        column.reRegisterPosition();\n      });\n    } else {\n      this.registerColumnPosition(this);\n    }\n  };\n\n  Column.prototype._mapDepricatedFunctionality = function () {\n    if (typeof this.definition.hideInHtml !== \"undefined\") {\n      this.definition.htmlOutput = !this.definition.hideInHtml;\n      console.warn(\"hideInHtml column definition property is deprecated, you should now use htmlOutput\");\n    }\n\n    if (typeof this.definition.align !== \"undefined\") {\n      this.definition.hozAlign = this.definition.align;\n      console.warn(\"align column definition property is deprecated, you should now use hozAlign\");\n    }\n  };\n\n  Column.prototype.setTooltip = function () {\n    var self = this,\n        def = self.definition; //set header tooltips\n\n    var tooltip = def.headerTooltip || def.tooltip === false ? def.headerTooltip : self.table.options.tooltipsHeader;\n\n    if (tooltip) {\n      if (tooltip === true) {\n        if (def.field) {\n          self.table.modules.localize.bind(\"columns|\" + def.field, function (value) {\n            self.element.setAttribute(\"title\", value || def.title);\n          });\n        } else {\n          self.element.setAttribute(\"title\", def.title);\n        }\n      } else {\n        if (typeof tooltip == \"function\") {\n          tooltip = tooltip(self.getComponent());\n\n          if (tooltip === false) {\n            tooltip = \"\";\n          }\n        }\n\n        self.element.setAttribute(\"title\", tooltip);\n      }\n    } else {\n      self.element.setAttribute(\"title\", \"\");\n    }\n  }; //build header element\n\n\n  Column.prototype._buildHeader = function () {\n    var self = this,\n        def = self.definition;\n\n    while (self.element.firstChild) {\n      self.element.removeChild(self.element.firstChild);\n    }\n\n    if (def.headerVertical) {\n      self.element.classList.add(\"tabulator-col-vertical\");\n\n      if (def.headerVertical === \"flip\") {\n        self.element.classList.add(\"tabulator-col-vertical-flip\");\n      }\n    }\n\n    self.contentElement = self._bindEvents();\n    self.contentElement = self._buildColumnHeaderContent();\n    self.element.appendChild(self.contentElement);\n\n    if (self.isGroup) {\n      self._buildGroupHeader();\n    } else {\n      self._buildColumnHeader();\n    }\n\n    self.setTooltip(); //set resizable handles\n\n    if (self.table.options.resizableColumns && self.table.modExists(\"resizeColumns\")) {\n      self.table.modules.resizeColumns.initializeColumn(\"header\", self, self.element);\n    } //set resizable handles\n\n\n    if (def.headerFilter && self.table.modExists(\"filter\") && self.table.modExists(\"edit\")) {\n      if (typeof def.headerFilterPlaceholder !== \"undefined\" && def.field) {\n        self.table.modules.localize.setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\n      }\n\n      self.table.modules.filter.initializeColumn(self);\n    } //set resizable handles\n\n\n    if (self.table.modExists(\"frozenColumns\")) {\n      self.table.modules.frozenColumns.initializeColumn(self);\n    } //set movable column\n\n\n    if (self.table.options.movableColumns && !self.isGroup && self.table.modExists(\"moveColumn\")) {\n      self.table.modules.moveColumn.initializeColumn(self);\n    } //set calcs column\n\n\n    if ((def.topCalc || def.bottomCalc) && self.table.modExists(\"columnCalcs\")) {\n      self.table.modules.columnCalcs.initializeColumn(self);\n    } //handle persistence\n\n\n    if (self.table.modExists(\"persistence\") && self.table.modules.persistence.config.columns) {\n      self.table.modules.persistence.initializeColumn(self);\n    } //update header tooltip on mouse enter\n\n\n    self.element.addEventListener(\"mouseenter\", function (e) {\n      self.setTooltip();\n    });\n  };\n\n  Column.prototype._bindEvents = function () {\n    var self = this,\n        def = self.definition,\n        dblTap,\n        tapHold,\n        tap; //setup header click event bindings\n\n    if (typeof def.headerClick == \"function\") {\n      self.element.addEventListener(\"click\", function (e) {\n        def.headerClick(e, self.getComponent());\n      });\n    }\n\n    if (typeof def.headerDblClick == \"function\") {\n      self.element.addEventListener(\"dblclick\", function (e) {\n        def.headerDblClick(e, self.getComponent());\n      });\n    }\n\n    if (typeof def.headerContext == \"function\") {\n      self.element.addEventListener(\"contextmenu\", function (e) {\n        def.headerContext(e, self.getComponent());\n      });\n    } //setup header tap event bindings\n\n\n    if (typeof def.headerTap == \"function\") {\n      tap = false;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        tap = true;\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (tap) {\n          def.headerTap(e, self.getComponent());\n        }\n\n        tap = false;\n      });\n    }\n\n    if (typeof def.headerDblTap == \"function\") {\n      dblTap = null;\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (dblTap) {\n          clearTimeout(dblTap);\n          dblTap = null;\n          def.headerDblTap(e, self.getComponent());\n        } else {\n          dblTap = setTimeout(function () {\n            clearTimeout(dblTap);\n            dblTap = null;\n          }, 300);\n        }\n      });\n    }\n\n    if (typeof def.headerTapHold == \"function\") {\n      tapHold = null;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = setTimeout(function () {\n          clearTimeout(tapHold);\n          tapHold = null;\n          tap = false;\n          def.headerTapHold(e, self.getComponent());\n        }, 1000);\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = null;\n      });\n    } //store column cell click event bindings\n\n\n    if (typeof def.cellClick == \"function\") {\n      self.cellEvents.cellClick = def.cellClick;\n    }\n\n    if (typeof def.cellDblClick == \"function\") {\n      self.cellEvents.cellDblClick = def.cellDblClick;\n    }\n\n    if (typeof def.cellContext == \"function\") {\n      self.cellEvents.cellContext = def.cellContext;\n    } //store column mouse event bindings\n\n\n    if (typeof def.cellMouseEnter == \"function\") {\n      self.cellEvents.cellMouseEnter = def.cellMouseEnter;\n    }\n\n    if (typeof def.cellMouseLeave == \"function\") {\n      self.cellEvents.cellMouseLeave = def.cellMouseLeave;\n    }\n\n    if (typeof def.cellMouseOver == \"function\") {\n      self.cellEvents.cellMouseOver = def.cellMouseOver;\n    }\n\n    if (typeof def.cellMouseOut == \"function\") {\n      self.cellEvents.cellMouseOut = def.cellMouseOut;\n    }\n\n    if (typeof def.cellMouseMove == \"function\") {\n      self.cellEvents.cellMouseMove = def.cellMouseMove;\n    } //setup column cell tap event bindings\n\n\n    if (typeof def.cellTap == \"function\") {\n      self.cellEvents.cellTap = def.cellTap;\n    }\n\n    if (typeof def.cellDblTap == \"function\") {\n      self.cellEvents.cellDblTap = def.cellDblTap;\n    }\n\n    if (typeof def.cellTapHold == \"function\") {\n      self.cellEvents.cellTapHold = def.cellTapHold;\n    } //setup column cell edit callbacks\n\n\n    if (typeof def.cellEdited == \"function\") {\n      self.cellEvents.cellEdited = def.cellEdited;\n    }\n\n    if (typeof def.cellEditing == \"function\") {\n      self.cellEvents.cellEditing = def.cellEditing;\n    }\n\n    if (typeof def.cellEditCancelled == \"function\") {\n      self.cellEvents.cellEditCancelled = def.cellEditCancelled;\n    }\n  }; //build header element for header\n\n\n  Column.prototype._buildColumnHeader = function () {\n    var self = this,\n        def = self.definition,\n        table = self.table,\n        sortable; //set column sorter\n\n    if (table.modExists(\"sort\")) {\n      table.modules.sort.initializeColumn(self, self.contentElement);\n    } //set column header context menu\n\n\n    if ((def.headerContextMenu || def.headerMenu) && table.modExists(\"menu\")) {\n      table.modules.menu.initializeColumnHeader(self);\n    } //set column formatter\n\n\n    if (table.modExists(\"format\")) {\n      table.modules.format.initializeColumn(self);\n    } //set column editor\n\n\n    if (typeof def.editor != \"undefined\" && table.modExists(\"edit\")) {\n      table.modules.edit.initializeColumn(self);\n    } //set colum validator\n\n\n    if (typeof def.validator != \"undefined\" && table.modExists(\"validate\")) {\n      table.modules.validate.initializeColumn(self);\n    } //set column mutator\n\n\n    if (table.modExists(\"mutator\")) {\n      table.modules.mutator.initializeColumn(self);\n    } //set column accessor\n\n\n    if (table.modExists(\"accessor\")) {\n      table.modules.accessor.initializeColumn(self);\n    } //set respoviveLayout\n\n\n    if (_typeof(table.options.responsiveLayout) && table.modExists(\"responsiveLayout\")) {\n      table.modules.responsiveLayout.initializeColumn(self);\n    } //set column visibility\n\n\n    if (typeof def.visible != \"undefined\") {\n      if (def.visible) {\n        self.show(true);\n      } else {\n        self.hide(true);\n      }\n    } //asign additional css classes to column header\n\n\n    if (def.cssClass) {\n      var classeNames = def.cssClass.split(\" \");\n      classeNames.forEach(function (className) {\n        self.element.classList.add(className);\n      });\n    }\n\n    if (def.field) {\n      this.element.setAttribute(\"tabulator-field\", def.field);\n    } //set min width if present\n\n\n    self.setMinWidth(typeof def.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(def.minWidth));\n    self.reinitializeWidth(); //set tooltip if present\n\n    self.tooltip = self.definition.tooltip || self.definition.tooltip === false ? self.definition.tooltip : self.table.options.tooltips; //set orizontal text alignment\n\n    self.hozAlign = typeof self.definition.hozAlign == \"undefined\" ? self.table.options.cellHozAlign : self.definition.hozAlign;\n    self.vertAlign = typeof self.definition.vertAlign == \"undefined\" ? self.table.options.cellVertAlign : self.definition.vertAlign;\n  };\n\n  Column.prototype._buildColumnHeaderContent = function () {\n    var def = this.definition,\n        table = this.table;\n    var contentElement = document.createElement(\"div\");\n    contentElement.classList.add(\"tabulator-col-content\");\n    this.titleElement = this._buildColumnHeaderTitle();\n    contentElement.appendChild(this.titleElement);\n    return contentElement;\n  }; //build title element of column\n\n\n  Column.prototype._buildColumnHeaderTitle = function () {\n    var self = this,\n        def = self.definition,\n        table = self.table,\n        title;\n    var titleHolderElement = document.createElement(\"div\");\n    titleHolderElement.classList.add(\"tabulator-col-title\");\n\n    if (def.editableTitle) {\n      var titleElement = document.createElement(\"input\");\n      titleElement.classList.add(\"tabulator-title-editor\");\n      titleElement.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        titleElement.focus();\n      });\n      titleElement.addEventListener(\"change\", function () {\n        def.title = titleElement.value;\n        table.options.columnTitleChanged.call(self.table, self.getComponent());\n      });\n      titleHolderElement.appendChild(titleElement);\n\n      if (def.field) {\n        table.modules.localize.bind(\"columns|\" + def.field, function (text) {\n          titleElement.value = text || def.title || \"&nbsp;\";\n        });\n      } else {\n        titleElement.value = def.title || \"&nbsp;\";\n      }\n    } else {\n      if (def.field) {\n        table.modules.localize.bind(\"columns|\" + def.field, function (text) {\n          self._formatColumnHeaderTitle(titleHolderElement, text || def.title || \"&nbsp;\");\n        });\n      } else {\n        self._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n      }\n    }\n\n    return titleHolderElement;\n  };\n\n  Column.prototype._formatColumnHeaderTitle = function (el, title) {\n    var _this5 = this;\n\n    var formatter, contents, params, mockCell, onRendered;\n\n    if (this.definition.titleFormatter && this.table.modExists(\"format\")) {\n      formatter = this.table.modules.format.getFormatter(this.definition.titleFormatter);\n\n      onRendered = function onRendered(callback) {\n        _this5.titleFormatterRendered = callback;\n      };\n\n      mockCell = {\n        getValue: function getValue() {\n          return title;\n        },\n        getElement: function getElement() {\n          return el;\n        }\n      };\n      params = this.definition.titleFormatterParams || {};\n      params = typeof params === \"function\" ? params() : params;\n      contents = formatter.call(this.table.modules.format, mockCell, params, onRendered);\n\n      switch (typeof contents === 'undefined' ? 'undefined' : _typeof(contents)) {\n        case \"object\":\n          if (contents instanceof Node) {\n            el.appendChild(contents);\n          } else {\n            el.innerHTML = \"\";\n            console.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n          }\n\n          break;\n\n        case \"undefined\":\n        case \"null\":\n          el.innerHTML = \"\";\n          break;\n\n        default:\n          el.innerHTML = contents;\n      }\n    } else {\n      el.innerHTML = title;\n    }\n  }; //build header element for column group\n\n\n  Column.prototype._buildGroupHeader = function () {\n    var _this6 = this;\n\n    this.element.classList.add(\"tabulator-col-group\");\n    this.element.setAttribute(\"role\", \"columngroup\");\n    this.element.setAttribute(\"aria-title\", this.definition.title); //asign additional css classes to column header\n\n    if (this.definition.cssClass) {\n      var classeNames = this.definition.cssClass.split(\" \");\n      classeNames.forEach(function (className) {\n        _this6.element.classList.add(className);\n      });\n    }\n\n    this.element.appendChild(this.groupElement);\n  }; //flat field lookup\n\n\n  Column.prototype._getFlatData = function (data) {\n    return data[this.field];\n  }; //nested field lookup\n\n\n  Column.prototype._getNestedData = function (data) {\n    var dataObj = data,\n        structure = this.fieldStructure,\n        length = structure.length,\n        output;\n\n    for (var i = 0; i < length; i++) {\n      dataObj = dataObj[structure[i]];\n      output = dataObj;\n\n      if (!dataObj) {\n        break;\n      }\n    }\n\n    return output;\n  }; //flat field set\n\n\n  Column.prototype._setFlatData = function (data, value) {\n    if (this.field) {\n      data[this.field] = value;\n    }\n  }; //nested field set\n\n\n  Column.prototype._setNestedData = function (data, value) {\n    var dataObj = data,\n        structure = this.fieldStructure,\n        length = structure.length;\n\n    for (var i = 0; i < length; i++) {\n      if (i == length - 1) {\n        dataObj[structure[i]] = value;\n      } else {\n        if (!dataObj[structure[i]]) {\n          if (typeof value !== \"undefined\") {\n            dataObj[structure[i]] = {};\n          } else {\n            break;\n          }\n        }\n\n        dataObj = dataObj[structure[i]];\n      }\n    }\n  }; //attach column to this group\n\n\n  Column.prototype.attachColumn = function (column) {\n    var self = this;\n\n    if (self.groupElement) {\n      self.columns.push(column);\n      self.groupElement.appendChild(column.getElement());\n    } else {\n      console.warn(\"Column Warning - Column being attached to another column instead of column group\");\n    }\n  }; //vertically align header in column\n\n\n  Column.prototype.verticalAlign = function (alignment, height) {\n    //calculate height of column header and group holder element\n    var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : height || this.parent.getHeadersElement().clientHeight; // var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n    this.element.style.height = parentHeight + \"px\";\n\n    if (this.isGroup) {\n      this.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + \"px\";\n    } //vertically align cell contents\n\n\n    if (!this.isGroup && alignment !== \"top\") {\n      if (alignment === \"bottom\") {\n        this.element.style.paddingTop = this.element.clientHeight - this.contentElement.offsetHeight + \"px\";\n      } else {\n        this.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) / 2 + \"px\";\n      }\n    }\n\n    this.columns.forEach(function (column) {\n      column.verticalAlign(alignment);\n    });\n  }; //clear vertical alignmenet\n\n\n  Column.prototype.clearVerticalAlign = function () {\n    this.element.style.paddingTop = \"\";\n    this.element.style.height = \"\";\n    this.element.style.minHeight = \"\";\n    this.groupElement.style.minHeight = \"\";\n    this.columns.forEach(function (column) {\n      column.clearVerticalAlign();\n    });\n  };\n\n  Column.prototype.bindModuleColumns = function () {\n    //check if rownum formatter is being used on a column\n    if (this.definition.formatter == \"rownum\") {\n      this.table.rowManager.rowNumColumn = this;\n    }\n  }; //// Retreive Column Information ////\n  //return column header element\n\n\n  Column.prototype.getElement = function () {\n    return this.element;\n  }; //return colunm group element\n\n\n  Column.prototype.getGroupElement = function () {\n    return this.groupElement;\n  }; //return field name\n\n\n  Column.prototype.getField = function () {\n    return this.field;\n  }; //return the first column in a group\n\n\n  Column.prototype.getFirstColumn = function () {\n    if (!this.isGroup) {\n      return this;\n    } else {\n      if (this.columns.length) {\n        return this.columns[0].getFirstColumn();\n      } else {\n        return false;\n      }\n    }\n  }; //return the last column in a group\n\n\n  Column.prototype.getLastColumn = function () {\n    if (!this.isGroup) {\n      return this;\n    } else {\n      if (this.columns.length) {\n        return this.columns[this.columns.length - 1].getLastColumn();\n      } else {\n        return false;\n      }\n    }\n  }; //return all columns in a group\n\n\n  Column.prototype.getColumns = function () {\n    return this.columns;\n  }; //return all columns in a group\n\n\n  Column.prototype.getCells = function () {\n    return this.cells;\n  }; //retreive the top column in a group of columns\n\n\n  Column.prototype.getTopColumn = function () {\n    if (this.parent.isGroup) {\n      return this.parent.getTopColumn();\n    } else {\n      return this;\n    }\n  }; //return column definition object\n\n\n  Column.prototype.getDefinition = function (updateBranches) {\n    var colDefs = [];\n\n    if (this.isGroup && updateBranches) {\n      this.columns.forEach(function (column) {\n        colDefs.push(column.getDefinition(true));\n      });\n      this.definition.columns = colDefs;\n    }\n\n    return this.definition;\n  }; //////////////////// Actions ////////////////////\n\n\n  Column.prototype.checkColumnVisibility = function () {\n    var visible = false;\n    this.columns.forEach(function (column) {\n      if (column.visible) {\n        visible = true;\n      }\n    });\n\n    if (visible) {\n      this.show();\n      this.parent.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n    } else {\n      this.hide();\n    }\n  }; //show column\n\n\n  Column.prototype.show = function (silent, responsiveToggle) {\n    if (!this.visible) {\n      this.visible = true;\n      this.element.style.display = \"\";\n\n      if (this.parent.isGroup) {\n        this.parent.checkColumnVisibility();\n      }\n\n      this.cells.forEach(function (cell) {\n        cell.show();\n      });\n\n      if (!this.isGroup && this.width === null) {\n        this.reinitializeWidth();\n      }\n\n      this.table.columnManager._verticalAlignHeaders();\n\n      if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n        this.table.modules.persistence.save(\"columns\");\n      }\n\n      if (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n      }\n\n      if (!silent) {\n        this.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), true);\n      }\n\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n    }\n  }; //hide column\n\n\n  Column.prototype.hide = function (silent, responsiveToggle) {\n    if (this.visible) {\n      this.visible = false;\n      this.element.style.display = \"none\";\n\n      this.table.columnManager._verticalAlignHeaders();\n\n      if (this.parent.isGroup) {\n        this.parent.checkColumnVisibility();\n      }\n\n      this.cells.forEach(function (cell) {\n        cell.hide();\n      });\n\n      if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n        this.table.modules.persistence.save(\"columns\");\n      }\n\n      if (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n      }\n\n      if (!silent) {\n        this.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n      }\n\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n    }\n  };\n\n  Column.prototype.matchChildWidths = function () {\n    var childWidth = 0;\n\n    if (this.contentElement && this.columns.length) {\n      this.columns.forEach(function (column) {\n        if (column.visible) {\n          childWidth += column.getWidth();\n        }\n      });\n      this.contentElement.style.maxWidth = childWidth - 1 + \"px\";\n\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n    }\n  };\n\n  Column.prototype.setWidth = function (width) {\n    this.widthFixed = true;\n    this.setWidthActual(width);\n  };\n\n  Column.prototype.setWidthActual = function (width) {\n    if (isNaN(width)) {\n      width = Math.floor(this.table.element.clientWidth / 100 * parseInt(width));\n    }\n\n    width = Math.max(this.minWidth, width);\n    this.width = width;\n    this.widthStyled = width ? width + \"px\" : \"\";\n    this.element.style.width = this.widthStyled;\n\n    if (!this.isGroup) {\n      this.cells.forEach(function (cell) {\n        cell.setWidth();\n      });\n    }\n\n    if (this.parent.isGroup) {\n      this.parent.matchChildWidths();\n    } //set resizable handles\n\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layout();\n    }\n  };\n\n  Column.prototype.checkCellHeights = function () {\n    var rows = [];\n    this.cells.forEach(function (cell) {\n      if (cell.row.heightInitialized) {\n        if (cell.row.getElement().offsetParent !== null) {\n          rows.push(cell.row);\n          cell.row.clearCellHeight();\n        } else {\n          cell.row.heightInitialized = false;\n        }\n      }\n    });\n    rows.forEach(function (row) {\n      row.calcHeight();\n    });\n    rows.forEach(function (row) {\n      row.setCellHeight();\n    });\n  };\n\n  Column.prototype.getWidth = function () {\n    var width = 0;\n\n    if (this.isGroup) {\n      this.columns.forEach(function (column) {\n        if (column.visible) {\n          width += column.getWidth();\n        }\n      });\n    } else {\n      width = this.width;\n    }\n\n    return width;\n  };\n\n  Column.prototype.getHeight = function () {\n    return this.element.offsetHeight;\n  };\n\n  Column.prototype.setMinWidth = function (minWidth) {\n    this.minWidth = minWidth;\n    this.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n    this.element.style.minWidth = this.minWidthStyled;\n    this.cells.forEach(function (cell) {\n      cell.setMinWidth();\n    });\n  };\n\n  Column.prototype.delete = function () {\n    var _this7 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this7.isGroup) {\n        _this7.columns.forEach(function (column) {\n          column.delete();\n        });\n      } //cancel edit if column is currently being edited\n\n\n      if (_this7.table.modExists(\"edit\")) {\n        if (_this7.table.modules.edit.currentCell.column === _this7) {\n          _this7.table.modules.edit.cancelEdit();\n        }\n      }\n\n      var cellCount = _this7.cells.length;\n\n      for (var i = 0; i < cellCount; i++) {\n        _this7.cells[0].delete();\n      }\n\n      _this7.element.parentNode.removeChild(_this7.element);\n\n      _this7.table.columnManager.deregisterColumn(_this7);\n\n      resolve();\n    });\n  };\n\n  Column.prototype.columnRendered = function () {\n    if (this.titleFormatterRendered) {\n      this.titleFormatterRendered();\n    }\n  }; //////////////// Cell Management /////////////////\n  //generate cell for this column\n\n\n  Column.prototype.generateCell = function (row) {\n    var self = this;\n    var cell = new Cell(self, row);\n    this.cells.push(cell);\n    return cell;\n  };\n\n  Column.prototype.nextColumn = function () {\n    var index = this.table.columnManager.findColumnIndex(this);\n    return index > -1 ? this._nextVisibleColumn(index + 1) : false;\n  };\n\n  Column.prototype._nextVisibleColumn = function (index) {\n    var column = this.table.columnManager.getColumnByIndex(index);\n    return !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n  };\n\n  Column.prototype.prevColumn = function () {\n    var index = this.table.columnManager.findColumnIndex(this);\n    return index > -1 ? this._prevVisibleColumn(index - 1) : false;\n  };\n\n  Column.prototype._prevVisibleColumn = function (index) {\n    var column = this.table.columnManager.getColumnByIndex(index);\n    return !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n  };\n\n  Column.prototype.reinitializeWidth = function (force) {\n    this.widthFixed = false; //set width if present\n\n    if (typeof this.definition.width !== \"undefined\" && !force) {\n      this.setWidth(this.definition.width);\n    } //hide header filters to prevent them altering column width\n\n\n    if (this.table.modExists(\"filter\")) {\n      this.table.modules.filter.hideHeaderFilterElements();\n    }\n\n    this.fitToData(); //show header filters again after layout is complete\n\n    if (this.table.modExists(\"filter\")) {\n      this.table.modules.filter.showHeaderFilterElements();\n    }\n  }; //set column width to maximum cell width\n\n\n  Column.prototype.fitToData = function () {\n    var self = this;\n\n    if (!this.widthFixed) {\n      this.element.style.width = \"\";\n      self.cells.forEach(function (cell) {\n        cell.clearWidth();\n      });\n    }\n\n    var maxWidth = this.element.offsetWidth;\n\n    if (!self.width || !this.widthFixed) {\n      self.cells.forEach(function (cell) {\n        var width = cell.getWidth();\n\n        if (width > maxWidth) {\n          maxWidth = width;\n        }\n      });\n\n      if (maxWidth) {\n        self.setWidthActual(maxWidth + 1);\n      }\n    }\n  };\n\n  Column.prototype.updateDefinition = function (updates) {\n    var _this8 = this;\n\n    return new Promise(function (resolve, reject) {\n      var definition;\n\n      if (!_this8.isGroup) {\n        definition = Object.assign({}, _this8.getDefinition());\n        definition = Object.assign(definition, updates);\n\n        _this8.table.columnManager.addColumn(definition, false, _this8).then(function (column) {\n          if (definition.field == _this8.field) {\n            _this8.field = false; //cleair field name to prevent deletion of duplicate column from arrays\n          }\n\n          _this8.delete().then(function () {\n            resolve(column.getComponent());\n          }).catch(function (err) {\n            reject(err);\n          });\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Column Update Error - The updateDefintion function is only available on columns, not column groups\");\n        reject(\"Column Update Error - The updateDefintion function is only available on columns, not column groups\");\n      }\n    });\n  };\n\n  Column.prototype.deleteCell = function (cell) {\n    var index = this.cells.indexOf(cell);\n\n    if (index > -1) {\n      this.cells.splice(index, 1);\n    }\n  };\n\n  Column.prototype.defaultOptionList = [\"title\", \"field\", \"columns\", \"visible\", \"align\", \"hozAlign\", \"vertAlign\", \"width\", \"minWidth\", \"widthGrow\", \"widthShrink\", \"resizable\", \"frozen\", \"responsive\", \"tooltip\", \"cssClass\", \"rowHandle\", \"hideInHtml\", \"print\", \"htmlOutput\", \"sorter\", \"sorterParams\", \"formatter\", \"formatterParams\", \"variableHeight\", \"editable\", \"editor\", \"editorParams\", \"validator\", \"mutator\", \"mutatorParams\", \"mutatorData\", \"mutatorDataParams\", \"mutatorEdit\", \"mutatorEditParams\", \"mutatorClipboard\", \"mutatorClipboardParams\", \"accessor\", \"accessorParams\", \"accessorData\", \"accessorDataParams\", \"accessorDownload\", \"accessorDownloadParams\", \"accessorClipboard\", \"accessorClipboardParams\", \"accessorPrint\", \"accessorPrintParams\", \"accessorHtmlOutput\", \"accessorHtmlOutputParams\", \"clipboard\", \"download\", \"downloadTitle\", \"topCalc\", \"topCalcParams\", \"topCalcFormatter\", \"topCalcFormatterParams\", \"bottomCalc\", \"bottomCalcParams\", \"bottomCalcFormatter\", \"bottomCalcFormatterParams\", \"cellClick\", \"cellDblClick\", \"cellContext\", \"cellTap\", \"cellDblTap\", \"cellTapHold\", \"cellMouseEnter\", \"cellMouseLeave\", \"cellMouseOver\", \"cellMouseOut\", \"cellMouseMove\", \"cellEditing\", \"cellEdited\", \"cellEditCancelled\", \"headerSort\", \"headerSortStartingDir\", \"headerSortTristate\", \"headerClick\", \"headerDblClick\", \"headerContext\", \"headerTap\", \"headerDblTap\", \"headerTapHold\", \"headerTooltip\", \"headerVertical\", \"editableTitle\", \"titleFormatter\", \"titleFormatterParams\", \"headerFilter\", \"headerFilterPlaceholder\", \"headerFilterParams\", \"headerFilterEmptyCheck\", \"headerFilterFunc\", \"headerFilterFuncParams\", \"headerFilterLiveFilter\", \"print\", \"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"formatterPrint\", \"formatterPrintParams\", \"formatterClipboard\", \"formatterClipboardParams\", \"formatterHtmlOutput\", \"formatterHtmlOutputParams\"]; //////////////// Event Bindings /////////////////\n  //////////////// Object Generation /////////////////\n\n  Column.prototype.getComponent = function () {\n    return new ColumnComponent(this);\n  };\n\n  var RowManager = function RowManager(table) {\n    this.table = table;\n    this.element = this.createHolderElement(); //containing element\n\n    this.tableElement = this.createTableElement(); //table element\n\n    this.heightFixer = this.createTableElement(); //table element\n\n    this.columnManager = null; //hold column manager object\n\n    this.height = 0; //hold height of table element\n\n    this.firstRender = false; //handle first render\n\n    this.renderMode = \"virtual\"; //current rendering mode\n\n    this.fixedHeight = false; //current rendering mode\n\n    this.rows = []; //hold row data objects\n\n    this.activeRows = []; //rows currently available to on display in the table\n\n    this.activeRowsCount = 0; //count of active rows\n\n    this.displayRows = []; //rows currently on display in the table\n\n    this.displayRowsCount = 0; //count of display rows\n\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.vDomRowHeight = 20; //approximation of row heights for padding\n\n    this.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\n    this.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\n\n    this.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\n    this.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n    this.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\n    this.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n    this.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n    this.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n    this.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\n    this.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n    this.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\n    this.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\n    this.rowNumColumn = false; //hold column component for row number column\n\n    this.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\n\n    this.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\n    this.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\n  }; //////////////// Setup Functions /////////////////\n\n\n  RowManager.prototype.createHolderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-tableHolder\");\n    el.setAttribute(\"tabindex\", 0);\n    return el;\n  };\n\n  RowManager.prototype.createTableElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-table\");\n    return el;\n  }; //return containing element\n\n\n  RowManager.prototype.getElement = function () {\n    return this.element;\n  }; //return table element\n\n\n  RowManager.prototype.getTableElement = function () {\n    return this.tableElement;\n  }; //return position of row in table\n\n\n  RowManager.prototype.getRowPosition = function (row, active) {\n    if (active) {\n      return this.activeRows.indexOf(row);\n    } else {\n      return this.rows.indexOf(row);\n    }\n  }; //link to column manager\n\n\n  RowManager.prototype.setColumnManager = function (manager) {\n    this.columnManager = manager;\n  };\n\n  RowManager.prototype.initialize = function () {\n    var self = this;\n    self.setRenderMode(); //initialize manager\n\n    self.element.appendChild(self.tableElement);\n    self.firstRender = true; //scroll header along with table body\n\n    self.element.addEventListener(\"scroll\", function () {\n      var left = self.element.scrollLeft; //handle horizontal scrolling\n\n      if (self.scrollLeft != left) {\n        self.columnManager.scrollHorizontal(left);\n\n        if (self.table.options.groupBy) {\n          self.table.modules.groupRows.scrollHeaders(left);\n        }\n\n        if (self.table.modExists(\"columnCalcs\")) {\n          self.table.modules.columnCalcs.scrollHorizontal(left);\n        }\n\n        self.table.options.scrollHorizontal(left);\n      }\n\n      self.scrollLeft = left;\n    }); //handle virtual dom scrolling\n\n    if (this.renderMode === \"virtual\") {\n      self.element.addEventListener(\"scroll\", function () {\n        var top = self.element.scrollTop;\n        var dir = self.scrollTop > top; //handle verical scrolling\n\n        if (self.scrollTop != top) {\n          self.scrollTop = top;\n          self.scrollVertical(dir);\n\n          if (self.table.options.ajaxProgressiveLoad == \"scroll\") {\n            self.table.modules.ajax.nextPage(self.element.scrollHeight - self.element.clientHeight - top);\n          }\n\n          self.table.options.scrollVertical(top);\n        } else {\n          self.scrollTop = top;\n        }\n      });\n    }\n  }; ////////////////// Row Manipulation //////////////////\n\n\n  RowManager.prototype.findRow = function (subject) {\n    var self = this;\n\n    if ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n      if (subject instanceof Row) {\n        //subject is row element\n        return subject;\n      } else if (subject instanceof RowComponent) {\n        //subject is public row component\n        return subject._getSelf() || false;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        //subject is a HTML element of the row\n        var match = self.rows.find(function (row) {\n          return row.element === subject;\n        });\n        return match || false;\n      }\n    } else if (typeof subject == \"undefined\" || subject === null) {\n      return false;\n    } else {\n      //subject should be treated as the index of the row\n      var _match = self.rows.find(function (row) {\n        return row.data[self.table.options.index] == subject;\n      });\n\n      return _match || false;\n    } //catch all for any other type of input\n\n\n    return false;\n  };\n\n  RowManager.prototype.getRowFromDataObject = function (data) {\n    var match = this.rows.find(function (row) {\n      return row.data === data;\n    });\n    return match || false;\n  };\n\n  RowManager.prototype.getRowFromPosition = function (position, active) {\n    if (active) {\n      return this.activeRows[position];\n    } else {\n      return this.rows[position];\n    }\n  };\n\n  RowManager.prototype.scrollToRow = function (row, position, ifVisible) {\n    var _this9 = this;\n\n    var rowIndex = this.getDisplayRows().indexOf(row),\n        rowEl = row.getElement(),\n        rowTop,\n        offset = 0;\n    return new Promise(function (resolve, reject) {\n      if (rowIndex > -1) {\n        if (typeof position === \"undefined\") {\n          position = _this9.table.options.scrollToRowPosition;\n        }\n\n        if (typeof ifVisible === \"undefined\") {\n          ifVisible = _this9.table.options.scrollToRowIfVisible;\n        }\n\n        if (position === \"nearest\") {\n          switch (_this9.renderMode) {\n            case \"classic\":\n              rowTop = Tabulator.prototype.helpers.elOffset(rowEl).top;\n              position = Math.abs(_this9.element.scrollTop - rowTop) > Math.abs(_this9.element.scrollTop + _this9.element.clientHeight - rowTop) ? \"bottom\" : \"top\";\n              break;\n\n            case \"virtual\":\n              position = Math.abs(_this9.vDomTop - rowIndex) > Math.abs(_this9.vDomBottom - rowIndex) ? \"bottom\" : \"top\";\n              break;\n          }\n        } //check row visibility\n\n\n        if (!ifVisible) {\n          if (Tabulator.prototype.helpers.elVisible(rowEl)) {\n            offset = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this9.element).top;\n\n            if (offset > 0 && offset < _this9.element.clientHeight - rowEl.offsetHeight) {\n              return false;\n            }\n          }\n        } //scroll to row\n\n\n        switch (_this9.renderMode) {\n          case \"classic\":\n            _this9.element.scrollTop = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this9.element).top + _this9.element.scrollTop;\n            break;\n\n          case \"virtual\":\n            _this9._virtualRenderFill(rowIndex, true);\n\n            break;\n        } //align to correct position\n\n\n        switch (position) {\n          case \"middle\":\n          case \"center\":\n            if (_this9.element.scrollHeight - _this9.element.scrollTop == _this9.element.clientHeight) {\n              _this9.element.scrollTop = _this9.element.scrollTop + (rowEl.offsetTop - _this9.element.scrollTop) - (_this9.element.scrollHeight - rowEl.offsetTop) / 2;\n            } else {\n              _this9.element.scrollTop = _this9.element.scrollTop - _this9.element.clientHeight / 2;\n            }\n\n            break;\n\n          case \"bottom\":\n            if (_this9.element.scrollHeight - _this9.element.scrollTop == _this9.element.clientHeight) {\n              _this9.element.scrollTop = _this9.element.scrollTop - (_this9.element.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n            } else {\n              _this9.element.scrollTop = _this9.element.scrollTop - _this9.element.clientHeight + rowEl.offsetHeight;\n            }\n\n            break;\n        }\n\n        resolve();\n      } else {\n        console.warn(\"Scroll Error - Row not visible\");\n        reject(\"Scroll Error - Row not visible\");\n      }\n    });\n  }; ////////////////// Data Handling //////////////////\n\n\n  RowManager.prototype.setData = function (data, renderInPosition, columnsChanged) {\n    var _this10 = this;\n\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      if (renderInPosition && _this10.getDisplayRows().length) {\n        if (self.table.options.pagination) {\n          self._setDataActual(data, true);\n        } else {\n          _this10.reRenderInPosition(function () {\n            self._setDataActual(data);\n          });\n        }\n      } else {\n        if (_this10.table.options.autoColumns && columnsChanged) {\n          _this10.table.columnManager.generateColumnsFromRowData(data);\n        }\n\n        _this10.resetScroll();\n\n        _this10._setDataActual(data);\n      }\n\n      resolve();\n    });\n  };\n\n  RowManager.prototype._setDataActual = function (data, renderInPosition) {\n    var self = this;\n    self.table.options.dataLoading.call(this.table, data);\n\n    this._wipeElements();\n\n    if (this.table.options.history && this.table.modExists(\"history\")) {\n      this.table.modules.history.clear();\n    }\n\n    if (Array.isArray(data)) {\n      if (this.table.modExists(\"selectRow\")) {\n        this.table.modules.selectRow.clearSelectionData();\n      }\n\n      if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n        this.table.modules.reactiveData.watchData(data);\n      }\n\n      data.forEach(function (def, i) {\n        if (def && (typeof def === 'undefined' ? 'undefined' : _typeof(def)) === \"object\") {\n          var row = new Row(def, self);\n          self.rows.push(row);\n        } else {\n          console.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n        }\n      });\n      self.table.options.dataLoaded.call(this.table, data);\n      self.refreshActiveData(false, false, renderInPosition);\n    } else {\n      console.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data === 'undefined' ? 'undefined' : _typeof(data), \"\\nData:     \", data);\n    }\n  };\n\n  RowManager.prototype._wipeElements = function () {\n    this.rows.forEach(function (row) {\n      row.wipe();\n    });\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.wipe();\n    }\n\n    this.rows = [];\n  };\n\n  RowManager.prototype.deleteRow = function (row, blockRedraw) {\n    var allIndex = this.rows.indexOf(row),\n        activeIndex = this.activeRows.indexOf(row);\n\n    if (activeIndex > -1) {\n      this.activeRows.splice(activeIndex, 1);\n    }\n\n    if (allIndex > -1) {\n      this.rows.splice(allIndex, 1);\n    }\n\n    this.setActiveRows(this.activeRows);\n    this.displayRowIterator(function (rows) {\n      var displayIndex = rows.indexOf(row);\n\n      if (displayIndex > -1) {\n        rows.splice(displayIndex, 1);\n      }\n    });\n\n    if (!blockRedraw) {\n      this.reRenderInPosition();\n    }\n\n    this.regenerateRowNumbers();\n    this.table.options.rowDeleted.call(this.table, row.getComponent());\n    this.table.options.dataEdited.call(this.table, this.getData());\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.updateGroupRows(true);\n    } else if (this.table.options.pagination && this.table.modExists(\"page\")) {\n      this.refreshActiveData(false, false, true);\n    } else {\n      if (this.table.options.pagination && this.table.modExists(\"page\")) {\n        this.refreshActiveData(\"page\");\n      }\n    }\n  };\n\n  RowManager.prototype.addRow = function (data, pos, index, blockRedraw) {\n    var row = this.addRowActual(data, pos, index, blockRedraw);\n\n    if (this.table.options.history && this.table.modExists(\"history\")) {\n      this.table.modules.history.action(\"rowAdd\", row, {\n        data: data,\n        pos: pos,\n        index: index\n      });\n    }\n\n    return row;\n  }; //add multiple rows\n\n\n  RowManager.prototype.addRows = function (data, pos, index) {\n    var _this11 = this;\n\n    var self = this,\n        length = 0,\n        rows = [];\n    return new Promise(function (resolve, reject) {\n      pos = _this11.findAddRowPos(pos);\n\n      if (!Array.isArray(data)) {\n        data = [data];\n      }\n\n      length = data.length - 1;\n\n      if (typeof index == \"undefined\" && pos || typeof index !== \"undefined\" && !pos) {\n        data.reverse();\n      }\n\n      data.forEach(function (item, i) {\n        var row = self.addRow(item, pos, index, true);\n        rows.push(row);\n      });\n\n      if (_this11.table.options.groupBy && _this11.table.modExists(\"groupRows\")) {\n        _this11.table.modules.groupRows.updateGroupRows(true);\n      } else if (_this11.table.options.pagination && _this11.table.modExists(\"page\")) {\n        _this11.refreshActiveData(false, false, true);\n      } else {\n        _this11.reRenderInPosition();\n      } //recalc column calculations if present\n\n\n      if (_this11.table.modExists(\"columnCalcs\")) {\n        _this11.table.modules.columnCalcs.recalc(_this11.table.rowManager.activeRows);\n      }\n\n      _this11.regenerateRowNumbers();\n\n      resolve(rows);\n    });\n  };\n\n  RowManager.prototype.findAddRowPos = function (pos) {\n    if (typeof pos === \"undefined\") {\n      pos = this.table.options.addRowPos;\n    }\n\n    if (pos === \"pos\") {\n      pos = true;\n    }\n\n    if (pos === \"bottom\") {\n      pos = false;\n    }\n\n    return pos;\n  };\n\n  RowManager.prototype.addRowActual = function (data, pos, index, blockRedraw) {\n    var row = data instanceof Row ? data : new Row(data || {}, this),\n        top = this.findAddRowPos(pos),\n        allIndex = -1,\n        activeIndex,\n        dispRows;\n\n    if (!index && this.table.options.pagination && this.table.options.paginationAddRow == \"page\") {\n      dispRows = this.getDisplayRows();\n\n      if (top) {\n        if (dispRows.length) {\n          index = dispRows[0];\n        } else {\n          if (this.activeRows.length) {\n            index = this.activeRows[this.activeRows.length - 1];\n            top = false;\n          }\n        }\n      } else {\n        if (dispRows.length) {\n          index = dispRows[dispRows.length - 1];\n          top = dispRows.length < this.table.modules.page.getPageSize() ? false : true;\n        }\n      }\n    }\n\n    if (typeof index !== \"undefined\") {\n      index = this.findRow(index);\n    }\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.assignRowToGroup(row);\n      var groupRows = row.getGroup().rows;\n\n      if (groupRows.length > 1) {\n        if (!index || index && groupRows.indexOf(index) == -1) {\n          if (top) {\n            if (groupRows[0] !== row) {\n              index = groupRows[0];\n\n              this._moveRowInArray(row.getGroup().rows, row, index, !top);\n            }\n          } else {\n            if (groupRows[groupRows.length - 1] !== row) {\n              index = groupRows[groupRows.length - 1];\n\n              this._moveRowInArray(row.getGroup().rows, row, index, !top);\n            }\n          }\n        } else {\n          this._moveRowInArray(row.getGroup().rows, row, index, !top);\n        }\n      }\n    }\n\n    if (index) {\n      allIndex = this.rows.indexOf(index);\n    }\n\n    if (index && allIndex > -1) {\n      activeIndex = this.activeRows.indexOf(index);\n      this.displayRowIterator(function (rows) {\n        var displayIndex = rows.indexOf(index);\n\n        if (displayIndex > -1) {\n          rows.splice(top ? displayIndex : displayIndex + 1, 0, row);\n        }\n      });\n\n      if (activeIndex > -1) {\n        this.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row);\n      }\n\n      this.rows.splice(top ? allIndex : allIndex + 1, 0, row);\n    } else {\n      if (top) {\n        this.displayRowIterator(function (rows) {\n          rows.unshift(row);\n        });\n        this.activeRows.unshift(row);\n        this.rows.unshift(row);\n      } else {\n        this.displayRowIterator(function (rows) {\n          rows.push(row);\n        });\n        this.activeRows.push(row);\n        this.rows.push(row);\n      }\n    }\n\n    this.setActiveRows(this.activeRows);\n    this.table.options.rowAdded.call(this.table, row.getComponent());\n    this.table.options.dataEdited.call(this.table, this.getData());\n\n    if (!blockRedraw) {\n      this.reRenderInPosition();\n    }\n\n    return row;\n  };\n\n  RowManager.prototype.moveRow = function (from, to, after) {\n    if (this.table.options.history && this.table.modExists(\"history\")) {\n      this.table.modules.history.action(\"rowMove\", from, {\n        posFrom: this.getRowPosition(from),\n        posTo: this.getRowPosition(to),\n        to: to,\n        after: after\n      });\n    }\n\n    this.moveRowActual(from, to, after);\n    this.regenerateRowNumbers();\n    this.table.options.rowMoved.call(this.table, from.getComponent());\n  };\n\n  RowManager.prototype.moveRowActual = function (from, to, after) {\n    var _this12 = this;\n\n    this._moveRowInArray(this.rows, from, to, after);\n\n    this._moveRowInArray(this.activeRows, from, to, after);\n\n    this.displayRowIterator(function (rows) {\n      _this12._moveRowInArray(rows, from, to, after);\n    });\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      if (!after && to instanceof Group) {\n        to = this.table.rowManager.prevDisplayRow(from) || to;\n      }\n\n      var toGroup = to.getGroup();\n      var fromGroup = from.getGroup();\n\n      if (toGroup === fromGroup) {\n        this._moveRowInArray(toGroup.rows, from, to, after);\n      } else {\n        if (fromGroup) {\n          fromGroup.removeRow(from);\n        }\n\n        toGroup.insertRow(from, to, after);\n      }\n    }\n  };\n\n  RowManager.prototype._moveRowInArray = function (rows, from, to, after) {\n    var fromIndex, toIndex, start, end;\n\n    if (from !== to) {\n      fromIndex = rows.indexOf(from);\n\n      if (fromIndex > -1) {\n        rows.splice(fromIndex, 1);\n        toIndex = rows.indexOf(to);\n\n        if (toIndex > -1) {\n          if (after) {\n            rows.splice(toIndex + 1, 0, from);\n          } else {\n            rows.splice(toIndex, 0, from);\n          }\n        } else {\n          rows.splice(fromIndex, 0, from);\n        }\n      } //restyle rows\n\n\n      if (rows === this.getDisplayRows()) {\n        start = fromIndex < toIndex ? fromIndex : toIndex;\n        end = toIndex > fromIndex ? toIndex : fromIndex + 1;\n\n        for (var i = start; i <= end; i++) {\n          if (rows[i]) {\n            this.styleRow(rows[i], i);\n          }\n        }\n      }\n    }\n  };\n\n  RowManager.prototype.clearData = function () {\n    this.setData([]);\n  };\n\n  RowManager.prototype.getRowIndex = function (row) {\n    return this.findRowIndex(row, this.rows);\n  };\n\n  RowManager.prototype.getDisplayRowIndex = function (row) {\n    var index = this.getDisplayRows().indexOf(row);\n    return index > -1 ? index : false;\n  };\n\n  RowManager.prototype.nextDisplayRow = function (row, rowOnly) {\n    var index = this.getDisplayRowIndex(row),\n        nextRow = false;\n\n    if (index !== false && index < this.displayRowsCount - 1) {\n      nextRow = this.getDisplayRows()[index + 1];\n    }\n\n    if (nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")) {\n      return this.nextDisplayRow(nextRow, rowOnly);\n    }\n\n    return nextRow;\n  };\n\n  RowManager.prototype.prevDisplayRow = function (row, rowOnly) {\n    var index = this.getDisplayRowIndex(row),\n        prevRow = false;\n\n    if (index) {\n      prevRow = this.getDisplayRows()[index - 1];\n    }\n\n    if (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")) {\n      return this.prevDisplayRow(prevRow, rowOnly);\n    }\n\n    return prevRow;\n  };\n\n  RowManager.prototype.findRowIndex = function (row, list) {\n    var rowIndex;\n    row = this.findRow(row);\n\n    if (row) {\n      rowIndex = list.indexOf(row);\n\n      if (rowIndex > -1) {\n        return rowIndex;\n      }\n    }\n\n    return false;\n  };\n\n  RowManager.prototype.getData = function (active, transform) {\n    var output = [],\n        rows = this.getRows(active);\n    rows.forEach(function (row) {\n      if (row.type == \"row\") {\n        output.push(row.getData(transform || \"data\"));\n      }\n    });\n    return output;\n  };\n\n  RowManager.prototype.getComponents = function (active) {\n    var output = [],\n        rows = this.getRows(active);\n    rows.forEach(function (row) {\n      output.push(row.getComponent());\n    });\n    return output;\n  };\n\n  RowManager.prototype.getDataCount = function (active) {\n    var rows = this.getRows(active);\n    return rows.length;\n  };\n\n  RowManager.prototype._genRemoteRequest = function () {\n    var _this13 = this;\n\n    var table = this.table,\n        options = table.options,\n        params = {};\n\n    if (table.modExists(\"page\")) {\n      //set sort data if defined\n      if (options.ajaxSorting) {\n        var sorters = this.table.modules.sort.getSort();\n        sorters.forEach(function (item) {\n          delete item.column;\n        });\n        params[this.table.modules.page.paginationDataSentNames.sorters] = sorters;\n      } //set filter data if defined\n\n\n      if (options.ajaxFiltering) {\n        var filters = this.table.modules.filter.getFilters(true, true);\n        params[this.table.modules.page.paginationDataSentNames.filters] = filters;\n      }\n\n      this.table.modules.ajax.setParams(params, true);\n    }\n\n    table.modules.ajax.sendRequest().then(function (data) {\n      _this13._setDataActual(data, true);\n    }).catch(function (e) {});\n  }; //choose the path to refresh data after a filter update\n\n\n  RowManager.prototype.filterRefresh = function () {\n    var table = this.table,\n        options = table.options,\n        left = this.scrollLeft;\n\n    if (options.ajaxFiltering) {\n      if (options.pagination == \"remote\" && table.modExists(\"page\")) {\n        table.modules.page.reset(true);\n        table.modules.page.setPage(1).then(function () {}).catch(function () {});\n      } else if (options.ajaxProgressiveLoad) {\n        table.modules.ajax.loadData().then(function () {}).catch(function () {});\n      } else {\n        //assume data is url, make ajax call to url to get data\n        this._genRemoteRequest();\n      }\n    } else {\n      this.refreshActiveData(\"filter\");\n    }\n\n    this.scrollHorizontal(left);\n  }; //choose the path to refresh data after a sorter update\n\n\n  RowManager.prototype.sorterRefresh = function (loadOrignalData) {\n    var table = this.table,\n        options = this.table.options,\n        left = this.scrollLeft;\n\n    if (options.ajaxSorting) {\n      if ((options.pagination == \"remote\" || options.progressiveLoad) && table.modExists(\"page\")) {\n        table.modules.page.reset(true);\n        table.modules.page.setPage(1).then(function () {}).catch(function () {});\n      } else if (options.ajaxProgressiveLoad) {\n        table.modules.ajax.loadData().then(function () {}).catch(function () {});\n      } else {\n        //assume data is url, make ajax call to url to get data\n        this._genRemoteRequest();\n      }\n    } else {\n      this.refreshActiveData(loadOrignalData ? \"filter\" : \"sort\");\n    }\n\n    this.scrollHorizontal(left);\n  };\n\n  RowManager.prototype.scrollHorizontal = function (left) {\n    this.scrollLeft = left;\n    this.element.scrollLeft = left;\n\n    if (this.table.options.groupBy) {\n      this.table.modules.groupRows.scrollHeaders(left);\n    }\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      this.table.modules.columnCalcs.scrollHorizontal(left);\n    }\n  }; //set active data set\n\n\n  RowManager.prototype.refreshActiveData = function (stage, skipStage, renderInPosition) {\n    var self = this,\n        table = this.table,\n        cascadeOrder = [\"all\", \"filter\", \"sort\", \"display\", \"freeze\", \"group\", \"tree\", \"page\"],\n        displayIndex;\n\n    if (this.redrawBlock) {\n      if (!this.redrawBlockRestoreConfig || cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage)) {\n        this.redrawBlockRestoreConfig = {\n          stage: stage,\n          skipStage: skipStage,\n          renderInPosition: renderInPosition\n        };\n      }\n\n      return;\n    } else {\n      if (self.table.modExists(\"edit\")) {\n        self.table.modules.edit.cancelEdit();\n      }\n\n      if (!stage) {\n        stage = \"all\";\n      }\n\n      if (table.options.selectable && !table.options.selectablePersistence && table.modExists(\"selectRow\")) {\n        table.modules.selectRow.deselectRows();\n      } //cascade through data refresh stages\n\n\n      switch (stage) {\n        case \"all\":\n        case \"filter\":\n          if (!skipStage) {\n            if (table.modExists(\"filter\")) {\n              self.setActiveRows(table.modules.filter.filter(self.rows));\n            } else {\n              self.setActiveRows(self.rows.slice(0));\n            }\n          } else {\n            skipStage = false;\n          }\n\n        case \"sort\":\n          if (!skipStage) {\n            if (table.modExists(\"sort\")) {\n              table.modules.sort.sort(this.activeRows);\n            }\n          } else {\n            skipStage = false;\n          } //regenerate row numbers for row number formatter if in use\n\n\n          this.regenerateRowNumbers();\n        //generic stage to allow for pipeline trigger after the data manipulation stage\n\n        case \"display\":\n          this.resetDisplayRows();\n\n        case \"freeze\":\n          if (!skipStage) {\n            if (this.table.modExists(\"frozenRows\")) {\n              if (table.modules.frozenRows.isFrozen()) {\n                if (!table.modules.frozenRows.getDisplayIndex()) {\n                  table.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex());\n                }\n\n                displayIndex = table.modules.frozenRows.getDisplayIndex();\n                displayIndex = self.setDisplayRows(table.modules.frozenRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n                if (displayIndex !== true) {\n                  table.modules.frozenRows.setDisplayIndex(displayIndex);\n                }\n              }\n            }\n          } else {\n            skipStage = false;\n          }\n\n        case \"group\":\n          if (!skipStage) {\n            if (table.options.groupBy && table.modExists(\"groupRows\")) {\n              if (!table.modules.groupRows.getDisplayIndex()) {\n                table.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex());\n              }\n\n              displayIndex = table.modules.groupRows.getDisplayIndex();\n              displayIndex = self.setDisplayRows(table.modules.groupRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n              if (displayIndex !== true) {\n                table.modules.groupRows.setDisplayIndex(displayIndex);\n              }\n            }\n          } else {\n            skipStage = false;\n          }\n\n        case \"tree\":\n          if (!skipStage) {\n            if (table.options.dataTree && table.modExists(\"dataTree\")) {\n              if (!table.modules.dataTree.getDisplayIndex()) {\n                table.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex());\n              }\n\n              displayIndex = table.modules.dataTree.getDisplayIndex();\n              displayIndex = self.setDisplayRows(table.modules.dataTree.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n              if (displayIndex !== true) {\n                table.modules.dataTree.setDisplayIndex(displayIndex);\n              }\n            }\n          } else {\n            skipStage = false;\n          }\n\n          if (table.options.pagination && table.modExists(\"page\") && !renderInPosition) {\n            if (table.modules.page.getMode() == \"local\") {\n              table.modules.page.reset();\n            }\n          }\n\n        case \"page\":\n          if (!skipStage) {\n            if (table.options.pagination && table.modExists(\"page\")) {\n              if (!table.modules.page.getDisplayIndex()) {\n                table.modules.page.setDisplayIndex(this.getNextDisplayIndex());\n              }\n\n              displayIndex = table.modules.page.getDisplayIndex();\n\n              if (table.modules.page.getMode() == \"local\") {\n                table.modules.page.setMaxRows(this.getDisplayRows(displayIndex - 1).length);\n              }\n\n              displayIndex = self.setDisplayRows(table.modules.page.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n              if (displayIndex !== true) {\n                table.modules.page.setDisplayIndex(displayIndex);\n              }\n            }\n          } else {\n            skipStage = false;\n          }\n\n      }\n\n      if (Tabulator.prototype.helpers.elVisible(self.element)) {\n        if (renderInPosition) {\n          self.reRenderInPosition();\n        } else {\n          self.renderTable();\n\n          if (table.options.layoutColumnsOnNewData) {\n            self.table.columnManager.redraw(true);\n          }\n        }\n      }\n\n      if (table.modExists(\"columnCalcs\")) {\n        table.modules.columnCalcs.recalc(this.activeRows);\n      }\n    }\n  }; //regenerate row numbers for row number formatter if in use\n\n\n  RowManager.prototype.regenerateRowNumbers = function () {\n    var _this14 = this;\n\n    if (this.rowNumColumn) {\n      this.activeRows.forEach(function (row) {\n        var cell = row.getCell(_this14.rowNumColumn);\n\n        if (cell) {\n          cell._generateContents();\n        }\n      });\n    }\n  };\n\n  RowManager.prototype.setActiveRows = function (activeRows) {\n    this.activeRows = activeRows;\n    this.activeRowsCount = this.activeRows.length;\n  }; //reset display rows array\n\n\n  RowManager.prototype.resetDisplayRows = function () {\n    this.displayRows = [];\n    this.displayRows.push(this.activeRows.slice(0));\n    this.displayRowsCount = this.displayRows[0].length;\n\n    if (this.table.modExists(\"frozenRows\")) {\n      this.table.modules.frozenRows.setDisplayIndex(0);\n    }\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.setDisplayIndex(0);\n    }\n\n    if (this.table.options.pagination && this.table.modExists(\"page\")) {\n      this.table.modules.page.setDisplayIndex(0);\n    }\n  };\n\n  RowManager.prototype.getNextDisplayIndex = function () {\n    return this.displayRows.length;\n  }; //set display row pipeline data\n\n\n  RowManager.prototype.setDisplayRows = function (displayRows, index) {\n    var output = true;\n\n    if (index && typeof this.displayRows[index] != \"undefined\") {\n      this.displayRows[index] = displayRows;\n      output = true;\n    } else {\n      this.displayRows.push(displayRows);\n      output = index = this.displayRows.length - 1;\n    }\n\n    if (index == this.displayRows.length - 1) {\n      this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n    }\n\n    return output;\n  };\n\n  RowManager.prototype.getDisplayRows = function (index) {\n    if (typeof index == \"undefined\") {\n      return this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [];\n    } else {\n      return this.displayRows[index] || [];\n    }\n  };\n\n  RowManager.prototype.getVisibleRows = function (viewable) {\n    var topEdge = this.element.scrollTop,\n        bottomEdge = this.element.clientHeight + topEdge,\n        topFound = false,\n        topRow = 0,\n        bottomRow = 0,\n        rows = this.getDisplayRows();\n\n    if (viewable) {\n      this.getDisplayRows();\n\n      for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n        if (rows[i]) {\n          if (!topFound) {\n            if (topEdge - rows[i].getElement().offsetTop >= 0) {\n              topRow = i;\n            } else {\n              topFound = true;\n\n              if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n                bottomRow = i;\n              } else {\n                break;\n              }\n            }\n          } else {\n            if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n              bottomRow = i;\n            } else {\n              break;\n            }\n          }\n        }\n      }\n    } else {\n      topRow = this.vDomTop;\n      bottomRow = this.vDomBottom;\n    }\n\n    return rows.slice(topRow, bottomRow + 1);\n  }; //repeat action accross display rows\n\n\n  RowManager.prototype.displayRowIterator = function (callback) {\n    this.displayRows.forEach(callback);\n    this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n  }; //return only actual rows (not group headers etc)\n\n\n  RowManager.prototype.getRows = function (active) {\n    var rows;\n\n    switch (active) {\n      case \"active\":\n        rows = this.activeRows;\n        break;\n\n      case \"display\":\n        rows = this.table.rowManager.getDisplayRows();\n        break;\n\n      case \"visible\":\n        rows = this.getVisibleRows(true);\n        break;\n\n      default:\n        rows = this.rows;\n    }\n\n    return rows;\n  }; ///////////////// Table Rendering /////////////////\n  //trigger rerender of table in current position\n\n\n  RowManager.prototype.reRenderInPosition = function (callback) {\n    if (this.getRenderMode() == \"virtual\") {\n      if (this.redrawBlock) {\n        if (callback) {\n          callback();\n        } else {\n          this.redrawBlockRederInPosition = true;\n        }\n      } else {\n        var scrollTop = this.element.scrollTop;\n        var topRow = false;\n        var topOffset = false;\n        var left = this.scrollLeft;\n        var rows = this.getDisplayRows();\n\n        for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n          if (rows[i]) {\n            var diff = scrollTop - rows[i].getElement().offsetTop;\n\n            if (topOffset === false || Math.abs(diff) < topOffset) {\n              topOffset = diff;\n              topRow = i;\n            } else {\n              break;\n            }\n          }\n        }\n\n        if (callback) {\n          callback();\n        }\n\n        this._virtualRenderFill(topRow === false ? this.displayRowsCount - 1 : topRow, true, topOffset || 0);\n\n        this.scrollHorizontal(left);\n      }\n    } else {\n      this.renderTable();\n\n      if (callback) {\n        callback();\n      }\n    }\n  };\n\n  RowManager.prototype.setRenderMode = function () {\n    if (this.table.options.virtualDom) {\n      this.renderMode = \"virtual\";\n\n      if (this.table.element.clientHeight || this.table.options.height) {\n        this.fixedHeight = true;\n      } else {\n        this.fixedHeight = false;\n      }\n    } else {\n      this.renderMode = \"classic\";\n    }\n  };\n\n  RowManager.prototype.getRenderMode = function () {\n    return this.renderMode;\n  };\n\n  RowManager.prototype.renderTable = function () {\n    this.table.options.renderStarted.call(this.table);\n    this.element.scrollTop = 0;\n\n    switch (this.renderMode) {\n      case \"classic\":\n        this._simpleRender();\n\n        break;\n\n      case \"virtual\":\n        this._virtualRenderFill();\n\n        break;\n    }\n\n    if (this.firstRender) {\n      if (this.displayRowsCount) {\n        this.firstRender = false;\n        this.table.modules.layout.layout();\n      } else {\n        this.renderEmptyScroll();\n      }\n    }\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layout();\n    }\n\n    if (!this.displayRowsCount) {\n      if (this.table.options.placeholder) {\n        this.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n        this.getElement().appendChild(this.table.options.placeholder);\n        this.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n      }\n    }\n\n    this.table.options.renderComplete.call(this.table);\n  }; //simple render on heightless table\n\n\n  RowManager.prototype._simpleRender = function () {\n    this._clearVirtualDom();\n\n    if (this.displayRowsCount) {\n      this.checkClassicModeGroupHeaderWidth();\n    } else {\n      this.renderEmptyScroll();\n    }\n  };\n\n  RowManager.prototype.checkClassicModeGroupHeaderWidth = function () {\n    var self = this,\n        element = this.tableElement,\n        onlyGroupHeaders = true;\n    self.getDisplayRows().forEach(function (row, index) {\n      self.styleRow(row, index);\n      element.appendChild(row.getElement());\n      row.initialize(true);\n\n      if (row.type !== \"group\") {\n        onlyGroupHeaders = false;\n      }\n    });\n\n    if (onlyGroupHeaders) {\n      element.style.minWidth = self.table.columnManager.getWidth() + \"px\";\n    } else {\n      element.style.minWidth = \"\";\n    }\n  }; //show scrollbars on empty table div\n\n\n  RowManager.prototype.renderEmptyScroll = function () {\n    if (this.table.options.placeholder) {\n      this.tableElement.style.display = \"none\";\n    } else {\n      this.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n      this.tableElement.style.minHeight = \"1px\";\n      this.tableElement.style.visibility = \"hidden\";\n    }\n  };\n\n  RowManager.prototype._clearVirtualDom = function () {\n    var element = this.tableElement;\n\n    if (this.table.options.placeholder && this.table.options.placeholder.parentNode) {\n      this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\n    } // element.children.detach();\n\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    element.style.paddingTop = \"\";\n    element.style.paddingBottom = \"\";\n    element.style.minWidth = \"\";\n    element.style.minHeight = \"\";\n    element.style.display = \"\";\n    element.style.visibility = \"\";\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.vDomTop = 0;\n    this.vDomBottom = 0;\n    this.vDomTopPad = 0;\n    this.vDomBottomPad = 0;\n  };\n\n  RowManager.prototype.styleRow = function (row, index) {\n    var rowEl = row.getElement();\n\n    if (index % 2) {\n      rowEl.classList.add(\"tabulator-row-even\");\n      rowEl.classList.remove(\"tabulator-row-odd\");\n    } else {\n      rowEl.classList.add(\"tabulator-row-odd\");\n      rowEl.classList.remove(\"tabulator-row-even\");\n    }\n  }; //full virtual render\n\n\n  RowManager.prototype._virtualRenderFill = function (position, forceMove, offset) {\n    var self = this,\n        element = self.tableElement,\n        holder = self.element,\n        topPad = 0,\n        rowsHeight = 0,\n        topPadHeight = 0,\n        i = 0,\n        onlyGroupHeaders = true,\n        rows = self.getDisplayRows();\n    position = position || 0;\n    offset = offset || 0;\n\n    if (!position) {\n      self._clearVirtualDom();\n    } else {\n      while (element.firstChild) {\n        element.removeChild(element.firstChild);\n      } //check if position is too close to bottom of table\n\n\n      var heightOccupied = (self.displayRowsCount - position + 1) * self.vDomRowHeight;\n\n      if (heightOccupied < self.height) {\n        position -= Math.ceil((self.height - heightOccupied) / self.vDomRowHeight);\n\n        if (position < 0) {\n          position = 0;\n        }\n      } //calculate initial pad\n\n\n      topPad = Math.min(Math.max(Math.floor(self.vDomWindowBuffer / self.vDomRowHeight), self.vDomWindowMinMarginRows), position);\n      position -= topPad;\n    }\n\n    if (self.displayRowsCount && Tabulator.prototype.helpers.elVisible(self.element)) {\n      self.vDomTop = position;\n      self.vDomBottom = position - 1;\n\n      while ((rowsHeight <= self.height + self.vDomWindowBuffer || i < self.vDomWindowMinTotalRows) && self.vDomBottom < self.displayRowsCount - 1) {\n        var index = self.vDomBottom + 1,\n            row = rows[index],\n            rowHeight = 0;\n        self.styleRow(row, index);\n        element.appendChild(row.getElement());\n\n        if (!row.initialized) {\n          row.initialize(true);\n        } else {\n          if (!row.heightInitialized) {\n            row.normalizeHeight(true);\n          }\n        }\n\n        rowHeight = row.getHeight();\n\n        if (i < topPad) {\n          topPadHeight += rowHeight;\n        } else {\n          rowsHeight += rowHeight;\n        }\n\n        if (rowHeight > this.vDomWindowBuffer) {\n          this.vDomWindowBuffer = rowHeight * 2;\n        }\n\n        if (row.type !== \"group\") {\n          onlyGroupHeaders = false;\n        }\n\n        self.vDomBottom++;\n        i++;\n      }\n\n      if (!position) {\n        this.vDomTopPad = 0; //adjust rowheight to match average of rendered elements\n\n        self.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n        self.vDomBottomPad = self.vDomRowHeight * (self.displayRowsCount - self.vDomBottom - 1);\n        self.vDomScrollHeight = topPadHeight + rowsHeight + self.vDomBottomPad - self.height;\n      } else {\n        self.vDomTopPad = !forceMove ? self.scrollTop - topPadHeight : self.vDomRowHeight * this.vDomTop + offset;\n        self.vDomBottomPad = self.vDomBottom == self.displayRowsCount - 1 ? 0 : Math.max(self.vDomScrollHeight - self.vDomTopPad - rowsHeight - topPadHeight, 0);\n      }\n\n      element.style.paddingTop = self.vDomTopPad + \"px\";\n      element.style.paddingBottom = self.vDomBottomPad + \"px\";\n\n      if (forceMove) {\n        this.scrollTop = self.vDomTopPad + topPadHeight + offset - (this.element.scrollWidth > this.element.clientWidth ? this.element.offsetHeight - this.element.clientHeight : 0);\n      }\n\n      this.scrollTop = Math.min(this.scrollTop, this.element.scrollHeight - this.height); //adjust for horizontal scrollbar if present (and not at top of table)\n\n      if (this.element.scrollWidth > this.element.offsetWidth && forceMove) {\n        this.scrollTop += this.element.offsetHeight - this.element.clientHeight;\n      }\n\n      this.vDomScrollPosTop = this.scrollTop;\n      this.vDomScrollPosBottom = this.scrollTop;\n      holder.scrollTop = this.scrollTop;\n      element.style.minWidth = onlyGroupHeaders ? self.table.columnManager.getWidth() + \"px\" : \"\";\n\n      if (self.table.options.groupBy) {\n        if (self.table.modules.layout.getMode() != \"fitDataFill\" && self.displayRowsCount == self.table.modules.groupRows.countGroups()) {\n          self.tableElement.style.minWidth = self.table.columnManager.getWidth();\n        }\n      }\n    } else {\n      this.renderEmptyScroll();\n    }\n\n    if (!this.fixedHeight) {\n      this.adjustTableSize();\n    }\n  }; //handle vertical scrolling\n\n\n  RowManager.prototype.scrollVertical = function (dir) {\n    var topDiff = this.scrollTop - this.vDomScrollPosTop;\n    var bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n    var margin = this.vDomWindowBuffer * 2;\n\n    if (-topDiff > margin || bottomDiff > margin) {\n      //if big scroll redraw table;\n      var left = this.scrollLeft;\n\n      this._virtualRenderFill(Math.floor(this.element.scrollTop / this.element.scrollHeight * this.displayRowsCount));\n\n      this.scrollHorizontal(left);\n    } else {\n      if (dir) {\n        //scrolling up\n        if (topDiff < 0) {\n          this._addTopRow(-topDiff);\n        }\n\n        if (bottomDiff < 0) {\n          //hide bottom row if needed\n          if (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\n            this._removeBottomRow(-bottomDiff);\n          } else {\n            this.vDomScrollPosBottom = this.scrollTop;\n          }\n        }\n      } else {\n        //scrolling down\n        if (topDiff >= 0) {\n          //hide top row if needed\n          if (this.scrollTop > this.vDomWindowBuffer) {\n            this._removeTopRow(topDiff);\n          } else {\n            this.vDomScrollPosTop = this.scrollTop;\n          }\n        }\n\n        if (bottomDiff >= 0) {\n          this._addBottomRow(bottomDiff);\n        }\n      }\n    }\n  };\n\n  RowManager.prototype._addTopRow = function (topDiff) {\n    var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var table = this.tableElement,\n        rows = this.getDisplayRows();\n\n    if (this.vDomTop) {\n      var index = this.vDomTop - 1,\n          topRow = rows[index],\n          topRowHeight = topRow.getHeight() || this.vDomRowHeight; //hide top row if needed\n\n      if (topDiff >= topRowHeight) {\n        this.styleRow(topRow, index);\n        table.insertBefore(topRow.getElement(), table.firstChild);\n\n        if (!topRow.initialized || !topRow.heightInitialized) {\n          this.vDomTopNewRows.push(topRow);\n\n          if (!topRow.heightInitialized) {\n            topRow.clearCellHeight();\n          }\n        }\n\n        topRow.initialize();\n        this.vDomTopPad -= topRowHeight;\n\n        if (this.vDomTopPad < 0) {\n          this.vDomTopPad = index * this.vDomRowHeight;\n        }\n\n        if (!index) {\n          this.vDomTopPad = 0;\n        }\n\n        table.style.paddingTop = this.vDomTopPad + \"px\";\n        this.vDomScrollPosTop -= topRowHeight;\n        this.vDomTop--;\n      }\n\n      topDiff = -(this.scrollTop - this.vDomScrollPosTop);\n\n      if (topRow.getHeight() > this.vDomWindowBuffer) {\n        this.vDomWindowBuffer = topRow.getHeight() * 2;\n      }\n\n      if (i < this.vDomMaxRenderChain && this.vDomTop && topDiff >= (rows[this.vDomTop - 1].getHeight() || this.vDomRowHeight)) {\n        this._addTopRow(topDiff, i + 1);\n      } else {\n        this._quickNormalizeRowHeight(this.vDomTopNewRows);\n      }\n    }\n  };\n\n  RowManager.prototype._removeTopRow = function (topDiff) {\n    var table = this.tableElement,\n        topRow = this.getDisplayRows()[this.vDomTop],\n        topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n    if (topDiff >= topRowHeight) {\n      var rowEl = topRow.getElement();\n      rowEl.parentNode.removeChild(rowEl);\n      this.vDomTopPad += topRowHeight;\n      table.style.paddingTop = this.vDomTopPad + \"px\";\n      this.vDomScrollPosTop += this.vDomTop ? topRowHeight : topRowHeight + this.vDomWindowBuffer;\n      this.vDomTop++;\n      topDiff = this.scrollTop - this.vDomScrollPosTop;\n\n      this._removeTopRow(topDiff);\n    }\n  };\n\n  RowManager.prototype._addBottomRow = function (bottomDiff) {\n    var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var table = this.tableElement,\n        rows = this.getDisplayRows();\n\n    if (this.vDomBottom < this.displayRowsCount - 1) {\n      var index = this.vDomBottom + 1,\n          bottomRow = rows[index],\n          bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight; //hide bottom row if needed\n\n      if (bottomDiff >= bottomRowHeight) {\n        this.styleRow(bottomRow, index);\n        table.appendChild(bottomRow.getElement());\n\n        if (!bottomRow.initialized || !bottomRow.heightInitialized) {\n          this.vDomBottomNewRows.push(bottomRow);\n\n          if (!bottomRow.heightInitialized) {\n            bottomRow.clearCellHeight();\n          }\n        }\n\n        bottomRow.initialize();\n        this.vDomBottomPad -= bottomRowHeight;\n\n        if (this.vDomBottomPad < 0 || index == this.displayRowsCount - 1) {\n          this.vDomBottomPad = 0;\n        }\n\n        table.style.paddingBottom = this.vDomBottomPad + \"px\";\n        this.vDomScrollPosBottom += bottomRowHeight;\n        this.vDomBottom++;\n      }\n\n      bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\n      if (bottomRow.getHeight() > this.vDomWindowBuffer) {\n        this.vDomWindowBuffer = bottomRow.getHeight() * 2;\n      }\n\n      if (i < this.vDomMaxRenderChain && this.vDomBottom < this.displayRowsCount - 1 && bottomDiff >= (rows[this.vDomBottom + 1].getHeight() || this.vDomRowHeight)) {\n        this._addBottomRow(bottomDiff, i + 1);\n      } else {\n        this._quickNormalizeRowHeight(this.vDomBottomNewRows);\n      }\n    }\n  };\n\n  RowManager.prototype._removeBottomRow = function (bottomDiff) {\n    var table = this.tableElement,\n        bottomRow = this.getDisplayRows()[this.vDomBottom],\n        bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n    if (bottomDiff >= bottomRowHeight) {\n      var rowEl = bottomRow.getElement();\n\n      if (rowEl.parentNode) {\n        rowEl.parentNode.removeChild(rowEl);\n      }\n\n      this.vDomBottomPad += bottomRowHeight;\n\n      if (this.vDomBottomPad < 0) {\n        this.vDomBottomPad = 0;\n      }\n\n      table.style.paddingBottom = this.vDomBottomPad + \"px\";\n      this.vDomScrollPosBottom -= bottomRowHeight;\n      this.vDomBottom--;\n      bottomDiff = -(this.scrollTop - this.vDomScrollPosBottom);\n\n      this._removeBottomRow(bottomDiff);\n    }\n  };\n\n  RowManager.prototype._quickNormalizeRowHeight = function (rows) {\n    rows.forEach(function (row) {\n      row.calcHeight();\n    });\n    rows.forEach(function (row) {\n      row.setCellHeight();\n    });\n    rows.length = 0;\n  }; //normalize height of active rows\n\n\n  RowManager.prototype.normalizeHeight = function () {\n    this.activeRows.forEach(function (row) {\n      row.normalizeHeight();\n    });\n  }; //adjust the height of the table holder to fit in the Tabulator element\n\n\n  RowManager.prototype.adjustTableSize = function () {\n    var initialHeight = this.element.clientHeight,\n        modExists;\n\n    if (this.renderMode === \"virtual\") {\n      var otherHeight = this.columnManager.getElement().offsetHeight + (this.table.footerManager && !this.table.footerManager.external ? this.table.footerManager.getElement().offsetHeight : 0);\n\n      if (this.fixedHeight) {\n        this.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\n        this.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n        this.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n      } else {\n        this.element.style.height = \"\";\n        this.element.style.height = this.table.element.clientHeight - otherHeight + \"px\";\n        this.element.scrollTop = this.scrollTop;\n      }\n\n      this.height = this.element.clientHeight;\n      this.vDomWindowBuffer = this.table.options.virtualDomBuffer || this.height; //check if the table has changed size when dealing with variable height tables\n\n      if (!this.fixedHeight && initialHeight != this.element.clientHeight) {\n        modExists = this.table.modExists(\"resizeTable\");\n\n        if (modExists && !this.table.modules.resizeTable.autoResize || !modExists) {\n          this.redraw();\n        }\n      }\n    }\n  }; //renitialize all rows\n\n\n  RowManager.prototype.reinitialize = function () {\n    this.rows.forEach(function (row) {\n      row.reinitialize();\n    });\n  }; //prevent table from being redrawn\n\n\n  RowManager.prototype.blockRedraw = function () {\n    this.redrawBlock = true;\n    this.redrawBlockRestoreConfig = false;\n  }; //restore table redrawing\n\n\n  RowManager.prototype.restoreRedraw = function () {\n    this.redrawBlock = false;\n\n    if (this.redrawBlockRestoreConfig) {\n      this.refreshActiveData(this.redrawBlockRestoreConfig.stage, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n      this.redrawBlockRestoreConfig = false;\n    } else {\n      if (this.redrawBlockRederInPosition) {\n        this.reRenderInPosition();\n      }\n    }\n\n    this.redrawBlockRederInPosition = false;\n  }; //redraw table\n\n\n  RowManager.prototype.redraw = function (force) {\n    var pos = 0,\n        left = this.scrollLeft;\n    this.adjustTableSize();\n    this.table.tableWidth = this.table.element.clientWidth;\n\n    if (!force) {\n      if (this.renderMode == \"classic\") {\n        if (this.table.options.groupBy) {\n          this.refreshActiveData(\"group\", false, false);\n        } else {\n          this._simpleRender();\n        }\n      } else {\n        this.reRenderInPosition();\n        this.scrollHorizontal(left);\n      }\n\n      if (!this.displayRowsCount) {\n        if (this.table.options.placeholder) {\n          this.getElement().appendChild(this.table.options.placeholder);\n        }\n      }\n    } else {\n      this.renderTable();\n    }\n  };\n\n  RowManager.prototype.resetScroll = function () {\n    this.element.scrollLeft = 0;\n    this.element.scrollTop = 0;\n\n    if (this.table.browser === \"ie\") {\n      var event = document.createEvent(\"Event\");\n      event.initEvent(\"scroll\", false, true);\n      this.element.dispatchEvent(event);\n    } else {\n      this.element.dispatchEvent(new Event('scroll'));\n    }\n  }; //public row object\n\n\n  var RowComponent = function RowComponent(row) {\n    this._row = row;\n  };\n\n  RowComponent.prototype.getData = function (transform) {\n    return this._row.getData(transform);\n  };\n\n  RowComponent.prototype.getElement = function () {\n    return this._row.getElement();\n  };\n\n  RowComponent.prototype.getCells = function () {\n    var cells = [];\n\n    this._row.getCells().forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n\n    return cells;\n  };\n\n  RowComponent.prototype.getCell = function (column) {\n    var cell = this._row.getCell(column);\n\n    return cell ? cell.getComponent() : false;\n  };\n\n  RowComponent.prototype.getIndex = function () {\n    return this._row.getData(\"data\")[this._row.table.options.index];\n  };\n\n  RowComponent.prototype.getPosition = function (active) {\n    return this._row.table.rowManager.getRowPosition(this._row, active);\n  };\n\n  RowComponent.prototype.delete = function () {\n    return this._row.delete();\n  };\n\n  RowComponent.prototype.scrollTo = function () {\n    return this._row.table.rowManager.scrollToRow(this._row);\n  };\n\n  RowComponent.prototype.pageTo = function () {\n    if (this._row.table.modExists(\"page\", true)) {\n      return this._row.table.modules.page.setPageToRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.move = function (to, after) {\n    this._row.moveToRow(to, after);\n  };\n\n  RowComponent.prototype.update = function (data) {\n    return this._row.updateData(data);\n  };\n\n  RowComponent.prototype.normalizeHeight = function () {\n    this._row.normalizeHeight(true);\n  };\n\n  RowComponent.prototype.select = function () {\n    this._row.table.modules.selectRow.selectRows(this._row);\n  };\n\n  RowComponent.prototype.deselect = function () {\n    this._row.table.modules.selectRow.deselectRows(this._row);\n  };\n\n  RowComponent.prototype.toggleSelect = function () {\n    this._row.table.modules.selectRow.toggleRow(this._row);\n  };\n\n  RowComponent.prototype.isSelected = function () {\n    return this._row.table.modules.selectRow.isRowSelected(this._row);\n  };\n\n  RowComponent.prototype._getSelf = function () {\n    return this._row;\n  };\n\n  RowComponent.prototype.freeze = function () {\n    if (this._row.table.modExists(\"frozenRows\", true)) {\n      this._row.table.modules.frozenRows.freezeRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.unfreeze = function () {\n    if (this._row.table.modExists(\"frozenRows\", true)) {\n      this._row.table.modules.frozenRows.unfreezeRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.treeCollapse = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      this._row.table.modules.dataTree.collapseRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.treeExpand = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      this._row.table.modules.dataTree.expandRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.treeToggle = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      this._row.table.modules.dataTree.toggleRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.getTreeParent = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      return this._row.table.modules.dataTree.getTreeParent(this._row);\n    }\n\n    return false;\n  };\n\n  RowComponent.prototype.getTreeChildren = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      return this._row.table.modules.dataTree.getTreeChildren(this._row);\n    }\n\n    return false;\n  };\n\n  RowComponent.prototype.reformat = function () {\n    return this._row.reinitialize();\n  };\n\n  RowComponent.prototype.getGroup = function () {\n    return this._row.getGroup().getComponent();\n  };\n\n  RowComponent.prototype.getTable = function () {\n    return this._row.table;\n  };\n\n  RowComponent.prototype.getNextRow = function () {\n    var row = this._row.nextRow();\n\n    return row ? row.getComponent() : row;\n  };\n\n  RowComponent.prototype.getPrevRow = function () {\n    var row = this._row.prevRow();\n\n    return row ? row.getComponent() : row;\n  };\n\n  var Row = function Row(data, parent) {\n    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"row\";\n    this.table = parent.table;\n    this.parent = parent;\n    this.data = {};\n    this.type = type; //type of element\n\n    this.element = this.createElement();\n    this.modules = {}; //hold module variables;\n\n    this.cells = [];\n    this.height = 0; //hold element height\n\n    this.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\n\n    this.manualHeight = false; //user has manually set row height\n\n    this.outerHeight = 0; //holde lements outer height\n\n    this.initialized = false; //element has been rendered\n\n    this.heightInitialized = false; //element has resized cells to fit\n\n    this.setData(data);\n    this.generateElement();\n  };\n\n  Row.prototype.createElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    el.setAttribute(\"role\", \"row\");\n    return el;\n  };\n\n  Row.prototype.getElement = function () {\n    return this.element;\n  };\n\n  Row.prototype.detachElement = function () {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  };\n\n  Row.prototype.generateElement = function () {\n    var self = this,\n        dblTap,\n        tapHold,\n        tap; //set row selection characteristics\n\n    if (self.table.options.selectable !== false && self.table.modExists(\"selectRow\")) {\n      self.table.modules.selectRow.initializeRow(this);\n    } //setup movable rows\n\n\n    if (self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n      self.table.modules.moveRow.initializeRow(this);\n    } //setup data tree\n\n\n    if (self.table.options.dataTree !== false && self.table.modExists(\"dataTree\")) {\n      self.table.modules.dataTree.initializeRow(this);\n    } //setup column colapse container\n\n\n    if (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n      self.table.modules.responsiveLayout.initializeRow(this);\n    } //set column menu\n\n\n    if (self.table.options.rowContextMenu && this.table.modExists(\"menu\")) {\n      self.table.modules.menu.initializeRow(this);\n    } //handle row click events\n\n\n    if (self.table.options.rowClick) {\n      self.element.addEventListener(\"click\", function (e) {\n        self.table.options.rowClick(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowDblClick) {\n      self.element.addEventListener(\"dblclick\", function (e) {\n        self.table.options.rowDblClick(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowContext) {\n      self.element.addEventListener(\"contextmenu\", function (e) {\n        self.table.options.rowContext(e, self.getComponent());\n      });\n    } //handle mouse events\n\n\n    if (self.table.options.rowMouseEnter) {\n      self.element.addEventListener(\"mouseenter\", function (e) {\n        self.table.options.rowMouseEnter(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowMouseLeave) {\n      self.element.addEventListener(\"mouseleave\", function (e) {\n        self.table.options.rowMouseLeave(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowMouseOver) {\n      self.element.addEventListener(\"mouseover\", function (e) {\n        self.table.options.rowMouseOver(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowMouseOut) {\n      self.element.addEventListener(\"mouseout\", function (e) {\n        self.table.options.rowMouseOut(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowMouseMove) {\n      self.element.addEventListener(\"mousemove\", function (e) {\n        self.table.options.rowMouseMove(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowTap) {\n      tap = false;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        tap = true;\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (tap) {\n          self.table.options.rowTap(e, self.getComponent());\n        }\n\n        tap = false;\n      });\n    }\n\n    if (self.table.options.rowDblTap) {\n      dblTap = null;\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (dblTap) {\n          clearTimeout(dblTap);\n          dblTap = null;\n          self.table.options.rowDblTap(e, self.getComponent());\n        } else {\n          dblTap = setTimeout(function () {\n            clearTimeout(dblTap);\n            dblTap = null;\n          }, 300);\n        }\n      });\n    }\n\n    if (self.table.options.rowTapHold) {\n      tapHold = null;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = setTimeout(function () {\n          clearTimeout(tapHold);\n          tapHold = null;\n          tap = false;\n          self.table.options.rowTapHold(e, self.getComponent());\n        }, 1000);\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = null;\n      });\n    }\n  };\n\n  Row.prototype.generateCells = function () {\n    this.cells = this.table.columnManager.generateCells(this);\n  }; //functions to setup on first render\n\n\n  Row.prototype.initialize = function (force) {\n    var self = this;\n\n    if (!self.initialized || force) {\n      self.deleteCells();\n\n      while (self.element.firstChild) {\n        self.element.removeChild(self.element.firstChild);\n      } //handle frozen cells\n\n\n      if (this.table.modExists(\"frozenColumns\")) {\n        this.table.modules.frozenColumns.layoutRow(this);\n      }\n\n      this.generateCells();\n      self.cells.forEach(function (cell) {\n        self.element.appendChild(cell.getElement());\n        cell.cellRendered();\n      });\n\n      if (force) {\n        self.normalizeHeight();\n      } //setup movable rows\n\n\n      if (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n        self.table.modules.dataTree.layoutRow(this);\n      } //setup column colapse container\n\n\n      if (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n        self.table.modules.responsiveLayout.layoutRow(this);\n      }\n\n      if (self.table.options.rowFormatter) {\n        self.table.options.rowFormatter(self.getComponent());\n      } //set resizable handles\n\n\n      if (self.table.options.resizableRows && self.table.modExists(\"resizeRows\")) {\n        self.table.modules.resizeRows.initializeRow(self);\n      }\n\n      self.initialized = true;\n    }\n  };\n\n  Row.prototype.reinitializeHeight = function () {\n    this.heightInitialized = false;\n\n    if (this.element.offsetParent !== null) {\n      this.normalizeHeight(true);\n    }\n  };\n\n  Row.prototype.reinitialize = function () {\n    this.initialized = false;\n    this.heightInitialized = false;\n\n    if (!this.manualHeight) {\n      this.height = 0;\n      this.heightStyled = \"\";\n    }\n\n    if (this.element.offsetParent !== null) {\n      this.initialize(true);\n    }\n  }; //get heights when doing bulk row style calcs in virtual DOM\n\n\n  Row.prototype.calcHeight = function (force) {\n    var maxHeight = 0,\n        minHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n    this.cells.forEach(function (cell) {\n      var height = cell.getHeight();\n\n      if (height > maxHeight) {\n        maxHeight = height;\n      }\n    });\n\n    if (force) {\n      this.height = Math.max(maxHeight, minHeight);\n    } else {\n      this.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n    }\n\n    this.heightStyled = this.height ? this.height + \"px\" : \"\";\n    this.outerHeight = this.element.offsetHeight;\n  }; //set of cells\n\n\n  Row.prototype.setCellHeight = function () {\n    this.cells.forEach(function (cell) {\n      cell.setHeight();\n    });\n    this.heightInitialized = true;\n  };\n\n  Row.prototype.clearCellHeight = function () {\n    this.cells.forEach(function (cell) {\n      cell.clearHeight();\n    });\n  }; //normalize the height of elements in the row\n\n\n  Row.prototype.normalizeHeight = function (force) {\n    if (force) {\n      this.clearCellHeight();\n    }\n\n    this.calcHeight(force);\n    this.setCellHeight();\n  }; // Row.prototype.setHeight = function(height){\n  // \tthis.height = height;\n  // \tthis.setCellHeight();\n  // };\n  //set height of rows\n\n\n  Row.prototype.setHeight = function (height, force) {\n    if (this.height != height || force) {\n      this.manualHeight = true;\n      this.height = height;\n      this.heightStyled = height ? height + \"px\" : \"\";\n      this.setCellHeight(); // this.outerHeight = this.element.outerHeight();\n\n      this.outerHeight = this.element.offsetHeight;\n    }\n  }; //return rows outer height\n\n\n  Row.prototype.getHeight = function () {\n    return this.outerHeight;\n  }; //return rows outer Width\n\n\n  Row.prototype.getWidth = function () {\n    return this.element.offsetWidth;\n  }; //////////////// Cell Management /////////////////\n\n\n  Row.prototype.deleteCell = function (cell) {\n    var index = this.cells.indexOf(cell);\n\n    if (index > -1) {\n      this.cells.splice(index, 1);\n    }\n  }; //////////////// Data Management /////////////////\n\n\n  Row.prototype.setData = function (data) {\n    if (this.table.modExists(\"mutator\")) {\n      data = this.table.modules.mutator.transformRow(data, \"data\");\n    }\n\n    this.data = data;\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n      this.table.modules.reactiveData.watchRow(this);\n    }\n  }; //update the rows data\n\n\n  Row.prototype.updateData = function (updatedData) {\n    var _this15 = this;\n\n    var visible = Tabulator.prototype.helpers.elVisible(this.element),\n        tempData = {},\n        newRowData;\n    return new Promise(function (resolve, reject) {\n      if (typeof updatedData === \"string\") {\n        updatedData = JSON.parse(updatedData);\n      }\n\n      if (_this15.table.options.reactiveData && _this15.table.modExists(\"reactiveData\", true)) {\n        _this15.table.modules.reactiveData.block();\n      } //mutate incomming data if needed\n\n\n      if (_this15.table.modExists(\"mutator\")) {\n        tempData = Object.assign(tempData, _this15.data);\n        tempData = Object.assign(tempData, updatedData);\n        newRowData = _this15.table.modules.mutator.transformRow(tempData, \"data\", updatedData);\n      } else {\n        newRowData = updatedData;\n      } //set data\n\n\n      for (var attrname in newRowData) {\n        _this15.data[attrname] = newRowData[attrname];\n      }\n\n      if (_this15.table.options.reactiveData && _this15.table.modExists(\"reactiveData\", true)) {\n        _this15.table.modules.reactiveData.unblock();\n      } //update affected cells only\n\n\n      for (var attrname in updatedData) {\n        var columns = _this15.table.columnManager.getColumnsByFieldRoot(attrname);\n\n        columns.forEach(function (column) {\n          var cell = _this15.getCell(column.getField());\n\n          if (cell) {\n            var value = column.getFieldValue(newRowData);\n\n            if (cell.getValue() != value) {\n              cell.setValueProcessData(value);\n\n              if (visible) {\n                cell.cellRendered();\n              }\n            }\n          }\n        });\n      } //Partial reinitialization if visible\n\n\n      if (visible) {\n        _this15.normalizeHeight(true);\n\n        if (_this15.table.options.rowFormatter) {\n          _this15.table.options.rowFormatter(_this15.getComponent());\n        }\n      } else {\n        _this15.initialized = false;\n        _this15.height = 0;\n        _this15.heightStyled = \"\";\n      }\n\n      if (_this15.table.options.dataTree !== false && _this15.table.modExists(\"dataTree\") && _this15.table.modules.dataTree.redrawNeeded(updatedData)) {\n        _this15.table.modules.dataTree.initializeRow(_this15);\n\n        _this15.table.modules.dataTree.layoutRow(_this15);\n\n        _this15.table.rowManager.refreshActiveData(\"tree\", false, true);\n      } //this.reinitialize();\n\n\n      _this15.table.options.rowUpdated.call(_this15.table, _this15.getComponent());\n\n      resolve();\n    });\n  };\n\n  Row.prototype.getData = function (transform) {\n    var self = this;\n\n    if (transform) {\n      if (self.table.modExists(\"accessor\")) {\n        return self.table.modules.accessor.transformRow(self.data, transform);\n      }\n    } else {\n      return this.data;\n    }\n  };\n\n  Row.prototype.getCell = function (column) {\n    var match = false;\n    column = this.table.columnManager.findColumn(column);\n    match = this.cells.find(function (cell) {\n      return cell.column === column;\n    });\n    return match;\n  };\n\n  Row.prototype.getCellIndex = function (findCell) {\n    return this.cells.findIndex(function (cell) {\n      return cell === findCell;\n    });\n  };\n\n  Row.prototype.findNextEditableCell = function (index) {\n    var nextCell = false;\n\n    if (index < this.cells.length - 1) {\n      for (var i = index + 1; i < this.cells.length; i++) {\n        var cell = this.cells[i];\n\n        if (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n          var allowEdit = true;\n\n          if (typeof cell.column.modules.edit.check == \"function\") {\n            allowEdit = cell.column.modules.edit.check(cell.getComponent());\n          }\n\n          if (allowEdit) {\n            nextCell = cell;\n            break;\n          }\n        }\n      }\n    }\n\n    return nextCell;\n  };\n\n  Row.prototype.findPrevEditableCell = function (index) {\n    var prevCell = false;\n\n    if (index > 0) {\n      for (var i = index - 1; i >= 0; i--) {\n        var cell = this.cells[i],\n            allowEdit = true;\n\n        if (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n          if (typeof cell.column.modules.edit.check == \"function\") {\n            allowEdit = cell.column.modules.edit.check(cell.getComponent());\n          }\n\n          if (allowEdit) {\n            prevCell = cell;\n            break;\n          }\n        }\n      }\n    }\n\n    return prevCell;\n  };\n\n  Row.prototype.getCells = function () {\n    return this.cells;\n  };\n\n  Row.prototype.nextRow = function () {\n    var row = this.table.rowManager.nextDisplayRow(this, true);\n    return row || false;\n  };\n\n  Row.prototype.prevRow = function () {\n    var row = this.table.rowManager.prevDisplayRow(this, true);\n    return row || false;\n  };\n\n  Row.prototype.moveToRow = function (to, before) {\n    var toRow = this.table.rowManager.findRow(to);\n\n    if (toRow) {\n      this.table.rowManager.moveRowActual(this, toRow, !before);\n      this.table.rowManager.refreshActiveData(\"display\", false, true);\n    } else {\n      console.warn(\"Move Error - No matching row found:\", to);\n    }\n  }; ///////////////////// Actions  /////////////////////\n\n\n  Row.prototype.delete = function () {\n    var _this16 = this;\n\n    return new Promise(function (resolve, reject) {\n      var index, rows;\n\n      if (_this16.table.options.history && _this16.table.modExists(\"history\")) {\n        if (_this16.table.options.groupBy && _this16.table.modExists(\"groupRows\")) {\n          rows = _this16.getGroup().rows;\n          index = rows.indexOf(_this16);\n\n          if (index) {\n            index = rows[index - 1];\n          }\n        } else {\n          index = _this16.table.rowManager.getRowIndex(_this16);\n\n          if (index) {\n            index = _this16.table.rowManager.rows[index - 1];\n          }\n        }\n\n        _this16.table.modules.history.action(\"rowDelete\", _this16, {\n          data: _this16.getData(),\n          pos: !index,\n          index: index\n        });\n      }\n\n      _this16.deleteActual();\n\n      resolve();\n    });\n  };\n\n  Row.prototype.deleteActual = function (blockRedraw) {\n    var index = this.table.rowManager.getRowIndex(this); //deselect row if it is selected\n\n    if (this.table.modExists(\"selectRow\")) {\n      this.table.modules.selectRow._deselectRow(this, true);\n    } //cancel edit if row is currently being edited\n\n\n    if (this.table.modExists(\"edit\")) {\n      if (this.table.modules.edit.currentCell.row === this) {\n        this.table.modules.edit.cancelEdit();\n      }\n    } // if(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\n    // \tthis.table.modules.dataTree.collapseRow(this, true);\n    // }\n    //remove any reactive data watchers from row object\n\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {} // this.table.modules.reactiveData.unwatchRow(this);\n    //remove from group\n\n\n    if (this.modules.group) {\n      this.modules.group.removeRow(this);\n    }\n\n    this.table.rowManager.deleteRow(this, blockRedraw);\n    this.deleteCells();\n    this.initialized = false;\n    this.heightInitialized = false; //recalc column calculations if present\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n        this.table.modules.columnCalcs.recalcRowGroup(this);\n      } else {\n        this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n      }\n    }\n  };\n\n  Row.prototype.deleteCells = function () {\n    var cellCount = this.cells.length;\n\n    for (var i = 0; i < cellCount; i++) {\n      this.cells[0].delete();\n    }\n  };\n\n  Row.prototype.wipe = function () {\n    this.deleteCells();\n\n    while (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild);\n    }\n\n    this.element = false;\n    this.modules = {};\n\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  };\n\n  Row.prototype.getGroup = function () {\n    return this.modules.group || false;\n  }; //////////////// Object Generation /////////////////\n\n\n  Row.prototype.getComponent = function () {\n    return new RowComponent(this);\n  }; //public row object\n\n\n  var CellComponent = function CellComponent(cell) {\n    this._cell = cell;\n  };\n\n  CellComponent.prototype.getValue = function () {\n    return this._cell.getValue();\n  };\n\n  CellComponent.prototype.getOldValue = function () {\n    return this._cell.getOldValue();\n  };\n\n  CellComponent.prototype.getElement = function () {\n    return this._cell.getElement();\n  };\n\n  CellComponent.prototype.getRow = function () {\n    return this._cell.row.getComponent();\n  };\n\n  CellComponent.prototype.getData = function () {\n    return this._cell.row.getData();\n  };\n\n  CellComponent.prototype.getField = function () {\n    return this._cell.column.getField();\n  };\n\n  CellComponent.prototype.getColumn = function () {\n    return this._cell.column.getComponent();\n  };\n\n  CellComponent.prototype.setValue = function (value, mutate) {\n    if (typeof mutate == \"undefined\") {\n      mutate = true;\n    }\n\n    this._cell.setValue(value, mutate);\n  };\n\n  CellComponent.prototype.restoreOldValue = function () {\n    this._cell.setValueActual(this._cell.getOldValue());\n  };\n\n  CellComponent.prototype.edit = function (force) {\n    return this._cell.edit(force);\n  };\n\n  CellComponent.prototype.cancelEdit = function () {\n    this._cell.cancelEdit();\n  };\n\n  CellComponent.prototype.nav = function () {\n    return this._cell.nav();\n  };\n\n  CellComponent.prototype.checkHeight = function () {\n    this._cell.checkHeight();\n  };\n\n  CellComponent.prototype.getTable = function () {\n    return this._cell.table;\n  };\n\n  CellComponent.prototype._getSelf = function () {\n    return this._cell;\n  };\n\n  var Cell = function Cell(column, row) {\n    this.table = column.table;\n    this.column = column;\n    this.row = row;\n    this.element = null;\n    this.value = null;\n    this.oldValue = null;\n    this.modules = {};\n    this.height = null;\n    this.width = null;\n    this.minWidth = null;\n    this.build();\n  }; //////////////// Setup Functions /////////////////\n  //generate element\n\n\n  Cell.prototype.build = function () {\n    this.generateElement();\n    this.setWidth();\n\n    this._configureCell();\n\n    this.setValueActual(this.column.getFieldValue(this.row.data));\n  };\n\n  Cell.prototype.generateElement = function () {\n    this.element = document.createElement('div');\n    this.element.className = \"tabulator-cell\";\n    this.element.setAttribute(\"role\", \"gridcell\");\n    this.element = this.element;\n  };\n\n  Cell.prototype._configureCell = function () {\n    var self = this,\n        cellEvents = self.column.cellEvents,\n        element = self.element,\n        field = this.column.getField(),\n        vertAligns = {\n      top: \"flex-start\",\n      bottom: \"flex-end\",\n      middle: \"center\"\n    },\n        hozAligns = {\n      left: \"flex-start\",\n      right: \"flex-end\",\n      center: \"center\"\n    }; //set text alignment\n\n    element.style.textAlign = self.column.hozAlign;\n\n    if (self.column.vertAlign) {\n      element.style.display = \"inline-flex\";\n      element.style.alignItems = vertAligns[self.column.vertAlign] || \"\";\n\n      if (self.column.hozAlign) {\n        element.style.justifyContent = hozAligns[self.column.hozAlign] || \"\";\n      }\n    }\n\n    if (field) {\n      element.setAttribute(\"tabulator-field\", field);\n    } //add class to cell if needed\n\n\n    if (self.column.definition.cssClass) {\n      var classNames = self.column.definition.cssClass.split(\" \");\n      classNames.forEach(function (className) {\n        element.classList.add(className);\n      });\n    } //update tooltip on mouse enter\n\n\n    if (this.table.options.tooltipGenerationMode === \"hover\") {\n      element.addEventListener(\"mouseenter\", function (e) {\n        self._generateTooltip();\n      });\n    }\n\n    self._bindClickEvents(cellEvents);\n\n    self._bindTouchEvents(cellEvents);\n\n    self._bindMouseEvents(cellEvents);\n\n    if (self.column.modules.edit) {\n      self.table.modules.edit.bindEditor(self);\n    }\n\n    if (self.column.definition.rowHandle && self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n      self.table.modules.moveRow.initializeCell(self);\n    } //hide cell if not visible\n\n\n    if (!self.column.visible) {\n      self.hide();\n    }\n  };\n\n  Cell.prototype._bindClickEvents = function (cellEvents) {\n    var self = this,\n        element = self.element; //set event bindings\n\n    if (cellEvents.cellClick || self.table.options.cellClick) {\n      element.addEventListener(\"click\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellClick) {\n          cellEvents.cellClick.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellClick) {\n          self.table.options.cellClick.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellDblClick || this.table.options.cellDblClick) {\n      element.addEventListener(\"dblclick\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellDblClick) {\n          cellEvents.cellDblClick.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellDblClick) {\n          self.table.options.cellDblClick.call(self.table, e, component);\n        }\n      });\n    } else {\n      element.addEventListener(\"dblclick\", function (e) {\n        if (self.table.modExists(\"edit\")) {\n          if (self.table.modules.edit.currentCell === self) {\n            return; //prevent instant selection of editor content\n          }\n        }\n\n        e.preventDefault();\n\n        try {\n          if (document.selection) {\n            // IE\n            var range = document.body.createTextRange();\n            range.moveToElementText(self.element);\n            range.select();\n          } else if (window.getSelection) {\n            var range = document.createRange();\n            range.selectNode(self.element);\n            window.getSelection().removeAllRanges();\n            window.getSelection().addRange(range);\n          }\n        } catch (e) {}\n      });\n    }\n\n    if (cellEvents.cellContext || this.table.options.cellContext) {\n      element.addEventListener(\"contextmenu\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellContext) {\n          cellEvents.cellContext.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellContext) {\n          self.table.options.cellContext.call(self.table, e, component);\n        }\n      });\n    }\n  };\n\n  Cell.prototype._bindMouseEvents = function (cellEvents) {\n    var self = this,\n        element = self.element;\n\n    if (cellEvents.cellMouseEnter || self.table.options.cellMouseEnter) {\n      element.addEventListener(\"mouseenter\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseEnter) {\n          cellEvents.cellMouseEnter.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseEnter) {\n          self.table.options.cellMouseEnter.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellMouseLeave || self.table.options.cellMouseLeave) {\n      element.addEventListener(\"mouseleave\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseLeave) {\n          cellEvents.cellMouseLeave.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseLeave) {\n          self.table.options.cellMouseLeave.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellMouseOver || self.table.options.cellMouseOver) {\n      element.addEventListener(\"mouseover\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseOver) {\n          cellEvents.cellMouseOver.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseOver) {\n          self.table.options.cellMouseOver.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellMouseOut || self.table.options.cellMouseOut) {\n      element.addEventListener(\"mouseout\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseOut) {\n          cellEvents.cellMouseOut.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseOut) {\n          self.table.options.cellMouseOut.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellMouseMove || self.table.options.cellMouseMove) {\n      element.addEventListener(\"mousemove\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseMove) {\n          cellEvents.cellMouseMove.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseMove) {\n          self.table.options.cellMouseMove.call(self.table, e, component);\n        }\n      });\n    }\n  };\n\n  Cell.prototype._bindTouchEvents = function (cellEvents) {\n    var self = this,\n        element = self.element,\n        dblTap,\n        tapHold,\n        tap;\n\n    if (cellEvents.cellTap || this.table.options.cellTap) {\n      tap = false;\n      element.addEventListener(\"touchstart\", function (e) {\n        tap = true;\n      }, {\n        passive: true\n      });\n      element.addEventListener(\"touchend\", function (e) {\n        if (tap) {\n          var component = self.getComponent();\n\n          if (cellEvents.cellTap) {\n            cellEvents.cellTap.call(self.table, e, component);\n          }\n\n          if (self.table.options.cellTap) {\n            self.table.options.cellTap.call(self.table, e, component);\n          }\n        }\n\n        tap = false;\n      });\n    }\n\n    if (cellEvents.cellDblTap || this.table.options.cellDblTap) {\n      dblTap = null;\n      element.addEventListener(\"touchend\", function (e) {\n        if (dblTap) {\n          clearTimeout(dblTap);\n          dblTap = null;\n          var component = self.getComponent();\n\n          if (cellEvents.cellDblTap) {\n            cellEvents.cellDblTap.call(self.table, e, component);\n          }\n\n          if (self.table.options.cellDblTap) {\n            self.table.options.cellDblTap.call(self.table, e, component);\n          }\n        } else {\n          dblTap = setTimeout(function () {\n            clearTimeout(dblTap);\n            dblTap = null;\n          }, 300);\n        }\n      });\n    }\n\n    if (cellEvents.cellTapHold || this.table.options.cellTapHold) {\n      tapHold = null;\n      element.addEventListener(\"touchstart\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = setTimeout(function () {\n          clearTimeout(tapHold);\n          tapHold = null;\n          tap = false;\n          var component = self.getComponent();\n\n          if (cellEvents.cellTapHold) {\n            cellEvents.cellTapHold.call(self.table, e, component);\n          }\n\n          if (self.table.options.cellTapHold) {\n            self.table.options.cellTapHold.call(self.table, e, component);\n          }\n        }, 1000);\n      }, {\n        passive: true\n      });\n      element.addEventListener(\"touchend\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = null;\n      });\n    }\n  }; //generate cell contents\n\n\n  Cell.prototype._generateContents = function () {\n    var val;\n\n    if (this.table.modExists(\"format\")) {\n      val = this.table.modules.format.formatValue(this);\n    } else {\n      val = this.element.innerHTML = this.value;\n    }\n\n    switch (typeof val === 'undefined' ? 'undefined' : _typeof(val)) {\n      case \"object\":\n        if (val instanceof Node) {\n          //clear previous cell contents\n          while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n          }\n\n          this.element.appendChild(val);\n        } else {\n          this.element.innerHTML = \"\";\n\n          if (val != null) {\n            console.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n          }\n        }\n\n        break;\n\n      case \"undefined\":\n      case \"null\":\n        this.element.innerHTML = \"\";\n        break;\n\n      default:\n        this.element.innerHTML = val;\n    }\n  };\n\n  Cell.prototype.cellRendered = function () {\n    if (this.table.modExists(\"format\") && this.table.modules.format.cellRendered) {\n      this.table.modules.format.cellRendered(this);\n    }\n  }; //generate tooltip text\n\n\n  Cell.prototype._generateTooltip = function () {\n    var tooltip = this.column.tooltip;\n\n    if (tooltip) {\n      if (tooltip === true) {\n        tooltip = this.value;\n      } else if (typeof tooltip == \"function\") {\n        tooltip = tooltip(this.getComponent());\n\n        if (tooltip === false) {\n          tooltip = \"\";\n        }\n      }\n\n      if (typeof tooltip === \"undefined\") {\n        tooltip = \"\";\n      }\n\n      this.element.setAttribute(\"title\", tooltip);\n    } else {\n      this.element.setAttribute(\"title\", \"\");\n    }\n  }; //////////////////// Getters ////////////////////\n\n\n  Cell.prototype.getElement = function () {\n    return this.element;\n  };\n\n  Cell.prototype.getValue = function () {\n    return this.value;\n  };\n\n  Cell.prototype.getOldValue = function () {\n    return this.oldValue;\n  }; //////////////////// Actions ////////////////////\n\n\n  Cell.prototype.setValue = function (value, mutate) {\n    var changed = this.setValueProcessData(value, mutate),\n        component;\n\n    if (changed) {\n      if (this.table.options.history && this.table.modExists(\"history\")) {\n        this.table.modules.history.action(\"cellEdit\", this, {\n          oldValue: this.oldValue,\n          newValue: this.value\n        });\n      }\n\n      component = this.getComponent();\n\n      if (this.column.cellEvents.cellEdited) {\n        this.column.cellEvents.cellEdited.call(this.table, component);\n      }\n\n      this.cellRendered();\n      this.table.options.cellEdited.call(this.table, component);\n      this.table.options.dataEdited.call(this.table, this.table.rowManager.getData());\n    }\n  };\n\n  Cell.prototype.setValueProcessData = function (value, mutate) {\n    var changed = false;\n\n    if (this.value != value) {\n      changed = true;\n\n      if (mutate) {\n        if (this.column.modules.mutate) {\n          value = this.table.modules.mutator.transformCell(this, value);\n        }\n      }\n    }\n\n    this.setValueActual(value);\n\n    if (changed && this.table.modExists(\"columnCalcs\")) {\n      if (this.column.definition.topCalc || this.column.definition.bottomCalc) {\n        if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n          if (this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\") {\n            this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n          }\n\n          if (this.table.options.columnCalcs != \"table\") {\n            this.table.modules.columnCalcs.recalcRowGroup(this.row);\n          }\n        } else {\n          this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n        }\n      }\n    }\n\n    return changed;\n  };\n\n  Cell.prototype.setValueActual = function (value) {\n    this.oldValue = this.value;\n    this.value = value;\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n      this.table.modules.reactiveData.block();\n    }\n\n    this.column.setFieldValue(this.row.data, value);\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n      this.table.modules.reactiveData.unblock();\n    }\n\n    this._generateContents();\n\n    this._generateTooltip(); //set resizable handles\n\n\n    if (this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\")) {\n      this.table.modules.resizeColumns.initializeColumn(\"cell\", this.column, this.element);\n    } //set column menu\n\n\n    if (this.column.definition.contextMenu && this.table.modExists(\"menu\")) {\n      this.table.modules.menu.initializeCell(this);\n    } //handle frozen cells\n\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layoutElement(this.element, this.column);\n    }\n  };\n\n  Cell.prototype.setWidth = function () {\n    this.width = this.column.width;\n    this.element.style.width = this.column.widthStyled;\n  };\n\n  Cell.prototype.clearWidth = function () {\n    this.width = \"\";\n    this.element.style.width = \"\";\n  };\n\n  Cell.prototype.getWidth = function () {\n    return this.width || this.element.offsetWidth;\n  };\n\n  Cell.prototype.setMinWidth = function () {\n    this.minWidth = this.column.minWidth;\n    this.element.style.minWidth = this.column.minWidthStyled;\n  };\n\n  Cell.prototype.checkHeight = function () {\n    // var height = this.element.css(\"height\");\n    this.row.reinitializeHeight();\n  };\n\n  Cell.prototype.clearHeight = function () {\n    this.element.style.height = \"\";\n    this.height = null;\n  };\n\n  Cell.prototype.setHeight = function () {\n    this.height = this.row.height;\n    this.element.style.height = this.row.heightStyled;\n  };\n\n  Cell.prototype.getHeight = function () {\n    return this.height || this.element.offsetHeight;\n  };\n\n  Cell.prototype.show = function () {\n    this.element.style.display = \"\";\n  };\n\n  Cell.prototype.hide = function () {\n    this.element.style.display = \"none\";\n  };\n\n  Cell.prototype.edit = function (force) {\n    if (this.table.modExists(\"edit\", true)) {\n      return this.table.modules.edit.editCell(this, force);\n    }\n  };\n\n  Cell.prototype.cancelEdit = function () {\n    if (this.table.modExists(\"edit\", true)) {\n      var editing = this.table.modules.edit.getCurrentCell();\n\n      if (editing && editing._getSelf() === this) {\n        this.table.modules.edit.cancelEdit();\n      } else {\n        console.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n      }\n    }\n  };\n\n  Cell.prototype.delete = function () {\n    if (!this.table.rowManager.redrawBlock) {\n      this.element.parentNode.removeChild(this.element);\n    }\n\n    this.element = false;\n    this.column.deleteCell(this);\n    this.row.deleteCell(this);\n    this.calcs = {};\n  }; //////////////// Navigation /////////////////\n\n\n  Cell.prototype.nav = function () {\n    var self = this,\n        nextCell = false,\n        index = this.row.getCellIndex(this);\n    return {\n      next: function next() {\n        var nextCell = this.right(),\n            nextRow;\n\n        if (!nextCell) {\n          nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n          if (nextRow) {\n            nextCell = nextRow.findNextEditableCell(-1);\n\n            if (nextCell) {\n              nextCell.edit();\n              return true;\n            }\n          }\n        } else {\n          return true;\n        }\n\n        return false;\n      },\n      prev: function prev() {\n        var nextCell = this.left(),\n            prevRow;\n\n        if (!nextCell) {\n          prevRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n          if (prevRow) {\n            nextCell = prevRow.findPrevEditableCell(prevRow.cells.length);\n\n            if (nextCell) {\n              nextCell.edit();\n              return true;\n            }\n          }\n        } else {\n          return true;\n        }\n\n        return false;\n      },\n      left: function left() {\n        nextCell = self.row.findPrevEditableCell(index);\n\n        if (nextCell) {\n          nextCell.edit();\n          return true;\n        } else {\n          return false;\n        }\n      },\n      right: function right() {\n        nextCell = self.row.findNextEditableCell(index);\n\n        if (nextCell) {\n          nextCell.edit();\n          return true;\n        } else {\n          return false;\n        }\n      },\n      up: function up() {\n        var nextRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n        if (nextRow) {\n          nextRow.cells[index].edit();\n        }\n      },\n      down: function down() {\n        var nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n        if (nextRow) {\n          nextRow.cells[index].edit();\n        }\n      }\n    };\n  };\n\n  Cell.prototype.getIndex = function () {\n    this.row.getCellIndex(this);\n  }; //////////////// Object Generation /////////////////\n\n\n  Cell.prototype.getComponent = function () {\n    return new CellComponent(this);\n  };\n\n  var FooterManager = function FooterManager(table) {\n    this.table = table;\n    this.active = false;\n    this.element = this.createElement(); //containing element\n\n    this.external = false;\n    this.links = [];\n\n    this._initialize();\n  };\n\n  FooterManager.prototype.createElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-footer\");\n    return el;\n  };\n\n  FooterManager.prototype._initialize = function (element) {\n    if (this.table.options.footerElement) {\n      switch (_typeof(this.table.options.footerElement)) {\n        case \"string\":\n          if (this.table.options.footerElement[0] === \"<\") {\n            this.element.innerHTML = this.table.options.footerElement;\n          } else {\n            this.external = true;\n            this.element = document.querySelector(this.table.options.footerElement);\n          }\n\n          break;\n\n        default:\n          this.element = this.table.options.footerElement;\n          break;\n      }\n    }\n  };\n\n  FooterManager.prototype.getElement = function () {\n    return this.element;\n  };\n\n  FooterManager.prototype.append = function (element, parent) {\n    this.activate(parent);\n    this.element.appendChild(element);\n    this.table.rowManager.adjustTableSize();\n  };\n\n  FooterManager.prototype.prepend = function (element, parent) {\n    this.activate(parent);\n    this.element.insertBefore(element, this.element.firstChild);\n    this.table.rowManager.adjustTableSize();\n  };\n\n  FooterManager.prototype.remove = function (element) {\n    element.parentNode.removeChild(element);\n    this.deactivate();\n  };\n\n  FooterManager.prototype.deactivate = function (force) {\n    if (!this.element.firstChild || force) {\n      if (!this.external) {\n        this.element.parentNode.removeChild(this.element);\n      }\n\n      this.active = false;\n    } // this.table.rowManager.adjustTableSize();\n\n  };\n\n  FooterManager.prototype.activate = function (parent) {\n    if (!this.active) {\n      this.active = true;\n\n      if (!this.external) {\n        this.table.element.appendChild(this.getElement());\n        this.table.element.style.display = '';\n      }\n    }\n\n    if (parent) {\n      this.links.push(parent);\n    }\n  };\n\n  FooterManager.prototype.redraw = function () {\n    this.links.forEach(function (link) {\n      link.footerRedraw();\n    });\n  };\n\n  var Tabulator = function Tabulator(element, options) {\n    this.options = {};\n    this.columnManager = null; // hold Column Manager\n\n    this.rowManager = null; //hold Row Manager\n\n    this.footerManager = null; //holder Footer Manager\n\n    this.browser = \"\"; //hold current browser type\n\n    this.browserSlow = false; //handle reduced functionality for slower browsers\n\n    this.browserMobile = false; //check if running on moble, prevent resize cancelling edit on keyboard appearence\n\n    this.modules = {}; //hold all modules bound to this table\n\n    this.initializeElement(element);\n    this.initializeOptions(options || {});\n\n    this._create();\n\n    Tabulator.prototype.comms.register(this); //register table for inderdevice communication\n  }; //default setup options\n\n\n  Tabulator.prototype.defaultOptions = {\n    height: false,\n    //height of tabulator\n    minHeight: false,\n    //minimum height of tabulator\n    maxHeight: false,\n    //maximum height of tabulator\n    layout: \"fitData\",\n    ///layout type \"fitColumns\" | \"fitData\"\n    layoutColumnsOnNewData: false,\n    //update column widths on setData\n    columnMinWidth: 40,\n    //minimum global width for a column\n    columnHeaderVertAlign: \"top\",\n    //vertical alignment of column headers\n    columnVertAlign: false,\n    // DEPRECATED - Left to allow warning\n    resizableColumns: true,\n    //resizable columns\n    resizableRows: false,\n    //resizable rows\n    autoResize: true,\n    //auto resize table\n    columns: [],\n    //store for colum header info\n    cellHozAlign: \"\",\n    //horizontal align columns\n    cellVertAlign: \"\",\n    //certical align columns\n    data: [],\n    //default starting data\n    autoColumns: false,\n    //build columns from data row structure\n    reactiveData: false,\n    //enable data reactivity\n    nestedFieldSeparator: \".\",\n    //seperatpr for nested data\n    tooltips: false,\n    //Tool tip value\n    tooltipsHeader: false,\n    //Tool tip for headers\n    tooltipGenerationMode: \"load\",\n    //when to generate tooltips\n    initialSort: false,\n    //initial sorting criteria\n    initialFilter: false,\n    //initial filtering criteria\n    initialHeaderFilter: false,\n    //initial header filtering criteria\n    columnHeaderSortMulti: true,\n    //multiple or single column sorting\n    sortOrderReverse: false,\n    //reverse internal sort ordering\n    headerSort: true,\n    //set default global header sort\n    headerSortTristate: false,\n    //set default tristate header sorting\n    footerElement: false,\n    //hold footer element\n    index: \"id\",\n    //filed for row index\n    keybindings: [],\n    //array for keybindings\n    tabEndNewRow: false,\n    //create new row when tab to end of table\n    invalidOptionWarnings: true,\n    //allow toggling of invalid option warnings\n    clipboard: false,\n    //enable clipboard\n    clipboardCopyStyled: true,\n    //formatted table data\n    clipboardCopyConfig: false,\n    //clipboard config\n    clipboardCopyFormatter: false,\n    //DEPRICATED - REMOVE in 5.0\n    clipboardCopyRowRange: \"active\",\n    //restrict clipboard to visible rows only\n    clipboardPasteParser: \"table\",\n    //convert pasted clipboard data to rows\n    clipboardPasteAction: \"insert\",\n    //how to insert pasted data into the table\n    clipboardCopied: function clipboardCopied() {},\n    //data has been copied to the clipboard\n    clipboardPasted: function clipboardPasted() {},\n    //data has been pasted into the table\n    clipboardPasteError: function clipboardPasteError() {},\n    //data has not successfully been pasted into the table\n    downloadDataFormatter: false,\n    //function to manipulate table data before it is downloaded\n    downloadReady: function downloadReady(data, blob) {\n      return blob;\n    },\n    //function to manipulate download data\n    downloadComplete: false,\n    //function to manipulate download data\n    downloadConfig: false,\n    //download config\n    dataTree: false,\n    //enable data tree\n    dataTreeElementColumn: false,\n    dataTreeBranchElement: true,\n    //show data tree branch element\n    dataTreeChildIndent: 9,\n    //data tree child indent in px\n    dataTreeChildField: \"_children\",\n    //data tre column field to look for child rows\n    dataTreeCollapseElement: false,\n    //data tree row collapse element\n    dataTreeExpandElement: false,\n    //data tree row expand element\n    dataTreeStartExpanded: false,\n    dataTreeRowExpanded: function dataTreeRowExpanded() {},\n    //row has been expanded\n    dataTreeRowCollapsed: function dataTreeRowCollapsed() {},\n    //row has been collapsed\n    dataTreeChildColumnCalcs: false,\n    //include visible data tree rows in column calculations\n    dataTreeSelectPropagate: false,\n    //seleccting a parent row selects its children\n    printAsHtml: false,\n    //enable print as html\n    printFormatter: false,\n    //printing page formatter\n    printHeader: false,\n    //page header contents\n    printFooter: false,\n    //page footer contents\n    printCopyStyle: true,\n    //DEPRICATED - REMOVE in 5.0\n    printStyled: true,\n    //enable print as html styling\n    printVisibleRows: true,\n    //DEPRICATED - REMOVE in 5.0\n    printRowRange: \"visible\",\n    //restrict print to visible rows only\n    printConfig: {},\n    //print config options\n    addRowPos: \"bottom\",\n    //position to insert blank rows, top|bottom\n    selectable: \"highlight\",\n    //highlight rows on hover\n    selectableRangeMode: \"drag\",\n    //highlight rows on hover\n    selectableRollingSelection: true,\n    //roll selection once maximum number of selectable rows is reached\n    selectablePersistence: true,\n    // maintain selection when table view is updated\n    selectableCheck: function selectableCheck(data, row) {\n      return true;\n    },\n    //check wheather row is selectable\n    headerFilterLiveFilterDelay: 300,\n    //delay before updating column after user types in header filter\n    headerFilterPlaceholder: false,\n    //placeholder text to display in header filters\n    headerVisible: true,\n    //hide header\n    history: false,\n    //enable edit history\n    locale: false,\n    //current system language\n    langs: {},\n    virtualDom: true,\n    //enable DOM virtualization\n    virtualDomBuffer: 0,\n    // set virtual DOM buffer size\n    persistentLayout: false,\n    //DEPRICATED - REMOVE in 5.0\n    persistentSort: false,\n    //DEPRICATED - REMOVE in 5.0\n    persistentFilter: false,\n    //DEPRICATED - REMOVE in 5.0\n    persistenceID: \"\",\n    //key for persistent storage\n    persistenceMode: true,\n    //mode for storing persistence information\n    persistenceReaderFunc: false,\n    //function for handling persistence data reading\n    persistenceWriterFunc: false,\n    //function for handling persistence data writing\n    persistence: false,\n    responsiveLayout: false,\n    //responsive layout flags\n    responsiveLayoutCollapseStartOpen: true,\n    //start showing collapsed data\n    responsiveLayoutCollapseUseFormatters: true,\n    //responsive layout collapse formatter\n    responsiveLayoutCollapseFormatter: false,\n    //responsive layout collapse formatter\n    pagination: false,\n    //set pagination type\n    paginationSize: false,\n    //set number of rows to a page\n    paginationInitialPage: 1,\n    //initail page to show on load\n    paginationButtonCount: 5,\n    // set count of page button\n    paginationSizeSelector: false,\n    //add pagination size selector element\n    paginationElement: false,\n    //element to hold pagination numbers\n    paginationDataSent: {},\n    //pagination data sent to the server\n    paginationDataReceived: {},\n    //pagination data received from the server\n    paginationAddRow: \"page\",\n    //add rows on table or page\n    ajaxURL: false,\n    //url for ajax loading\n    ajaxURLGenerator: false,\n    ajaxParams: {},\n    //params for ajax loading\n    ajaxConfig: \"get\",\n    //ajax request type\n    ajaxContentType: \"form\",\n    //ajax request type\n    ajaxRequestFunc: false,\n    //promise function\n    ajaxLoader: true,\n    //show loader\n    ajaxLoaderLoading: false,\n    //loader element\n    ajaxLoaderError: false,\n    //loader element\n    ajaxFiltering: false,\n    ajaxSorting: false,\n    ajaxProgressiveLoad: false,\n    //progressive loading\n    ajaxProgressiveLoadDelay: 0,\n    //delay between requests\n    ajaxProgressiveLoadScrollMargin: 0,\n    //margin before scroll begins\n    groupBy: false,\n    //enable table grouping and set field to group by\n    groupStartOpen: true,\n    //starting state of group\n    groupValues: false,\n    groupHeader: false,\n    //header generation function\n    htmlOutputConfig: false,\n    //html outypu config\n    movableColumns: false,\n    //enable movable columns\n    movableRows: false,\n    //enable movable rows\n    movableRowsConnectedTables: false,\n    //tables for movable rows to be connected to\n    movableRowsSender: false,\n    movableRowsReceiver: \"insert\",\n    movableRowsSendingStart: function movableRowsSendingStart() {},\n    movableRowsSent: function movableRowsSent() {},\n    movableRowsSentFailed: function movableRowsSentFailed() {},\n    movableRowsSendingStop: function movableRowsSendingStop() {},\n    movableRowsReceivingStart: function movableRowsReceivingStart() {},\n    movableRowsReceived: function movableRowsReceived() {},\n    movableRowsReceivedFailed: function movableRowsReceivedFailed() {},\n    movableRowsReceivingStop: function movableRowsReceivingStop() {},\n    scrollToRowPosition: \"top\",\n    scrollToRowIfVisible: true,\n    scrollToColumnPosition: \"left\",\n    scrollToColumnIfVisible: true,\n    rowFormatter: false,\n    rowFormatterPrint: null,\n    rowFormatterClipboard: null,\n    rowFormatterHtmlOutput: null,\n    placeholder: false,\n    //table building callbacks\n    tableBuilding: function tableBuilding() {},\n    tableBuilt: function tableBuilt() {},\n    //render callbacks\n    renderStarted: function renderStarted() {},\n    renderComplete: function renderComplete() {},\n    //row callbacks\n    rowClick: false,\n    rowDblClick: false,\n    rowContext: false,\n    rowTap: false,\n    rowDblTap: false,\n    rowTapHold: false,\n    rowMouseEnter: false,\n    rowMouseLeave: false,\n    rowMouseOver: false,\n    rowMouseOut: false,\n    rowMouseMove: false,\n    rowContextMenu: false,\n    rowAdded: function rowAdded() {},\n    rowDeleted: function rowDeleted() {},\n    rowMoved: function rowMoved() {},\n    rowUpdated: function rowUpdated() {},\n    rowSelectionChanged: function rowSelectionChanged() {},\n    rowSelected: function rowSelected() {},\n    rowDeselected: function rowDeselected() {},\n    rowResized: function rowResized() {},\n    //cell callbacks\n    //row callbacks\n    cellClick: false,\n    cellDblClick: false,\n    cellContext: false,\n    cellTap: false,\n    cellDblTap: false,\n    cellTapHold: false,\n    cellMouseEnter: false,\n    cellMouseLeave: false,\n    cellMouseOver: false,\n    cellMouseOut: false,\n    cellMouseMove: false,\n    cellEditing: function cellEditing() {},\n    cellEdited: function cellEdited() {},\n    cellEditCancelled: function cellEditCancelled() {},\n    //column callbacks\n    columnMoved: false,\n    columnResized: function columnResized() {},\n    columnTitleChanged: function columnTitleChanged() {},\n    columnVisibilityChanged: function columnVisibilityChanged() {},\n    //HTML iport callbacks\n    htmlImporting: function htmlImporting() {},\n    htmlImported: function htmlImported() {},\n    //data callbacks\n    dataLoading: function dataLoading() {},\n    dataLoaded: function dataLoaded() {},\n    dataEdited: function dataEdited() {},\n    //ajax callbacks\n    ajaxRequesting: function ajaxRequesting() {},\n    ajaxResponse: false,\n    ajaxError: function ajaxError() {},\n    //filtering callbacks\n    dataFiltering: false,\n    dataFiltered: false,\n    //sorting callbacks\n    dataSorting: function dataSorting() {},\n    dataSorted: function dataSorted() {},\n    //grouping callbacks\n    groupToggleElement: \"arrow\",\n    groupClosedShowCalcs: false,\n    dataGrouping: function dataGrouping() {},\n    dataGrouped: false,\n    groupVisibilityChanged: function groupVisibilityChanged() {},\n    groupClick: false,\n    groupDblClick: false,\n    groupContext: false,\n    groupTap: false,\n    groupDblTap: false,\n    groupTapHold: false,\n    columnCalcs: true,\n    //pagination callbacks\n    pageLoaded: function pageLoaded() {},\n    //localization callbacks\n    localized: function localized() {},\n    //validation has failed\n    validationFailed: function validationFailed() {},\n    //history callbacks\n    historyUndo: function historyUndo() {},\n    historyRedo: function historyRedo() {},\n    //scroll callbacks\n    scrollHorizontal: function scrollHorizontal() {},\n    scrollVertical: function scrollVertical() {}\n  };\n\n  Tabulator.prototype.initializeOptions = function (options) {\n    //warn user if option is not available\n    if (options.invalidOptionWarnings !== false) {\n      for (var key in options) {\n        if (typeof this.defaultOptions[key] === \"undefined\") {\n          console.warn(\"Invalid table constructor option:\", key);\n        }\n      }\n    } //assign options to table\n\n\n    for (var key in this.defaultOptions) {\n      if (key in options) {\n        this.options[key] = options[key];\n      } else {\n        if (Array.isArray(this.defaultOptions[key])) {\n          this.options[key] = [];\n        } else if (_typeof(this.defaultOptions[key]) === \"object\" && this.defaultOptions[key] !== null) {\n          this.options[key] = {};\n        } else {\n          this.options[key] = this.defaultOptions[key];\n        }\n      }\n    }\n  };\n\n  Tabulator.prototype.initializeElement = function (element) {\n    if (typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement) {\n      this.element = element;\n      return true;\n    } else if (typeof element === \"string\") {\n      this.element = document.querySelector(element);\n\n      if (this.element) {\n        return true;\n      } else {\n        console.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n        return false;\n      }\n    } else {\n      console.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n      return false;\n    }\n  }; //convert depricated functionality to new functions\n\n\n  Tabulator.prototype._mapDepricatedFunctionality = function () {\n    //map depricated persistance setup options\n    if (this.options.persistentLayout || this.options.persistentSort || this.options.persistentFilter) {\n      if (!this.options.persistence) {\n        this.options.persistence = {};\n      }\n    }\n\n    if (typeof this.options.clipboardCopyHeader !== \"undefined\") {\n      this.options.columnHeaders = this.options.clipboardCopyHeader;\n      console.warn(\"DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option\");\n    }\n\n    if (this.options.printVisibleRows !== true) {\n      console.warn(\"printVisibleRows option is deprecated, you should now use the printRowRange option\");\n      this.options.persistence.printRowRange = \"active\";\n    }\n\n    if (this.options.printCopyStyle !== true) {\n      console.warn(\"printCopyStyle option is deprecated, you should now use the printStyled option\");\n      this.options.persistence.printStyled = this.options.printCopyStyle;\n    }\n\n    if (this.options.persistentLayout) {\n      console.warn(\"persistentLayout option is deprecated, you should now use the persistence option\");\n\n      if (this.options.persistence !== true && typeof this.options.persistence.columns === \"undefined\") {\n        this.options.persistence.columns = true;\n      }\n    }\n\n    if (this.options.persistentSort) {\n      console.warn(\"persistentSort option is deprecated, you should now use the persistence option\");\n\n      if (this.options.persistence !== true && typeof this.options.persistence.sort === \"undefined\") {\n        this.options.persistence.sort = true;\n      }\n    }\n\n    if (this.options.persistentFilter) {\n      console.warn(\"persistentFilter option is deprecated, you should now use the persistence option\");\n\n      if (this.options.persistence !== true && typeof this.options.persistence.filter === \"undefined\") {\n        this.options.persistence.filter = true;\n      }\n    }\n\n    if (this.options.columnVertAlign) {\n      console.warn(\"columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option\");\n      this.options.columnHeaderVertAlign = this.options.columnVertAlign;\n    }\n  };\n\n  Tabulator.prototype._clearSelection = function () {\n    this.element.classList.add(\"tabulator-block-select\");\n\n    if (window.getSelection) {\n      if (window.getSelection().empty) {\n        // Chrome\n        window.getSelection().empty();\n      } else if (window.getSelection().removeAllRanges) {\n        // Firefox\n        window.getSelection().removeAllRanges();\n      }\n    } else if (document.selection) {\n      // IE?\n      document.selection.empty();\n    }\n\n    this.element.classList.remove(\"tabulator-block-select\");\n  }; //concreate table\n\n\n  Tabulator.prototype._create = function () {\n    this._clearObjectPointers();\n\n    this._mapDepricatedFunctionality();\n\n    this.bindModules();\n\n    if (this.element.tagName === \"TABLE\") {\n      if (this.modExists(\"htmlTableImport\", true)) {\n        this.modules.htmlTableImport.parseTable();\n      }\n    }\n\n    this.columnManager = new ColumnManager(this);\n    this.rowManager = new RowManager(this);\n    this.footerManager = new FooterManager(this);\n    this.columnManager.setRowManager(this.rowManager);\n    this.rowManager.setColumnManager(this.columnManager);\n\n    this._buildElement();\n\n    this._loadInitialData();\n  }; //clear pointers to objects in default config object\n\n\n  Tabulator.prototype._clearObjectPointers = function () {\n    this.options.columns = this.options.columns.slice(0);\n\n    if (!this.options.reactiveData) {\n      this.options.data = this.options.data.slice(0);\n    }\n  }; //build tabulator element\n\n\n  Tabulator.prototype._buildElement = function () {\n    var _this17 = this;\n\n    var element = this.element,\n        mod = this.modules,\n        options = this.options;\n    options.tableBuilding.call(this);\n    element.classList.add(\"tabulator\");\n    element.setAttribute(\"role\", \"grid\"); //empty element\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    } //set table height\n\n\n    if (options.height) {\n      options.height = isNaN(options.height) ? options.height : options.height + \"px\";\n      element.style.height = options.height;\n    } //set table min height\n\n\n    if (options.minHeight !== false) {\n      options.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n      element.style.minHeight = options.minHeight;\n    } //set table maxHeight\n\n\n    if (options.maxHeight !== false) {\n      options.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n      element.style.maxHeight = options.maxHeight;\n    }\n\n    this.columnManager.initialize();\n    this.rowManager.initialize();\n\n    this._detectBrowser();\n\n    if (this.modExists(\"layout\", true)) {\n      mod.layout.initialize(options.layout);\n    } //set localization\n\n\n    if (options.headerFilterPlaceholder !== false) {\n      mod.localize.setHeaderFilterPlaceholder(options.headerFilterPlaceholder);\n    }\n\n    for (var locale in options.langs) {\n      mod.localize.installLang(locale, options.langs[locale]);\n    }\n\n    mod.localize.setLocale(options.locale); //configure placeholder element\n\n    if (typeof options.placeholder == \"string\") {\n      var el = document.createElement(\"div\");\n      el.classList.add(\"tabulator-placeholder\");\n      var span = document.createElement(\"span\");\n      span.innerHTML = options.placeholder;\n      el.appendChild(span);\n      options.placeholder = el;\n    } //build table elements\n\n\n    element.appendChild(this.columnManager.getElement());\n    element.appendChild(this.rowManager.getElement());\n\n    if (options.footerElement) {\n      this.footerManager.activate();\n    }\n\n    if (options.persistence && this.modExists(\"persistence\", true)) {\n      mod.persistence.initialize();\n    }\n\n    if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.columns) {\n      options.columns = mod.persistence.load(\"columns\", options.columns);\n    }\n\n    if (options.movableRows && this.modExists(\"moveRow\")) {\n      mod.moveRow.initialize();\n    }\n\n    if (options.autoColumns && this.options.data) {\n      this.columnManager.generateColumnsFromRowData(this.options.data);\n    }\n\n    if (this.modExists(\"columnCalcs\")) {\n      mod.columnCalcs.initialize();\n    }\n\n    this.columnManager.setColumns(options.columns);\n\n    if (options.dataTree && this.modExists(\"dataTree\", true)) {\n      mod.dataTree.initialize();\n    }\n\n    if (this.modExists(\"frozenRows\")) {\n      this.modules.frozenRows.initialize();\n    }\n\n    if ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort || options.initialSort) && this.modExists(\"sort\", true)) {\n      var sorters = [];\n\n      if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort) {\n        sorters = mod.persistence.load(\"sort\");\n\n        if (sorters === false && options.initialSort) {\n          sorters = options.initialSort;\n        }\n      } else if (options.initialSort) {\n        sorters = options.initialSort;\n      }\n\n      mod.sort.setSort(sorters);\n    }\n\n    if ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter || options.initialFilter) && this.modExists(\"filter\", true)) {\n      var filters = [];\n\n      if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter) {\n        filters = mod.persistence.load(\"filter\");\n\n        if (filters === false && options.initialFilter) {\n          filters = options.initialFilter;\n        }\n      } else if (options.initialFilter) {\n        filters = options.initialFilter;\n      }\n\n      mod.filter.setFilter(filters);\n    }\n\n    if (options.initialHeaderFilter && this.modExists(\"filter\", true)) {\n      options.initialHeaderFilter.forEach(function (item) {\n        var column = _this17.columnManager.findColumn(item.field);\n\n        if (column) {\n          mod.filter.setHeaderFilterValue(column, item.value);\n        } else {\n          console.warn(\"Column Filter Error - No matching column found:\", item.field);\n          return false;\n        }\n      });\n    }\n\n    if (this.modExists(\"ajax\")) {\n      mod.ajax.initialize();\n    }\n\n    if (options.pagination && this.modExists(\"page\", true)) {\n      mod.page.initialize();\n    }\n\n    if (options.groupBy && this.modExists(\"groupRows\", true)) {\n      mod.groupRows.initialize();\n    }\n\n    if (this.modExists(\"keybindings\")) {\n      mod.keybindings.initialize();\n    }\n\n    if (this.modExists(\"selectRow\")) {\n      mod.selectRow.clearSelectionData(true);\n    }\n\n    if (options.autoResize && this.modExists(\"resizeTable\")) {\n      mod.resizeTable.initialize();\n    }\n\n    if (this.modExists(\"clipboard\")) {\n      mod.clipboard.initialize();\n    }\n\n    if (options.printAsHtml && this.modExists(\"print\")) {\n      mod.print.initialize();\n    }\n\n    options.tableBuilt.call(this);\n  };\n\n  Tabulator.prototype._loadInitialData = function () {\n    var self = this;\n\n    if (self.options.pagination && self.modExists(\"page\")) {\n      self.modules.page.reset(true, true);\n\n      if (self.options.pagination == \"local\") {\n        if (self.options.data.length) {\n          self.rowManager.setData(self.options.data, false, true);\n        } else {\n          if ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n            self.modules.ajax.loadData(false, true).then(function () {}).catch(function () {\n              if (self.options.paginationInitialPage) {\n                self.modules.page.setPage(self.options.paginationInitialPage);\n              }\n            });\n            return;\n          } else {\n            self.rowManager.setData(self.options.data, false, true);\n          }\n        }\n\n        if (self.options.paginationInitialPage) {\n          self.modules.page.setPage(self.options.paginationInitialPage);\n        }\n      } else {\n        if (self.options.ajaxURL) {\n          self.modules.page.setPage(self.options.paginationInitialPage).then(function () {}).catch(function () {});\n        } else {\n          self.rowManager.setData([], false, true);\n        }\n      }\n    } else {\n      if (self.options.data.length) {\n        self.rowManager.setData(self.options.data);\n      } else {\n        if ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n          self.modules.ajax.loadData(false, true).then(function () {}).catch(function () {});\n        } else {\n          self.rowManager.setData(self.options.data, false, true);\n        }\n      }\n    }\n  }; //deconstructor\n\n\n  Tabulator.prototype.destroy = function () {\n    var element = this.element;\n    Tabulator.prototype.comms.deregister(this); //deregister table from inderdevice communication\n\n    if (this.options.reactiveData && this.modExists(\"reactiveData\", true)) {\n      this.modules.reactiveData.unwatchData();\n    } //clear row data\n\n\n    this.rowManager.rows.forEach(function (row) {\n      row.wipe();\n    });\n    this.rowManager.rows = [];\n    this.rowManager.activeRows = [];\n    this.rowManager.displayRows = []; //clear event bindings\n\n    if (this.options.autoResize && this.modExists(\"resizeTable\")) {\n      this.modules.resizeTable.clearBindings();\n    }\n\n    if (this.modExists(\"keybindings\")) {\n      this.modules.keybindings.clearBindings();\n    } //clear DOM\n\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    element.classList.remove(\"tabulator\");\n  };\n\n  Tabulator.prototype._detectBrowser = function () {\n    var ua = navigator.userAgent || navigator.vendor || window.opera;\n\n    if (ua.indexOf(\"Trident\") > -1) {\n      this.browser = \"ie\";\n      this.browserSlow = true;\n    } else if (ua.indexOf(\"Edge\") > -1) {\n      this.browser = \"edge\";\n      this.browserSlow = true;\n    } else if (ua.indexOf(\"Firefox\") > -1) {\n      this.browser = \"firefox\";\n      this.browserSlow = false;\n    } else {\n      this.browser = \"other\";\n      this.browserSlow = false;\n    }\n\n    this.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0, 4));\n  }; ////////////////// Data Handling //////////////////\n  //block table redrawing\n\n\n  Tabulator.prototype.blockRedraw = function () {\n    return this.rowManager.blockRedraw();\n  }; //restore table redrawing\n\n\n  Tabulator.prototype.restoreRedraw = function () {\n    return this.rowManager.restoreRedraw();\n  }; //local data from local file\n\n\n  Tabulator.prototype.setDataFromLocalFile = function (extensions) {\n    var _this18 = this;\n\n    return new Promise(function (resolve, reject) {\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n      input.accept = extensions || \".json,application/json\";\n      input.addEventListener(\"change\", function (e) {\n        var file = input.files[0],\n            reader = new FileReader(),\n            data;\n        reader.readAsText(file);\n\n        reader.onload = function (e) {\n          try {\n            data = JSON.parse(reader.result);\n          } catch (e) {\n            console.warn(\"File Load Error - File contents is invalid JSON\", e);\n            reject(e);\n            return;\n          }\n\n          _this18._setData(data).then(function (data) {\n            resolve(data);\n          }).catch(function (err) {\n            resolve(err);\n          });\n        };\n\n        reader.onerror = function (e) {\n          console.warn(\"File Load Error - Unable to read file\");\n          reject();\n        };\n      });\n      input.click();\n    });\n  }; //load data\n\n\n  Tabulator.prototype.setData = function (data, params, config) {\n    if (this.modExists(\"ajax\")) {\n      this.modules.ajax.blockActiveRequest();\n    }\n\n    return this._setData(data, params, config, false, true);\n  };\n\n  Tabulator.prototype._setData = function (data, params, config, inPosition, columnsChanged) {\n    var self = this;\n\n    if (typeof data === \"string\") {\n      if (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0) {\n        //data is a json encoded string\n        return self.rowManager.setData(JSON.parse(data), inPosition, columnsChanged);\n      } else {\n        if (self.modExists(\"ajax\", true)) {\n          if (params) {\n            self.modules.ajax.setParams(params);\n          }\n\n          if (config) {\n            self.modules.ajax.setConfig(config);\n          }\n\n          self.modules.ajax.setUrl(data);\n\n          if (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n            self.modules.page.reset(true, true);\n            return self.modules.page.setPage(1);\n          } else {\n            //assume data is url, make ajax call to url to get data\n            return self.modules.ajax.loadData(inPosition, columnsChanged);\n          }\n        }\n      }\n    } else {\n      if (data) {\n        //asume data is already an object\n        return self.rowManager.setData(data, inPosition, columnsChanged);\n      } else {\n        //no data provided, check if ajaxURL is present;\n        if (self.modExists(\"ajax\") && (self.modules.ajax.getUrl || self.options.ajaxURLGenerator)) {\n          if (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n            self.modules.page.reset(true, true);\n            return self.modules.page.setPage(1);\n          } else {\n            return self.modules.ajax.loadData(inPosition, columnsChanged);\n          }\n        } else {\n          //empty data\n          return self.rowManager.setData([], inPosition, columnsChanged);\n        }\n      }\n    }\n  }; //clear data\n\n\n  Tabulator.prototype.clearData = function () {\n    if (this.modExists(\"ajax\")) {\n      this.modules.ajax.blockActiveRequest();\n    }\n\n    this.rowManager.clearData();\n  }; //get table data array\n\n\n  Tabulator.prototype.getData = function (active) {\n    if (active === true) {\n      console.warn(\"passing a boolean to the getData function is deprecated, you should now pass the string 'active'\");\n      active = \"active\";\n    }\n\n    return this.rowManager.getData(active);\n  }; //get table data array count\n\n\n  Tabulator.prototype.getDataCount = function (active) {\n    if (active === true) {\n      console.warn(\"passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'\");\n      active = \"active\";\n    }\n\n    return this.rowManager.getDataCount(active);\n  }; //search for specific row components\n\n\n  Tabulator.prototype.searchRows = function (field, type, value) {\n    if (this.modExists(\"filter\", true)) {\n      return this.modules.filter.search(\"rows\", field, type, value);\n    }\n  }; //search for specific data\n\n\n  Tabulator.prototype.searchData = function (field, type, value) {\n    if (this.modExists(\"filter\", true)) {\n      return this.modules.filter.search(\"data\", field, type, value);\n    }\n  }; //get table html\n\n\n  Tabulator.prototype.getHtml = function (visible, style, config) {\n    if (this.modExists(\"export\", true)) {\n      return this.modules.export.getHtml(visible, style, config);\n    }\n  }; //get print html\n\n\n  Tabulator.prototype.print = function (visible, style, config) {\n    if (this.modExists(\"print\", true)) {\n      return this.modules.print.printFullscreen(visible, style, config);\n    }\n  }; //retrieve Ajax URL\n\n\n  Tabulator.prototype.getAjaxUrl = function () {\n    if (this.modExists(\"ajax\", true)) {\n      return this.modules.ajax.getUrl();\n    }\n  }; //replace data, keeping table in position with same sort\n\n\n  Tabulator.prototype.replaceData = function (data, params, config) {\n    if (this.modExists(\"ajax\")) {\n      this.modules.ajax.blockActiveRequest();\n    }\n\n    return this._setData(data, params, config, true);\n  }; //update table data\n\n\n  Tabulator.prototype.updateData = function (data) {\n    var _this19 = this;\n\n    var self = this;\n    var responses = 0;\n    return new Promise(function (resolve, reject) {\n      if (_this19.modExists(\"ajax\")) {\n        _this19.modules.ajax.blockActiveRequest();\n      }\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (data) {\n        data.forEach(function (item) {\n          var row = self.rowManager.findRow(item[self.options.index]);\n\n          if (row) {\n            responses++;\n            row.updateData(item).then(function () {\n              responses--;\n\n              if (!responses) {\n                resolve();\n              }\n            });\n          }\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  };\n\n  Tabulator.prototype.addData = function (data, pos, index) {\n    var _this20 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this20.modExists(\"ajax\")) {\n        _this20.modules.ajax.blockActiveRequest();\n      }\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (data) {\n        _this20.rowManager.addRows(data, pos, index).then(function (rows) {\n          var output = [];\n          rows.forEach(function (row) {\n            output.push(row.getComponent());\n          });\n          resolve(output);\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }; //update table data\n\n\n  Tabulator.prototype.updateOrAddData = function (data) {\n    var _this21 = this;\n\n    var self = this,\n        rows = [],\n        responses = 0;\n    return new Promise(function (resolve, reject) {\n      if (_this21.modExists(\"ajax\")) {\n        _this21.modules.ajax.blockActiveRequest();\n      }\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (data) {\n        data.forEach(function (item) {\n          var row = self.rowManager.findRow(item[self.options.index]);\n          responses++;\n\n          if (row) {\n            row.updateData(item).then(function () {\n              responses--;\n              rows.push(row.getComponent());\n\n              if (!responses) {\n                resolve(rows);\n              }\n            });\n          } else {\n            self.rowManager.addRows(item).then(function (newRows) {\n              responses--;\n              rows.push(newRows[0].getComponent());\n\n              if (!responses) {\n                resolve(rows);\n              }\n            });\n          }\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }; //get row object\n\n\n  Tabulator.prototype.getRow = function (index) {\n    var row = this.rowManager.findRow(index);\n\n    if (row) {\n      return row.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching row found:\", index);\n      return false;\n    }\n  }; //get row object\n\n\n  Tabulator.prototype.getRowFromPosition = function (position, active) {\n    var row = this.rowManager.getRowFromPosition(position, active);\n\n    if (row) {\n      return row.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching row found:\", position);\n      return false;\n    }\n  }; //delete row from table\n\n\n  Tabulator.prototype.deleteRow = function (index) {\n    var _this22 = this;\n\n    return new Promise(function (resolve, reject) {\n      var self = _this22,\n          count = 0,\n          successCount = 0,\n          foundRows = [];\n\n      function doneCheck() {\n        count++;\n\n        if (count == index.length) {\n          if (successCount) {\n            self.rowManager.reRenderInPosition();\n            resolve();\n          }\n        }\n      }\n\n      if (!Array.isArray(index)) {\n        index = [index];\n      } //find matching rows\n\n\n      index.forEach(function (item) {\n        var row = _this22.rowManager.findRow(item, true);\n\n        if (row) {\n          foundRows.push(row);\n        } else {\n          console.warn(\"Delete Error - No matching row found:\", item);\n          reject(\"Delete Error - No matching row found\");\n          doneCheck();\n        }\n      }); //sort rows into correct order to ensure smooth delete from table\n\n      foundRows.sort(function (a, b) {\n        return _this22.rowManager.rows.indexOf(a) > _this22.rowManager.rows.indexOf(b) ? 1 : -1;\n      });\n      foundRows.forEach(function (row) {\n        row.delete().then(function () {\n          successCount++;\n          doneCheck();\n        }).catch(function (err) {\n          doneCheck();\n          reject(err);\n        });\n      });\n    });\n  }; //add row to table\n\n\n  Tabulator.prototype.addRow = function (data, pos, index) {\n    var _this23 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      _this23.rowManager.addRows(data, pos, index).then(function (rows) {\n        //recalc column calculations if present\n        if (_this23.modExists(\"columnCalcs\")) {\n          _this23.modules.columnCalcs.recalc(_this23.rowManager.activeRows);\n        }\n\n        resolve(rows[0].getComponent());\n      });\n    });\n  }; //update a row if it exitsts otherwise create it\n\n\n  Tabulator.prototype.updateOrAddRow = function (index, data) {\n    var _this24 = this;\n\n    return new Promise(function (resolve, reject) {\n      var row = _this24.rowManager.findRow(index);\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (row) {\n        row.updateData(data).then(function () {\n          //recalc column calculations if present\n          if (_this24.modExists(\"columnCalcs\")) {\n            _this24.modules.columnCalcs.recalc(_this24.rowManager.activeRows);\n          }\n\n          resolve(row.getComponent());\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        row = _this24.rowManager.addRows(data).then(function (rows) {\n          //recalc column calculations if present\n          if (_this24.modExists(\"columnCalcs\")) {\n            _this24.modules.columnCalcs.recalc(_this24.rowManager.activeRows);\n          }\n\n          resolve(rows[0].getComponent());\n        }).catch(function (err) {\n          reject(err);\n        });\n      }\n    });\n  }; //update row data\n\n\n  Tabulator.prototype.updateRow = function (index, data) {\n    var _this25 = this;\n\n    return new Promise(function (resolve, reject) {\n      var row = _this25.rowManager.findRow(index);\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (row) {\n        row.updateData(data).then(function () {\n          resolve(row.getComponent());\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Update Error - No matching row found:\", index);\n        reject(\"Update Error - No matching row found\");\n      }\n    });\n  }; //scroll to row in DOM\n\n\n  Tabulator.prototype.scrollToRow = function (index, position, ifVisible) {\n    var _this26 = this;\n\n    return new Promise(function (resolve, reject) {\n      var row = _this26.rowManager.findRow(index);\n\n      if (row) {\n        _this26.rowManager.scrollToRow(row, position, ifVisible).then(function () {\n          resolve();\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Scroll Error - No matching row found:\", index);\n        reject(\"Scroll Error - No matching row found\");\n      }\n    });\n  };\n\n  Tabulator.prototype.moveRow = function (from, to, after) {\n    var fromRow = this.rowManager.findRow(from);\n\n    if (fromRow) {\n      fromRow.moveToRow(to, after);\n    } else {\n      console.warn(\"Move Error - No matching row found:\", from);\n    }\n  };\n\n  Tabulator.prototype.getRows = function (active) {\n    if (active === true) {\n      console.warn(\"passing a boolean to the getRows function is deprecated, you should now pass the string 'active'\");\n      active = \"active\";\n    }\n\n    return this.rowManager.getComponents(active);\n  }; //get position of row in table\n\n\n  Tabulator.prototype.getRowPosition = function (index, active) {\n    var row = this.rowManager.findRow(index);\n\n    if (row) {\n      return this.rowManager.getRowPosition(row, active);\n    } else {\n      console.warn(\"Position Error - No matching row found:\", index);\n      return false;\n    }\n  }; //copy table data to clipboard\n\n\n  Tabulator.prototype.copyToClipboard = function (selector) {\n    if (this.modExists(\"clipboard\", true)) {\n      this.modules.clipboard.copy(selector);\n    }\n  }; /////////////// Column Functions  ///////////////\n\n\n  Tabulator.prototype.setColumns = function (definition) {\n    this.columnManager.setColumns(definition);\n  };\n\n  Tabulator.prototype.getColumns = function (structured) {\n    return this.columnManager.getComponents(structured);\n  };\n\n  Tabulator.prototype.getColumn = function (field) {\n    var col = this.columnManager.findColumn(field);\n\n    if (col) {\n      return col.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching column found:\", field);\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getColumnDefinitions = function () {\n    return this.columnManager.getDefinitionTree();\n  };\n\n  Tabulator.prototype.getColumnLayout = function () {\n    if (this.modExists(\"persistence\", true)) {\n      return this.modules.persistence.parseColumns(this.columnManager.getColumns());\n    }\n  };\n\n  Tabulator.prototype.setColumnLayout = function (layout) {\n    if (this.modExists(\"persistence\", true)) {\n      this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns, layout));\n      return true;\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.showColumn = function (field) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      column.show();\n\n      if (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n        this.modules.responsiveLayout.update();\n      }\n    } else {\n      console.warn(\"Column Show Error - No matching column found:\", field);\n      return false;\n    }\n  };\n\n  Tabulator.prototype.hideColumn = function (field) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      column.hide();\n\n      if (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n        this.modules.responsiveLayout.update();\n      }\n    } else {\n      console.warn(\"Column Hide Error - No matching column found:\", field);\n      return false;\n    }\n  };\n\n  Tabulator.prototype.toggleColumn = function (field) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      if (column.visible) {\n        column.hide();\n      } else {\n        column.show();\n      }\n    } else {\n      console.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n      return false;\n    }\n  };\n\n  Tabulator.prototype.addColumn = function (definition, before, field) {\n    var _this27 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this27.columnManager.findColumn(field);\n\n      _this27.columnManager.addColumn(definition, before, column).then(function (column) {\n        resolve(column.getComponent());\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  };\n\n  Tabulator.prototype.deleteColumn = function (field) {\n    var _this28 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this28.columnManager.findColumn(field);\n\n      if (column) {\n        column.delete().then(function () {\n          resolve();\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Column Delete Error - No matching column found:\", field);\n        reject();\n      }\n    });\n  };\n\n  Tabulator.prototype.updateColumnDefinition = function (field, definition) {\n    var _this29 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this29.columnManager.findColumn(field);\n\n      if (column) {\n        column.updateDefinition(definition).then(function (col) {\n          resolve(col);\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Column Update Error - No matching column found:\", field);\n        reject();\n      }\n    });\n  };\n\n  Tabulator.prototype.moveColumn = function (from, to, after) {\n    var fromColumn = this.columnManager.findColumn(from);\n    var toColumn = this.columnManager.findColumn(to);\n\n    if (fromColumn) {\n      if (toColumn) {\n        this.columnManager.moveColumn(fromColumn, toColumn, after);\n      } else {\n        console.warn(\"Move Error - No matching column found:\", toColumn);\n      }\n    } else {\n      console.warn(\"Move Error - No matching column found:\", from);\n    }\n  }; //scroll to column in DOM\n\n\n  Tabulator.prototype.scrollToColumn = function (field, position, ifVisible) {\n    var _this30 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this30.columnManager.findColumn(field);\n\n      if (column) {\n        _this30.columnManager.scrollToColumn(column, position, ifVisible).then(function () {\n          resolve();\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Scroll Error - No matching column found:\", field);\n        reject(\"Scroll Error - No matching column found\");\n      }\n    });\n  }; //////////// Localization Functions  ////////////\n\n\n  Tabulator.prototype.setLocale = function (locale) {\n    this.modules.localize.setLocale(locale);\n  };\n\n  Tabulator.prototype.getLocale = function () {\n    return this.modules.localize.getLocale();\n  };\n\n  Tabulator.prototype.getLang = function (locale) {\n    return this.modules.localize.getLang(locale);\n  }; //////////// General Public Functions ////////////\n  //redraw list without updating data\n\n\n  Tabulator.prototype.redraw = function (force) {\n    this.columnManager.redraw(force);\n    this.rowManager.redraw(force);\n  };\n\n  Tabulator.prototype.setHeight = function (height) {\n    if (this.rowManager.renderMode !== \"classic\") {\n      this.options.height = isNaN(height) ? height : height + \"px\";\n      this.element.style.height = this.options.height;\n      this.rowManager.setRenderMode();\n      this.rowManager.redraw();\n    } else {\n      console.warn(\"setHeight function is not available in classic render mode\");\n    }\n  }; ///////////////////// Sorting ////////////////////\n  //trigger sort\n\n\n  Tabulator.prototype.setSort = function (sortList, dir) {\n    if (this.modExists(\"sort\", true)) {\n      this.modules.sort.setSort(sortList, dir);\n      this.rowManager.sorterRefresh();\n    }\n  };\n\n  Tabulator.prototype.getSorters = function () {\n    if (this.modExists(\"sort\", true)) {\n      return this.modules.sort.getSort();\n    }\n  };\n\n  Tabulator.prototype.clearSort = function () {\n    if (this.modExists(\"sort\", true)) {\n      this.modules.sort.clear();\n      this.rowManager.sorterRefresh();\n    }\n  }; ///////////////////// Filtering ////////////////////\n  //set standard filters\n\n\n  Tabulator.prototype.setFilter = function (field, type, value) {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.setFilter(field, type, value);\n      this.rowManager.filterRefresh();\n    }\n  }; //add filter to array\n\n\n  Tabulator.prototype.addFilter = function (field, type, value) {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.addFilter(field, type, value);\n      this.rowManager.filterRefresh();\n    }\n  }; //get all filters\n\n\n  Tabulator.prototype.getFilters = function (all) {\n    if (this.modExists(\"filter\", true)) {\n      return this.modules.filter.getFilters(all);\n    }\n  };\n\n  Tabulator.prototype.setHeaderFilterFocus = function (field) {\n    if (this.modExists(\"filter\", true)) {\n      var column = this.columnManager.findColumn(field);\n\n      if (column) {\n        this.modules.filter.setHeaderFilterFocus(column);\n      } else {\n        console.warn(\"Column Filter Focus Error - No matching column found:\", field);\n        return false;\n      }\n    }\n  };\n\n  Tabulator.prototype.getHeaderFilterValue = function (field) {\n    if (this.modExists(\"filter\", true)) {\n      var column = this.columnManager.findColumn(field);\n\n      if (column) {\n        return this.modules.filter.getHeaderFilterValue(column);\n      } else {\n        console.warn(\"Column Filter Error - No matching column found:\", field);\n      }\n    }\n  };\n\n  Tabulator.prototype.setHeaderFilterValue = function (field, value) {\n    if (this.modExists(\"filter\", true)) {\n      var column = this.columnManager.findColumn(field);\n\n      if (column) {\n        this.modules.filter.setHeaderFilterValue(column, value);\n      } else {\n        console.warn(\"Column Filter Error - No matching column found:\", field);\n        return false;\n      }\n    }\n  };\n\n  Tabulator.prototype.getHeaderFilters = function () {\n    if (this.modExists(\"filter\", true)) {\n      return this.modules.filter.getHeaderFilters();\n    }\n  }; //remove filter from array\n\n\n  Tabulator.prototype.removeFilter = function (field, type, value) {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.removeFilter(field, type, value);\n      this.rowManager.filterRefresh();\n    }\n  }; //clear filters\n\n\n  Tabulator.prototype.clearFilter = function (all) {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.clearFilter(all);\n      this.rowManager.filterRefresh();\n    }\n  }; //clear header filters\n\n\n  Tabulator.prototype.clearHeaderFilter = function () {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.clearHeaderFilter();\n      this.rowManager.filterRefresh();\n    }\n  }; ///////////////////// Filtering ////////////////////\n\n\n  Tabulator.prototype.selectRow = function (rows) {\n    if (this.modExists(\"selectRow\", true)) {\n      if (rows === true) {\n        console.warn(\"passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'\");\n        rows = \"active\";\n      }\n\n      this.modules.selectRow.selectRows(rows);\n    }\n  };\n\n  Tabulator.prototype.deselectRow = function (rows) {\n    if (this.modExists(\"selectRow\", true)) {\n      this.modules.selectRow.deselectRows(rows);\n    }\n  };\n\n  Tabulator.prototype.toggleSelectRow = function (row) {\n    if (this.modExists(\"selectRow\", true)) {\n      this.modules.selectRow.toggleRow(row);\n    }\n  };\n\n  Tabulator.prototype.getSelectedRows = function () {\n    if (this.modExists(\"selectRow\", true)) {\n      return this.modules.selectRow.getSelectedRows();\n    }\n  };\n\n  Tabulator.prototype.getSelectedData = function () {\n    if (this.modExists(\"selectRow\", true)) {\n      return this.modules.selectRow.getSelectedData();\n    }\n  }; //////////// Pagination Functions  ////////////\n\n\n  Tabulator.prototype.setMaxPage = function (max) {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      this.modules.page.setMaxPage(max);\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.setPage = function (page) {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      return this.modules.page.setPage(page);\n    } else {\n      return new Promise(function (resolve, reject) {\n        reject();\n      });\n    }\n  };\n\n  Tabulator.prototype.setPageToRow = function (row) {\n    var _this31 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this31.options.pagination && _this31.modExists(\"page\")) {\n        row = _this31.rowManager.findRow(row);\n\n        if (row) {\n          _this31.modules.page.setPageToRow(row).then(function () {\n            resolve();\n          }).catch(function () {\n            reject();\n          });\n        } else {\n          reject();\n        }\n      } else {\n        reject();\n      }\n    });\n  };\n\n  Tabulator.prototype.setPageSize = function (size) {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      this.modules.page.setPageSize(size);\n      this.modules.page.setPage(1).then(function () {}).catch(function () {});\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getPageSize = function () {\n    if (this.options.pagination && this.modExists(\"page\", true)) {\n      return this.modules.page.getPageSize();\n    }\n  };\n\n  Tabulator.prototype.previousPage = function () {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      this.modules.page.previousPage();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.nextPage = function () {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      this.modules.page.nextPage();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getPage = function () {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      return this.modules.page.getPage();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getPageMax = function () {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      return this.modules.page.getPageMax();\n    } else {\n      return false;\n    }\n  }; ///////////////// Grouping Functions ///////////////\n\n\n  Tabulator.prototype.setGroupBy = function (groups) {\n    if (this.modExists(\"groupRows\", true)) {\n      this.options.groupBy = groups;\n      this.modules.groupRows.initialize();\n      this.rowManager.refreshActiveData(\"display\");\n\n      if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n        this.modules.persistence.save(\"group\");\n      }\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.setGroupStartOpen = function (values) {\n    if (this.modExists(\"groupRows\", true)) {\n      this.options.groupStartOpen = values;\n      this.modules.groupRows.initialize();\n\n      if (this.options.groupBy) {\n        this.rowManager.refreshActiveData(\"group\");\n\n        if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n          this.modules.persistence.save(\"group\");\n        }\n      } else {\n        console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n      }\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.setGroupHeader = function (values) {\n    if (this.modExists(\"groupRows\", true)) {\n      this.options.groupHeader = values;\n      this.modules.groupRows.initialize();\n\n      if (this.options.groupBy) {\n        this.rowManager.refreshActiveData(\"group\");\n\n        if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n          this.modules.persistence.save(\"group\");\n        }\n      } else {\n        console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n      }\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getGroups = function (values) {\n    if (this.modExists(\"groupRows\", true)) {\n      return this.modules.groupRows.getGroups(true);\n    } else {\n      return false;\n    }\n  }; // get grouped table data in the same format as getData()\n\n\n  Tabulator.prototype.getGroupedData = function () {\n    if (this.modExists(\"groupRows\", true)) {\n      return this.options.groupBy ? this.modules.groupRows.getGroupedData() : this.getData();\n    }\n  }; ///////////////// Column Calculation Functions ///////////////\n\n\n  Tabulator.prototype.getCalcResults = function () {\n    if (this.modExists(\"columnCalcs\", true)) {\n      return this.modules.columnCalcs.getResults();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.recalc = function () {\n    if (this.modExists(\"columnCalcs\", true)) {\n      this.modules.columnCalcs.recalcAll(this.rowManager.activeRows);\n    }\n  }; /////////////// Navigation Management //////////////\n\n\n  Tabulator.prototype.navigatePrev = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        return cell.nav().prev();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateNext = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        return cell.nav().next();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateLeft = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        return cell.nav().left();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateRight = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        return cell.nav().right();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateUp = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        return cell.nav().up();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateDown = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        return cell.nav().down();\n      }\n    }\n\n    return false;\n  }; /////////////// History Management //////////////\n\n\n  Tabulator.prototype.undo = function () {\n    if (this.options.history && this.modExists(\"history\", true)) {\n      return this.modules.history.undo();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.redo = function () {\n    if (this.options.history && this.modExists(\"history\", true)) {\n      return this.modules.history.redo();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getHistoryUndoSize = function () {\n    if (this.options.history && this.modExists(\"history\", true)) {\n      return this.modules.history.getHistoryUndoSize();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getHistoryRedoSize = function () {\n    if (this.options.history && this.modExists(\"history\", true)) {\n      return this.modules.history.getHistoryRedoSize();\n    } else {\n      return false;\n    }\n  }; /////////////// Download Management //////////////\n\n\n  Tabulator.prototype.download = function (type, filename, options, active) {\n    if (this.modExists(\"download\", true)) {\n      this.modules.download.download(type, filename, options, active);\n    }\n  };\n\n  Tabulator.prototype.downloadToTab = function (type, filename, options, active) {\n    if (this.modExists(\"download\", true)) {\n      this.modules.download.download(type, filename, options, active, true);\n    }\n  }; /////////// Inter Table Communications ///////////\n\n\n  Tabulator.prototype.tableComms = function (table, module, action, data) {\n    this.modules.comms.receive(table, module, action, data);\n  }; ////////////// Extension Management //////////////\n  //object to hold module\n\n\n  Tabulator.prototype.moduleBindings = {}; //extend module\n\n  Tabulator.prototype.extendModule = function (name, property, values) {\n    if (Tabulator.prototype.moduleBindings[name]) {\n      var source = Tabulator.prototype.moduleBindings[name].prototype[property];\n\n      if (source) {\n        if ((typeof values === 'undefined' ? 'undefined' : _typeof(values)) == \"object\") {\n          for (var key in values) {\n            source[key] = values[key];\n          }\n        } else {\n          console.warn(\"Module Error - Invalid value type, it must be an object\");\n        }\n      } else {\n        console.warn(\"Module Error - property does not exist:\", property);\n      }\n    } else {\n      console.warn(\"Module Error - module does not exist:\", name);\n    }\n  }; //add module to tabulator\n\n\n  Tabulator.prototype.registerModule = function (name, module) {\n    var self = this;\n    Tabulator.prototype.moduleBindings[name] = module;\n  }; //ensure that module are bound to instantiated function\n\n\n  Tabulator.prototype.bindModules = function () {\n    this.modules = {};\n\n    for (var name in Tabulator.prototype.moduleBindings) {\n      this.modules[name] = new Tabulator.prototype.moduleBindings[name](this);\n    }\n  }; //Check for module\n\n\n  Tabulator.prototype.modExists = function (plugin, required) {\n    if (this.modules[plugin]) {\n      return true;\n    } else {\n      if (required) {\n        console.error(\"Tabulator Module Not Installed: \" + plugin);\n      }\n\n      return false;\n    }\n  };\n\n  Tabulator.prototype.helpers = {\n    elVisible: function elVisible(el) {\n      return !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n    },\n    elOffset: function elOffset(el) {\n      var box = el.getBoundingClientRect();\n      return {\n        top: box.top + window.pageYOffset - document.documentElement.clientTop,\n        left: box.left + window.pageXOffset - document.documentElement.clientLeft\n      };\n    },\n    deepClone: function deepClone(obj) {\n      var clone = Array.isArray(obj) ? [] : {};\n\n      for (var i in obj) {\n        if (obj[i] != null && _typeof(obj[i]) === \"object\") {\n          if (obj[i] instanceof Date) {\n            clone[i] = new Date(obj[i]);\n          } else {\n            clone[i] = this.deepClone(obj[i]);\n          }\n        } else {\n          clone[i] = obj[i];\n        }\n      }\n\n      return clone;\n    }\n  };\n  Tabulator.prototype.comms = {\n    tables: [],\n    register: function register(table) {\n      Tabulator.prototype.comms.tables.push(table);\n    },\n    deregister: function deregister(table) {\n      var index = Tabulator.prototype.comms.tables.indexOf(table);\n\n      if (index > -1) {\n        Tabulator.prototype.comms.tables.splice(index, 1);\n      }\n    },\n    lookupTable: function lookupTable(query, silent) {\n      var results = [],\n          matches,\n          match;\n\n      if (typeof query === \"string\") {\n        matches = document.querySelectorAll(query);\n\n        if (matches.length) {\n          for (var i = 0; i < matches.length; i++) {\n            match = Tabulator.prototype.comms.matchElement(matches[i]);\n\n            if (match) {\n              results.push(match);\n            }\n          }\n        }\n      } else if (typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement || query instanceof Tabulator) {\n        match = Tabulator.prototype.comms.matchElement(query);\n\n        if (match) {\n          results.push(match);\n        }\n      } else if (Array.isArray(query)) {\n        query.forEach(function (item) {\n          results = results.concat(Tabulator.prototype.comms.lookupTable(item));\n        });\n      } else {\n        if (!silent) {\n          console.warn(\"Table Connection Error - Invalid Selector\", query);\n        }\n      }\n\n      return results;\n    },\n    matchElement: function matchElement(element) {\n      return Tabulator.prototype.comms.tables.find(function (table) {\n        return element instanceof Tabulator ? table === element : table.element === element;\n      });\n    }\n  };\n\n  Tabulator.prototype.findTable = function (query) {\n    var results = Tabulator.prototype.comms.lookupTable(query, true);\n    return Array.isArray(results) && !results.length ? false : results;\n  };\n\n  var Layout = function Layout(table) {\n    this.table = table;\n    this.mode = null;\n  }; //initialize layout system\n\n\n  Layout.prototype.initialize = function (layout) {\n    if (this.modes[layout]) {\n      this.mode = layout;\n    } else {\n      console.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n      this.mode = 'fitData';\n    }\n\n    this.table.element.setAttribute(\"tabulator-layout\", this.mode);\n  };\n\n  Layout.prototype.getMode = function () {\n    return this.mode;\n  }; //trigger table layout\n\n\n  Layout.prototype.layout = function () {\n    this.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\n  }; //layout render functions\n\n\n  Layout.prototype.modes = {\n    //resize columns to fit data the contain\n    \"fitData\": function fitData(columns) {\n      columns.forEach(function (column) {\n        column.reinitializeWidth();\n      });\n\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      }\n    },\n    //resize columns to fit data the contain and stretch row to fill table\n    \"fitDataFill\": function fitDataFill(columns) {\n      columns.forEach(function (column) {\n        column.reinitializeWidth();\n      });\n\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      }\n    },\n    //resize columns to fit data the contain and stretch last column to fill table\n    \"fitDataStretch\": function fitDataStretch(columns) {\n      var _this32 = this;\n\n      var colsWidth = 0,\n          tableWidth = this.table.rowManager.element.clientWidth,\n          gap = 0,\n          lastCol = false;\n      columns.forEach(function (column, i) {\n        if (!column.widthFixed) {\n          column.reinitializeWidth();\n        }\n\n        if (_this32.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\n          lastCol = column;\n        }\n\n        if (column.visible) {\n          colsWidth += column.getWidth();\n        }\n      });\n\n      if (lastCol) {\n        gap = tableWidth - colsWidth + lastCol.getWidth();\n\n        if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n          lastCol.setWidth(0);\n          this.table.modules.responsiveLayout.update();\n        }\n\n        if (gap > 0) {\n          lastCol.setWidth(gap);\n        } else {\n          lastCol.reinitializeWidth();\n        }\n      } else {\n        if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n          this.table.modules.responsiveLayout.update();\n        }\n      }\n    },\n    //resize columns to fit\n    \"fitColumns\": function fitColumns(columns) {\n      var self = this;\n      var totalWidth = self.table.element.clientWidth; //table element width\n\n      var fixedWidth = 0; //total width of columns with a defined width\n\n      var flexWidth = 0; //total width available to flexible columns\n\n      var flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\n\n      var flexColWidth = 0; //desired width of flexible columns\n\n      var flexColumns = []; //array of flexible width columns\n\n      var fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\n      var flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\n\n      var overflowWidth = 0; //horizontal overflow width\n\n      var gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n      function calcWidth(width) {\n        var colWidth;\n\n        if (typeof width == \"string\") {\n          if (width.indexOf(\"%\") > -1) {\n            colWidth = totalWidth / 100 * parseInt(width);\n          } else {\n            colWidth = parseInt(width);\n          }\n        } else {\n          colWidth = width;\n        }\n\n        return colWidth;\n      } //ensure columns resize to take up the correct amount of space\n\n\n      function scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\n        var oversizeCols = [],\n            oversizeSpace = 0,\n            remainingSpace = 0,\n            nextColWidth = 0,\n            gap = 0,\n            changeUnits = 0,\n            undersizeCols = [];\n\n        function calcGrow(col) {\n          return colWidth * (col.column.definition.widthGrow || 1);\n        }\n\n        function calcShrink(col) {\n          return calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0);\n        }\n\n        columns.forEach(function (col, i) {\n          var width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\n          if (col.column.minWidth >= width) {\n            oversizeCols.push(col);\n          } else {\n            undersizeCols.push(col);\n            changeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n          }\n        });\n\n        if (oversizeCols.length) {\n          oversizeCols.forEach(function (col) {\n            oversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth;\n            col.width = col.column.minWidth;\n          });\n          remainingSpace = freeSpace - oversizeSpace;\n          nextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace;\n          gap = remainingSpace - nextColWidth * changeUnits;\n          gap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n        } else {\n          gap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace;\n          undersizeCols.forEach(function (column) {\n            column.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n          });\n        }\n\n        return gap;\n      }\n\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      } //adjust for vertical scrollbar if present\n\n\n      if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n        totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n      }\n\n      columns.forEach(function (column) {\n        var width, minWidth, colWidth;\n\n        if (column.visible) {\n          width = column.definition.width;\n          minWidth = parseInt(column.minWidth);\n\n          if (width) {\n            colWidth = calcWidth(width);\n            fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n            if (column.definition.widthShrink) {\n              fixedShrinkColumns.push({\n                column: column,\n                width: colWidth > minWidth ? colWidth : minWidth\n              });\n              flexShrinkUnits += column.definition.widthShrink;\n            }\n          } else {\n            flexColumns.push({\n              column: column,\n              width: 0\n            });\n            flexGrowUnits += column.definition.widthGrow || 1;\n          }\n        }\n      }); //calculate available space\n\n      flexWidth = totalWidth - fixedWidth; //calculate correct column size\n\n      flexColWidth = Math.floor(flexWidth / flexGrowUnits); //generate column widths\n\n      var gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false); //increase width of last column to account for rounding errors\n\n      if (flexColumns.length && gapFill > 0) {\n        flexColumns[flexColumns.length - 1].width += +gapFill;\n      } //caculate space for columns to be shrunk into\n\n\n      flexColumns.forEach(function (col) {\n        flexWidth -= col.width;\n      });\n      overflowWidth = Math.abs(gapFill) + flexWidth; //shrink oversize columns if there is no available space\n\n      if (overflowWidth > 0 && flexShrinkUnits) {\n        gapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n      } //decrease width of last column to account for rounding errors\n\n\n      if (fixedShrinkColumns.length) {\n        fixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill;\n      }\n\n      flexColumns.forEach(function (col) {\n        col.column.setWidth(col.width);\n      });\n      fixedShrinkColumns.forEach(function (col) {\n        col.column.setWidth(col.width);\n      });\n    }\n  };\n  Tabulator.prototype.registerModule(\"layout\", Layout);\n\n  var Localize = function Localize(table) {\n    this.table = table; //hold Tabulator object\n\n    this.locale = \"default\"; //current locale\n\n    this.lang = false; //current language\n\n    this.bindings = {}; //update events to call when locale is changed\n  }; //set header placehoder\n\n\n  Localize.prototype.setHeaderFilterPlaceholder = function (placeholder) {\n    this.langs.default.headerFilters.default = placeholder;\n  }; //set header filter placeholder by column\n\n\n  Localize.prototype.setHeaderFilterColumnPlaceholder = function (column, placeholder) {\n    this.langs.default.headerFilters.columns[column] = placeholder;\n\n    if (this.lang && !this.lang.headerFilters.columns[column]) {\n      this.lang.headerFilters.columns[column] = placeholder;\n    }\n  }; //setup a lang description object\n\n\n  Localize.prototype.installLang = function (locale, lang) {\n    if (this.langs[locale]) {\n      this._setLangProp(this.langs[locale], lang);\n    } else {\n      this.langs[locale] = lang;\n    }\n  };\n\n  Localize.prototype._setLangProp = function (lang, values) {\n    for (var key in values) {\n      if (lang[key] && _typeof(lang[key]) == \"object\") {\n        this._setLangProp(lang[key], values[key]);\n      } else {\n        lang[key] = values[key];\n      }\n    }\n  }; //set current locale\n\n\n  Localize.prototype.setLocale = function (desiredLocale) {\n    var self = this;\n    desiredLocale = desiredLocale || \"default\"; //fill in any matching languge values\n\n    function traverseLang(trans, path) {\n      for (var prop in trans) {\n        if (_typeof(trans[prop]) == \"object\") {\n          if (!path[prop]) {\n            path[prop] = {};\n          }\n\n          traverseLang(trans[prop], path[prop]);\n        } else {\n          path[prop] = trans[prop];\n        }\n      }\n    } //determing correct locale to load\n\n\n    if (desiredLocale === true && navigator.language) {\n      //get local from system\n      desiredLocale = navigator.language.toLowerCase();\n    }\n\n    if (desiredLocale) {\n      //if locale is not set, check for matching top level locale else use default\n      if (!self.langs[desiredLocale]) {\n        var prefix = desiredLocale.split(\"-\")[0];\n\n        if (self.langs[prefix]) {\n          console.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n          desiredLocale = prefix;\n        } else {\n          console.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n          desiredLocale = \"default\";\n        }\n      }\n    }\n\n    self.locale = desiredLocale; //load default lang template\n\n    self.lang = Tabulator.prototype.helpers.deepClone(self.langs.default || {});\n\n    if (desiredLocale != \"default\") {\n      traverseLang(self.langs[desiredLocale], self.lang);\n    }\n\n    self.table.options.localized.call(self.table, self.locale, self.lang);\n\n    self._executeBindings();\n  }; //get current locale\n\n\n  Localize.prototype.getLocale = function (locale) {\n    return self.locale;\n  }; //get lang object for given local or current if none provided\n\n\n  Localize.prototype.getLang = function (locale) {\n    return locale ? this.langs[locale] : this.lang;\n  }; //get text for current locale\n\n\n  Localize.prototype.getText = function (path, value) {\n    var path = value ? path + \"|\" + value : path,\n        pathArray = path.split(\"|\"),\n        text = this._getLangElement(pathArray, this.locale); // if(text === false){\n    // \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n    // }\n\n\n    return text || \"\";\n  }; //traverse langs object and find localized copy\n\n\n  Localize.prototype._getLangElement = function (path, locale) {\n    var self = this;\n    var root = self.lang;\n    path.forEach(function (level) {\n      var rootPath;\n\n      if (root) {\n        rootPath = root[level];\n\n        if (typeof rootPath != \"undefined\") {\n          root = rootPath;\n        } else {\n          root = false;\n        }\n      }\n    });\n    return root;\n  }; //set update binding\n\n\n  Localize.prototype.bind = function (path, callback) {\n    if (!this.bindings[path]) {\n      this.bindings[path] = [];\n    }\n\n    this.bindings[path].push(callback);\n    callback(this.getText(path), this.lang);\n  }; //itterate through bindings and trigger updates\n\n\n  Localize.prototype._executeBindings = function () {\n    var self = this;\n\n    var _loop = function _loop(path) {\n      self.bindings[path].forEach(function (binding) {\n        binding(self.getText(path), self.lang);\n      });\n    };\n\n    for (var path in self.bindings) {\n      _loop(path);\n    }\n  }; //Localized text listings\n\n\n  Localize.prototype.langs = {\n    \"default\": {\n      //hold default locale text\n      \"groups\": {\n        \"item\": \"item\",\n        \"items\": \"items\"\n      },\n      \"columns\": {},\n      \"ajax\": {\n        \"loading\": \"Loading\",\n        \"error\": \"Error\"\n      },\n      \"pagination\": {\n        \"page_size\": \"Page Size\",\n        \"first\": \"First\",\n        \"first_title\": \"First Page\",\n        \"last\": \"Last\",\n        \"last_title\": \"Last Page\",\n        \"prev\": \"Prev\",\n        \"prev_title\": \"Prev Page\",\n        \"next\": \"Next\",\n        \"next_title\": \"Next Page\"\n      },\n      \"headerFilters\": {\n        \"default\": \"filter column...\",\n        \"columns\": {}\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"localize\", Localize);\n\n  var Comms = function Comms(table) {\n    this.table = table;\n  };\n\n  Comms.prototype.getConnections = function (selectors) {\n    var self = this,\n        connections = [],\n        connection;\n    connection = Tabulator.prototype.comms.lookupTable(selectors);\n    connection.forEach(function (con) {\n      if (self.table !== con) {\n        connections.push(con);\n      }\n    });\n    return connections;\n  };\n\n  Comms.prototype.send = function (selectors, module, action, data) {\n    var self = this,\n        connections = this.getConnections(selectors);\n    connections.forEach(function (connection) {\n      connection.tableComms(self.table.element, module, action, data);\n    });\n\n    if (!connections.length && selectors) {\n      console.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n    }\n  };\n\n  Comms.prototype.receive = function (table, module, action, data) {\n    if (this.table.modExists(module)) {\n      return this.table.modules[module].commsReceived(table, action, data);\n    } else {\n      console.warn(\"Inter-table Comms Error - no such module:\", module);\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"comms\", Comms);\n\n  var Accessor = function Accessor(table) {\n    this.table = table; //hold Tabulator object\n\n    this.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n  }; //initialize column accessor\n\n\n  Accessor.prototype.initializeColumn = function (column) {\n    var self = this,\n        match = false,\n        config = {};\n    this.allowedTypes.forEach(function (type) {\n      var key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n          accessor;\n\n      if (column.definition[key]) {\n        accessor = self.lookupAccessor(column.definition[key]);\n\n        if (accessor) {\n          match = true;\n          config[key] = {\n            accessor: accessor,\n            params: column.definition[key + \"Params\"] || {}\n          };\n        }\n      }\n    });\n\n    if (match) {\n      column.modules.accessor = config;\n    }\n  };\n\n  Accessor.prototype.lookupAccessor = function (value) {\n    var accessor = false; //set column accessor\n\n    switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n      case \"string\":\n        if (this.accessors[value]) {\n          accessor = this.accessors[value];\n        } else {\n          console.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n        }\n\n        break;\n\n      case \"function\":\n        accessor = value;\n        break;\n    }\n\n    return accessor;\n  }; //apply accessor to row\n\n\n  Accessor.prototype.transformRow = function (dataIn, type) {\n    var self = this,\n        key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)); //clone data object with deep copy to isolate internal data from returned result\n\n    var data = Tabulator.prototype.helpers.deepClone(dataIn || {});\n    self.table.columnManager.traverse(function (column) {\n      var value, accessor, params, component;\n\n      if (column.modules.accessor) {\n        accessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n        if (accessor) {\n          value = column.getFieldValue(data);\n\n          if (value != \"undefined\") {\n            component = column.getComponent();\n            params = typeof accessor.params === \"function\" ? accessor.params(value, data, type, component) : accessor.params;\n            column.setFieldValue(data, accessor.accessor(value, data, type, params, component));\n          }\n        }\n      }\n    });\n    return data;\n  }, //default accessors\n  Accessor.prototype.accessors = {};\n  Tabulator.prototype.registerModule(\"accessor\", Accessor);\n\n  var Ajax = function Ajax(table) {\n    this.table = table; //hold Tabulator object\n\n    this.config = false; //hold config object for ajax request\n\n    this.url = \"\"; //request URL\n\n    this.urlGenerator = false;\n    this.params = false; //request parameters\n\n    this.loaderElement = this.createLoaderElement(); //loader message div\n\n    this.msgElement = this.createMsgElement(); //message element\n\n    this.loadingElement = false;\n    this.errorElement = false;\n    this.loaderPromise = false;\n    this.progressiveLoad = false;\n    this.loading = false;\n    this.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\n  }; //initialize setup options\n\n\n  Ajax.prototype.initialize = function () {\n    var template;\n    this.loaderElement.appendChild(this.msgElement);\n\n    if (this.table.options.ajaxLoaderLoading) {\n      if (typeof this.table.options.ajaxLoaderLoading == \"string\") {\n        template = document.createElement('template');\n        template.innerHTML = this.table.options.ajaxLoaderLoading.trim();\n        this.loadingElement = template.content.firstChild;\n      } else {\n        this.loadingElement = this.table.options.ajaxLoaderLoading;\n      }\n    }\n\n    this.loaderPromise = this.table.options.ajaxRequestFunc || this.defaultLoaderPromise;\n    this.urlGenerator = this.table.options.ajaxURLGenerator || this.defaultURLGenerator;\n\n    if (this.table.options.ajaxLoaderError) {\n      if (typeof this.table.options.ajaxLoaderError == \"string\") {\n        template = document.createElement('template');\n        template.innerHTML = this.table.options.ajaxLoaderError.trim();\n        this.errorElement = template.content.firstChild;\n      } else {\n        this.errorElement = this.table.options.ajaxLoaderError;\n      }\n    }\n\n    if (this.table.options.ajaxParams) {\n      this.setParams(this.table.options.ajaxParams);\n    }\n\n    if (this.table.options.ajaxConfig) {\n      this.setConfig(this.table.options.ajaxConfig);\n    }\n\n    if (this.table.options.ajaxURL) {\n      this.setUrl(this.table.options.ajaxURL);\n    }\n\n    if (this.table.options.ajaxProgressiveLoad) {\n      if (this.table.options.pagination) {\n        this.progressiveLoad = false;\n        console.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n      } else {\n        if (this.table.modExists(\"page\")) {\n          this.progressiveLoad = this.table.options.ajaxProgressiveLoad;\n          this.table.modules.page.initializeProgressive(this.progressiveLoad);\n        } else {\n          console.error(\"Pagination plugin is required for progressive ajax loading\");\n        }\n      }\n    }\n  };\n\n  Ajax.prototype.createLoaderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-loader\");\n    return el;\n  };\n\n  Ajax.prototype.createMsgElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-loader-msg\");\n    el.setAttribute(\"role\", \"alert\");\n    return el;\n  }; //set ajax params\n\n\n  Ajax.prototype.setParams = function (params, update) {\n    if (update) {\n      this.params = this.params || {};\n\n      for (var key in params) {\n        this.params[key] = params[key];\n      }\n    } else {\n      this.params = params;\n    }\n  };\n\n  Ajax.prototype.getParams = function () {\n    return this.params || {};\n  }; //load config object\n\n\n  Ajax.prototype.setConfig = function (config) {\n    this._loadDefaultConfig();\n\n    if (typeof config == \"string\") {\n      this.config.method = config;\n    } else {\n      for (var key in config) {\n        this.config[key] = config[key];\n      }\n    }\n  }; //create config object from default\n\n\n  Ajax.prototype._loadDefaultConfig = function (force) {\n    var self = this;\n\n    if (!self.config || force) {\n      self.config = {}; //load base config from defaults\n\n      for (var key in self.defaultConfig) {\n        self.config[key] = self.defaultConfig[key];\n      }\n    }\n  }; //set request url\n\n\n  Ajax.prototype.setUrl = function (url) {\n    this.url = url;\n  }; //get request url\n\n\n  Ajax.prototype.getUrl = function () {\n    return this.url;\n  }; //lstandard loading function\n\n\n  Ajax.prototype.loadData = function (inPosition, columnsChanged) {\n    var self = this;\n\n    if (this.progressiveLoad) {\n      return this._loadDataProgressive();\n    } else {\n      return this._loadDataStandard(inPosition, columnsChanged);\n    }\n  };\n\n  Ajax.prototype.nextPage = function (diff) {\n    var margin;\n\n    if (!this.loading) {\n      margin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.getElement().clientHeight * 2;\n\n      if (diff < margin) {\n        this.table.modules.page.nextPage().then(function () {}).catch(function () {});\n      }\n    }\n  };\n\n  Ajax.prototype.blockActiveRequest = function () {\n    this.requestOrder++;\n  };\n\n  Ajax.prototype._loadDataProgressive = function () {\n    this.table.rowManager.setData([]);\n    return this.table.modules.page.setPage(1);\n  };\n\n  Ajax.prototype._loadDataStandard = function (inPosition, columnsChanged) {\n    var _this33 = this;\n\n    return new Promise(function (resolve, reject) {\n      _this33.sendRequest(inPosition).then(function (data) {\n        _this33.table.rowManager.setData(data, inPosition, columnsChanged).then(function () {\n          resolve();\n        }).catch(function (e) {\n          reject(e);\n        });\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n  };\n\n  Ajax.prototype.generateParamsList = function (data, prefix) {\n    var self = this,\n        output = [];\n    prefix = prefix || \"\";\n\n    if (Array.isArray(data)) {\n      data.forEach(function (item, i) {\n        output = output.concat(self.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n      });\n    } else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === \"object\") {\n      for (var key in data) {\n        output = output.concat(self.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n      }\n    } else {\n      output.push({\n        key: prefix,\n        value: data\n      });\n    }\n\n    return output;\n  };\n\n  Ajax.prototype.serializeParams = function (params) {\n    var output = this.generateParamsList(params),\n        encoded = [];\n    output.forEach(function (item) {\n      encoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n    });\n    return encoded.join(\"&\");\n  }; //send ajax request\n\n\n  Ajax.prototype.sendRequest = function (silent) {\n    var _this34 = this;\n\n    var self = this,\n        url = self.url,\n        requestNo,\n        esc,\n        query;\n    self.requestOrder++;\n    requestNo = self.requestOrder;\n\n    self._loadDefaultConfig();\n\n    return new Promise(function (resolve, reject) {\n      if (self.table.options.ajaxRequesting.call(_this34.table, self.url, self.params) !== false) {\n        self.loading = true;\n\n        if (!silent) {\n          self.showLoader();\n        }\n\n        _this34.loaderPromise(url, self.config, self.params).then(function (data) {\n          if (requestNo === self.requestOrder) {\n            if (self.table.options.ajaxResponse) {\n              data = self.table.options.ajaxResponse.call(self.table, self.url, self.params, data);\n            }\n\n            resolve(data);\n            self.hideLoader();\n            self.loading = false;\n          } else {\n            console.warn(\"Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made\");\n          }\n        }).catch(function (error) {\n          console.error(\"Ajax Load Error: \", error);\n          self.table.options.ajaxError.call(self.table, error);\n          self.showError();\n          setTimeout(function () {\n            self.hideLoader();\n          }, 3000);\n          self.loading = false;\n          reject();\n        });\n      } else {\n        reject();\n      }\n    });\n  };\n\n  Ajax.prototype.showLoader = function () {\n    var shouldLoad = typeof this.table.options.ajaxLoader === \"function\" ? this.table.options.ajaxLoader() : this.table.options.ajaxLoader;\n\n    if (shouldLoad) {\n      this.hideLoader();\n\n      while (this.msgElement.firstChild) {\n        this.msgElement.removeChild(this.msgElement.firstChild);\n      }\n\n      this.msgElement.classList.remove(\"tabulator-error\");\n      this.msgElement.classList.add(\"tabulator-loading\");\n\n      if (this.loadingElement) {\n        this.msgElement.appendChild(this.loadingElement);\n      } else {\n        this.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|loading\");\n      }\n\n      this.table.element.appendChild(this.loaderElement);\n    }\n  };\n\n  Ajax.prototype.showError = function () {\n    this.hideLoader();\n\n    while (this.msgElement.firstChild) {\n      this.msgElement.removeChild(this.msgElement.firstChild);\n    }\n\n    this.msgElement.classList.remove(\"tabulator-loading\");\n    this.msgElement.classList.add(\"tabulator-error\");\n\n    if (this.errorElement) {\n      this.msgElement.appendChild(this.errorElement);\n    } else {\n      this.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|error\");\n    }\n\n    this.table.element.appendChild(this.loaderElement);\n  };\n\n  Ajax.prototype.hideLoader = function () {\n    if (this.loaderElement.parentNode) {\n      this.loaderElement.parentNode.removeChild(this.loaderElement);\n    }\n  }; //default ajax config object\n\n\n  Ajax.prototype.defaultConfig = {\n    method: \"GET\"\n  };\n\n  Ajax.prototype.defaultURLGenerator = function (url, config, params) {\n    if (url) {\n      if (params && Object.keys(params).length) {\n        if (!config.method || config.method.toLowerCase() == \"get\") {\n          config.method = \"get\";\n          url += (url.includes(\"?\") ? \"&\" : \"?\") + this.serializeParams(params);\n        }\n      }\n    }\n\n    return url;\n  };\n\n  Ajax.prototype.defaultLoaderPromise = function (url, config, params) {\n    var self = this,\n        contentType;\n    return new Promise(function (resolve, reject) {\n      //set url\n      url = self.urlGenerator(url, config, params); //set body content if not GET request\n\n      if (config.method.toUpperCase() != \"GET\") {\n        contentType = _typeof(self.table.options.ajaxContentType) === \"object\" ? self.table.options.ajaxContentType : self.contentTypeFormatters[self.table.options.ajaxContentType];\n\n        if (contentType) {\n          for (var key in contentType.headers) {\n            if (!config.headers) {\n              config.headers = {};\n            }\n\n            if (typeof config.headers[key] === \"undefined\") {\n              config.headers[key] = contentType.headers[key];\n            }\n          }\n\n          config.body = contentType.body.call(self, url, config, params);\n        } else {\n          console.warn(\"Ajax Error - Invalid ajaxContentType value:\", self.table.options.ajaxContentType);\n        }\n      }\n\n      if (url) {\n        //configure headers\n        if (typeof config.headers === \"undefined\") {\n          config.headers = {};\n        }\n\n        if (typeof config.headers.Accept === \"undefined\") {\n          config.headers.Accept = \"application/json\";\n        }\n\n        if (typeof config.headers[\"X-Requested-With\"] === \"undefined\") {\n          config.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n        }\n\n        if (typeof config.mode === \"undefined\") {\n          config.mode = \"cors\";\n        }\n\n        if (config.mode == \"cors\") {\n          if (typeof config.headers[\"Access-Control-Allow-Origin\"] === \"undefined\") {\n            config.headers[\"Access-Control-Allow-Origin\"] = window.location.origin;\n          }\n\n          if (typeof config.credentials === \"undefined\") {\n            config.credentials = 'same-origin';\n          }\n        } else {\n          if (typeof config.credentials === \"undefined\") {\n            config.credentials = 'include';\n          }\n        } //send request\n\n\n        fetch(url, config).then(function (response) {\n          if (response.ok) {\n            response.json().then(function (data) {\n              resolve(data);\n            }).catch(function (error) {\n              reject(error);\n              console.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n            });\n          } else {\n            console.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n            reject(response);\n          }\n        }).catch(function (error) {\n          console.error(\"Ajax Load Error - Connection Error: \", error);\n          reject(error);\n        });\n      } else {\n        console.warn(\"Ajax Load Error - No URL Set\");\n        resolve([]);\n      }\n    });\n  };\n\n  Ajax.prototype.contentTypeFormatters = {\n    \"json\": {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: function body(url, config, params) {\n        return JSON.stringify(params);\n      }\n    },\n    \"form\": {\n      headers: {},\n      body: function body(url, config, params) {\n        var output = this.generateParamsList(params),\n            form = new FormData();\n        output.forEach(function (item) {\n          form.append(item.key, item.value);\n        });\n        return form;\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"ajax\", Ajax);\n\n  var ColumnCalcs = function ColumnCalcs(table) {\n    this.table = table; //hold Tabulator object\n\n    this.topCalcs = [];\n    this.botCalcs = [];\n    this.genColumn = false;\n    this.topElement = this.createElement();\n    this.botElement = this.createElement();\n    this.topRow = false;\n    this.botRow = false;\n    this.topInitialized = false;\n    this.botInitialized = false;\n    this.initialize();\n  };\n\n  ColumnCalcs.prototype.createElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-calcs-holder\");\n    return el;\n  };\n\n  ColumnCalcs.prototype.initialize = function () {\n    this.genColumn = new Column({\n      field: \"value\"\n    }, this);\n  }; //dummy functions to handle being mock column manager\n\n\n  ColumnCalcs.prototype.registerColumnField = function () {}; //initialize column calcs\n\n\n  ColumnCalcs.prototype.initializeColumn = function (column) {\n    var def = column.definition;\n    var config = {\n      topCalcParams: def.topCalcParams || {},\n      botCalcParams: def.bottomCalcParams || {}\n    };\n\n    if (def.topCalc) {\n      switch (_typeof(def.topCalc)) {\n        case \"string\":\n          if (this.calculations[def.topCalc]) {\n            config.topCalc = this.calculations[def.topCalc];\n          } else {\n            console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n          }\n\n          break;\n\n        case \"function\":\n          config.topCalc = def.topCalc;\n          break;\n      }\n\n      if (config.topCalc) {\n        column.modules.columnCalcs = config;\n        this.topCalcs.push(column);\n\n        if (this.table.options.columnCalcs != \"group\") {\n          this.initializeTopRow();\n        }\n      }\n    }\n\n    if (def.bottomCalc) {\n      switch (_typeof(def.bottomCalc)) {\n        case \"string\":\n          if (this.calculations[def.bottomCalc]) {\n            config.botCalc = this.calculations[def.bottomCalc];\n          } else {\n            console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n          }\n\n          break;\n\n        case \"function\":\n          config.botCalc = def.bottomCalc;\n          break;\n      }\n\n      if (config.botCalc) {\n        column.modules.columnCalcs = config;\n        this.botCalcs.push(column);\n\n        if (this.table.options.columnCalcs != \"group\") {\n          this.initializeBottomRow();\n        }\n      }\n    }\n  };\n\n  ColumnCalcs.prototype.removeCalcs = function () {\n    var changed = false;\n\n    if (this.topInitialized) {\n      this.topInitialized = false;\n      this.topElement.parentNode.removeChild(this.topElement);\n      changed = true;\n    }\n\n    if (this.botInitialized) {\n      this.botInitialized = false;\n      this.table.footerManager.remove(this.botElement);\n      changed = true;\n    }\n\n    if (changed) {\n      this.table.rowManager.adjustTableSize();\n    }\n  };\n\n  ColumnCalcs.prototype.initializeTopRow = function () {\n    if (!this.topInitialized) {\n      // this.table.columnManager.headersElement.after(this.topElement);\n      this.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n      this.topInitialized = true;\n    }\n  };\n\n  ColumnCalcs.prototype.initializeBottomRow = function () {\n    if (!this.botInitialized) {\n      this.table.footerManager.prepend(this.botElement);\n      this.botInitialized = true;\n    }\n  };\n\n  ColumnCalcs.prototype.scrollHorizontal = function (left) {\n    var hozAdjust = 0,\n        scrollWidth = this.table.columnManager.getElement().scrollWidth - this.table.element.clientWidth;\n\n    if (this.botInitialized) {\n      this.botRow.getElement().style.marginLeft = -left + \"px\";\n    }\n  };\n\n  ColumnCalcs.prototype.recalc = function (rows) {\n    var data, row;\n\n    if (this.topInitialized || this.botInitialized) {\n      data = this.rowsToData(rows);\n\n      if (this.topInitialized) {\n        if (this.topRow) {\n          this.topRow.deleteCells();\n        }\n\n        row = this.generateRow(\"top\", this.rowsToData(rows));\n        this.topRow = row;\n\n        while (this.topElement.firstChild) {\n          this.topElement.removeChild(this.topElement.firstChild);\n        }\n\n        this.topElement.appendChild(row.getElement());\n        row.initialize(true);\n      }\n\n      if (this.botInitialized) {\n        if (this.botRow) {\n          this.botRow.deleteCells();\n        }\n\n        row = this.generateRow(\"bottom\", this.rowsToData(rows));\n        this.botRow = row;\n\n        while (this.botElement.firstChild) {\n          this.botElement.removeChild(this.botElement.firstChild);\n        }\n\n        this.botElement.appendChild(row.getElement());\n        row.initialize(true);\n      }\n\n      this.table.rowManager.adjustTableSize(); //set resizable handles\n\n      if (this.table.modExists(\"frozenColumns\")) {\n        this.table.modules.frozenColumns.layout();\n      }\n    }\n  };\n\n  ColumnCalcs.prototype.recalcRowGroup = function (row) {\n    this.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n  };\n\n  ColumnCalcs.prototype.recalcAll = function () {\n    var _this35 = this;\n\n    if (this.topCalcs.length || this.botCalcs.length) {\n      if (this.table.options.columnCalcs !== \"group\") {\n        this.recalc(this.table.rowManager.activeRows);\n      }\n\n      if (this.table.options.groupBy && this.table.options.columnCalcs !== \"table\") {\n        var groups = table.modules.groupRows.getChildGroups();\n        groups.forEach(function (group) {\n          _this35.recalcGroup(group);\n        });\n      }\n    }\n  };\n\n  ColumnCalcs.prototype.recalcGroup = function (group) {\n    var data, rowData;\n\n    if (group) {\n      if (group.calcs) {\n        if (group.calcs.bottom) {\n          data = this.rowsToData(group.rows);\n          rowData = this.generateRowData(\"bottom\", data);\n          group.calcs.bottom.updateData(rowData);\n          group.calcs.bottom.reinitialize();\n        }\n\n        if (group.calcs.top) {\n          data = this.rowsToData(group.rows);\n          rowData = this.generateRowData(\"top\", data);\n          group.calcs.top.updateData(rowData);\n          group.calcs.top.reinitialize();\n        }\n      }\n    }\n  }; //generate top stats row\n\n\n  ColumnCalcs.prototype.generateTopRow = function (rows) {\n    return this.generateRow(\"top\", this.rowsToData(rows));\n  }; //generate bottom stats row\n\n\n  ColumnCalcs.prototype.generateBottomRow = function (rows) {\n    return this.generateRow(\"bottom\", this.rowsToData(rows));\n  };\n\n  ColumnCalcs.prototype.rowsToData = function (rows) {\n    var _this36 = this;\n\n    var data = [];\n    rows.forEach(function (row) {\n      data.push(row.getData());\n\n      if (_this36.table.options.dataTree && _this36.table.options.dataTreeChildColumnCalcs) {\n        if (row.modules.dataTree.open) {\n          var children = _this36.rowsToData(_this36.table.modules.dataTree.getFilteredTreeChildren(row));\n\n          data = data.concat(children);\n        }\n      }\n    });\n    return data;\n  }; //generate stats row\n\n\n  ColumnCalcs.prototype.generateRow = function (pos, data) {\n    var self = this,\n        rowData = this.generateRowData(pos, data),\n        row;\n\n    if (self.table.modExists(\"mutator\")) {\n      self.table.modules.mutator.disable();\n    }\n\n    row = new Row(rowData, this, \"calc\");\n\n    if (self.table.modExists(\"mutator\")) {\n      self.table.modules.mutator.enable();\n    }\n\n    row.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\n    row.generateCells = function () {\n      var cells = [];\n      self.table.columnManager.columnsByIndex.forEach(function (column) {\n        //set field name of mock column\n        self.genColumn.setField(column.getField());\n        self.genColumn.hozAlign = column.hozAlign;\n\n        if (column.definition[pos + \"CalcFormatter\"] && self.table.modExists(\"format\")) {\n          self.genColumn.modules.format = {\n            formatter: self.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n            params: column.definition[pos + \"CalcFormatterParams\"]\n          };\n        } else {\n          self.genColumn.modules.format = {\n            formatter: self.table.modules.format.getFormatter(\"plaintext\"),\n            params: {}\n          };\n        } //ensure css class defintion is replicated to calculation cell\n\n\n        self.genColumn.definition.cssClass = column.definition.cssClass; //generate cell and assign to correct column\n\n        var cell = new Cell(self.genColumn, row);\n        cell.column = column;\n        cell.setWidth();\n        column.cells.push(cell);\n        cells.push(cell);\n\n        if (!column.visible) {\n          cell.hide();\n        }\n      });\n      this.cells = cells;\n    };\n\n    return row;\n  }; //generate stats row\n\n\n  ColumnCalcs.prototype.generateRowData = function (pos, data) {\n    var rowData = {},\n        calcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n        type = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n        params,\n        paramKey;\n    calcs.forEach(function (column) {\n      var values = [];\n\n      if (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\n        data.forEach(function (item) {\n          values.push(column.getFieldValue(item));\n        });\n        paramKey = type + \"Params\";\n        params = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n        column.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n      }\n    });\n    return rowData;\n  };\n\n  ColumnCalcs.prototype.hasTopCalcs = function () {\n    return !!this.topCalcs.length;\n  };\n\n  ColumnCalcs.prototype.hasBottomCalcs = function () {\n    return !!this.botCalcs.length;\n  }; //handle table redraw\n\n\n  ColumnCalcs.prototype.redraw = function () {\n    if (this.topRow) {\n      this.topRow.normalizeHeight(true);\n    }\n\n    if (this.botRow) {\n      this.botRow.normalizeHeight(true);\n    }\n  }; //return the calculated\n\n\n  ColumnCalcs.prototype.getResults = function () {\n    var self = this,\n        results = {},\n        groups;\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      groups = this.table.modules.groupRows.getGroups(true);\n      groups.forEach(function (group) {\n        results[group.getKey()] = self.getGroupResults(group);\n      });\n    } else {\n      results = {\n        top: this.topRow ? this.topRow.getData() : {},\n        bottom: this.botRow ? this.botRow.getData() : {}\n      };\n    }\n\n    return results;\n  }; //get results from a group\n\n\n  ColumnCalcs.prototype.getGroupResults = function (group) {\n    var self = this,\n        groupObj = group._getSelf(),\n        subGroups = group.getSubGroups(),\n        subGroupResults = {},\n        results = {};\n\n    subGroups.forEach(function (subgroup) {\n      subGroupResults[subgroup.getKey()] = self.getGroupResults(subgroup);\n    });\n    results = {\n      top: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n      bottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n      groups: subGroupResults\n    };\n    return results;\n  }; //default calculations\n\n\n  ColumnCalcs.prototype.calculations = {\n    \"avg\": function avg(values, data, calcParams) {\n      var output = 0,\n          precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n      if (values.length) {\n        output = values.reduce(function (sum, value) {\n          value = Number(value);\n          return sum + value;\n        });\n        output = output / values.length;\n        output = precision !== false ? output.toFixed(precision) : output;\n      }\n\n      return parseFloat(output).toString();\n    },\n    \"max\": function max(values, data, calcParams) {\n      var output = null,\n          precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n      values.forEach(function (value) {\n        value = Number(value);\n\n        if (value > output || output === null) {\n          output = value;\n        }\n      });\n      return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n    },\n    \"min\": function min(values, data, calcParams) {\n      var output = null,\n          precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n      values.forEach(function (value) {\n        value = Number(value);\n\n        if (value < output || output === null) {\n          output = value;\n        }\n      });\n      return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n    },\n    \"sum\": function sum(values, data, calcParams) {\n      var output = 0,\n          precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n      if (values.length) {\n        values.forEach(function (value) {\n          value = Number(value);\n          output += !isNaN(value) ? Number(value) : 0;\n        });\n      }\n\n      return precision !== false ? output.toFixed(precision) : output;\n    },\n    \"concat\": function concat(values, data, calcParams) {\n      var output = 0;\n\n      if (values.length) {\n        output = values.reduce(function (sum, value) {\n          return String(sum) + String(value);\n        });\n      }\n\n      return output;\n    },\n    \"count\": function count(values, data, calcParams) {\n      var output = 0;\n\n      if (values.length) {\n        values.forEach(function (value) {\n          if (value) {\n            output++;\n          }\n        });\n      }\n\n      return output;\n    }\n  };\n  Tabulator.prototype.registerModule(\"columnCalcs\", ColumnCalcs);\n\n  var Clipboard = function Clipboard(table) {\n    this.table = table;\n    this.mode = true;\n\n    this.pasteParser = function () {};\n\n    this.pasteAction = function () {};\n\n    this.customSelection = false;\n    this.rowRange = false;\n    this.blocked = true; //block copy actions not originating from this command\n  };\n\n  Clipboard.prototype.initialize = function () {\n    var _this37 = this;\n\n    this.mode = this.table.options.clipboard;\n    this.rowRange = this.table.options.clipboardCopyRowRange;\n\n    if (this.mode === true || this.mode === \"copy\") {\n      this.table.element.addEventListener(\"copy\", function (e) {\n        var plain, html;\n\n        if (!_this37.blocked) {\n          e.preventDefault();\n\n          if (_this37.customSelection) {\n            plain = _this37.customSelection;\n\n            if (_this37.table.options.clipboardCopyFormatter) {\n              plain = _this37.table.options.clipboardCopyFormatter(\"plain\", plain);\n            }\n          } else {\n            html = _this37.table.modules.export.getHtml(_this37.rowRange, _this37.table.options.clipboardCopyStyled, _this37.table.options.clipboardCopyConfig, \"clipboard\");\n            plain = html ? _this37.generatePlainContent(html) : \"\";\n\n            if (_this37.table.options.clipboardCopyFormatter) {\n              plain = _this37.table.options.clipboardCopyFormatter(\"plain\", plain);\n              html = _this37.table.options.clipboardCopyFormatter(\"html\", html);\n            }\n          }\n\n          if (window.clipboardData && window.clipboardData.setData) {\n            window.clipboardData.setData('Text', plain);\n          } else if (e.clipboardData && e.clipboardData.setData) {\n            e.clipboardData.setData('text/plain', plain);\n\n            if (html) {\n              e.clipboardData.setData('text/html', html);\n            }\n          } else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n            e.originalEvent.clipboardData.setData('text/plain', plain);\n\n            if (html) {\n              e.originalEvent.clipboardData.setData('text/html', html);\n            }\n          }\n\n          _this37.table.options.clipboardCopied.call(_this37.table, plain, html);\n\n          _this37.reset();\n        }\n      });\n    }\n\n    if (this.mode === true || this.mode === \"paste\") {\n      this.table.element.addEventListener(\"paste\", function (e) {\n        _this37.paste(e);\n      });\n    }\n\n    this.setPasteParser(this.table.options.clipboardPasteParser);\n    this.setPasteAction(this.table.options.clipboardPasteAction);\n  };\n\n  Clipboard.prototype.reset = function () {\n    this.blocked = false;\n    this.originalSelectionText = \"\";\n  };\n\n  Clipboard.prototype.generatePlainContent = function (html) {\n    var output = [];\n    var holder = document.createElement(\"div\");\n    holder.innerHTML = html;\n    var table = holder.getElementsByTagName(\"table\")[0];\n    var rows = Array.prototype.slice.call(table.getElementsByTagName(\"tr\"));\n    rows.forEach(function (row) {\n      var rowData = [];\n      var headers = Array.prototype.slice.call(row.getElementsByTagName(\"th\"));\n      var cells = Array.prototype.slice.call(row.getElementsByTagName(\"td\"));\n      cells = cells.concat(headers);\n      cells.forEach(function (cell) {\n        var val = cell.innerHTML;\n        val = val == \"&nbsp;\" ? \"\" : val;\n        rowData.push(val);\n      });\n      output.push(rowData.join(\"\\t\"));\n    });\n    return output.join(\"\\n\");\n  };\n\n  Clipboard.prototype.copy = function (range, internal) {\n    var range, sel, textRange;\n    this.blocked = false;\n    this.customSelection = false;\n\n    if (this.mode === true || this.mode === \"copy\") {\n      this.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n      if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n        range = document.createRange();\n        range.selectNodeContents(this.table.element);\n        sel = window.getSelection();\n\n        if (sel.toString() && internal) {\n          this.customSelection = sel.toString();\n        }\n\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n        textRange = document.body.createTextRange();\n        textRange.moveToElementText(this.table.element);\n        textRange.select();\n      }\n\n      document.execCommand('copy');\n\n      if (sel) {\n        sel.removeAllRanges();\n      }\n    }\n  }; //PASTE EVENT HANDLING\n\n\n  Clipboard.prototype.setPasteAction = function (action) {\n    switch (typeof action === 'undefined' ? 'undefined' : _typeof(action)) {\n      case \"string\":\n        this.pasteAction = this.pasteActions[action];\n\n        if (!this.pasteAction) {\n          console.warn(\"Clipboard Error - No such paste action found:\", action);\n        }\n\n        break;\n\n      case \"function\":\n        this.pasteAction = action;\n        break;\n    }\n  };\n\n  Clipboard.prototype.setPasteParser = function (parser) {\n    switch (typeof parser === 'undefined' ? 'undefined' : _typeof(parser)) {\n      case \"string\":\n        this.pasteParser = this.pasteParsers[parser];\n\n        if (!this.pasteParser) {\n          console.warn(\"Clipboard Error - No such paste parser found:\", parser);\n        }\n\n        break;\n\n      case \"function\":\n        this.pasteParser = parser;\n        break;\n    }\n  };\n\n  Clipboard.prototype.paste = function (e) {\n    var data, rowData, rows;\n\n    if (this.checkPaseOrigin(e)) {\n      data = this.getPasteData(e);\n      rowData = this.pasteParser.call(this, data);\n\n      if (rowData) {\n        e.preventDefault();\n\n        if (this.table.modExists(\"mutator\")) {\n          rowData = this.mutateData(rowData);\n        }\n\n        rows = this.pasteAction.call(this, rowData);\n        this.table.options.clipboardPasted.call(this.table, data, rowData, rows);\n      } else {\n        this.table.options.clipboardPasteError.call(this.table, data);\n      }\n    }\n  };\n\n  Clipboard.prototype.mutateData = function (data) {\n    var self = this,\n        output = [];\n\n    if (Array.isArray(data)) {\n      data.forEach(function (row) {\n        output.push(self.table.modules.mutator.transformRow(row, \"clipboard\"));\n      });\n    } else {\n      output = data;\n    }\n\n    return output;\n  };\n\n  Clipboard.prototype.checkPaseOrigin = function (e) {\n    var valid = true;\n\n    if (e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell) {\n      valid = false;\n    }\n\n    return valid;\n  };\n\n  Clipboard.prototype.getPasteData = function (e) {\n    var data;\n\n    if (window.clipboardData && window.clipboardData.getData) {\n      data = window.clipboardData.getData('Text');\n    } else if (e.clipboardData && e.clipboardData.getData) {\n      data = e.clipboardData.getData('text/plain');\n    } else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n      data = e.originalEvent.clipboardData.getData('text/plain');\n    }\n\n    return data;\n  };\n\n  Clipboard.prototype.pasteParsers = {\n    table: function table(clipboard) {\n      var data = [],\n          success = false,\n          headerFindSuccess = true,\n          columns = this.table.columnManager.columns,\n          columnMap = [],\n          rows = []; //get data from clipboard into array of columns and rows.\n\n      clipboard = clipboard.split(\"\\n\");\n      clipboard.forEach(function (row) {\n        data.push(row.split(\"\\t\"));\n      });\n\n      if (data.length && !(data.length === 1 && data[0].length < 2)) {\n        success = true; //check if headers are present by title\n\n        data[0].forEach(function (value) {\n          var column = columns.find(function (column) {\n            return value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n          });\n\n          if (column) {\n            columnMap.push(column);\n          } else {\n            headerFindSuccess = false;\n          }\n        }); //check if column headers are present by field\n\n        if (!headerFindSuccess) {\n          headerFindSuccess = true;\n          columnMap = [];\n          data[0].forEach(function (value) {\n            var column = columns.find(function (column) {\n              return value && column.field && value.trim() && column.field.trim() === value.trim();\n            });\n\n            if (column) {\n              columnMap.push(column);\n            } else {\n              headerFindSuccess = false;\n            }\n          });\n\n          if (!headerFindSuccess) {\n            columnMap = this.table.columnManager.columnsByIndex;\n          }\n        } //remove header row if found\n\n\n        if (headerFindSuccess) {\n          data.shift();\n        }\n\n        data.forEach(function (item) {\n          var row = {};\n          item.forEach(function (value, i) {\n            if (columnMap[i]) {\n              row[columnMap[i].field] = value;\n            }\n          });\n          rows.push(row);\n        });\n        return rows;\n      } else {\n        return false;\n      }\n    }\n  };\n  Clipboard.prototype.pasteActions = {\n    replace: function replace(rows) {\n      return this.table.setData(rows);\n    },\n    update: function update(rows) {\n      return this.table.updateOrAddData(rows);\n    },\n    insert: function insert(rows) {\n      return this.table.addData(rows);\n    }\n  };\n  Tabulator.prototype.registerModule(\"clipboard\", Clipboard);\n\n  var DataTree = function DataTree(table) {\n    this.table = table;\n    this.indent = 10;\n    this.field = \"\";\n    this.collapseEl = null;\n    this.expandEl = null;\n    this.branchEl = null;\n    this.elementField = false;\n\n    this.startOpen = function () {};\n\n    this.displayIndex = 0;\n  };\n\n  DataTree.prototype.initialize = function () {\n    var dummyEl = null,\n        firstCol = this.table.columnManager.getFirstVisibileColumn(),\n        options = this.table.options;\n    this.field = options.dataTreeChildField;\n    this.indent = options.dataTreeChildIndent;\n    this.elementField = options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\n    if (options.dataTreeBranchElement) {\n      if (options.dataTreeBranchElement === true) {\n        this.branchEl = document.createElement(\"div\");\n        this.branchEl.classList.add(\"tabulator-data-tree-branch\");\n      } else {\n        if (typeof options.dataTreeBranchElement === \"string\") {\n          dummyEl = document.createElement(\"div\");\n          dummyEl.innerHTML = options.dataTreeBranchElement;\n          this.branchEl = dummyEl.firstChild;\n        } else {\n          this.branchEl = options.dataTreeBranchElement;\n        }\n      }\n    }\n\n    if (options.dataTreeCollapseElement) {\n      if (typeof options.dataTreeCollapseElement === \"string\") {\n        dummyEl = document.createElement(\"div\");\n        dummyEl.innerHTML = options.dataTreeCollapseElement;\n        this.collapseEl = dummyEl.firstChild;\n      } else {\n        this.collapseEl = options.dataTreeCollapseElement;\n      }\n    } else {\n      this.collapseEl = document.createElement(\"div\");\n      this.collapseEl.classList.add(\"tabulator-data-tree-control\");\n      this.collapseEl.tabIndex = 0;\n      this.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n    }\n\n    if (options.dataTreeExpandElement) {\n      if (typeof options.dataTreeExpandElement === \"string\") {\n        dummyEl = document.createElement(\"div\");\n        dummyEl.innerHTML = options.dataTreeExpandElement;\n        this.expandEl = dummyEl.firstChild;\n      } else {\n        this.expandEl = options.dataTreeExpandElement;\n      }\n    } else {\n      this.expandEl = document.createElement(\"div\");\n      this.expandEl.classList.add(\"tabulator-data-tree-control\");\n      this.expandEl.tabIndex = 0;\n      this.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n    }\n\n    switch (_typeof(options.dataTreeStartExpanded)) {\n      case \"boolean\":\n        this.startOpen = function (row, index) {\n          return options.dataTreeStartExpanded;\n        };\n\n        break;\n\n      case \"function\":\n        this.startOpen = options.dataTreeStartExpanded;\n        break;\n\n      default:\n        this.startOpen = function (row, index) {\n          return options.dataTreeStartExpanded[index];\n        };\n\n        break;\n    }\n  };\n\n  DataTree.prototype.initializeRow = function (row) {\n    var childArray = row.getData()[this.field];\n    var isArray = Array.isArray(childArray);\n    var children = isArray || !isArray && (typeof childArray === 'undefined' ? 'undefined' : _typeof(childArray)) === \"object\" && childArray !== null;\n\n    if (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\n      row.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n    }\n\n    if (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\n      row.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n    }\n\n    row.modules.dataTree = {\n      index: row.modules.dataTree ? row.modules.dataTree.index : 0,\n      open: children ? row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0) : false,\n      controlEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n      branchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n      parent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n      children: children\n    };\n  };\n\n  DataTree.prototype.layoutRow = function (row) {\n    var cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n        el = cell.getElement(),\n        config = row.modules.dataTree;\n\n    if (config.branchEl) {\n      if (config.branchEl.parentNode) {\n        config.branchEl.parentNode.removeChild(config.branchEl);\n      }\n\n      config.branchEl = false;\n    }\n\n    if (config.controlEl) {\n      if (config.controlEl.parentNode) {\n        config.controlEl.parentNode.removeChild(config.controlEl);\n      }\n\n      config.controlEl = false;\n    }\n\n    this.generateControlElement(row, el);\n    row.element.classList.add(\"tabulator-tree-level-\" + config.index);\n\n    if (config.index) {\n      if (this.branchEl) {\n        config.branchEl = this.branchEl.cloneNode(true);\n        el.insertBefore(config.branchEl, el.firstChild);\n        config.branchEl.style.marginLeft = (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) + config.index * this.indent + \"px\";\n      } else {\n        el.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + config.index * this.indent + \"px\";\n      }\n    }\n  };\n\n  DataTree.prototype.generateControlElement = function (row, el) {\n    var _this38 = this;\n\n    var config = row.modules.dataTree,\n        el = el || row.getCells()[0].getElement(),\n        oldControl = config.controlEl;\n\n    if (config.children !== false) {\n      if (config.open) {\n        config.controlEl = this.collapseEl.cloneNode(true);\n        config.controlEl.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n\n          _this38.collapseRow(row);\n        });\n      } else {\n        config.controlEl = this.expandEl.cloneNode(true);\n        config.controlEl.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n\n          _this38.expandRow(row);\n        });\n      }\n\n      config.controlEl.addEventListener(\"mousedown\", function (e) {\n        e.stopPropagation();\n      });\n\n      if (oldControl && oldControl.parentNode === el) {\n        oldControl.parentNode.replaceChild(config.controlEl, oldControl);\n      } else {\n        el.insertBefore(config.controlEl, el.firstChild);\n      }\n    }\n  };\n\n  DataTree.prototype.setDisplayIndex = function (index) {\n    this.displayIndex = index;\n  };\n\n  DataTree.prototype.getDisplayIndex = function () {\n    return this.displayIndex;\n  };\n\n  DataTree.prototype.getRows = function (rows) {\n    var _this39 = this;\n\n    var output = [];\n    rows.forEach(function (row, i) {\n      var config, children;\n      output.push(row);\n\n      if (row instanceof Row) {\n        config = row.modules.dataTree.children;\n\n        if (!config.index && config.children !== false) {\n          children = _this39.getChildren(row);\n          children.forEach(function (child) {\n            output.push(child);\n          });\n        }\n      }\n    });\n    return output;\n  };\n\n  DataTree.prototype.getChildren = function (row) {\n    var _this40 = this;\n\n    var config = row.modules.dataTree,\n        children = [],\n        output = [];\n\n    if (config.children !== false && config.open) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n\n      if (this.table.modExists(\"filter\")) {\n        children = this.table.modules.filter.filter(config.children);\n      } else {\n        children = config.children;\n      }\n\n      if (this.table.modExists(\"sort\")) {\n        this.table.modules.sort.sort(children);\n      }\n\n      children.forEach(function (child) {\n        output.push(child);\n\n        var subChildren = _this40.getChildren(child);\n\n        subChildren.forEach(function (sub) {\n          output.push(sub);\n        });\n      });\n    }\n\n    return output;\n  };\n\n  DataTree.prototype.generateChildren = function (row) {\n    var _this41 = this;\n\n    var children = [];\n    var childArray = row.getData()[this.field];\n\n    if (!Array.isArray(childArray)) {\n      childArray = [childArray];\n    }\n\n    childArray.forEach(function (childData) {\n      var childRow = new Row(childData || {}, _this41.table.rowManager);\n      childRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n      childRow.modules.dataTree.parent = row;\n\n      if (childRow.modules.dataTree.children) {\n        childRow.modules.dataTree.open = _this41.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n      }\n\n      children.push(childRow);\n    });\n    return children;\n  };\n\n  DataTree.prototype.expandRow = function (row, silent) {\n    var config = row.modules.dataTree;\n\n    if (config.children !== false) {\n      config.open = true;\n      row.reinitialize();\n      this.table.rowManager.refreshActiveData(\"tree\", false, true);\n      this.table.options.dataTreeRowExpanded(row.getComponent(), row.modules.dataTree.index);\n    }\n  };\n\n  DataTree.prototype.collapseRow = function (row) {\n    var config = row.modules.dataTree;\n\n    if (config.children !== false) {\n      config.open = false;\n      row.reinitialize();\n      this.table.rowManager.refreshActiveData(\"tree\", false, true);\n      this.table.options.dataTreeRowCollapsed(row.getComponent(), row.modules.dataTree.index);\n    }\n  };\n\n  DataTree.prototype.toggleRow = function (row) {\n    var config = row.modules.dataTree;\n\n    if (config.children !== false) {\n      if (config.open) {\n        this.collapseRow(row);\n      } else {\n        this.expandRow(row);\n      }\n    }\n  };\n\n  DataTree.prototype.getTreeParent = function (row) {\n    return row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n  };\n\n  DataTree.prototype.getFilteredTreeChildren = function (row) {\n    var config = row.modules.dataTree,\n        output = [],\n        children;\n\n    if (config.children) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n\n      if (this.table.modExists(\"filter\")) {\n        children = this.table.modules.filter.filter(config.children);\n      } else {\n        children = config.children;\n      }\n\n      children.forEach(function (childRow) {\n        if (childRow instanceof Row) {\n          output.push(childRow);\n        }\n      });\n    }\n\n    return output;\n  };\n\n  DataTree.prototype.getTreeChildren = function (row) {\n    var config = row.modules.dataTree,\n        output = [];\n\n    if (config.children) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n\n      config.children.forEach(function (childRow) {\n        if (childRow instanceof Row) {\n          output.push(childRow.getComponent());\n        }\n      });\n    }\n\n    return output;\n  };\n\n  DataTree.prototype.checkForRestyle = function (cell) {\n    if (!cell.row.cells.indexOf(cell)) {\n      cell.row.reinitialize();\n    }\n  };\n\n  DataTree.prototype.getChildField = function () {\n    return this.field;\n  };\n\n  DataTree.prototype.redrawNeeded = function (data) {\n    return (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n  };\n\n  Tabulator.prototype.registerModule(\"dataTree\", DataTree);\n\n  var Download = function Download(table) {\n    this.table = table; //hold Tabulator object\n\n    this.fields = {}; //hold filed multi dimension arrays\n\n    this.columnsByIndex = []; //hold columns in their order in the table\n\n    this.columnsByField = {}; //hold columns with lookup by field name\n\n    this.config = {};\n    this.active = false;\n  }; //trigger file download\n\n\n  Download.prototype.download = function (type, filename, options, active, interceptCallback) {\n    var self = this,\n        downloadFunc = false;\n    this.processConfig();\n    this.active = active;\n\n    function buildLink(data, mime) {\n      if (interceptCallback) {\n        if (interceptCallback === true) {\n          self.triggerDownload(data, mime, type, filename, true);\n        } else {\n          interceptCallback(data);\n        }\n      } else {\n        self.triggerDownload(data, mime, type, filename);\n      }\n    }\n\n    if (typeof type == \"function\") {\n      downloadFunc = type;\n    } else {\n      if (self.downloaders[type]) {\n        downloadFunc = self.downloaders[type];\n      } else {\n        console.warn(\"Download Error - No such download type found: \", type);\n      }\n    }\n\n    this.processColumns();\n\n    if (downloadFunc) {\n      downloadFunc.call(this, self.processDefinitions(), self.processData(active || \"active\"), options || {}, buildLink, this.config);\n    }\n  };\n\n  Download.prototype.processConfig = function () {\n    var config = {\n      //download config\n      columnGroups: true,\n      rowGroups: true,\n      columnCalcs: true,\n      dataTree: true\n    };\n\n    if (this.table.options.downloadConfig) {\n      for (var key in this.table.options.downloadConfig) {\n        config[key] = this.table.options.downloadConfig[key];\n      }\n    }\n\n    this.config.rowGroups = config.rowGroups && this.table.options.groupBy && this.table.modExists(\"groupRows\");\n\n    if (config.columnGroups && this.table.columnManager.columns.length != this.table.columnManager.columnsByIndex.length) {\n      this.config.columnGroups = true;\n    }\n\n    if (config.columnCalcs && this.table.modExists(\"columnCalcs\")) {\n      this.config.columnCalcs = true;\n    }\n\n    if (config.dataTree && this.table.options.dataTree && this.table.modExists(\"dataTree\")) {\n      this.config.dataTree = true;\n    }\n  };\n\n  Download.prototype.processColumns = function () {\n    var self = this;\n    self.columnsByIndex = [];\n    self.columnsByField = {};\n    self.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.field && column.definition.download !== false && (column.visible || !column.visible && column.definition.download)) {\n        self.columnsByIndex.push(column);\n        self.columnsByField[column.field] = column;\n      }\n    });\n  };\n\n  Download.prototype.processDefinitions = function () {\n    var self = this,\n        processedDefinitions = [];\n\n    if (this.config.columnGroups) {\n      self.table.columnManager.columns.forEach(function (column) {\n        var colData = self.processColumnGroup(column);\n\n        if (colData) {\n          processedDefinitions.push(colData);\n        }\n      });\n    } else {\n      self.columnsByIndex.forEach(function (column) {\n        if (column.download !== false) {\n          //isolate definiton from defintion object\n          processedDefinitions.push(self.processDefinition(column));\n        }\n      });\n    }\n\n    return processedDefinitions;\n  };\n\n  Download.prototype.processColumnGroup = function (column) {\n    var _this42 = this;\n\n    var subGroups = column.columns,\n        maxDepth = 0;\n    var processedColumn = this.processDefinition(column);\n    var groupData = {\n      type: \"group\",\n      title: processedColumn.title,\n      depth: 1\n    };\n\n    if (subGroups.length) {\n      groupData.subGroups = [];\n      groupData.width = 0;\n      subGroups.forEach(function (subGroup) {\n        var subGroupData = _this42.processColumnGroup(subGroup);\n\n        if (subGroupData.depth > maxDepth) {\n          maxDepth = subGroupData.depth;\n        }\n\n        if (subGroupData) {\n          groupData.width += subGroupData.width;\n          groupData.subGroups.push(subGroupData);\n        }\n      });\n      groupData.depth += maxDepth;\n\n      if (!groupData.width) {\n        return false;\n      }\n    } else {\n      if (column.field && column.definition.download !== false && (column.visible || !column.visible && column.definition.download)) {\n        groupData.width = 1;\n        groupData.definition = processedColumn;\n      } else {\n        return false;\n      }\n    }\n\n    return groupData;\n  };\n\n  Download.prototype.processDefinition = function (column) {\n    var def = {};\n\n    for (var key in column.definition) {\n      def[key] = column.definition[key];\n    }\n\n    if (typeof column.definition.downloadTitle != \"undefined\") {\n      def.title = column.definition.downloadTitle;\n    }\n\n    return def;\n  };\n\n  Download.prototype.processData = function (active) {\n    var _this43 = this;\n\n    var self = this,\n        data = [],\n        groups = [],\n        rows = false,\n        calcs = {};\n\n    if (this.config.rowGroups) {\n      if (active == \"visible\") {\n        rows = self.table.rowManager.getRows(active);\n        rows.forEach(function (row) {\n          if (row.type == \"row\") {\n            var group = row.getGroup();\n\n            if (groups.indexOf(group) === -1) {\n              groups.push(group);\n            }\n          }\n        });\n      } else {\n        groups = this.table.modules.groupRows.getGroups();\n      }\n\n      groups.forEach(function (group) {\n        data.push(_this43.processGroupData(group, rows));\n      });\n    } else {\n      if (this.config.dataTree) {\n        active = active = \"active\" ? \"display\" : active;\n      }\n\n      data = self.table.rowManager.getData(active, \"download\");\n    }\n\n    if (this.config.columnCalcs) {\n      calcs = this.table.getCalcResults();\n      data = {\n        calcs: calcs,\n        data: data\n      };\n    } //bulk data processing\n\n\n    if (typeof self.table.options.downloadDataFormatter == \"function\") {\n      data = self.table.options.downloadDataFormatter(data);\n    }\n\n    return data;\n  };\n\n  Download.prototype.processGroupData = function (group, visRows) {\n    var _this44 = this;\n\n    var subGroups = group.getSubGroups();\n    var groupData = {\n      type: \"group\",\n      key: group.key\n    };\n\n    if (subGroups.length) {\n      groupData.subGroups = [];\n      subGroups.forEach(function (subGroup) {\n        groupData.subGroups.push(_this44.processGroupData(subGroup, visRows));\n      });\n    } else {\n      if (visRows) {\n        groupData.rows = [];\n        group.rows.forEach(function (row) {\n          if (visRows.indexOf(row) > -1) {\n            groupData.rows.push(row.getData(\"download\"));\n          }\n        });\n      } else {\n        groupData.rows = group.getData(true, \"download\");\n      }\n    }\n\n    return groupData;\n  };\n\n  Download.prototype.triggerDownload = function (data, mime, type, filename, newTab) {\n    var element = document.createElement('a'),\n        blob = new Blob([data], {\n      type: mime\n    }),\n        filename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n    blob = this.table.options.downloadReady.call(this.table, data, blob);\n\n    if (blob) {\n      if (newTab) {\n        window.open(window.URL.createObjectURL(blob));\n      } else {\n        if (navigator.msSaveOrOpenBlob) {\n          navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          element.setAttribute('href', window.URL.createObjectURL(blob)); //set file title\n\n          element.setAttribute('download', filename); //trigger download\n\n          element.style.display = 'none';\n          document.body.appendChild(element);\n          element.click(); //remove temporary link element\n\n          document.body.removeChild(element);\n        }\n      }\n\n      if (this.table.options.downloadComplete) {\n        this.table.options.downloadComplete();\n      }\n    }\n  }; //nested field lookup\n\n\n  Download.prototype.getFieldValue = function (field, data) {\n    var column = this.columnsByField[field];\n\n    if (column) {\n      return column.getFieldValue(data);\n    }\n\n    return false;\n  };\n\n  Download.prototype.commsReceived = function (table, action, data) {\n    switch (action) {\n      case \"intercept\":\n        this.download(data.type, \"\", data.options, data.active, data.intercept);\n        break;\n    }\n  }; //downloaders\n\n\n  Download.prototype.downloaders = {\n    csv: function csv(columns, data, options, setFileContents, config) {\n      var self = this,\n          titles = [],\n          fields = [],\n          delimiter = options && options.delimiter ? options.delimiter : \",\",\n          fileContents,\n          output; //build column headers\n\n      function parseSimpleTitles() {\n        columns.forEach(function (column) {\n          titles.push('\"' + String(column.title).split('\"').join('\"\"') + '\"');\n          fields.push(column.field);\n        });\n      }\n\n      function parseColumnGroup(column, level) {\n        if (column.subGroups) {\n          column.subGroups.forEach(function (subGroup) {\n            parseColumnGroup(subGroup, level + 1);\n          });\n        } else {\n          titles.push('\"' + String(column.title).split('\"').join('\"\"') + '\"');\n          fields.push(column.definition.field);\n        }\n      }\n\n      if (config.columnGroups) {\n        console.warn(\"Download Warning - CSV downloader cannot process column groups\");\n        columns.forEach(function (column) {\n          parseColumnGroup(column, 0);\n        });\n      } else {\n        parseSimpleTitles();\n      } //generate header row\n\n\n      fileContents = [titles.join(delimiter)];\n\n      function parseRows(data) {\n        //generate each row of the table\n        data.forEach(function (row) {\n          var rowData = [];\n          fields.forEach(function (field) {\n            var value = self.getFieldValue(field, row);\n\n            switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n              case \"object\":\n                value = JSON.stringify(value);\n                break;\n\n              case \"undefined\":\n              case \"null\":\n                value = \"\";\n                break;\n\n              default:\n                value = value;\n            } //escape quotation marks\n\n\n            rowData.push('\"' + String(value).split('\"').join('\"\"') + '\"');\n          });\n          fileContents.push(rowData.join(delimiter));\n        });\n      }\n\n      function parseGroup(group) {\n        if (group.subGroups) {\n          group.subGroups.forEach(function (subGroup) {\n            parseGroup(subGroup);\n          });\n        } else {\n          parseRows(group.rows);\n        }\n      }\n\n      if (config.columnCalcs) {\n        console.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n        data = data.data;\n      }\n\n      if (config.rowGroups) {\n        console.warn(\"Download Warning - CSV downloader cannot process row groups\");\n        data.forEach(function (group) {\n          parseGroup(group);\n        });\n      } else {\n        parseRows(data);\n      }\n\n      output = fileContents.join(\"\\n\");\n\n      if (options.bom) {\n        output = '\\uFEFF' + output;\n      }\n\n      setFileContents(output, \"text/csv\");\n    },\n    json: function json(columns, data, options, setFileContents, config) {\n      var fileContents;\n\n      if (config.columnCalcs) {\n        console.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n        data = data.data;\n      }\n\n      fileContents = JSON.stringify(data, null, '\\t');\n      setFileContents(fileContents, \"application/json\");\n    },\n    pdf: function pdf(columns, data, options, setFileContents, config) {\n      var self = this,\n          fields = [],\n          header = [],\n          body = [],\n          calcs = {},\n          headerDepth = 1,\n          table = \"\",\n          autoTableParams = {},\n          rowGroupStyles = options.rowGroupStyles || {\n        fontStyle: \"bold\",\n        fontSize: 12,\n        cellPadding: 6,\n        fillColor: 220\n      },\n          rowCalcStyles = options.rowCalcStyles || {\n        fontStyle: \"bold\",\n        fontSize: 10,\n        cellPadding: 4,\n        fillColor: 232\n      },\n          jsPDFParams = options.jsPDF || {},\n          title = options && options.title ? options.title : \"\";\n\n      if (config.columnCalcs) {\n        calcs = data.calcs;\n        data = data.data;\n      }\n\n      if (!jsPDFParams.orientation) {\n        jsPDFParams.orientation = options.orientation || \"landscape\";\n      }\n\n      if (!jsPDFParams.unit) {\n        jsPDFParams.unit = \"pt\";\n      } //build column headers\n\n\n      function parseSimpleTitles() {\n        columns.forEach(function (column) {\n          if (column.field) {\n            header.push(column.title || \"\");\n            fields.push(column.field);\n          }\n        });\n        header = [header];\n      }\n\n      function parseColumnGroup(column, level) {\n        var colSpan = column.width,\n            rowSpan = 1,\n            col = {\n          content: column.title || \"\"\n        };\n\n        if (column.subGroups) {\n          column.subGroups.forEach(function (subGroup) {\n            parseColumnGroup(subGroup, level + 1);\n          });\n          rowSpan = 1;\n        } else {\n          fields.push(column.definition.field);\n          rowSpan = headerDepth - level;\n        }\n\n        col.rowSpan = rowSpan; // col.colSpan = colSpan;\n\n        header[level].push(col);\n        colSpan--;\n\n        if (rowSpan > 1) {\n          for (var i = level + 1; i < headerDepth; i++) {\n            header[i].push(\"\");\n          }\n        }\n\n        for (var i = 0; i < colSpan; i++) {\n          header[level].push(\"\");\n        }\n      }\n\n      if (config.columnGroups) {\n        columns.forEach(function (column) {\n          if (column.depth > headerDepth) {\n            headerDepth = column.depth;\n          }\n        });\n\n        for (var i = 0; i < headerDepth; i++) {\n          header.push([]);\n        }\n\n        columns.forEach(function (column) {\n          parseColumnGroup(column, 0);\n        });\n      } else {\n        parseSimpleTitles();\n      }\n\n      function parseValue(value) {\n        switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n          case \"object\":\n            value = JSON.stringify(value);\n            break;\n\n          case \"undefined\":\n          case \"null\":\n            value = \"\";\n            break;\n\n          default:\n            value = value;\n        }\n\n        return value;\n      }\n\n      function parseRows(data) {\n        //build table rows\n        data.forEach(function (row) {\n          body.push(parseRow(row));\n        });\n      }\n\n      function parseRow(row, styles) {\n        var rowData = [];\n        fields.forEach(function (field) {\n          var value = self.getFieldValue(field, row);\n          value = parseValue(value);\n\n          if (styles) {\n            rowData.push({\n              content: value,\n              styles: styles\n            });\n          } else {\n            rowData.push(value);\n          }\n        });\n        return rowData;\n      }\n\n      function parseGroup(group, calcObj) {\n        var groupData = [];\n        groupData.push({\n          content: parseValue(group.key),\n          colSpan: fields.length,\n          styles: rowGroupStyles\n        });\n        body.push(groupData);\n\n        if (group.subGroups) {\n          group.subGroups.forEach(function (subGroup) {\n            parseGroup(subGroup, calcObj[group.key] ? calcObj[group.key].groups || {} : {});\n          });\n        } else {\n          if (config.columnCalcs) {\n            addCalcRow(calcObj, group.key, \"top\");\n          }\n\n          parseRows(group.rows);\n\n          if (config.columnCalcs) {\n            addCalcRow(calcObj, group.key, \"bottom\");\n          }\n        }\n      }\n\n      function addCalcRow(calcs, selector, pos) {\n        var calcData = calcs[selector];\n\n        if (calcData) {\n          if (pos) {\n            calcData = calcData[pos];\n          }\n\n          if (Object.keys(calcData).length) {\n            body.push(parseRow(calcData, rowCalcStyles));\n          }\n        }\n      }\n\n      if (config.rowGroups) {\n        data.forEach(function (group) {\n          parseGroup(group, calcs);\n        });\n      } else {\n        if (config.columnCalcs) {\n          addCalcRow(calcs, \"top\");\n        }\n\n        parseRows(data);\n\n        if (config.columnCalcs) {\n          addCalcRow(calcs, \"bottom\");\n        }\n      }\n\n      var doc = new jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n      if (options && options.autoTable) {\n        if (typeof options.autoTable === \"function\") {\n          autoTableParams = options.autoTable(doc) || {};\n        } else {\n          autoTableParams = options.autoTable;\n        }\n      }\n\n      if (title) {\n        autoTableParams.addPageContent = function (data) {\n          doc.text(title, 40, 30);\n        };\n      }\n\n      autoTableParams.head = header;\n      autoTableParams.body = body;\n      doc.autoTable(autoTableParams);\n\n      if (options && options.documentProcessing) {\n        options.documentProcessing(doc);\n      }\n\n      setFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n    },\n    xlsx: function xlsx(columns, data, options, setFileContents, config) {\n      var self = this,\n          sheetName = options.sheetName || \"Sheet1\",\n          workbook = XLSX.utils.book_new(),\n          calcs = {},\n          groupRowIndexs = [],\n          groupColumnIndexs = [],\n          calcRowIndexs = [],\n          output;\n      workbook.SheetNames = [];\n      workbook.Sheets = {};\n\n      if (config.columnCalcs) {\n        calcs = data.calcs;\n        data = data.data;\n      }\n\n      function generateSheet() {\n        var titles = [],\n            fields = [],\n            rows = [],\n            worksheet; //convert rows to worksheet\n\n        function rowsToSheet() {\n          var sheet = {};\n          var range = {\n            s: {\n              c: 0,\n              r: 0\n            },\n            e: {\n              c: fields.length,\n              r: rows.length\n            }\n          };\n          XLSX.utils.sheet_add_aoa(sheet, rows);\n          sheet['!ref'] = XLSX.utils.encode_range(range);\n          var merges = generateMerges();\n\n          if (merges.length) {\n            sheet[\"!merges\"] = merges;\n          }\n\n          return sheet;\n        }\n\n        function parseSimpleTitles() {\n          //get field lists\n          columns.forEach(function (column) {\n            titles.push(column.title);\n            fields.push(column.field);\n          });\n          rows.push(titles);\n        }\n\n        function parseColumnGroup(column, level) {\n          if (typeof titles[level] === \"undefined\") {\n            titles[level] = [];\n          }\n\n          if (typeof groupColumnIndexs[level] === \"undefined\") {\n            groupColumnIndexs[level] = [];\n          }\n\n          if (column.width > 1) {\n            groupColumnIndexs[level].push({\n              type: \"hoz\",\n              start: titles[level].length,\n              end: titles[level].length + column.width - 1\n            });\n          }\n\n          titles[level].push(column.title);\n\n          if (column.subGroups) {\n            column.subGroups.forEach(function (subGroup) {\n              parseColumnGroup(subGroup, level + 1);\n            });\n          } else {\n            fields.push(column.definition.field);\n            padColumnTitles(fields.length - 1, level);\n            groupColumnIndexs[level].push({\n              type: \"vert\",\n              start: fields.length - 1\n            });\n          }\n        }\n\n        function padColumnTitles() {\n          var max = 0;\n          titles.forEach(function (title) {\n            var len = title.length;\n\n            if (len > max) {\n              max = len;\n            }\n          });\n          titles.forEach(function (title) {\n            var len = title.length;\n\n            if (len < max) {\n              for (var i = len; i < max; i++) {\n                title.push(\"\");\n              }\n            }\n          });\n        }\n\n        if (config.columnGroups) {\n          columns.forEach(function (column) {\n            parseColumnGroup(column, 0);\n          });\n          titles.forEach(function (title) {\n            rows.push(title);\n          });\n        } else {\n          parseSimpleTitles();\n        }\n\n        function generateMerges() {\n          var output = [];\n          groupRowIndexs.forEach(function (index) {\n            output.push({\n              s: {\n                r: index,\n                c: 0\n              },\n              e: {\n                r: index,\n                c: fields.length - 1\n              }\n            });\n          });\n          groupColumnIndexs.forEach(function (merges, level) {\n            merges.forEach(function (merge) {\n              if (merge.type === \"hoz\") {\n                output.push({\n                  s: {\n                    r: level,\n                    c: merge.start\n                  },\n                  e: {\n                    r: level,\n                    c: merge.end\n                  }\n                });\n              } else {\n                if (level != titles.length - 1) {\n                  output.push({\n                    s: {\n                      r: level,\n                      c: merge.start\n                    },\n                    e: {\n                      r: titles.length - 1,\n                      c: merge.start\n                    }\n                  });\n                }\n              }\n            });\n          });\n          return output;\n        } //generate each row of the table\n\n\n        function parseRows(data) {\n          data.forEach(function (row) {\n            rows.push(parseRow(row));\n          });\n        }\n\n        function parseRow(row) {\n          var rowData = [];\n          fields.forEach(function (field) {\n            var value = self.getFieldValue(field, row);\n            rowData.push(!(value instanceof Date) && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\" ? JSON.stringify(value) : value);\n          });\n          return rowData;\n        }\n\n        function addCalcRow(calcs, selector, pos) {\n          var calcData = calcs[selector];\n\n          if (calcData) {\n            if (pos) {\n              calcData = calcData[pos];\n            }\n\n            if (Object.keys(calcData).length) {\n              calcRowIndexs.push(rows.length);\n              rows.push(parseRow(calcData));\n            }\n          }\n        }\n\n        function parseGroup(group, calcObj) {\n          var groupData = [];\n          groupData.push(group.key);\n          groupRowIndexs.push(rows.length);\n          rows.push(groupData);\n\n          if (group.subGroups) {\n            group.subGroups.forEach(function (subGroup) {\n              parseGroup(subGroup, calcObj[group.key] ? calcObj[group.key].groups || {} : {});\n            });\n          } else {\n            if (config.columnCalcs) {\n              addCalcRow(calcObj, group.key, \"top\");\n            }\n\n            parseRows(group.rows);\n\n            if (config.columnCalcs) {\n              addCalcRow(calcObj, group.key, \"bottom\");\n            }\n          }\n        }\n\n        if (config.rowGroups) {\n          data.forEach(function (group) {\n            parseGroup(group, calcs);\n          });\n        } else {\n          if (config.columnCalcs) {\n            addCalcRow(calcs, \"top\");\n          }\n\n          parseRows(data);\n\n          if (config.columnCalcs) {\n            addCalcRow(calcs, \"bottom\");\n          }\n        }\n\n        worksheet = rowsToSheet();\n        return worksheet;\n      }\n\n      if (options.sheetOnly) {\n        setFileContents(generateSheet());\n        return;\n      }\n\n      if (options.sheets) {\n        for (var sheet in options.sheets) {\n          if (options.sheets[sheet] === true) {\n            workbook.SheetNames.push(sheet);\n            workbook.Sheets[sheet] = generateSheet();\n          } else {\n            workbook.SheetNames.push(sheet);\n            this.table.modules.comms.send(options.sheets[sheet], \"download\", \"intercept\", {\n              type: \"xlsx\",\n              options: {\n                sheetOnly: true\n              },\n              active: self.active,\n              intercept: function intercept(data) {\n                workbook.Sheets[sheet] = data;\n              }\n            });\n          }\n        }\n      } else {\n        workbook.SheetNames.push(sheetName);\n        workbook.Sheets[sheetName] = generateSheet();\n      }\n\n      if (options.documentProcessing) {\n        workbook = options.documentProcessing(workbook);\n      } //convert workbook to binary array\n\n\n      function s2ab(s) {\n        var buf = new ArrayBuffer(s.length);\n        var view = new Uint8Array(buf);\n\n        for (var i = 0; i != s.length; ++i) {\n          view[i] = s.charCodeAt(i) & 0xFF;\n        }\n\n        return buf;\n      }\n\n      output = XLSX.write(workbook, {\n        bookType: 'xlsx',\n        bookSST: true,\n        type: 'binary'\n      });\n      setFileContents(s2ab(output), \"application/octet-stream\");\n    },\n    html: function html(columns, data, options, setFileContents, config) {\n      if (this.table.modExists(\"export\", true)) {\n        setFileContents(this.table.modules.export.getHtml(true, options.style, config), \"text/html\");\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"download\", Download);\n\n  var Edit = function Edit(table) {\n    this.table = table; //hold Tabulator object\n\n    this.currentCell = false; //hold currently editing cell\n\n    this.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\n\n    this.recursionBlock = false; //prevent focus recursion\n\n    this.invalidEdit = false;\n  }; //initialize column editor\n\n\n  Edit.prototype.initializeColumn = function (column) {\n    var self = this,\n        config = {\n      editor: false,\n      blocked: false,\n      check: column.definition.editable,\n      params: column.definition.editorParams || {}\n    }; //set column editor\n\n    switch (_typeof(column.definition.editor)) {\n      case \"string\":\n        if (column.definition.editor === \"tick\") {\n          column.definition.editor = \"tickCross\";\n          console.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n        }\n\n        if (self.editors[column.definition.editor]) {\n          config.editor = self.editors[column.definition.editor];\n        } else {\n          console.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n        }\n\n        break;\n\n      case \"function\":\n        config.editor = column.definition.editor;\n        break;\n\n      case \"boolean\":\n        if (column.definition.editor === true) {\n          if (typeof column.definition.formatter !== \"function\") {\n            if (column.definition.formatter === \"tick\") {\n              column.definition.formatter = \"tickCross\";\n              console.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n            }\n\n            if (self.editors[column.definition.formatter]) {\n              config.editor = self.editors[column.definition.formatter];\n            } else {\n              config.editor = self.editors[\"input\"];\n            }\n          } else {\n            console.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n          }\n        }\n\n        break;\n    }\n\n    if (config.editor) {\n      column.modules.edit = config;\n    }\n  };\n\n  Edit.prototype.getCurrentCell = function () {\n    return this.currentCell ? this.currentCell.getComponent() : false;\n  };\n\n  Edit.prototype.clearEditor = function () {\n    var cell = this.currentCell,\n        cellEl;\n    this.invalidEdit = false;\n\n    if (cell) {\n      this.currentCell = false;\n      cellEl = cell.getElement();\n      cellEl.classList.remove(\"tabulator-validation-fail\");\n      cellEl.classList.remove(\"tabulator-editing\");\n\n      while (cellEl.firstChild) {\n        cellEl.removeChild(cellEl.firstChild);\n      }\n\n      cell.row.getElement().classList.remove(\"tabulator-row-editing\");\n    }\n  };\n\n  Edit.prototype.cancelEdit = function () {\n    if (this.currentCell) {\n      var cell = this.currentCell;\n      var component = this.currentCell.getComponent();\n      this.clearEditor();\n      cell.setValueActual(cell.getValue());\n      cell.cellRendered();\n\n      if (cell.column.cellEvents.cellEditCancelled) {\n        cell.column.cellEvents.cellEditCancelled.call(this.table, component);\n      }\n\n      this.table.options.cellEditCancelled.call(this.table, component);\n    }\n  }; //return a formatted value for a cell\n\n\n  Edit.prototype.bindEditor = function (cell) {\n    var self = this,\n        element = cell.getElement();\n    element.setAttribute(\"tabindex\", 0);\n    element.addEventListener(\"click\", function (e) {\n      if (!element.classList.contains(\"tabulator-editing\")) {\n        element.focus({\n          preventScroll: true\n        });\n      }\n    });\n    element.addEventListener(\"mousedown\", function (e) {\n      self.mouseClick = true;\n    });\n    element.addEventListener(\"focus\", function (e) {\n      if (!self.recursionBlock) {\n        self.edit(cell, e, false);\n      }\n    });\n  };\n\n  Edit.prototype.focusCellNoEvent = function (cell, block) {\n    this.recursionBlock = true;\n\n    if (!(block && this.table.browser === \"ie\")) {\n      cell.getElement().focus({\n        preventScroll: true\n      });\n    }\n\n    this.recursionBlock = false;\n  };\n\n  Edit.prototype.editCell = function (cell, forceEdit) {\n    this.focusCellNoEvent(cell);\n    this.edit(cell, false, forceEdit);\n  };\n\n  Edit.prototype.focusScrollAdjust = function (cell) {\n    if (this.table.rowManager.getRenderMode() == \"virtual\") {\n      var topEdge = this.table.rowManager.element.scrollTop,\n          bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n          rowEl = cell.row.getElement(),\n          offset = rowEl.offsetTop;\n\n      if (rowEl.offsetTop < topEdge) {\n        this.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop;\n      } else {\n        if (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\n          this.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge;\n        }\n      }\n    }\n  };\n\n  Edit.prototype.edit = function (cell, e, forceEdit) {\n    var self = this,\n        allowEdit = true,\n        rendered = function rendered() {},\n        element = cell.getElement(),\n        cellEditor,\n        component,\n        params; //prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n\n    if (this.currentCell) {\n      if (!this.invalidEdit) {\n        this.cancelEdit();\n      }\n\n      return;\n    } //handle successfull value change\n\n\n    function success(value) {\n      if (self.currentCell === cell) {\n        var valid = true;\n\n        if (cell.column.modules.validate && self.table.modExists(\"validate\")) {\n          valid = self.table.modules.validate.validate(cell.column.modules.validate, cell.getComponent(), value);\n        }\n\n        if (valid === true) {\n          self.clearEditor();\n          cell.setValue(value, true);\n\n          if (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n            self.table.modules.dataTree.checkForRestyle(cell);\n          }\n\n          return true;\n        } else {\n          self.invalidEdit = true;\n          element.classList.add(\"tabulator-validation-fail\");\n          self.focusCellNoEvent(cell, true);\n          rendered();\n          self.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n          return false;\n        }\n      } else {// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n      }\n    } //handle aborted edit\n\n\n    function cancel() {\n      if (self.currentCell === cell) {\n        self.cancelEdit();\n\n        if (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n          self.table.modules.dataTree.checkForRestyle(cell);\n        }\n      } else {// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n      }\n    }\n\n    function onRendered(callback) {\n      rendered = callback;\n    }\n\n    if (!cell.column.modules.edit.blocked) {\n      if (e) {\n        e.stopPropagation();\n      }\n\n      switch (_typeof(cell.column.modules.edit.check)) {\n        case \"function\":\n          allowEdit = cell.column.modules.edit.check(cell.getComponent());\n          break;\n\n        case \"boolean\":\n          allowEdit = cell.column.modules.edit.check;\n          break;\n      }\n\n      if (allowEdit || forceEdit) {\n        self.cancelEdit();\n        self.currentCell = cell;\n        this.focusScrollAdjust(cell);\n        component = cell.getComponent();\n\n        if (this.mouseClick) {\n          this.mouseClick = false;\n\n          if (cell.column.cellEvents.cellClick) {\n            cell.column.cellEvents.cellClick.call(this.table, e, component);\n          }\n        }\n\n        if (cell.column.cellEvents.cellEditing) {\n          cell.column.cellEvents.cellEditing.call(this.table, component);\n        }\n\n        self.table.options.cellEditing.call(this.table, component);\n        params = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n        cellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params); //if editor returned, add to DOM, if false, abort edit\n\n        if (cellEditor !== false) {\n          if (cellEditor instanceof Node) {\n            element.classList.add(\"tabulator-editing\");\n            cell.row.getElement().classList.add(\"tabulator-row-editing\");\n\n            while (element.firstChild) {\n              element.removeChild(element.firstChild);\n            }\n\n            element.appendChild(cellEditor); //trigger onRendered Callback\n\n            rendered(); //prevent editing from triggering rowClick event\n\n            var children = element.children;\n\n            for (var i = 0; i < children.length; i++) {\n              children[i].addEventListener(\"click\", function (e) {\n                e.stopPropagation();\n              });\n            }\n          } else {\n            console.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n            element.blur();\n            return false;\n          }\n        } else {\n          element.blur();\n          return false;\n        }\n\n        return true;\n      } else {\n        this.mouseClick = false;\n        element.blur();\n        return false;\n      }\n    } else {\n      this.mouseClick = false;\n      element.blur();\n      return false;\n    }\n  };\n\n  Edit.prototype.maskInput = function (el, options) {\n    var mask = options.mask,\n        maskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n        maskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n        maskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\n        success = false;\n\n    function fillSymbols(index) {\n      var symbol = mask[index];\n\n      if (typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\n        el.value = el.value + \"\" + symbol;\n        fillSymbols(index + 1);\n      }\n    }\n\n    el.addEventListener(\"keydown\", function (e) {\n      var index = el.value.length,\n          char = e.key;\n\n      if (e.keyCode > 46) {\n        if (index >= mask.length) {\n          e.preventDefault();\n          e.stopPropagation();\n          success = false;\n          return false;\n        } else {\n          switch (mask[index]) {\n            case maskLetter:\n              if (char.toUpperCase() == char.toLowerCase()) {\n                e.preventDefault();\n                e.stopPropagation();\n                success = false;\n                return false;\n              }\n\n              break;\n\n            case maskNumber:\n              if (isNaN(char)) {\n                e.preventDefault();\n                e.stopPropagation();\n                success = false;\n                return false;\n              }\n\n              break;\n\n            case maskWildcard:\n              break;\n\n            default:\n              if (char !== mask[index]) {\n                e.preventDefault();\n                e.stopPropagation();\n                success = false;\n                return false;\n              }\n\n          }\n        }\n\n        success = true;\n      }\n\n      return;\n    });\n    el.addEventListener(\"keyup\", function (e) {\n      if (e.keyCode > 46) {\n        if (options.maskAutoFill) {\n          fillSymbols(el.value.length);\n        }\n      }\n    });\n\n    if (!el.placeholder) {\n      el.placeholder = mask;\n    }\n\n    if (options.maskAutoFill) {\n      fillSymbols(el.value.length);\n    }\n  }; //default data editors\n\n\n  Edit.prototype.editors = {\n    //input element\n    input: function input(cell, onRendered, success, cancel, editorParams) {\n      //create and style input\n      var cellValue = cell.getValue(),\n          input = document.createElement(\"input\");\n      input.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n      onRendered(function () {\n        input.focus({\n          preventScroll: true\n        });\n        input.style.height = \"100%\";\n      });\n\n      function onChange(e) {\n        if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n          if (success(input.value)) {\n            cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n          }\n        } else {\n          cancel();\n        }\n      } //submit new value on blur or change\n\n\n      input.addEventListener(\"change\", onChange);\n      input.addEventListener(\"blur\", onChange); //submit new value on enter\n\n      input.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          // case 9:\n          case 13:\n            onChange(e);\n            break;\n\n          case 27:\n            cancel();\n            break;\n        }\n      });\n\n      if (editorParams.mask) {\n        this.table.modules.edit.maskInput(input, editorParams);\n      }\n\n      return input;\n    },\n    //resizable text area element\n    textarea: function textarea(cell, onRendered, success, cancel, editorParams) {\n      var self = this,\n          cellValue = cell.getValue(),\n          vertNav = editorParams.verticalNavigation || \"hybrid\",\n          value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\n          count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\n          input = document.createElement(\"textarea\"),\n          scrollHeight = 0; //create and style input\n\n      input.style.display = \"block\";\n      input.style.padding = \"2px\";\n      input.style.height = \"100%\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n      input.style.whiteSpace = \"pre-wrap\";\n      input.style.resize = \"none\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = value;\n      onRendered(function () {\n        input.focus({\n          preventScroll: true\n        });\n        input.style.height = \"100%\";\n      });\n\n      function onChange(e) {\n        if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n          if (success(input.value)) {\n            cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n          }\n\n          setTimeout(function () {\n            cell.getRow().normalizeHeight();\n          }, 300);\n        } else {\n          cancel();\n        }\n      } //submit new value on blur or change\n\n\n      input.addEventListener(\"change\", onChange);\n      input.addEventListener(\"blur\", onChange);\n      input.addEventListener(\"keyup\", function () {\n        input.style.height = \"\";\n        var heightNow = input.scrollHeight;\n        input.style.height = heightNow + \"px\";\n\n        if (heightNow != scrollHeight) {\n          scrollHeight = heightNow;\n          cell.getRow().normalizeHeight();\n        }\n      });\n      input.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 27:\n            cancel();\n            break;\n\n          case 38:\n            //up arrow\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n            }\n\n            break;\n\n          case 40:\n            //down arrow\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart !== input.value.length) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n            }\n\n            break;\n        }\n      });\n\n      if (editorParams.mask) {\n        this.table.modules.edit.maskInput(input, editorParams);\n      }\n\n      return input;\n    },\n    //input element with type of number\n    number: function number(cell, onRendered, success, cancel, editorParams) {\n      var cellValue = cell.getValue(),\n          vertNav = editorParams.verticalNavigation || \"editor\",\n          input = document.createElement(\"input\");\n      input.setAttribute(\"type\", \"number\");\n\n      if (typeof editorParams.max != \"undefined\") {\n        input.setAttribute(\"max\", editorParams.max);\n      }\n\n      if (typeof editorParams.min != \"undefined\") {\n        input.setAttribute(\"min\", editorParams.min);\n      }\n\n      if (typeof editorParams.step != \"undefined\") {\n        input.setAttribute(\"step\", editorParams.step);\n      } //create and style input\n\n\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = cellValue;\n\n      var blurFunc = function blurFunc(e) {\n        onChange();\n      };\n\n      onRendered(function () {\n        //submit new value on blur\n        input.removeEventListener(\"blur\", blurFunc);\n        input.focus({\n          preventScroll: true\n        });\n        input.style.height = \"100%\"; //submit new value on blur\n\n        input.addEventListener(\"blur\", blurFunc);\n      });\n\n      function onChange() {\n        var value = input.value;\n\n        if (!isNaN(value) && value !== \"\") {\n          value = Number(value);\n        }\n\n        if (value !== cellValue) {\n          if (success(value)) {\n            cellValue = value; //persist value if successfully validated incase editor is used as header filter\n          }\n        } else {\n          cancel();\n        }\n      } //submit new value on enter\n\n\n      input.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            // case 9:\n            onChange();\n            break;\n\n          case 27:\n            cancel();\n            break;\n\n          case 38: //up arrow\n\n          case 40:\n            //down arrow\n            if (vertNav == \"editor\") {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n            }\n\n            break;\n        }\n      });\n\n      if (editorParams.mask) {\n        this.table.modules.edit.maskInput(input, editorParams);\n      }\n\n      return input;\n    },\n    //input element with type of number\n    range: function range(cell, onRendered, success, cancel, editorParams) {\n      var cellValue = cell.getValue(),\n          input = document.createElement(\"input\");\n      input.setAttribute(\"type\", \"range\");\n\n      if (typeof editorParams.max != \"undefined\") {\n        input.setAttribute(\"max\", editorParams.max);\n      }\n\n      if (typeof editorParams.min != \"undefined\") {\n        input.setAttribute(\"min\", editorParams.min);\n      }\n\n      if (typeof editorParams.step != \"undefined\") {\n        input.setAttribute(\"step\", editorParams.step);\n      } //create and style input\n\n\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = cellValue;\n      onRendered(function () {\n        input.focus({\n          preventScroll: true\n        });\n        input.style.height = \"100%\";\n      });\n\n      function onChange() {\n        var value = input.value;\n\n        if (!isNaN(value) && value !== \"\") {\n          value = Number(value);\n        }\n\n        if (value != cellValue) {\n          if (success(value)) {\n            cellValue = value; //persist value if successfully validated incase editor is used as header filter\n          }\n        } else {\n          cancel();\n        }\n      } //submit new value on blur\n\n\n      input.addEventListener(\"blur\", function (e) {\n        onChange();\n      }); //submit new value on enter\n\n      input.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n          case 9:\n            onChange();\n            break;\n\n          case 27:\n            cancel();\n            break;\n        }\n      });\n      return input;\n    },\n    //select\n    select: function select(cell, onRendered, success, cancel, editorParams) {\n      var self = this,\n          cellEl = cell.getElement(),\n          initialValue = cell.getValue(),\n          vertNav = editorParams.verticalNavigation || \"editor\",\n          initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\",\n          input = document.createElement(\"input\"),\n          listEl = document.createElement(\"div\"),\n          dataItems = [],\n          displayItems = [],\n          currentItem = {},\n          blurable = true;\n      this.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n\n      if (Array.isArray(editorParams) || !Array.isArray(editorParams) && (typeof editorParams === 'undefined' ? 'undefined' : _typeof(editorParams)) === \"object\" && !editorParams.values) {\n        console.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\n        editorParams = {\n          values: editorParams\n        };\n      }\n\n      function getUniqueColumnValues(field) {\n        var output = {},\n            data = self.table.getData(),\n            column;\n\n        if (field) {\n          column = self.table.columnManager.getColumnByField(field);\n        } else {\n          column = cell.getColumn()._getSelf();\n        }\n\n        if (column) {\n          data.forEach(function (row) {\n            var val = column.getFieldValue(row);\n\n            if (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n              output[val] = true;\n            }\n          });\n\n          if (editorParams.sortValuesList) {\n            if (editorParams.sortValuesList == \"asc\") {\n              output = Object.keys(output).sort();\n            } else {\n              output = Object.keys(output).sort().reverse();\n            }\n          } else {\n            output = Object.keys(output);\n          }\n        } else {\n          console.warn(\"unable to find matching column to create select lookup list:\", field);\n        }\n\n        return output;\n      }\n\n      function parseItems(inputValues, curentValue) {\n        var dataList = [];\n        var displayList = [];\n\n        function processComplexListItem(item) {\n          var item = {\n            label: editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label) : item.label,\n            value: item.value,\n            element: false\n          };\n\n          if (item.value === curentValue || !isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue)) {\n            setCurrentItem(item);\n          }\n\n          dataList.push(item);\n          displayList.push(item);\n          return item;\n        }\n\n        if (typeof inputValues == \"function\") {\n          inputValues = inputValues(cell);\n        }\n\n        if (Array.isArray(inputValues)) {\n          inputValues.forEach(function (value) {\n            var item;\n\n            if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n              if (value.options) {\n                item = {\n                  label: value.label,\n                  group: true,\n                  element: false\n                };\n                displayList.push(item);\n                value.options.forEach(function (item) {\n                  processComplexListItem(item);\n                });\n              } else {\n                processComplexListItem(value);\n              }\n            } else {\n              item = {\n                label: editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value,\n                value: value,\n                element: false\n              };\n\n              if (item.value === curentValue || !isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue)) {\n                setCurrentItem(item);\n              }\n\n              dataList.push(item);\n              displayList.push(item);\n            }\n          });\n        } else {\n          for (var key in inputValues) {\n            var item = {\n              label: editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\n              value: key,\n              element: false\n            };\n\n            if (item.value === curentValue || !isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue)) {\n              setCurrentItem(item);\n            }\n\n            dataList.push(item);\n            displayList.push(item);\n          }\n        }\n\n        dataItems = dataList;\n        displayItems = displayList;\n        fillList();\n      }\n\n      function fillList() {\n        while (listEl.firstChild) {\n          listEl.removeChild(listEl.firstChild);\n        }\n\n        displayItems.forEach(function (item) {\n          var el = item.element;\n\n          if (!el) {\n            if (item.group) {\n              el = document.createElement(\"div\");\n              el.classList.add(\"tabulator-edit-select-list-group\");\n              el.tabIndex = 0;\n              el.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n            } else {\n              el = document.createElement(\"div\");\n              el.classList.add(\"tabulator-edit-select-list-item\");\n              el.tabIndex = 0;\n              el.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n              el.addEventListener(\"click\", function () {\n                setCurrentItem(item);\n                chooseItem();\n              });\n\n              if (item === currentItem) {\n                el.classList.add(\"active\");\n              }\n            }\n\n            el.addEventListener(\"mousedown\", function () {\n              blurable = false;\n              setTimeout(function () {\n                blurable = true;\n              }, 10);\n            });\n            item.element = el;\n          }\n\n          listEl.appendChild(el);\n        });\n      }\n\n      function setCurrentItem(item) {\n        if (currentItem && currentItem.element) {\n          currentItem.element.classList.remove(\"active\");\n        }\n\n        currentItem = item;\n        input.value = item.label === \"&nbsp;\" ? \"\" : item.label;\n\n        if (item.element) {\n          item.element.classList.add(\"active\");\n        }\n      }\n\n      function chooseItem() {\n        hideList();\n\n        if (initialValue !== currentItem.value) {\n          initialValue = currentItem.value;\n          success(currentItem.value);\n        } else {\n          cancel();\n        }\n      }\n\n      function cancelItem() {\n        hideList();\n        cancel();\n      }\n\n      function showList() {\n        if (!listEl.parentNode) {\n          if (editorParams.values === true) {\n            parseItems(getUniqueColumnValues(), initialDisplayValue);\n          } else if (typeof editorParams.values === \"string\") {\n            parseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\n          } else {\n            parseItems(editorParams.values || [], initialDisplayValue);\n          }\n\n          var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n          listEl.style.minWidth = cellEl.offsetWidth + \"px\";\n          listEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n          listEl.style.left = offset.left + \"px\";\n          listEl.addEventListener(\"mousedown\", function (e) {\n            blurable = false;\n            setTimeout(function () {\n              blurable = true;\n            }, 10);\n          });\n          document.body.appendChild(listEl);\n        }\n      }\n\n      function hideList() {\n        if (listEl.parentNode) {\n          listEl.parentNode.removeChild(listEl);\n        }\n\n        removeScrollListener();\n      }\n\n      function removeScrollListener() {\n        self.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n      } //style input\n\n\n      input.setAttribute(\"type\", \"text\");\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n      input.style.cursor = \"default\";\n      input.readOnly = this.currentCell != false;\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\"; // if(editorParams.values === true){\n      // \tparseItems(getUniqueColumnValues(), initialValue);\n      // }else if(typeof editorParams.values === \"string\"){\n      // \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\n      // }else{\n      // \tparseItems(editorParams.values || [], initialValue);\n      // }\n      //allow key based navigation\n\n      input.addEventListener(\"keydown\", function (e) {\n        var index;\n\n        switch (e.keyCode) {\n          case 38:\n            //up arrow\n            index = dataItems.indexOf(currentItem);\n\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              e.preventDefault();\n\n              if (index > 0) {\n                setCurrentItem(dataItems[index - 1]);\n              }\n            }\n\n            break;\n\n          case 40:\n            //down arrow\n            index = dataItems.indexOf(currentItem);\n\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && index < dataItems.length - 1) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              e.preventDefault();\n\n              if (index < dataItems.length - 1) {\n                if (index == -1) {\n                  setCurrentItem(dataItems[0]);\n                } else {\n                  setCurrentItem(dataItems[index + 1]);\n                }\n              }\n            }\n\n            break;\n\n          case 37: //left arrow\n\n          case 39:\n            //right arrow\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n            break;\n\n          case 13:\n            //enter\n            chooseItem();\n            break;\n\n          case 27:\n            //escape\n            cancelItem();\n            break;\n        }\n      });\n      input.addEventListener(\"blur\", function (e) {\n        if (blurable) {\n          cancelItem();\n        }\n      });\n      input.addEventListener(\"focus\", function (e) {\n        showList();\n      }); //style list element\n\n      listEl = document.createElement(\"div\");\n      listEl.classList.add(\"tabulator-edit-select-list\");\n      onRendered(function () {\n        input.style.height = \"100%\";\n        input.focus({\n          preventScroll: true\n        });\n      });\n      return input;\n    },\n    //autocomplete\n    autocomplete: function autocomplete(cell, onRendered, success, cancel, editorParams) {\n      var self = this,\n          cellEl = cell.getElement(),\n          initialValue = cell.getValue(),\n          vertNav = editorParams.verticalNavigation || \"editor\",\n          initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\",\n          input = document.createElement(\"input\"),\n          listEl = document.createElement(\"div\"),\n          allItems = [],\n          displayItems = [],\n          values = [],\n          currentItem = false,\n          blurable = true;\n      this.table.rowManager.element.addEventListener(\"scroll\", cancelItem); //style input\n\n      input.setAttribute(\"type\", \"search\");\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      } //style list element\n\n\n      listEl.classList.add(\"tabulator-edit-select-list\");\n      listEl.addEventListener(\"mousedown\", function (e) {\n        blurable = false;\n        setTimeout(function () {\n          blurable = true;\n        }, 10);\n      });\n\n      function getUniqueColumnValues(field) {\n        var output = {},\n            data = self.table.getData(),\n            column;\n\n        if (field) {\n          column = self.table.columnManager.getColumnByField(field);\n        } else {\n          column = cell.getColumn()._getSelf();\n        }\n\n        if (column) {\n          data.forEach(function (row) {\n            var val = column.getFieldValue(row);\n\n            if (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n              output[val] = true;\n            }\n          });\n\n          if (editorParams.sortValuesList) {\n            if (editorParams.sortValuesList == \"asc\") {\n              output = Object.keys(output).sort();\n            } else {\n              output = Object.keys(output).sort().reverse();\n            }\n          } else {\n            output = Object.keys(output);\n          }\n        } else {\n          console.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\n        }\n\n        return output;\n      }\n\n      function filterList(term, intialLoad) {\n        var matches = [],\n            values,\n            items,\n            searchEl; //lookup base values list\n\n        if (editorParams.values === true) {\n          values = getUniqueColumnValues();\n        } else if (typeof editorParams.values === \"string\") {\n          values = getUniqueColumnValues(editorParams.values);\n        } else {\n          values = editorParams.values || [];\n        }\n\n        if (editorParams.searchFunc) {\n          matches = editorParams.searchFunc(term, values);\n\n          if (matches instanceof Promise) {\n            addNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\n            matches.then(function (result) {\n              fillListIfNotEmpty(parseItems(result), intialLoad);\n            }).catch(function (err) {\n              console.err(\"error in autocomplete search promise:\", err);\n            });\n          } else {\n            fillListIfNotEmpty(parseItems(matches), intialLoad);\n          }\n        } else {\n          items = parseItems(values);\n\n          if (term === \"\") {\n            if (editorParams.showListOnEmpty) {\n              matches = items;\n            }\n          } else {\n            items.forEach(function (item) {\n              if (item.value !== null || typeof item.value !== \"undefined\") {\n                if (String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1) {\n                  matches.push(item);\n                }\n              }\n            });\n          }\n\n          fillListIfNotEmpty(matches, intialLoad);\n        }\n      }\n\n      function addNotice(notice) {\n        var searchEl = document.createElement(\"div\");\n        clearList();\n\n        if (notice !== false) {\n          searchEl.classList.add(\"tabulator-edit-select-list-notice\");\n          searchEl.tabIndex = 0;\n\n          if (notice instanceof Node) {\n            searchEl.appendChild(notice);\n          } else {\n            searchEl.innerHTML = notice;\n          }\n\n          listEl.appendChild(searchEl);\n        }\n      }\n\n      function parseItems(inputValues) {\n        var itemList = [];\n\n        if (Array.isArray(inputValues)) {\n          inputValues.forEach(function (value) {\n            var item = {\n              title: editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value,\n              value: value\n            };\n            itemList.push(item);\n          });\n        } else {\n          for (var key in inputValues) {\n            var item = {\n              title: editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\n              value: key\n            };\n            itemList.push(item);\n          }\n        }\n\n        return itemList;\n      }\n\n      function clearList() {\n        while (listEl.firstChild) {\n          listEl.removeChild(listEl.firstChild);\n        }\n      }\n\n      function fillListIfNotEmpty(items, intialLoad) {\n        if (items.length) {\n          fillList(items, intialLoad);\n        } else {\n          if (editorParams.emptyPlaceholder) {\n            addNotice(editorParams.emptyPlaceholder);\n          }\n        }\n      }\n\n      function fillList(items, intialLoad) {\n        var current = false;\n        clearList();\n        displayItems = items;\n        displayItems.forEach(function (item) {\n          var el = item.element;\n\n          if (!el) {\n            el = document.createElement(\"div\");\n            el.classList.add(\"tabulator-edit-select-list-item\");\n            el.tabIndex = 0;\n            el.innerHTML = item.title;\n            el.addEventListener(\"click\", function (e) {\n              setCurrentItem(item);\n              chooseItem();\n            });\n            el.addEventListener(\"mousedown\", function (e) {\n              blurable = false;\n              setTimeout(function () {\n                blurable = true;\n              }, 10);\n            });\n            item.element = el;\n\n            if (intialLoad && item.value == initialValue) {\n              input.value = item.title;\n              item.element.classList.add(\"active\");\n              current = true;\n            }\n\n            if (item === currentItem) {\n              item.element.classList.add(\"active\");\n              current = true;\n            }\n          }\n\n          listEl.appendChild(el);\n        });\n\n        if (!current) {\n          setCurrentItem(false);\n        }\n      }\n\n      function chooseItem() {\n        hideList();\n\n        if (currentItem) {\n          if (initialValue !== currentItem.value) {\n            initialValue = currentItem.value;\n            input.value = currentItem.title;\n            success(currentItem.value);\n          } else {\n            cancel();\n          }\n        } else {\n          if (editorParams.freetext) {\n            initialValue = input.value;\n            success(input.value);\n          } else {\n            if (editorParams.allowEmpty && input.value === \"\") {\n              initialValue = input.value;\n              success(input.value);\n            } else {\n              cancel();\n            }\n          }\n        }\n      }\n\n      function showList() {\n        if (!listEl.parentNode) {\n          while (listEl.firstChild) {\n            listEl.removeChild(listEl.firstChild);\n          }\n\n          var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n          listEl.style.minWidth = cellEl.offsetWidth + \"px\";\n          listEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n          listEl.style.left = offset.left + \"px\";\n          document.body.appendChild(listEl);\n        }\n      }\n\n      function setCurrentItem(item, showInputValue) {\n        if (currentItem && currentItem.element) {\n          currentItem.element.classList.remove(\"active\");\n        }\n\n        currentItem = item;\n\n        if (item && item.element) {\n          item.element.classList.add(\"active\");\n        }\n      }\n\n      function hideList() {\n        if (listEl.parentNode) {\n          listEl.parentNode.removeChild(listEl);\n        }\n\n        removeScrollListener();\n      }\n\n      function cancelItem() {\n        hideList();\n        cancel();\n      }\n\n      function removeScrollListener() {\n        self.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n      } //allow key based navigation\n\n\n      input.addEventListener(\"keydown\", function (e) {\n        var index;\n\n        switch (e.keyCode) {\n          case 38:\n            //up arrow\n            index = displayItems.indexOf(currentItem);\n\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              e.preventDefault();\n\n              if (index > 0) {\n                setCurrentItem(displayItems[index - 1]);\n              } else {\n                setCurrentItem(false);\n              }\n            }\n\n            break;\n\n          case 40:\n            //down arrow\n            index = displayItems.indexOf(currentItem);\n\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && index < displayItems.length - 1) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              e.preventDefault();\n\n              if (index < displayItems.length - 1) {\n                if (index == -1) {\n                  setCurrentItem(displayItems[0]);\n                } else {\n                  setCurrentItem(displayItems[index + 1]);\n                }\n              }\n            }\n\n            break;\n\n          case 37: //left arrow\n\n          case 39:\n            //right arrow\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n            break;\n\n          case 13:\n            //enter\n            chooseItem();\n            break;\n\n          case 27:\n            //escape\n            cancelItem();\n            break;\n\n          case 36: //home\n\n          case 35:\n            //end\n            //prevent table navigation while using input element\n            e.stopImmediatePropagation();\n            break;\n        }\n      });\n      input.addEventListener(\"keyup\", function (e) {\n        switch (e.keyCode) {\n          case 38: //up arrow\n\n          case 37: //left arrow\n\n          case 39: //up arrow\n\n          case 40: //right arrow\n\n          case 13: //enter\n\n          case 27:\n            //escape\n            break;\n\n          default:\n            filterList(input.value);\n        }\n      });\n      input.addEventListener(\"search\", function (e) {\n        filterList(input.value);\n      });\n      input.addEventListener(\"blur\", function (e) {\n        if (blurable) {\n          chooseItem();\n        }\n      });\n      input.addEventListener(\"focus\", function (e) {\n        var value = initialDisplayValue;\n        showList();\n        input.value = value;\n        filterList(value, true);\n      });\n      onRendered(function () {\n        input.style.height = \"100%\";\n        input.focus({\n          preventScroll: true\n        });\n      });\n\n      if (editorParams.mask) {\n        this.table.modules.edit.maskInput(input, editorParams);\n      }\n\n      return input;\n    },\n    //start rating\n    star: function star(cell, onRendered, success, cancel, editorParams) {\n      var self = this,\n          element = cell.getElement(),\n          value = cell.getValue(),\n          maxStars = element.getElementsByTagName(\"svg\").length || 5,\n          size = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n          stars = [],\n          starsHolder = document.createElement(\"div\"),\n          star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"); //change star type\n\n      function starChange(val) {\n        stars.forEach(function (star, i) {\n          if (i < val) {\n            if (self.table.browser == \"ie\") {\n              star.setAttribute(\"class\", \"tabulator-star-active\");\n            } else {\n              star.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n            }\n\n            star.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n          } else {\n            if (self.table.browser == \"ie\") {\n              star.setAttribute(\"class\", \"tabulator-star-inactive\");\n            } else {\n              star.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n            }\n\n            star.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n          }\n        });\n      } //build stars\n\n\n      function buildStar(i) {\n        var starHolder = document.createElement(\"span\");\n        var nextStar = star.cloneNode(true);\n        stars.push(nextStar);\n        starHolder.addEventListener(\"mouseenter\", function (e) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n          starChange(i);\n        });\n        starHolder.addEventListener(\"mousemove\", function (e) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n        });\n        starHolder.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n          success(i);\n        });\n        starHolder.appendChild(nextStar);\n        starsHolder.appendChild(starHolder);\n      } //handle keyboard navigation value change\n\n\n      function changeValue(val) {\n        value = val;\n        starChange(val);\n      } //style cell\n\n\n      element.style.whiteSpace = \"nowrap\";\n      element.style.overflow = \"hidden\";\n      element.style.textOverflow = \"ellipsis\"; //style holding element\n\n      starsHolder.style.verticalAlign = \"middle\";\n      starsHolder.style.display = \"inline-block\";\n      starsHolder.style.padding = \"4px\"; //style star\n\n      star.setAttribute(\"width\", size);\n      star.setAttribute(\"height\", size);\n      star.setAttribute(\"viewBox\", \"0 0 512 512\");\n      star.setAttribute(\"xml:space\", \"preserve\");\n      star.style.padding = \"0 1px\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            starsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            starsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      } //create correct number of stars\n\n\n      for (var i = 1; i <= maxStars; i++) {\n        buildStar(i);\n      } //ensure value does not exceed number of stars\n\n\n      value = Math.min(parseInt(value), maxStars); // set initial styling of stars\n\n      starChange(value);\n      starsHolder.addEventListener(\"mousemove\", function (e) {\n        starChange(0);\n      });\n      starsHolder.addEventListener(\"click\", function (e) {\n        success(0);\n      });\n      element.addEventListener(\"blur\", function (e) {\n        cancel();\n      }); //allow key based navigation\n\n      element.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 39:\n            //right arrow\n            changeValue(value + 1);\n            break;\n\n          case 37:\n            //left arrow\n            changeValue(value - 1);\n            break;\n\n          case 13:\n            //enter\n            success(value);\n            break;\n\n          case 27:\n            //escape\n            cancel();\n            break;\n        }\n      });\n      return starsHolder;\n    },\n    //draggable progress bar\n    progress: function progress(cell, onRendered, success, cancel, editorParams) {\n      var element = cell.getElement(),\n          max = typeof editorParams.max === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : editorParams.max,\n          min = typeof editorParams.min === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : editorParams.min,\n          percent = (max - min) / 100,\n          value = cell.getValue() || 0,\n          handle = document.createElement(\"div\"),\n          bar = document.createElement(\"div\"),\n          mouseDrag,\n          mouseDragWidth; //set new value\n\n      function updateValue() {\n        var calcVal = percent * Math.round(bar.offsetWidth / (element.clientWidth / 100)) + min;\n        success(calcVal);\n        element.setAttribute(\"aria-valuenow\", calcVal);\n        element.setAttribute(\"aria-label\", value);\n      } //style handle\n\n\n      handle.style.position = \"absolute\";\n      handle.style.right = \"0\";\n      handle.style.top = \"0\";\n      handle.style.bottom = \"0\";\n      handle.style.width = \"5px\";\n      handle.classList.add(\"tabulator-progress-handle\"); //style bar\n\n      bar.style.display = \"inline-block\";\n      bar.style.position = \"relative\"; // bar.style.top = \"8px\";\n      // bar.style.bottom = \"8px\";\n      // bar.style.left = \"4px\";\n      // bar.style.marginRight = \"4px\";\n\n      bar.style.height = \"100%\";\n      bar.style.backgroundColor = \"#488CE9\";\n      bar.style.maxWidth = \"100%\";\n      bar.style.minWidth = \"0%\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            bar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            bar.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      } //style cell\n\n\n      element.style.padding = \"4px 4px\"; //make sure value is in range\n\n      value = Math.min(parseFloat(value), max);\n      value = Math.max(parseFloat(value), min); //workout percentage\n\n      value = Math.round((value - min) / percent); // bar.style.right = value + \"%\";\n\n      bar.style.width = value + \"%\";\n      element.setAttribute(\"aria-valuemin\", min);\n      element.setAttribute(\"aria-valuemax\", max);\n      bar.appendChild(handle);\n      handle.addEventListener(\"mousedown\", function (e) {\n        mouseDrag = e.screenX;\n        mouseDragWidth = bar.offsetWidth;\n      });\n      handle.addEventListener(\"mouseover\", function () {\n        handle.style.cursor = \"ew-resize\";\n      });\n      element.addEventListener(\"mousemove\", function (e) {\n        if (mouseDrag) {\n          bar.style.width = mouseDragWidth + e.screenX - mouseDrag + \"px\";\n        }\n      });\n      element.addEventListener(\"mouseup\", function (e) {\n        if (mouseDrag) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n          mouseDrag = false;\n          mouseDragWidth = false;\n          updateValue();\n        }\n      }); //allow key based navigation\n\n      element.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 39:\n            //right arrow\n            e.preventDefault();\n            bar.style.width = bar.clientWidth + element.clientWidth / 100 + \"px\";\n            break;\n\n          case 37:\n            //left arrow\n            e.preventDefault();\n            bar.style.width = bar.clientWidth - element.clientWidth / 100 + \"px\";\n            break;\n\n          case 9: //tab\n\n          case 13:\n            //enter\n            updateValue();\n            break;\n\n          case 27:\n            //escape\n            cancel();\n            break;\n        }\n      });\n      element.addEventListener(\"blur\", function () {\n        cancel();\n      });\n      return bar;\n    },\n    //checkbox\n    tickCross: function tickCross(cell, onRendered, success, cancel, editorParams) {\n      var value = cell.getValue(),\n          input = document.createElement(\"input\"),\n          tristate = editorParams.tristate,\n          indetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n          indetermState = false;\n      input.setAttribute(\"type\", \"checkbox\");\n      input.style.marginTop = \"5px\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = value;\n\n      if (tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")) {\n        indetermState = true;\n        input.indeterminate = true;\n      }\n\n      if (this.table.browser != \"firefox\") {\n        //prevent blur issue on mac firefox\n        onRendered(function () {\n          input.focus({\n            preventScroll: true\n          });\n        });\n      }\n\n      input.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\n\n      function setValue(blur) {\n        if (tristate) {\n          if (!blur) {\n            if (input.checked && !indetermState) {\n              input.checked = false;\n              input.indeterminate = true;\n              indetermState = true;\n              return indetermValue;\n            } else {\n              indetermState = false;\n              return input.checked;\n            }\n          } else {\n            if (indetermState) {\n              return indetermValue;\n            } else {\n              return input.checked;\n            }\n          }\n        } else {\n          return input.checked;\n        }\n      } //submit new value on blur\n\n\n      input.addEventListener(\"change\", function (e) {\n        success(setValue());\n      });\n      input.addEventListener(\"blur\", function (e) {\n        success(setValue(true));\n      }); //submit new value on enter\n\n      input.addEventListener(\"keydown\", function (e) {\n        if (e.keyCode == 13) {\n          success(setValue());\n        }\n\n        if (e.keyCode == 27) {\n          cancel();\n        }\n      });\n      return input;\n    }\n  };\n  Tabulator.prototype.registerModule(\"edit\", Edit);\n\n  var Export = function Export(table) {\n    this.table = table; //hold Tabulator object\n\n    this.config = {};\n    this.cloneTableStyle = true;\n    this.colVisProp = \"\";\n  };\n\n  Export.prototype.genereateTable = function (config, style, range, colVisProp) {\n    this.cloneTableStyle = style;\n    this.config = config || {};\n    this.colVisProp = colVisProp;\n    var table = document.createElement(\"table\");\n    table.classList.add(\"tabulator-print-table\");\n\n    if (this.config.columnHeaders !== false) {\n      table.appendChild(this.generateHeaderElements());\n    }\n\n    table.appendChild(this.generateBodyElements(this.rowLookup(range)));\n    this.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n    return table;\n  };\n\n  Export.prototype.rowLookup = function (range) {\n    var _this45 = this;\n\n    var rows = [];\n\n    if (typeof range == \"function\") {\n      range.call(this.table).forEach(function (row) {\n        row = _this45.table.rowManager.findRow(row);\n\n        if (row) {\n          rows.push(row);\n        }\n      });\n    } else {\n      switch (range) {\n        case true:\n        case \"visible\":\n          rows = this.table.rowManager.getVisibleRows(true);\n          break;\n\n        case \"all\":\n          rows = this.table.rowManager.rows;\n          break;\n\n        case \"selected\":\n          rows = this.table.modules.selectRow.selectedRows;\n          break;\n\n        case \"active\":\n        default:\n          rows = this.table.rowManager.getDisplayRows();\n      }\n    }\n\n    return Object.assign([], rows);\n  };\n\n  Export.prototype.generateColumnGroupHeaders = function () {\n    var _this46 = this;\n\n    var output = [];\n    var columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n    columns.forEach(function (column) {\n      var colData = _this46.processColumnGroup(column);\n\n      if (colData) {\n        output.push(colData);\n      }\n    });\n    return output;\n  };\n\n  Export.prototype.processColumnGroup = function (column) {\n    var _this47 = this;\n\n    var subGroups = column.columns,\n        maxDepth = 0;\n    var groupData = {\n      title: column.definition.title,\n      column: column,\n      depth: 1\n    };\n\n    if (subGroups.length) {\n      groupData.subGroups = [];\n      groupData.width = 0;\n      subGroups.forEach(function (subGroup) {\n        var subGroupData = _this47.processColumnGroup(subGroup);\n\n        if (subGroupData) {\n          groupData.width += subGroupData.width;\n          groupData.subGroups.push(subGroupData);\n\n          if (subGroupData.depth > maxDepth) {\n            maxDepth = subGroupData.depth;\n          }\n        }\n      });\n      groupData.depth += maxDepth;\n\n      if (!groupData.width) {\n        return false;\n      }\n    } else {\n      if (this.columnVisCheck(column)) {\n        groupData.width = 1;\n      } else {\n        return false;\n      }\n    }\n\n    return groupData;\n  };\n\n  Export.prototype.groupHeadersToRows = function (columns) {\n    var headers = [],\n        headerDepth = 0;\n\n    function parseColumnGroup(column, level) {\n      var depth = headerDepth - level;\n\n      if (typeof headers[level] === \"undefined\") {\n        headers[level] = [];\n      }\n\n      column.height = column.subGroups ? 1 : depth - column.depth + 1;\n      headers[level].push(column);\n\n      if (column.subGroups) {\n        column.subGroups.forEach(function (subGroup) {\n          parseColumnGroup(subGroup, level + 1);\n        });\n      }\n    } //calculate maximum header debth\n\n\n    columns.forEach(function (column) {\n      if (column.depth > headerDepth) {\n        headerDepth = column.depth;\n      }\n    });\n    columns.forEach(function (column) {\n      parseColumnGroup(column, 0);\n    });\n    return headers;\n  };\n\n  Export.prototype.generateHeaderElements = function () {\n    var _this48 = this;\n\n    var headerEl = document.createElement(\"thead\");\n    var rows = this.groupHeadersToRows(this.generateColumnGroupHeaders());\n    rows.forEach(function (row) {\n      var rowEl = document.createElement(\"tr\");\n\n      _this48.mapElementStyles(_this48.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n      row.forEach(function (column) {\n        var cellEl = document.createElement(\"th\");\n        var classNames = column.column.definition.cssClass ? column.column.definition.cssClass.split(\" \") : [];\n        cellEl.colSpan = column.width;\n        cellEl.rowSpan = column.height;\n        cellEl.innerHTML = column.column.definition.title;\n\n        if (_this48.cloneTableStyle) {\n          cellEl.style.boxSizing = \"border-box\";\n        }\n\n        classNames.forEach(function (className) {\n          cellEl.classList.add(className);\n        });\n\n        _this48.mapElementStyles(column.column.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n        _this48.mapElementStyles(column.column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n        if (column.column.visible) {\n          _this48.mapElementStyles(column.column.getElement(), cellEl, [\"width\"]);\n        } else {\n          if (column.column.definition.width) {\n            cellEl.style.width = column.column.definition.width + \"px\";\n          }\n        }\n\n        if (column.column.parent) {\n          _this48.mapElementStyles(column.column.parent.groupElement, cellEl, [\"border-top\"]);\n        }\n\n        rowEl.appendChild(cellEl);\n      });\n      headerEl.appendChild(rowEl);\n    });\n    return headerEl;\n  };\n\n  Export.prototype.generateBodyElements = function (rows) {};\n\n  Export.prototype.generateBodyElements = function (rows) {\n    var _this49 = this;\n\n    var oddRow, evenRow, calcRow, firstRow, firstCell, firstGroup, lastCell, styleCells, styleRow, treeElementField, rowFormatter; //assign row formatter\n\n    rowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n    rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter; //lookup row styles\n\n    if (this.cloneTableStyle && window.getComputedStyle) {\n      oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n      evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n      calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n      firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n      firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\n      if (firstRow) {\n        styleCells = firstRow.getElementsByClassName(\"tabulator-cell\");\n        firstCell = styleCells[0];\n        lastCell = styleCells[styleCells.length - 1];\n      }\n    }\n\n    var bodyEl = document.createElement(\"tbody\");\n    var columns = [];\n\n    if (this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")) {\n      if (this.table.modules.columnCalcs.topInitialized) {\n        rows.unshift(this.table.modules.columnCalcs.topRow);\n      }\n\n      if (this.table.modules.columnCalcs.botInitialized) {\n        rows.push(this.table.modules.columnCalcs.botRow);\n      }\n    }\n\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (_this49.columnVisCheck(column)) {\n        columns.push(column);\n      }\n    });\n\n    if (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")) {\n      treeElementField = this.table.modules.dataTree.elementField;\n    }\n\n    rows = rows.filter(function (row) {\n      switch (row.type) {\n        case \"group\":\n          return _this49.config.rowGroups !== false;\n          break;\n\n        case \"calc\":\n          return _this49.config.columnCalcs !== false;\n          break;\n      }\n\n      return true;\n    });\n\n    if (rows.length > 1000) {\n      console.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n    }\n\n    rows.forEach(function (row, i) {\n      var rowData = row.getData(_this49.colVisProp);\n      var rowEl = document.createElement(\"tr\");\n      rowEl.classList.add(\"tabulator-print-table-row\");\n\n      switch (row.type) {\n        case \"group\":\n          var cellEl = document.createElement(\"td\");\n          cellEl.colSpan = columns.length;\n          cellEl.innerHTML = row.key;\n          rowEl.classList.add(\"tabulator-print-table-group\");\n\n          _this49.mapElementStyles(firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\n          _this49.mapElementStyles(firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n          rowEl.appendChild(cellEl);\n          break;\n\n        case \"calc\":\n          rowEl.classList.add(\"tabulator-print-table-calcs\");\n\n        case \"row\":\n          if (_this49.table.options.dataTree && _this49.config.dataTree === false && row.modules.dataTree.parent) {\n            return;\n          }\n\n          columns.forEach(function (column, i) {\n            var cellEl = document.createElement(\"td\");\n            var value = column.getFieldValue(rowData);\n            var cellWrapper = {\n              modules: {},\n              getValue: function getValue() {\n                return value;\n              },\n              getField: function getField() {\n                return column.definition.field;\n              },\n              getElement: function getElement() {\n                return cellEl;\n              },\n              getColumn: function getColumn() {\n                return column.getComponent();\n              },\n              getData: function getData() {\n                return rowData;\n              },\n              getRow: function getRow() {\n                return row.getComponent();\n              },\n              getComponent: function getComponent() {\n                return cellWrapper;\n              },\n              column: column\n            };\n            var classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n            classNames.forEach(function (className) {\n              cellEl.classList.add(className);\n            });\n\n            if (_this49.table.modExists(\"format\") && _this49.config.formatCells !== false) {\n              value = _this49.table.modules.format.formatExportValue(cellWrapper, _this49.colVisProp);\n            } else {\n              switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n                case \"object\":\n                  value = JSON.stringify(value);\n                  break;\n\n                case \"undefined\":\n                case \"null\":\n                  value = \"\";\n                  break;\n\n                default:\n                  value = value;\n              }\n            }\n\n            if (value instanceof Node) {\n              cellEl.appendChild(value);\n            } else {\n              cellEl.innerHTML = value;\n            }\n\n            if (firstCell) {\n              _this49.mapElementStyles(firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n              if (column.definition.align) {\n                cellEl.style.textAlign = column.definition.align;\n              }\n            }\n\n            if (_this49.table.options.dataTree && _this49.config.dataTree !== false) {\n              if (treeElementField && treeElementField == column.field || !treeElementField && i == 0) {\n                if (row.modules.dataTree.controlEl) {\n                  cellEl.insertBefore(row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n                }\n\n                if (row.modules.dataTree.branchEl) {\n                  cellEl.insertBefore(row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n                }\n              }\n            }\n\n            rowEl.appendChild(cellEl);\n\n            if (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\n              cellWrapper.modules.format.renderedCallback();\n            }\n          });\n          styleRow = row.type == \"calc\" ? calcRow : i % 2 && evenRow ? evenRow : oddRow;\n\n          _this49.mapElementStyles(styleRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\n          if (rowFormatter && _this49.config.formatCells !== false) {\n            var rowComponent = row.getComponent();\n\n            rowComponent.getElement = function () {\n              return rowEl;\n            };\n\n            rowFormatter(rowComponent);\n          }\n\n          break;\n      }\n\n      bodyEl.appendChild(rowEl);\n    });\n    return bodyEl;\n  };\n\n  Export.prototype.columnVisCheck = function (column) {\n    return column.definition[this.colVisProp] !== false && (column.visible || !column.visible && column.definition[this.colVisProp]);\n  };\n\n  Export.prototype.getHtml = function (visible, style, config, colVisProp) {\n    var holder = document.createElement(\"div\");\n    holder.appendChild(this.genereateTable(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\"));\n    return holder.innerHTML;\n  };\n\n  Export.prototype.mapElementStyles = function (from, to, props) {\n    if (this.cloneTableStyle && from && to) {\n      var lookup = {\n        \"background-color\": \"backgroundColor\",\n        \"color\": \"fontColor\",\n        \"width\": \"width\",\n        \"font-weight\": \"fontWeight\",\n        \"font-family\": \"fontFamily\",\n        \"font-size\": \"fontSize\",\n        \"text-align\": \"textAlign\",\n        \"border-top\": \"borderTop\",\n        \"border-left\": \"borderLeft\",\n        \"border-right\": \"borderRight\",\n        \"border-bottom\": \"borderBottom\",\n        \"padding-top\": \"paddingTop\",\n        \"padding-left\": \"paddingLeft\",\n        \"padding-right\": \"paddingRight\",\n        \"padding-bottom\": \"paddingBottom\"\n      };\n\n      if (window.getComputedStyle) {\n        var fromStyle = window.getComputedStyle(from);\n        props.forEach(function (prop) {\n          to.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n        });\n      }\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"export\", Export);\n\n  var Filter = function Filter(table) {\n    this.table = table; //hold Tabulator object\n\n    this.filterList = []; //hold filter list\n\n    this.headerFilters = {}; //hold column filters\n\n    this.headerFilterColumns = []; //hold columns that use header filters\n\n    this.prevHeaderFilterChangeCheck = \"\";\n    this.prevHeaderFilterChangeCheck = \"{}\";\n    this.changed = false; //has filtering changed since last render\n  }; //initialize column header filter\n\n\n  Filter.prototype.initializeColumn = function (column, value) {\n    var self = this,\n        field = column.getField(),\n        params; //handle successfull value change\n\n    function success(value) {\n      var filterType = column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\" || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n          type = \"\",\n          filterChangeCheck = \"\",\n          filterFunc;\n\n      if (typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value) {\n        column.modules.filter.prevSuccess = value;\n\n        if (!column.modules.filter.emptyFunc(value)) {\n          column.modules.filter.value = value;\n\n          switch (_typeof(column.definition.headerFilterFunc)) {\n            case \"string\":\n              if (self.filters[column.definition.headerFilterFunc]) {\n                type = column.definition.headerFilterFunc;\n\n                filterFunc = function filterFunc(data) {\n                  var params = column.definition.headerFilterFuncParams || {};\n                  var fieldVal = column.getFieldValue(data);\n                  params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                  return self.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n                };\n              } else {\n                console.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n              }\n\n              break;\n\n            case \"function\":\n              filterFunc = function filterFunc(data) {\n                var params = column.definition.headerFilterFuncParams || {};\n                var fieldVal = column.getFieldValue(data);\n                params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                return column.definition.headerFilterFunc(value, fieldVal, data, params);\n              };\n\n              type = filterFunc;\n              break;\n          }\n\n          if (!filterFunc) {\n            switch (filterType) {\n              case \"partial\":\n                filterFunc = function filterFunc(data) {\n                  var colVal = column.getFieldValue(data);\n\n                  if (typeof colVal !== 'undefined' && colVal !== null) {\n                    return String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n                  } else {\n                    return false;\n                  }\n                };\n\n                type = \"like\";\n                break;\n\n              default:\n                filterFunc = function filterFunc(data) {\n                  return column.getFieldValue(data) == value;\n                };\n\n                type = \"=\";\n            }\n          }\n\n          self.headerFilters[field] = {\n            value: value,\n            func: filterFunc,\n            type: type\n          };\n        } else {\n          delete self.headerFilters[field];\n        }\n\n        filterChangeCheck = JSON.stringify(self.headerFilters);\n\n        if (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\n          self.prevHeaderFilterChangeCheck = filterChangeCheck;\n          self.changed = true;\n          self.table.rowManager.filterRefresh();\n        }\n      }\n\n      return true;\n    }\n\n    column.modules.filter = {\n      success: success,\n      attrType: false,\n      tagType: false,\n      emptyFunc: false\n    };\n    this.generateHeaderFilterElement(column);\n  };\n\n  Filter.prototype.generateHeaderFilterElement = function (column, initialValue, reinitialize) {\n    var _this50 = this;\n\n    var self = this,\n        success = column.modules.filter.success,\n        field = column.getField(),\n        filterElement,\n        editor,\n        editorElement,\n        cellWrapper,\n        typingTimer,\n        searchTrigger,\n        params; //handle aborted edit\n\n    function cancel() {}\n\n    if (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\n      column.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n    }\n\n    if (field) {\n      //set empty value function\n      column.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function (value) {\n        return !value && value !== \"0\";\n      };\n\n      filterElement = document.createElement(\"div\");\n      filterElement.classList.add(\"tabulator-header-filter\"); //set column editor\n\n      switch (_typeof(column.definition.headerFilter)) {\n        case \"string\":\n          if (self.table.modules.edit.editors[column.definition.headerFilter]) {\n            editor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n            if ((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n              column.modules.filter.emptyFunc = function (value) {\n                return value !== true && value !== false;\n              };\n            }\n          } else {\n            console.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n          }\n\n          break;\n\n        case \"function\":\n          editor = column.definition.headerFilter;\n          break;\n\n        case \"boolean\":\n          if (column.modules.edit && column.modules.edit.editor) {\n            editor = column.modules.edit.editor;\n          } else {\n            if (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\n              editor = self.table.modules.edit.editors[column.definition.formatter];\n\n              if ((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n                column.modules.filter.emptyFunc = function (value) {\n                  return value !== true && value !== false;\n                };\n              }\n            } else {\n              editor = self.table.modules.edit.editors[\"input\"];\n            }\n          }\n\n          break;\n      }\n\n      if (editor) {\n        cellWrapper = {\n          getValue: function getValue() {\n            return typeof initialValue !== \"undefined\" ? initialValue : \"\";\n          },\n          getField: function getField() {\n            return column.definition.field;\n          },\n          getElement: function getElement() {\n            return filterElement;\n          },\n          getColumn: function getColumn() {\n            return column.getComponent();\n          },\n          getRow: function getRow() {\n            return {\n              normalizeHeight: function normalizeHeight() {}\n            };\n          }\n        };\n        params = column.definition.headerFilterParams || {};\n        params = typeof params === \"function\" ? params.call(self.table) : params;\n        editorElement = editor.call(this.table.modules.edit, cellWrapper, function () {}, success, cancel, params);\n\n        if (!editorElement) {\n          console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n          return;\n        }\n\n        if (!(editorElement instanceof Node)) {\n          console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n          return;\n        } //set Placeholder Text\n\n\n        if (field) {\n          self.table.modules.localize.bind(\"headerFilters|columns|\" + column.definition.field, function (value) {\n            editorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.table.modules.localize.getText(\"headerFilters|default\"));\n          });\n        } else {\n          self.table.modules.localize.bind(\"headerFilters|default\", function (value) {\n            editorElement.setAttribute(\"placeholder\", typeof self.column.definition.headerFilterPlaceholder !== \"undefined\" && self.column.definition.headerFilterPlaceholder ? self.column.definition.headerFilterPlaceholder : value);\n          });\n        } //focus on element on click\n\n\n        editorElement.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n          editorElement.focus();\n        });\n        editorElement.addEventListener(\"focus\", function (e) {\n          var left = _this50.table.columnManager.element.scrollLeft;\n\n          if (left !== _this50.table.rowManager.element.scrollLeft) {\n            _this50.table.rowManager.scrollHorizontal(left);\n\n            _this50.table.columnManager.scrollHorizontal(left);\n          }\n        }); //live update filters as user types\n\n        typingTimer = false;\n\n        searchTrigger = function searchTrigger(e) {\n          if (typingTimer) {\n            clearTimeout(typingTimer);\n          }\n\n          typingTimer = setTimeout(function () {\n            success(editorElement.value);\n          }, self.table.options.headerFilterLiveFilterDelay);\n        };\n\n        column.modules.filter.headerElement = editorElement;\n        column.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\";\n        column.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n        if (column.definition.headerFilterLiveFilter !== false) {\n          if (!(column.definition.headerFilter === 'autocomplete' || column.definition.headerFilter === 'tickCross' || (column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') && column.definition.headerFilter === true)) {\n            editorElement.addEventListener(\"keyup\", searchTrigger);\n            editorElement.addEventListener(\"search\", searchTrigger); //update number filtered columns on change\n\n            if (column.modules.filter.attrType == \"number\") {\n              editorElement.addEventListener(\"change\", function (e) {\n                success(editorElement.value);\n              });\n            } //change text inputs to search inputs to allow for clearing of field\n\n\n            if (column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\") {\n              editorElement.setAttribute(\"type\", \"search\"); // editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n            }\n          } //prevent input and select elements from propegating click to column sorters etc\n\n\n          if (column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\") {\n            editorElement.addEventListener(\"mousedown\", function (e) {\n              e.stopPropagation();\n            });\n          }\n        }\n\n        filterElement.appendChild(editorElement);\n        column.contentElement.appendChild(filterElement);\n\n        if (!reinitialize) {\n          self.headerFilterColumns.push(column);\n        }\n      }\n    } else {\n      console.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n    }\n  }; //hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\n\n  Filter.prototype.hideHeaderFilterElements = function () {\n    this.headerFilterColumns.forEach(function (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        column.modules.filter.headerElement.style.display = 'none';\n      }\n    });\n  }; //show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\n\n  Filter.prototype.showHeaderFilterElements = function () {\n    this.headerFilterColumns.forEach(function (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        column.modules.filter.headerElement.style.display = '';\n      }\n    });\n  }; //programatically set focus of header filter\n\n\n  Filter.prototype.setHeaderFilterFocus = function (column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      column.modules.filter.headerElement.focus();\n    } else {\n      console.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n    }\n  }; //programmatically get value of header filter\n\n\n  Filter.prototype.getHeaderFilterValue = function (column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      return column.modules.filter.headerElement.value;\n    } else {\n      console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n    }\n  }; //programatically set value of header filter\n\n\n  Filter.prototype.setHeaderFilterValue = function (column, value) {\n    if (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        this.generateHeaderFilterElement(column, value, true);\n        column.modules.filter.success(value);\n      } else {\n        console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n      }\n    }\n  };\n\n  Filter.prototype.reloadHeaderFilter = function (column) {\n    if (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        this.generateHeaderFilterElement(column, column.modules.filter.value, true);\n      } else {\n        console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n      }\n    }\n  }; //check if the filters has changed since last use\n\n\n  Filter.prototype.hasChanged = function () {\n    var changed = this.changed;\n    this.changed = false;\n    return changed;\n  }; //set standard filters\n\n\n  Filter.prototype.setFilter = function (field, type, value) {\n    var self = this;\n    self.filterList = [];\n\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n\n    self.addFilter(field);\n  }; //add filter to array\n\n\n  Filter.prototype.addFilter = function (field, type, value) {\n    var self = this;\n\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n\n    field.forEach(function (filter) {\n      filter = self.findFilter(filter);\n\n      if (filter) {\n        self.filterList.push(filter);\n        self.changed = true;\n      }\n    });\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n      this.table.modules.persistence.save(\"filter\");\n    }\n  };\n\n  Filter.prototype.findFilter = function (filter) {\n    var self = this,\n        column;\n\n    if (Array.isArray(filter)) {\n      return this.findSubFilters(filter);\n    }\n\n    var filterFunc = false;\n\n    if (typeof filter.field == \"function\") {\n      filterFunc = function filterFunc(data) {\n        return filter.field(data, filter.type || {}); // pass params to custom filter function\n      };\n    } else {\n      if (self.filters[filter.type]) {\n        column = self.table.columnManager.getColumnByField(filter.field);\n\n        if (column) {\n          filterFunc = function filterFunc(data) {\n            return self.filters[filter.type](filter.value, column.getFieldValue(data));\n          };\n        } else {\n          filterFunc = function filterFunc(data) {\n            return self.filters[filter.type](filter.value, data[filter.field]);\n          };\n        }\n      } else {\n        console.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n      }\n    }\n\n    filter.func = filterFunc;\n    return filter.func ? filter : false;\n  };\n\n  Filter.prototype.findSubFilters = function (filters) {\n    var self = this,\n        output = [];\n    filters.forEach(function (filter) {\n      filter = self.findFilter(filter);\n\n      if (filter) {\n        output.push(filter);\n      }\n    });\n    return output.length ? output : false;\n  }; //get all filters\n\n\n  Filter.prototype.getFilters = function (all, ajax) {\n    var output = [];\n\n    if (all) {\n      output = this.getHeaderFilters();\n    }\n\n    if (ajax) {\n      output.forEach(function (item) {\n        if (typeof item.type == \"function\") {\n          item.type = \"function\";\n        }\n      });\n    }\n\n    output = output.concat(this.filtersToArray(this.filterList, ajax));\n    return output;\n  }; //filter to Object\n\n\n  Filter.prototype.filtersToArray = function (filterList, ajax) {\n    var _this51 = this;\n\n    var output = [];\n    filterList.forEach(function (filter) {\n      var item;\n\n      if (Array.isArray(filter)) {\n        output.push(_this51.filtersToArray(filter, ajax));\n      } else {\n        item = {\n          field: filter.field,\n          type: filter.type,\n          value: filter.value\n        };\n\n        if (ajax) {\n          if (typeof item.type == \"function\") {\n            item.type = \"function\";\n          }\n        }\n\n        output.push(item);\n      }\n    });\n    return output;\n  }; //get all filters\n\n\n  Filter.prototype.getHeaderFilters = function () {\n    var self = this,\n        output = [];\n\n    for (var key in this.headerFilters) {\n      output.push({\n        field: key,\n        type: this.headerFilters[key].type,\n        value: this.headerFilters[key].value\n      });\n    }\n\n    return output;\n  }; //remove filter from array\n\n\n  Filter.prototype.removeFilter = function (field, type, value) {\n    var self = this;\n\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n\n    field.forEach(function (filter) {\n      var index = -1;\n\n      if (_typeof(filter.field) == \"object\") {\n        index = self.filterList.findIndex(function (element) {\n          return filter === element;\n        });\n      } else {\n        index = self.filterList.findIndex(function (element) {\n          return filter.field === element.field && filter.type === element.type && filter.value === element.value;\n        });\n      }\n\n      if (index > -1) {\n        self.filterList.splice(index, 1);\n        self.changed = true;\n      } else {\n        console.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n      }\n    });\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n      this.table.modules.persistence.save(\"filter\");\n    }\n  }; //clear filters\n\n\n  Filter.prototype.clearFilter = function (all) {\n    this.filterList = [];\n\n    if (all) {\n      this.clearHeaderFilter();\n    }\n\n    this.changed = true;\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n      this.table.modules.persistence.save(\"filter\");\n    }\n  }; //clear header filters\n\n\n  Filter.prototype.clearHeaderFilter = function () {\n    var self = this;\n    this.headerFilters = {};\n    self.prevHeaderFilterChangeCheck = \"{}\";\n    this.headerFilterColumns.forEach(function (column) {\n      column.modules.filter.value = null;\n      column.modules.filter.prevSuccess = undefined;\n      self.reloadHeaderFilter(column);\n    });\n    this.changed = true;\n  }; //search data and return matching rows\n\n\n  Filter.prototype.search = function (searchType, field, type, value) {\n    var self = this,\n        activeRows = [],\n        filterList = [];\n\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n\n    field.forEach(function (filter) {\n      filter = self.findFilter(filter);\n\n      if (filter) {\n        filterList.push(filter);\n      }\n    });\n    this.table.rowManager.rows.forEach(function (row) {\n      var match = true;\n      filterList.forEach(function (filter) {\n        if (!self.filterRecurse(filter, row.getData())) {\n          match = false;\n        }\n      });\n\n      if (match) {\n        activeRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n      }\n    });\n    return activeRows;\n  }; //filter row array\n\n\n  Filter.prototype.filter = function (rowList, filters) {\n    var self = this,\n        activeRows = [],\n        activeRowComponents = [];\n\n    if (self.table.options.dataFiltering) {\n      self.table.options.dataFiltering.call(self.table, self.getFilters());\n    }\n\n    if (!self.table.options.ajaxFiltering && (self.filterList.length || Object.keys(self.headerFilters).length)) {\n      rowList.forEach(function (row) {\n        if (self.filterRow(row)) {\n          activeRows.push(row);\n        }\n      });\n    } else {\n      activeRows = rowList.slice(0);\n    }\n\n    if (self.table.options.dataFiltered) {\n      activeRows.forEach(function (row) {\n        activeRowComponents.push(row.getComponent());\n      });\n      self.table.options.dataFiltered.call(self.table, self.getFilters(), activeRowComponents);\n    }\n\n    return activeRows;\n  }; //filter individual row\n\n\n  Filter.prototype.filterRow = function (row, filters) {\n    var self = this,\n        match = true,\n        data = row.getData();\n    self.filterList.forEach(function (filter) {\n      if (!self.filterRecurse(filter, data)) {\n        match = false;\n      }\n    });\n\n    for (var field in self.headerFilters) {\n      if (!self.headerFilters[field].func(data)) {\n        match = false;\n      }\n    }\n\n    return match;\n  };\n\n  Filter.prototype.filterRecurse = function (filter, data) {\n    var self = this,\n        match = false;\n\n    if (Array.isArray(filter)) {\n      filter.forEach(function (subFilter) {\n        if (self.filterRecurse(subFilter, data)) {\n          match = true;\n        }\n      });\n    } else {\n      match = filter.func(data);\n    }\n\n    return match;\n  }; //list of available filters\n\n\n  Filter.prototype.filters = {\n    //equal to\n    \"=\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal == filterVal ? true : false;\n    },\n    //less than\n    \"<\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal < filterVal ? true : false;\n    },\n    //less than or equal to\n    \"<=\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal <= filterVal ? true : false;\n    },\n    //greater than\n    \">\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal > filterVal ? true : false;\n    },\n    //greater than or equal to\n    \">=\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal >= filterVal ? true : false;\n    },\n    //not equal to\n    \"!=\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal != filterVal ? true : false;\n    },\n    \"regex\": function regex(filterVal, rowVal, rowData, filterParams) {\n      if (typeof filterVal == \"string\") {\n        filterVal = new RegExp(filterVal);\n      }\n\n      return filterVal.test(rowVal);\n    },\n    //contains the string\n    \"like\": function like(filterVal, rowVal, rowData, filterParams) {\n      if (filterVal === null || typeof filterVal === \"undefined\") {\n        return rowVal === filterVal ? true : false;\n      } else {\n        if (typeof rowVal !== 'undefined' && rowVal !== null) {\n          return String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n        } else {\n          return false;\n        }\n      }\n    },\n    //in array\n    \"in\": function _in(filterVal, rowVal, rowData, filterParams) {\n      if (Array.isArray(filterVal)) {\n        return filterVal.indexOf(rowVal) > -1;\n      } else {\n        console.warn(\"Filter Error - filter value is not an array:\", filterVal);\n        return false;\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"filter\", Filter);\n\n  var Format = function Format(table) {\n    this.table = table; //hold Tabulator object\n  }; //initialize column formatter\n\n\n  Format.prototype.initializeColumn = function (column) {\n    column.modules.format = this.lookupFormatter(column, \"\");\n\n    if (typeof column.definition.formatterPrint !== \"undefined\") {\n      column.modules.format.print = this.lookupFormatter(column, \"Print\");\n    }\n\n    if (typeof column.definition.formatterClipboard !== \"undefined\") {\n      column.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n    }\n\n    if (typeof column.definition.formatterHtmlOutput !== \"undefined\") {\n      column.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n    }\n  };\n\n  Format.prototype.lookupFormatter = function (column, type) {\n    var config = {\n      params: column.definition[\"formatter\" + type + \"Params\"] || {}\n    },\n        formatter = column.definition[\"formatter\" + type]; //set column formatter\n\n    switch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n      case \"string\":\n        if (formatter === \"tick\") {\n          formatter = \"tickCross\";\n\n          if (typeof config.params.crossElement == \"undefined\") {\n            config.params.crossElement = false;\n          }\n\n          console.warn(\"DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false\");\n        }\n\n        if (this.formatters[formatter]) {\n          config.formatter = this.formatters[formatter];\n        } else {\n          console.warn(\"Formatter Error - No such formatter found: \", formatter);\n          config.formatter = this.formatters.plaintext;\n        }\n\n        break;\n\n      case \"function\":\n        config.formatter = formatter;\n        break;\n\n      default:\n        config.formatter = this.formatters.plaintext;\n        break;\n    }\n\n    return config;\n  };\n\n  Format.prototype.cellRendered = function (cell) {\n    if (cell.modules.format && cell.modules.format.renderedCallback) {\n      cell.modules.format.renderedCallback();\n    }\n  }; //return a formatted value for a cell\n\n\n  Format.prototype.formatValue = function (cell) {\n    var component = cell.getComponent(),\n        params = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\n    function onRendered(callback) {\n      if (!cell.modules.format) {\n        cell.modules.format = {};\n      }\n\n      cell.modules.format.renderedCallback = callback;\n    }\n\n    return cell.column.modules.format.formatter.call(this, component, params, onRendered);\n  };\n\n  Format.prototype.formatExportValue = function (cell, type) {\n    var formatter = cell.column.modules.format[type],\n        params;\n\n    if (formatter) {\n      var onRendered = function onRendered(callback) {\n        if (!cell.modules.format) {\n          cell.modules.format = {};\n        }\n\n        cell.modules.format.renderedCallback = callback;\n      };\n\n      params = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\n      return formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n    } else {\n      return this.formatValue(cell);\n    }\n  };\n\n  Format.prototype.sanitizeHTML = function (value) {\n    if (value) {\n      var entityMap = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;',\n        '`': '&#x60;',\n        '=': '&#x3D;'\n      };\n      return String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\n        return entityMap[s];\n      });\n    } else {\n      return value;\n    }\n  };\n\n  Format.prototype.emptyToSpace = function (value) {\n    return value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n  }; //get formatter for cell\n\n\n  Format.prototype.getFormatter = function (formatter) {\n    var formatter;\n\n    switch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n      case \"string\":\n        if (this.formatters[formatter]) {\n          formatter = this.formatters[formatter];\n        } else {\n          console.warn(\"Formatter Error - No such formatter found: \", formatter);\n          formatter = this.formatters.plaintext;\n        }\n\n        break;\n\n      case \"function\":\n        formatter = formatter;\n        break;\n\n      default:\n        formatter = this.formatters.plaintext;\n        break;\n    }\n\n    return formatter;\n  }; //default data formatters\n\n\n  Format.prototype.formatters = {\n    //plain text value\n    plaintext: function plaintext(cell, formatterParams, onRendered) {\n      return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n    },\n    //html text value\n    html: function html(cell, formatterParams, onRendered) {\n      return cell.getValue();\n    },\n    //multiline text area\n    textarea: function textarea(cell, formatterParams, onRendered) {\n      cell.getElement().style.whiteSpace = \"pre-wrap\";\n      return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n    },\n    //currency formatting\n    money: function money(cell, formatterParams, onRendered) {\n      var floatVal = parseFloat(cell.getValue()),\n          number,\n          integer,\n          decimal,\n          rgx;\n      var decimalSym = formatterParams.decimal || \".\";\n      var thousandSym = formatterParams.thousand || \",\";\n      var symbol = formatterParams.symbol || \"\";\n      var after = !!formatterParams.symbolAfter;\n      var precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n      if (isNaN(floatVal)) {\n        return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n      }\n\n      number = precision !== false ? floatVal.toFixed(precision) : floatVal;\n      number = String(number).split(\".\");\n      integer = number[0];\n      decimal = number.length > 1 ? decimalSym + number[1] : \"\";\n      rgx = /(\\d+)(\\d{3})/;\n\n      while (rgx.test(integer)) {\n        integer = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n      }\n\n      return after ? integer + decimal + symbol : symbol + integer + decimal;\n    },\n    //clickable anchor tag\n    link: function link(cell, formatterParams, onRendered) {\n      var value = cell.getValue(),\n          urlPrefix = formatterParams.urlPrefix || \"\",\n          download = formatterParams.download,\n          label = value,\n          el = document.createElement(\"a\"),\n          data;\n\n      if (formatterParams.labelField) {\n        data = cell.getData();\n        label = data[formatterParams.labelField];\n      }\n\n      if (formatterParams.label) {\n        switch (_typeof(formatterParams.label)) {\n          case \"string\":\n            label = formatterParams.label;\n            break;\n\n          case \"function\":\n            label = formatterParams.label(cell);\n            break;\n        }\n      }\n\n      if (label) {\n        if (formatterParams.urlField) {\n          data = cell.getData();\n          value = data[formatterParams.urlField];\n        }\n\n        if (formatterParams.url) {\n          switch (_typeof(formatterParams.url)) {\n            case \"string\":\n              value = formatterParams.url;\n              break;\n\n            case \"function\":\n              value = formatterParams.url(cell);\n              break;\n          }\n        }\n\n        el.setAttribute(\"href\", urlPrefix + value);\n\n        if (formatterParams.target) {\n          el.setAttribute(\"target\", formatterParams.target);\n        }\n\n        if (formatterParams.download) {\n          if (typeof download == \"function\") {\n            download = download(cell);\n          } else {\n            download = download === true ? \"\" : download;\n          }\n\n          el.setAttribute(\"download\", download);\n        }\n\n        el.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n        return el;\n      } else {\n        return \"&nbsp;\";\n      }\n    },\n    //image element\n    image: function image(cell, formatterParams, onRendered) {\n      var el = document.createElement(\"img\");\n      el.setAttribute(\"src\", cell.getValue());\n\n      switch (_typeof(formatterParams.height)) {\n        case \"number\":\n          el.style.height = formatterParams.height + \"px\";\n          break;\n\n        case \"string\":\n          el.style.height = formatterParams.height;\n          break;\n      }\n\n      switch (_typeof(formatterParams.width)) {\n        case \"number\":\n          el.style.width = formatterParams.width + \"px\";\n          break;\n\n        case \"string\":\n          el.style.width = formatterParams.width;\n          break;\n      }\n\n      el.addEventListener(\"load\", function () {\n        cell.getRow().normalizeHeight();\n      });\n      return el;\n    },\n    //tick or cross\n    tickCross: function tickCross(cell, formatterParams, onRendered) {\n      var value = cell.getValue(),\n          element = cell.getElement(),\n          empty = formatterParams.allowEmpty,\n          truthy = formatterParams.allowTruthy,\n          tick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n          cross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n      if (truthy && value || value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\") {\n        element.setAttribute(\"aria-checked\", true);\n        return tick || \"\";\n      } else {\n        if (empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")) {\n          element.setAttribute(\"aria-checked\", \"mixed\");\n          return \"\";\n        } else {\n          element.setAttribute(\"aria-checked\", false);\n          return cross || \"\";\n        }\n      }\n    },\n    datetime: function datetime(cell, formatterParams, onRendered) {\n      var inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n      var outputFormat = formatterParams.outputFormat || \"DD/MM/YYYY hh:mm:ss\";\n      var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n      var value = cell.getValue();\n      var newDatetime = moment(value, inputFormat);\n\n      if (newDatetime.isValid()) {\n        return newDatetime.format(outputFormat);\n      } else {\n        if (invalid === true) {\n          return value;\n        } else if (typeof invalid === \"function\") {\n          return invalid(value);\n        } else {\n          return invalid;\n        }\n      }\n    },\n    datetimediff: function datetime(cell, formatterParams, onRendered) {\n      var inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n      var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n      var suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n      var unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : undefined;\n      var humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n      var date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : moment();\n      var value = cell.getValue();\n      var newDatetime = moment(value, inputFormat);\n\n      if (newDatetime.isValid()) {\n        if (humanize) {\n          return moment.duration(newDatetime.diff(date)).humanize(suffix);\n        } else {\n          return newDatetime.diff(date, unit) + (suffix ? \" \" + suffix : \"\");\n        }\n      } else {\n        if (invalid === true) {\n          return value;\n        } else if (typeof invalid === \"function\") {\n          return invalid(value);\n        } else {\n          return invalid;\n        }\n      }\n    },\n    //select\n    lookup: function lookup(cell, formatterParams, onRendered) {\n      var value = cell.getValue();\n\n      if (typeof formatterParams[value] === \"undefined\") {\n        console.warn('Missing display value for ' + value);\n        return value;\n      }\n\n      return formatterParams[value];\n    },\n    //star rating\n    star: function star(cell, formatterParams, onRendered) {\n      var value = cell.getValue(),\n          element = cell.getElement(),\n          maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n          stars = document.createElement(\"span\"),\n          star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n          starActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n          starInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>'; //style stars holder\n\n      stars.style.verticalAlign = \"middle\"; //style star\n\n      star.setAttribute(\"width\", \"14\");\n      star.setAttribute(\"height\", \"14\");\n      star.setAttribute(\"viewBox\", \"0 0 512 512\");\n      star.setAttribute(\"xml:space\", \"preserve\");\n      star.style.padding = \"0 1px\";\n      value = value && !isNaN(value) ? parseInt(value) : 0;\n      value = Math.max(0, Math.min(value, maxStars));\n\n      for (var i = 1; i <= maxStars; i++) {\n        var nextStar = star.cloneNode(true);\n        nextStar.innerHTML = i <= value ? starActive : starInactive;\n        stars.appendChild(nextStar);\n      }\n\n      element.style.whiteSpace = \"nowrap\";\n      element.style.overflow = \"hidden\";\n      element.style.textOverflow = \"ellipsis\";\n      element.setAttribute(\"aria-label\", value);\n      return stars;\n    },\n    traffic: function traffic(cell, formatterParams, onRendered) {\n      var value = this.sanitizeHTML(cell.getValue()) || 0,\n          el = document.createElement(\"span\"),\n          max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n          min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n          colors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n          color = \"#666666\",\n          percent,\n          percentValue;\n\n      if (isNaN(value) || typeof cell.getValue() === \"undefined\") {\n        return;\n      }\n\n      el.classList.add(\"tabulator-traffic-light\"); //make sure value is in range\n\n      percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n      percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min; //workout percentage\n\n      percent = (max - min) / 100;\n      percentValue = Math.round((percentValue - min) / percent); //set color\n\n      switch (typeof colors === 'undefined' ? 'undefined' : _typeof(colors)) {\n        case \"string\":\n          color = colors;\n          break;\n\n        case \"function\":\n          color = colors(value);\n          break;\n\n        case \"object\":\n          if (Array.isArray(colors)) {\n            var unit = 100 / colors.length;\n            var index = Math.floor(percentValue / unit);\n            index = Math.min(index, colors.length - 1);\n            index = Math.max(index, 0);\n            color = colors[index];\n            break;\n          }\n\n      }\n\n      el.style.backgroundColor = color;\n      return el;\n    },\n    //progress bar\n    progress: function progress(cell, formatterParams, onRendered) {\n      //progress bar\n      var value = this.sanitizeHTML(cell.getValue()) || 0,\n          element = cell.getElement(),\n          max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n          min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n          legendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n          percent,\n          percentValue,\n          color,\n          legend,\n          legendColor,\n          top,\n          left,\n          right,\n          bottom; //make sure value is in range\n\n      percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n      percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min; //workout percentage\n\n      percent = (max - min) / 100;\n      percentValue = Math.round((percentValue - min) / percent); //set bar color\n\n      switch (_typeof(formatterParams.color)) {\n        case \"string\":\n          color = formatterParams.color;\n          break;\n\n        case \"function\":\n          color = formatterParams.color(value);\n          break;\n\n        case \"object\":\n          if (Array.isArray(formatterParams.color)) {\n            var unit = 100 / formatterParams.color.length;\n            var index = Math.floor(percentValue / unit);\n            index = Math.min(index, formatterParams.color.length - 1);\n            index = Math.max(index, 0);\n            color = formatterParams.color[index];\n            break;\n          }\n\n        default:\n          color = \"#2DC214\";\n      } //generate legend\n\n\n      switch (_typeof(formatterParams.legend)) {\n        case \"string\":\n          legend = formatterParams.legend;\n          break;\n\n        case \"function\":\n          legend = formatterParams.legend(value);\n          break;\n\n        case \"boolean\":\n          legend = value;\n          break;\n\n        default:\n          legend = false;\n      } //set legend color\n\n\n      switch (_typeof(formatterParams.legendColor)) {\n        case \"string\":\n          legendColor = formatterParams.legendColor;\n          break;\n\n        case \"function\":\n          legendColor = formatterParams.legendColor(value);\n          break;\n\n        case \"object\":\n          if (Array.isArray(formatterParams.legendColor)) {\n            var unit = 100 / formatterParams.legendColor.length;\n            var index = Math.floor(percentValue / unit);\n            index = Math.min(index, formatterParams.legendColor.length - 1);\n            index = Math.max(index, 0);\n            legendColor = formatterParams.legendColor[index];\n          }\n\n          break;\n\n        default:\n          legendColor = \"#000\";\n      }\n\n      element.style.minWidth = \"30px\";\n      element.style.position = \"relative\";\n      element.setAttribute(\"aria-label\", percentValue);\n      var barEl = document.createElement(\"div\");\n      barEl.style.display = \"inline-block\";\n      barEl.style.position = \"relative\";\n      barEl.style.width = percentValue + \"%\";\n      barEl.style.backgroundColor = color;\n      barEl.style.height = \"100%\";\n      barEl.setAttribute('data-max', max);\n      barEl.setAttribute('data-min', min);\n\n      if (legend) {\n        var legendEl = document.createElement(\"div\");\n        legendEl.style.position = \"absolute\";\n        legendEl.style.top = \"4px\";\n        legendEl.style.left = 0;\n        legendEl.style.textAlign = legendAlign;\n        legendEl.style.width = \"100%\";\n        legendEl.style.color = legendColor;\n        legendEl.innerHTML = legend;\n      }\n\n      onRendered(function () {\n        //handle custom element needed if formatter is to be included in printed/downloaded output\n        if (!(cell instanceof CellComponent)) {\n          var holderEl = document.createElement(\"div\");\n          holderEl.style.position = \"absolute\";\n          holderEl.style.top = \"4px\";\n          holderEl.style.bottom = \"4px\";\n          holderEl.style.left = \"4px\";\n          holderEl.style.right = \"4px\";\n          element.appendChild(holderEl);\n          element = holderEl;\n        }\n\n        element.appendChild(barEl);\n\n        if (legend) {\n          element.appendChild(legendEl);\n        }\n      });\n      return \"\";\n    },\n    //background color\n    color: function color(cell, formatterParams, onRendered) {\n      cell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n      return \"\";\n    },\n    //tick icon\n    buttonTick: function buttonTick(cell, formatterParams, onRendered) {\n      return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n    },\n    //cross icon\n    buttonCross: function buttonCross(cell, formatterParams, onRendered) {\n      return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n    },\n    //current row number\n    rownum: function rownum(cell, formatterParams, onRendered) {\n      return this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\n    },\n    //row handle\n    handle: function handle(cell, formatterParams, onRendered) {\n      cell.getElement().classList.add(\"tabulator-row-handle\");\n      return \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n    },\n    responsiveCollapse: function responsiveCollapse(cell, formatterParams, onRendered) {\n      var self = this,\n          open = false,\n          el = document.createElement(\"div\"),\n          config = cell.getRow()._row.modules.responsiveLayout;\n\n      el.classList.add(\"tabulator-responsive-collapse-toggle\");\n      el.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\n      cell.getElement().classList.add(\"tabulator-row-handle\");\n\n      function toggleList(isOpen) {\n        var collapseEl = config.element;\n        config.open = isOpen;\n\n        if (collapseEl) {\n          if (config.open) {\n            el.classList.add(\"open\");\n            collapseEl.style.display = '';\n          } else {\n            el.classList.remove(\"open\");\n            collapseEl.style.display = 'none';\n          }\n        }\n      }\n\n      el.addEventListener(\"click\", function (e) {\n        e.stopImmediatePropagation();\n        toggleList(!config.open);\n      });\n      toggleList(config.open);\n      return el;\n    },\n    rowSelection: function rowSelection(cell) {\n      var _this52 = this;\n\n      var checkbox = document.createElement(\"input\");\n      checkbox.type = 'checkbox';\n\n      if (this.table.modExists(\"selectRow\", true)) {\n        checkbox.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n\n        if (typeof cell.getRow == 'function') {\n          var row = cell.getRow();\n          checkbox.addEventListener(\"change\", function (e) {\n            row.toggleSelect();\n          });\n          checkbox.checked = row.isSelected();\n          this.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n        } else {\n          checkbox.addEventListener(\"change\", function (e) {\n            if (_this52.table.modules.selectRow.selectedRows.length) {\n              _this52.table.deselectRow();\n            } else {\n              _this52.table.selectRow();\n            }\n          });\n          this.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n        }\n      }\n\n      return checkbox;\n    }\n  };\n  Tabulator.prototype.registerModule(\"format\", Format);\n\n  var FrozenColumns = function FrozenColumns(table) {\n    this.table = table; //hold Tabulator object\n\n    this.leftColumns = [];\n    this.rightColumns = [];\n    this.leftMargin = 0;\n    this.rightMargin = 0;\n    this.rightPadding = 0;\n    this.initializationMode = \"left\";\n    this.active = false;\n    this.scrollEndTimer = false;\n  }; //reset initial state\n\n\n  FrozenColumns.prototype.reset = function () {\n    this.initializationMode = \"left\";\n    this.leftColumns = [];\n    this.rightColumns = [];\n    this.leftMargin = 0;\n    this.rightMargin = 0;\n    this.rightMargin = 0;\n    this.active = false;\n    this.table.columnManager.headersElement.style.marginLeft = 0;\n    this.table.columnManager.element.style.paddingRight = 0;\n  }; //initialize specific column\n\n\n  FrozenColumns.prototype.initializeColumn = function (column) {\n    var config = {\n      margin: 0,\n      edge: false\n    };\n\n    if (!column.isGroup) {\n      if (this.frozenCheck(column)) {\n        config.position = this.initializationMode;\n\n        if (this.initializationMode == \"left\") {\n          this.leftColumns.push(column);\n        } else {\n          this.rightColumns.unshift(column);\n        }\n\n        this.active = true;\n        column.modules.frozen = config;\n      } else {\n        this.initializationMode = \"right\";\n      }\n    }\n  };\n\n  FrozenColumns.prototype.frozenCheck = function (column) {\n    var frozen = false;\n\n    if (column.parent.isGroup && column.definition.frozen) {\n      console.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n    }\n\n    if (column.parent.isGroup) {\n      return this.frozenCheck(column.parent);\n    } else {\n      return column.definition.frozen;\n    }\n\n    return frozen;\n  }; //quick layout to smooth horizontal scrolling\n\n\n  FrozenColumns.prototype.scrollHorizontal = function () {\n    var _this53 = this;\n\n    var rows;\n\n    if (this.active) {\n      clearTimeout(this.scrollEndTimer); //layout all rows after scroll is complete\n\n      this.scrollEndTimer = setTimeout(function () {\n        _this53.layout();\n      }, 100);\n      rows = this.table.rowManager.getVisibleRows();\n      this.calcMargins();\n      this.layoutColumnPosition();\n      this.layoutCalcRows();\n      rows.forEach(function (row) {\n        if (row.type === \"row\") {\n          _this53.layoutRow(row);\n        }\n      });\n      this.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n    }\n  }; //calculate margins for rows\n\n\n  FrozenColumns.prototype.calcMargins = function () {\n    this.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\n    this.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\n    this.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\n    this.table.columnManager.element.style.paddingRight = this.rightMargin; //calculate right frozen columns\n\n    this.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\n  }; //layout calculation rows\n\n\n  FrozenColumns.prototype.layoutCalcRows = function () {\n    if (this.table.modExists(\"columnCalcs\")) {\n      if (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\n        this.layoutRow(this.table.modules.columnCalcs.topRow);\n      }\n\n      if (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\n        this.layoutRow(this.table.modules.columnCalcs.botRow);\n      }\n    }\n  }; //calculate column positions and layout headers\n\n\n  FrozenColumns.prototype.layoutColumnPosition = function (allCells) {\n    var _this54 = this;\n\n    var leftParents = [];\n    this.leftColumns.forEach(function (column, i) {\n      column.modules.frozen.margin = _this54._calcSpace(_this54.leftColumns, i) + _this54.table.columnManager.scrollLeft + \"px\";\n\n      if (i == _this54.leftColumns.length - 1) {\n        column.modules.frozen.edge = true;\n      } else {\n        column.modules.frozen.edge = false;\n      }\n\n      if (column.parent.isGroup) {\n        var parentEl = _this54.getColGroupParentElement(column);\n\n        if (!leftParents.includes(parentEl)) {\n          _this54.layoutElement(parentEl, column);\n\n          leftParents.push(parentEl);\n        }\n\n        if (column.modules.frozen.edge) {\n          parentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n        }\n      } else {\n        _this54.layoutElement(column.getElement(), column);\n      }\n\n      if (allCells) {\n        column.cells.forEach(function (cell) {\n          _this54.layoutElement(cell.getElement(), column);\n        });\n      }\n    });\n    this.rightColumns.forEach(function (column, i) {\n      column.modules.frozen.margin = _this54.rightPadding - _this54._calcSpace(_this54.rightColumns, i + 1) + \"px\";\n\n      if (i == _this54.rightColumns.length - 1) {\n        column.modules.frozen.edge = true;\n      } else {\n        column.modules.frozen.edge = false;\n      }\n\n      if (column.parent.isGroup) {\n        _this54.layoutElement(_this54.getColGroupParentElement(column), column);\n      } else {\n        _this54.layoutElement(column.getElement(), column);\n      }\n\n      if (allCells) {\n        column.cells.forEach(function (cell) {\n          _this54.layoutElement(cell.getElement(), column);\n        });\n      }\n    });\n  };\n\n  FrozenColumns.prototype.getColGroupParentElement = function (column) {\n    return column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n  }; //layout columns appropropriatly\n\n\n  FrozenColumns.prototype.layout = function () {\n    var self = this,\n        rightMargin = 0;\n\n    if (self.active) {\n      //calculate row padding\n      this.calcMargins(); // self.table.rowManager.activeRows.forEach(function(row){\n      // \tself.layoutRow(row);\n      // });\n      // if(self.table.options.dataTree){\n\n      self.table.rowManager.getDisplayRows().forEach(function (row) {\n        if (row.type === \"row\") {\n          self.layoutRow(row);\n        }\n      }); // }\n\n      this.layoutCalcRows(); //calculate left columns\n\n      this.layoutColumnPosition(true); // if(tableHolder.scrollHeight > tableHolder.clientHeight){\n      // \trightMargin -= tableHolder.offsetWidth - tableHolder.clientWidth;\n      // }\n\n      this.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n    }\n  };\n\n  FrozenColumns.prototype.layoutRow = function (row) {\n    var _this55 = this;\n\n    var rowEl = row.getElement();\n    rowEl.style.paddingLeft = this.leftMargin; // rowEl.style.paddingRight = this.rightMargin + \"px\";\n\n    this.leftColumns.forEach(function (column) {\n      var cell = row.getCell(column);\n\n      if (cell) {\n        _this55.layoutElement(cell.getElement(), column);\n      }\n    });\n    this.rightColumns.forEach(function (column) {\n      var cell = row.getCell(column);\n\n      if (cell) {\n        _this55.layoutElement(cell.getElement(), column);\n      }\n    });\n  };\n\n  FrozenColumns.prototype.layoutElement = function (element, column) {\n    if (column.modules.frozen) {\n      element.style.position = \"absolute\";\n      element.style.left = column.modules.frozen.margin;\n      element.classList.add(\"tabulator-frozen\");\n\n      if (column.modules.frozen.edge) {\n        element.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n      }\n    }\n  };\n\n  FrozenColumns.prototype._calcSpace = function (columns, index) {\n    var width = 0;\n\n    for (var i = 0; i < index; i++) {\n      if (columns[i].visible) {\n        width += columns[i].getWidth();\n      }\n    }\n\n    return width;\n  };\n\n  Tabulator.prototype.registerModule(\"frozenColumns\", FrozenColumns);\n\n  var FrozenRows = function FrozenRows(table) {\n    this.table = table; //hold Tabulator object\n\n    this.topElement = document.createElement(\"div\");\n    this.rows = [];\n    this.displayIndex = 0; //index in display pipeline\n  };\n\n  FrozenRows.prototype.initialize = function () {\n    this.rows = [];\n    this.topElement.classList.add(\"tabulator-frozen-rows-holder\"); // this.table.columnManager.element.append(this.topElement);\n\n    this.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n  };\n\n  FrozenRows.prototype.setDisplayIndex = function (index) {\n    this.displayIndex = index;\n  };\n\n  FrozenRows.prototype.getDisplayIndex = function () {\n    return this.displayIndex;\n  };\n\n  FrozenRows.prototype.isFrozen = function () {\n    return !!this.rows.length;\n  }; //filter frozen rows out of display data\n\n\n  FrozenRows.prototype.getRows = function (rows) {\n    var self = this,\n        frozen = [],\n        output = rows.slice(0);\n    this.rows.forEach(function (row) {\n      var index = output.indexOf(row);\n\n      if (index > -1) {\n        output.splice(index, 1);\n      }\n    });\n    return output;\n  };\n\n  FrozenRows.prototype.freezeRow = function (row) {\n    if (!row.modules.frozen) {\n      row.modules.frozen = true;\n      this.topElement.appendChild(row.getElement());\n      row.initialize();\n      row.normalizeHeight();\n      this.table.rowManager.adjustTableSize();\n      this.rows.push(row);\n      this.table.rowManager.refreshActiveData(\"display\");\n      this.styleRows();\n    } else {\n      console.warn(\"Freeze Error - Row is already frozen\");\n    }\n  };\n\n  FrozenRows.prototype.unfreezeRow = function (row) {\n    var index = this.rows.indexOf(row);\n\n    if (row.modules.frozen) {\n      row.modules.frozen = false;\n      var rowEl = row.getElement();\n      rowEl.parentNode.removeChild(rowEl);\n      this.table.rowManager.adjustTableSize();\n      this.rows.splice(index, 1);\n      this.table.rowManager.refreshActiveData(\"display\");\n\n      if (this.rows.length) {\n        this.styleRows();\n      }\n    } else {\n      console.warn(\"Freeze Error - Row is already unfrozen\");\n    }\n  };\n\n  FrozenRows.prototype.styleRows = function (row) {\n    var self = this;\n    this.rows.forEach(function (row, i) {\n      self.table.rowManager.styleRow(row, i);\n    });\n  };\n\n  Tabulator.prototype.registerModule(\"frozenRows\", FrozenRows); //public group object\n\n  var GroupComponent = function GroupComponent(group) {\n    this._group = group;\n    this.type = \"GroupComponent\";\n  };\n\n  GroupComponent.prototype.getKey = function () {\n    return this._group.key;\n  };\n\n  GroupComponent.prototype.getField = function () {\n    return this._group.field;\n  };\n\n  GroupComponent.prototype.getElement = function () {\n    return this._group.element;\n  };\n\n  GroupComponent.prototype.getRows = function () {\n    return this._group.getRows(true);\n  };\n\n  GroupComponent.prototype.getSubGroups = function () {\n    return this._group.getSubGroups(true);\n  };\n\n  GroupComponent.prototype.getParentGroup = function () {\n    return this._group.parent ? this._group.parent.getComponent() : false;\n  };\n\n  GroupComponent.prototype.getVisibility = function () {\n    return this._group.visible;\n  };\n\n  GroupComponent.prototype.show = function () {\n    this._group.show();\n  };\n\n  GroupComponent.prototype.hide = function () {\n    this._group.hide();\n  };\n\n  GroupComponent.prototype.toggle = function () {\n    this._group.toggleVisibility();\n  };\n\n  GroupComponent.prototype._getSelf = function () {\n    return this._group;\n  };\n\n  GroupComponent.prototype.getTable = function () {\n    return this._group.groupManager.table;\n  }; //////////////////////////////////////////////////\n  //////////////// Group Functions /////////////////\n  //////////////////////////////////////////////////\n\n\n  var Group = function Group(groupManager, parent, level, key, field, generator, oldGroup) {\n    this.groupManager = groupManager;\n    this.parent = parent;\n    this.key = key;\n    this.level = level;\n    this.field = field;\n    this.hasSubGroups = level < groupManager.groupIDLookups.length - 1;\n    this.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n    this.type = \"group\"; //type of element\n\n    this.old = oldGroup;\n    this.rows = [];\n    this.groups = [];\n    this.groupList = [];\n    this.generator = generator;\n    this.elementContents = false;\n    this.height = 0;\n    this.outerHeight = 0;\n    this.initialized = false;\n    this.calcs = {};\n    this.initialized = false;\n    this.modules = {};\n    this.arrowElement = false;\n    this.visible = oldGroup ? oldGroup.visible : typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0];\n    this.createElements();\n    this.addBindings();\n    this.createValueGroups();\n  };\n\n  Group.prototype.wipe = function () {\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        group.wipe();\n      });\n    } else {\n      this.element = false;\n      this.arrowElement = false;\n      this.elementContents = false;\n    }\n  };\n\n  Group.prototype.createElements = function () {\n    var arrow = document.createElement(\"div\");\n    arrow.classList.add(\"tabulator-arrow\");\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-row\");\n    this.element.classList.add(\"tabulator-group\");\n    this.element.classList.add(\"tabulator-group-level-\" + this.level);\n    this.element.setAttribute(\"role\", \"rowgroup\");\n    this.arrowElement = document.createElement(\"div\");\n    this.arrowElement.classList.add(\"tabulator-group-toggle\");\n    this.arrowElement.appendChild(arrow); //setup movable rows\n\n    if (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")) {\n      this.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n    }\n  };\n\n  Group.prototype.createValueGroups = function () {\n    var _this56 = this;\n\n    var level = this.level + 1;\n\n    if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n      this.groupManager.allowedValues[level].forEach(function (value) {\n        _this56._createGroup(value, level);\n      });\n    }\n  };\n\n  Group.prototype.addBindings = function () {\n    var self = this,\n        dblTap,\n        tapHold,\n        tap,\n        toggleElement; //handle group click events\n\n    if (self.groupManager.table.options.groupClick) {\n      self.element.addEventListener(\"click\", function (e) {\n        self.groupManager.table.options.groupClick.call(self.groupManager.table, e, self.getComponent());\n      });\n    }\n\n    if (self.groupManager.table.options.groupDblClick) {\n      self.element.addEventListener(\"dblclick\", function (e) {\n        self.groupManager.table.options.groupDblClick.call(self.groupManager.table, e, self.getComponent());\n      });\n    }\n\n    if (self.groupManager.table.options.groupContext) {\n      self.element.addEventListener(\"contextmenu\", function (e) {\n        self.groupManager.table.options.groupContext.call(self.groupManager.table, e, self.getComponent());\n      });\n    }\n\n    if (self.groupManager.table.options.groupTap) {\n      tap = false;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        tap = true;\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (tap) {\n          self.groupManager.table.options.groupTap(e, self.getComponent());\n        }\n\n        tap = false;\n      });\n    }\n\n    if (self.groupManager.table.options.groupDblTap) {\n      dblTap = null;\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (dblTap) {\n          clearTimeout(dblTap);\n          dblTap = null;\n          self.groupManager.table.options.groupDblTap(e, self.getComponent());\n        } else {\n          dblTap = setTimeout(function () {\n            clearTimeout(dblTap);\n            dblTap = null;\n          }, 300);\n        }\n      });\n    }\n\n    if (self.groupManager.table.options.groupTapHold) {\n      tapHold = null;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = setTimeout(function () {\n          clearTimeout(tapHold);\n          tapHold = null;\n          tap = false;\n          self.groupManager.table.options.groupTapHold(e, self.getComponent());\n        }, 1000);\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = null;\n      });\n    }\n\n    if (self.groupManager.table.options.groupToggleElement) {\n      toggleElement = self.groupManager.table.options.groupToggleElement == \"arrow\" ? self.arrowElement : self.element;\n      toggleElement.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        self.toggleVisibility();\n      });\n    }\n  };\n\n  Group.prototype._createGroup = function (groupID, level) {\n    var groupKey = level + \"_\" + groupID;\n    var group = new Group(this.groupManager, this, level, groupID, this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n    this.groups[groupKey] = group;\n    this.groupList.push(group);\n  };\n\n  Group.prototype._addRowToGroup = function (row) {\n    var level = this.level + 1;\n\n    if (this.hasSubGroups) {\n      var groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n          groupKey = level + \"_\" + groupID;\n\n      if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n        if (this.groups[groupKey]) {\n          this.groups[groupKey].addRow(row);\n        }\n      } else {\n        if (!this.groups[groupKey]) {\n          this._createGroup(groupID, level);\n        }\n\n        this.groups[groupKey].addRow(row);\n      }\n    }\n  };\n\n  Group.prototype._addRow = function (row) {\n    this.rows.push(row);\n    row.modules.group = this;\n  };\n\n  Group.prototype.insertRow = function (row, to, after) {\n    var data = this.conformRowData({});\n    row.updateData(data);\n    var toIndex = this.rows.indexOf(to);\n\n    if (toIndex > -1) {\n      if (after) {\n        this.rows.splice(toIndex + 1, 0, row);\n      } else {\n        this.rows.splice(toIndex, 0, row);\n      }\n    } else {\n      if (after) {\n        this.rows.push(row);\n      } else {\n        this.rows.unshift(row);\n      }\n    }\n\n    row.modules.group = this;\n    this.generateGroupHeaderContents();\n\n    if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n      this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n    }\n\n    this.groupManager.updateGroupRows(true);\n  };\n\n  Group.prototype.scrollHeader = function (left) {\n    this.arrowElement.style.marginLeft = left;\n    this.groupList.forEach(function (child) {\n      child.scrollHeader(left);\n    });\n  };\n\n  Group.prototype.getRowIndex = function (row) {}; //update row data to match grouping contraints\n\n\n  Group.prototype.conformRowData = function (data) {\n    if (this.field) {\n      data[this.field] = this.key;\n    } else {\n      console.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n    }\n\n    if (this.parent) {\n      data = this.parent.conformRowData(data);\n    }\n\n    return data;\n  };\n\n  Group.prototype.removeRow = function (row) {\n    var index = this.rows.indexOf(row);\n    var el = row.getElement();\n\n    if (index > -1) {\n      this.rows.splice(index, 1);\n    }\n\n    if (!this.groupManager.table.options.groupValues && !this.rows.length) {\n      if (this.parent) {\n        this.parent.removeGroup(this);\n      } else {\n        this.groupManager.removeGroup(this);\n      }\n\n      this.groupManager.updateGroupRows(true);\n    } else {\n      if (el.parentNode) {\n        el.parentNode.removeChild(el);\n      }\n\n      this.generateGroupHeaderContents();\n\n      if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n        this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n      }\n    }\n  };\n\n  Group.prototype.removeGroup = function (group) {\n    var groupKey = group.level + \"_\" + group.key,\n        index;\n\n    if (this.groups[groupKey]) {\n      delete this.groups[groupKey];\n      index = this.groupList.indexOf(group);\n\n      if (index > -1) {\n        this.groupList.splice(index, 1);\n      }\n\n      if (!this.groupList.length) {\n        if (this.parent) {\n          this.parent.removeGroup(this);\n        } else {\n          this.groupManager.removeGroup(this);\n        }\n      }\n    }\n  };\n\n  Group.prototype.getHeadersAndRows = function (noCalc) {\n    var output = [];\n    output.push(this);\n\n    this._visSet();\n\n    if (this.visible) {\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          output = output.concat(group.getHeadersAndRows(noCalc));\n        });\n      } else {\n        if (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n          if (this.calcs.top) {\n            this.calcs.top.detachElement();\n            this.calcs.top.deleteCells();\n          }\n\n          this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n          output.push(this.calcs.top);\n        }\n\n        output = output.concat(this.rows);\n\n        if (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n          if (this.calcs.bottom) {\n            this.calcs.bottom.detachElement();\n            this.calcs.bottom.deleteCells();\n          }\n\n          this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n          output.push(this.calcs.bottom);\n        }\n      }\n    } else {\n      if (!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\") {\n        if (this.groupManager.table.modExists(\"columnCalcs\")) {\n          if (!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n            if (this.calcs.top) {\n              this.calcs.top.detachElement();\n              this.calcs.top.deleteCells();\n            }\n\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\n              this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n              output.push(this.calcs.top);\n            }\n          }\n\n          if (!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n            if (this.calcs.bottom) {\n              this.calcs.bottom.detachElement();\n              this.calcs.bottom.deleteCells();\n            }\n\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\n              this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n              output.push(this.calcs.bottom);\n            }\n          }\n        }\n      }\n    }\n\n    return output;\n  };\n\n  Group.prototype.getData = function (visible, transform) {\n    var self = this,\n        output = [];\n\n    this._visSet();\n\n    if (!visible || visible && this.visible) {\n      this.rows.forEach(function (row) {\n        output.push(row.getData(transform || \"data\"));\n      });\n    }\n\n    return output;\n  }; // Group.prototype.getRows = function(){\n  // \tthis._visSet();\n  // \treturn this.visible ? this.rows : [];\n  // };\n\n\n  Group.prototype.getRowCount = function () {\n    var count = 0;\n\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        count += group.getRowCount();\n      });\n    } else {\n      count = this.rows.length;\n    }\n\n    return count;\n  };\n\n  Group.prototype.toggleVisibility = function () {\n    if (this.visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  Group.prototype.hide = function () {\n    this.visible = false;\n\n    if (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n      this.element.classList.remove(\"tabulator-group-visible\");\n\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          var rows = group.getHeadersAndRows();\n          rows.forEach(function (row) {\n            row.detachElement();\n          });\n        });\n      } else {\n        this.rows.forEach(function (row) {\n          var rowEl = row.getElement();\n          rowEl.parentNode.removeChild(rowEl);\n        });\n      }\n\n      this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n      this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n    } else {\n      this.groupManager.updateGroupRows(true);\n    }\n\n    this.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), false);\n  };\n\n  Group.prototype.show = function () {\n    var self = this;\n    self.visible = true;\n\n    if (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n      this.element.classList.add(\"tabulator-group-visible\");\n      var prev = self.getElement();\n\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          var rows = group.getHeadersAndRows();\n          rows.forEach(function (row) {\n            var rowEl = row.getElement();\n            prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n            row.initialize();\n            prev = rowEl;\n          });\n        });\n      } else {\n        self.rows.forEach(function (row) {\n          var rowEl = row.getElement();\n          prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n          row.initialize();\n          prev = rowEl;\n        });\n      }\n\n      this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n      this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n    } else {\n      this.groupManager.updateGroupRows(true);\n    }\n\n    this.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), true);\n  };\n\n  Group.prototype._visSet = function () {\n    var data = [];\n\n    if (typeof this.visible == \"function\") {\n      this.rows.forEach(function (row) {\n        data.push(row.getData());\n      });\n      this.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n    }\n  };\n\n  Group.prototype.getRowGroup = function (row) {\n    var match = false;\n\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        var result = group.getRowGroup(row);\n\n        if (result) {\n          match = result;\n        }\n      });\n    } else {\n      if (this.rows.find(function (item) {\n        return item === row;\n      })) {\n        match = this;\n      }\n    }\n\n    return match;\n  };\n\n  Group.prototype.getSubGroups = function (component) {\n    var output = [];\n    this.groupList.forEach(function (child) {\n      output.push(component ? child.getComponent() : child);\n    });\n    return output;\n  };\n\n  Group.prototype.getRows = function (compoment) {\n    var output = [];\n    this.rows.forEach(function (row) {\n      output.push(compoment ? row.getComponent() : row);\n    });\n    return output;\n  };\n\n  Group.prototype.generateGroupHeaderContents = function () {\n    var data = [];\n    this.rows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    this.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\n    while (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild);\n    }\n\n    if (typeof this.elementContents === \"string\") {\n      this.element.innerHTML = this.elementContents;\n    } else {\n      this.element.appendChild(this.elementContents);\n    }\n\n    this.element.insertBefore(this.arrowElement, this.element.firstChild);\n  }; ////////////// Standard Row Functions //////////////\n\n\n  Group.prototype.getElement = function () {\n    this.addBindingsd = false;\n\n    this._visSet();\n\n    if (this.visible) {\n      this.element.classList.add(\"tabulator-group-visible\");\n    } else {\n      this.element.classList.remove(\"tabulator-group-visible\");\n    }\n\n    for (var i = 0; i < this.element.childNodes.length; ++i) {\n      this.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n    }\n\n    this.generateGroupHeaderContents(); // this.addBindings();\n\n    return this.element;\n  };\n\n  Group.prototype.detachElement = function () {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }; //normalize the height of elements in the row\n\n\n  Group.prototype.normalizeHeight = function () {\n    this.setHeight(this.element.clientHeight);\n  };\n\n  Group.prototype.initialize = function (force) {\n    if (!this.initialized || force) {\n      this.normalizeHeight();\n      this.initialized = true;\n    }\n  };\n\n  Group.prototype.reinitialize = function () {\n    this.initialized = false;\n    this.height = 0;\n\n    if (Tabulator.prototype.helpers.elVisible(this.element)) {\n      this.initialize(true);\n    }\n  };\n\n  Group.prototype.setHeight = function (height) {\n    if (this.height != height) {\n      this.height = height;\n      this.outerHeight = this.element.offsetHeight;\n    }\n  }; //return rows outer height\n\n\n  Group.prototype.getHeight = function () {\n    return this.outerHeight;\n  };\n\n  Group.prototype.getGroup = function () {\n    return this;\n  };\n\n  Group.prototype.reinitializeHeight = function () {};\n\n  Group.prototype.calcHeight = function () {};\n\n  Group.prototype.setCellHeight = function () {};\n\n  Group.prototype.clearCellHeight = function () {}; //////////////// Object Generation /////////////////\n\n\n  Group.prototype.getComponent = function () {\n    return new GroupComponent(this);\n  }; //////////////////////////////////////////////////\n  ////////////// Group Row Extension ///////////////\n  //////////////////////////////////////////////////\n\n\n  var GroupRows = function GroupRows(table) {\n    this.table = table; //hold Tabulator object\n\n    this.groupIDLookups = false; //enable table grouping and set field to group by\n\n    this.startOpen = [function () {\n      return false;\n    }]; //starting state of group\n\n    this.headerGenerator = [function () {\n      return \"\";\n    }];\n    this.groupList = []; //ordered list of groups\n\n    this.allowedValues = false;\n    this.groups = {}; //hold row groups\n\n    this.displayIndex = 0; //index in display pipeline\n  }; //initialize group configuration\n\n\n  GroupRows.prototype.initialize = function () {\n    var self = this,\n        groupBy = self.table.options.groupBy,\n        startOpen = self.table.options.groupStartOpen,\n        groupHeader = self.table.options.groupHeader;\n    this.allowedValues = self.table.options.groupValues;\n\n    if (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\n      console.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n    }\n\n    self.headerGenerator = [function () {\n      return \"\";\n    }];\n    this.startOpen = [function () {\n      return false;\n    }]; //starting state of group\n\n    self.table.modules.localize.bind(\"groups|item\", function (langValue, lang) {\n      self.headerGenerator[0] = function (value, count, data) {\n        //header layout function\n        return (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + (count === 1 ? langValue : lang.groups.items) + \")</span>\";\n      };\n    });\n    this.groupIDLookups = [];\n\n    if (Array.isArray(groupBy) || groupBy) {\n      if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\") {\n        this.table.modules.columnCalcs.removeCalcs();\n      }\n    } else {\n      if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\") {\n        var cols = this.table.columnManager.getRealColumns();\n        cols.forEach(function (col) {\n          if (col.definition.topCalc) {\n            self.table.modules.columnCalcs.initializeTopRow();\n          }\n\n          if (col.definition.bottomCalc) {\n            self.table.modules.columnCalcs.initializeBottomRow();\n          }\n        });\n      }\n    }\n\n    if (!Array.isArray(groupBy)) {\n      groupBy = [groupBy];\n    }\n\n    groupBy.forEach(function (group, i) {\n      var lookupFunc, column;\n\n      if (typeof group == \"function\") {\n        lookupFunc = group;\n      } else {\n        column = self.table.columnManager.getColumnByField(group);\n\n        if (column) {\n          lookupFunc = function lookupFunc(data) {\n            return column.getFieldValue(data);\n          };\n        } else {\n          lookupFunc = function lookupFunc(data) {\n            return data[group];\n          };\n        }\n      }\n\n      self.groupIDLookups.push({\n        field: typeof group === \"function\" ? false : group,\n        func: lookupFunc,\n        values: self.allowedValues ? self.allowedValues[i] : false\n      });\n    });\n\n    if (startOpen) {\n      if (!Array.isArray(startOpen)) {\n        startOpen = [startOpen];\n      }\n\n      startOpen.forEach(function (level) {\n        level = typeof level == \"function\" ? level : function () {\n          return true;\n        };\n      });\n      self.startOpen = startOpen;\n    }\n\n    if (groupHeader) {\n      self.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n    }\n\n    this.initialized = true;\n  };\n\n  GroupRows.prototype.setDisplayIndex = function (index) {\n    this.displayIndex = index;\n  };\n\n  GroupRows.prototype.getDisplayIndex = function () {\n    return this.displayIndex;\n  }; //return appropriate rows with group headers\n\n\n  GroupRows.prototype.getRows = function (rows) {\n    if (this.groupIDLookups.length) {\n      this.table.options.dataGrouping.call(this.table);\n      this.generateGroups(rows);\n\n      if (this.table.options.dataGrouped) {\n        this.table.options.dataGrouped.call(this.table, this.getGroups(true));\n      }\n\n      return this.updateGroupRows();\n    } else {\n      return rows.slice(0);\n    }\n  };\n\n  GroupRows.prototype.getGroups = function (compoment) {\n    var groupComponents = [];\n    this.groupList.forEach(function (group) {\n      groupComponents.push(compoment ? group.getComponent() : group);\n    });\n    return groupComponents;\n  };\n\n  GroupRows.prototype.getChildGroups = function (group) {\n    var _this57 = this;\n\n    var groupComponents = [];\n\n    if (!group) {\n      group = this;\n    }\n\n    group.groupList.forEach(function (child) {\n      if (child.groupList.length) {\n        groupComponents = groupComponents.concat(_this57.getChildGroups(child));\n      } else {\n        groupComponents.push(child);\n      }\n    });\n    return groupComponents;\n  };\n\n  GroupRows.prototype.wipe = function () {\n    this.groupList.forEach(function (group) {\n      group.wipe();\n    });\n  };\n\n  GroupRows.prototype.pullGroupListData = function (groupList) {\n    var self = this;\n    var groupListData = [];\n    groupList.forEach(function (group) {\n      var groupHeader = {};\n      groupHeader.level = 0;\n      groupHeader.rowCount = 0;\n      groupHeader.headerContent = \"\";\n      var childData = [];\n\n      if (group.hasSubGroups) {\n        childData = self.pullGroupListData(group.groupList);\n        groupHeader.level = group.level;\n        groupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\n        groupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n        groupListData.push(groupHeader);\n        groupListData = groupListData.concat(childData);\n      } else {\n        groupHeader.level = group.level;\n        groupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n        groupHeader.rowCount = group.getRows().length;\n        groupListData.push(groupHeader);\n        group.getRows().forEach(function (row) {\n          groupListData.push(row.getData(\"data\"));\n        });\n      }\n    });\n    return groupListData;\n  };\n\n  GroupRows.prototype.getGroupedData = function () {\n    return this.pullGroupListData(this.groupList);\n  };\n\n  GroupRows.prototype.getRowGroup = function (row) {\n    var match = false;\n    this.groupList.forEach(function (group) {\n      var result = group.getRowGroup(row);\n\n      if (result) {\n        match = result;\n      }\n    });\n    return match;\n  };\n\n  GroupRows.prototype.countGroups = function () {\n    return this.groupList.length;\n  };\n\n  GroupRows.prototype.generateGroups = function (rows) {\n    var self = this,\n        oldGroups = self.groups;\n    self.groups = {};\n    self.groupList = [];\n\n    if (this.allowedValues && this.allowedValues[0]) {\n      this.allowedValues[0].forEach(function (value) {\n        self.createGroup(value, 0, oldGroups);\n      });\n      rows.forEach(function (row) {\n        self.assignRowToExistingGroup(row, oldGroups);\n      });\n    } else {\n      rows.forEach(function (row) {\n        self.assignRowToGroup(row, oldGroups);\n      });\n    }\n  };\n\n  GroupRows.prototype.createGroup = function (groupID, level, oldGroups) {\n    var groupKey = level + \"_\" + groupID,\n        group;\n    oldGroups = oldGroups || [];\n    group = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n    this.groups[groupKey] = group;\n    this.groupList.push(group);\n  }; // GroupRows.prototype.assignRowToGroup = function(row, oldGroups){\n  // \tvar groupID = this.groupIDLookups[0].func(row.getData()),\n  // \tgroupKey = \"0_\" + groupID;\n  // \tif(!this.groups[groupKey]){\n  // \t\tthis.createGroup(groupID, 0, oldGroups);\n  // \t}\n  // \tthis.groups[groupKey].addRow(row);\n  // };\n\n\n  GroupRows.prototype.assignRowToExistingGroup = function (row, oldGroups) {\n    var groupID = this.groupIDLookups[0].func(row.getData()),\n        groupKey = \"0_\" + groupID;\n\n    if (this.groups[groupKey]) {\n      this.groups[groupKey].addRow(row);\n    }\n  };\n\n  GroupRows.prototype.assignRowToGroup = function (row, oldGroups) {\n    var groupID = this.groupIDLookups[0].func(row.getData()),\n        newGroupNeeded = !this.groups[\"0_\" + groupID];\n\n    if (newGroupNeeded) {\n      this.createGroup(groupID, 0, oldGroups);\n    }\n\n    this.groups[\"0_\" + groupID].addRow(row);\n    return !newGroupNeeded;\n  };\n\n  GroupRows.prototype.updateGroupRows = function (force) {\n    var self = this,\n        output = [],\n        oldRowCount;\n    self.groupList.forEach(function (group) {\n      output = output.concat(group.getHeadersAndRows());\n    }); //force update of table display\n\n    if (force) {\n      var displayIndex = self.table.rowManager.setDisplayRows(output, this.getDisplayIndex());\n\n      if (displayIndex !== true) {\n        this.setDisplayIndex(displayIndex);\n      }\n\n      self.table.rowManager.refreshActiveData(\"group\", true, true);\n    }\n\n    return output;\n  };\n\n  GroupRows.prototype.scrollHeaders = function (left) {\n    left = left + \"px\";\n    this.groupList.forEach(function (group) {\n      group.scrollHeader(left);\n    });\n  };\n\n  GroupRows.prototype.removeGroup = function (group) {\n    var groupKey = group.level + \"_\" + group.key,\n        index;\n\n    if (this.groups[groupKey]) {\n      delete this.groups[groupKey];\n      index = this.groupList.indexOf(group);\n\n      if (index > -1) {\n        this.groupList.splice(index, 1);\n      }\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"groupRows\", GroupRows);\n\n  var History = function History(table) {\n    this.table = table; //hold Tabulator object\n\n    this.history = [];\n    this.index = -1;\n  };\n\n  History.prototype.clear = function () {\n    this.history = [];\n    this.index = -1;\n  };\n\n  History.prototype.action = function (type, component, data) {\n    this.history = this.history.slice(0, this.index + 1);\n    this.history.push({\n      type: type,\n      component: component,\n      data: data\n    });\n    this.index++;\n  };\n\n  History.prototype.getHistoryUndoSize = function () {\n    return this.index + 1;\n  };\n\n  History.prototype.getHistoryRedoSize = function () {\n    return this.history.length - (this.index + 1);\n  };\n\n  History.prototype.undo = function () {\n    if (this.index > -1) {\n      var action = this.history[this.index];\n      this.undoers[action.type].call(this, action);\n      this.index--;\n      this.table.options.historyUndo.call(this.table, action.type, action.component.getComponent(), action.data);\n      return true;\n    } else {\n      console.warn(\"History Undo Error - No more history to undo\");\n      return false;\n    }\n  };\n\n  History.prototype.redo = function () {\n    if (this.history.length - 1 > this.index) {\n      this.index++;\n      var action = this.history[this.index];\n      this.redoers[action.type].call(this, action);\n      this.table.options.historyRedo.call(this.table, action.type, action.component.getComponent(), action.data);\n      return true;\n    } else {\n      console.warn(\"History Redo Error - No more history to redo\");\n      return false;\n    }\n  };\n\n  History.prototype.undoers = {\n    cellEdit: function cellEdit(action) {\n      action.component.setValueProcessData(action.data.oldValue);\n    },\n    rowAdd: function rowAdd(action) {\n      action.component.deleteActual();\n    },\n    rowDelete: function rowDelete(action) {\n      var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n      if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n        this.table.modules.groupRows.updateGroupRows(true);\n      }\n\n      this._rebindRow(action.component, newRow);\n    },\n    rowMove: function rowMove(action) {\n      this.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n      this.table.rowManager.redraw();\n    }\n  };\n  History.prototype.redoers = {\n    cellEdit: function cellEdit(action) {\n      action.component.setValueProcessData(action.data.newValue);\n    },\n    rowAdd: function rowAdd(action) {\n      var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n      if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n        this.table.modules.groupRows.updateGroupRows(true);\n      }\n\n      this._rebindRow(action.component, newRow);\n    },\n    rowDelete: function rowDelete(action) {\n      action.component.deleteActual();\n    },\n    rowMove: function rowMove(action) {\n      this.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n      this.table.rowManager.redraw();\n    }\n  }; //rebind rows to new element after deletion\n\n  History.prototype._rebindRow = function (oldRow, newRow) {\n    this.history.forEach(function (action) {\n      if (action.component instanceof Row) {\n        if (action.component === oldRow) {\n          action.component = newRow;\n        }\n      } else if (action.component instanceof Cell) {\n        if (action.component.row === oldRow) {\n          var field = action.component.column.getField();\n\n          if (field) {\n            action.component = newRow.getCell(field);\n          }\n        }\n      }\n    });\n  };\n\n  Tabulator.prototype.registerModule(\"history\", History);\n\n  var HtmlTableImport = function HtmlTableImport(table) {\n    this.table = table; //hold Tabulator object\n\n    this.fieldIndex = [];\n    this.hasIndex = false;\n  };\n\n  HtmlTableImport.prototype.parseTable = function () {\n    var self = this,\n        element = self.table.element,\n        options = self.table.options,\n        columns = options.columns,\n        headers = element.getElementsByTagName(\"th\"),\n        rows = element.getElementsByTagName(\"tbody\")[0],\n        data = [],\n        newTable;\n    self.hasIndex = false;\n    self.table.options.htmlImporting.call(this.table);\n    rows = rows ? rows.getElementsByTagName(\"tr\") : []; //check for tablator inline options\n\n    self._extractOptions(element, options);\n\n    if (headers.length) {\n      self._extractHeaders(headers, rows);\n    } else {\n      self._generateBlankHeaders(headers, rows);\n    } //iterate through table rows and build data set\n\n\n    for (var index = 0; index < rows.length; index++) {\n      var row = rows[index],\n          cells = row.getElementsByTagName(\"td\"),\n          item = {}; //create index if the dont exist in table\n\n      if (!self.hasIndex) {\n        item[options.index] = index;\n      }\n\n      for (var i = 0; i < cells.length; i++) {\n        var cell = cells[i];\n\n        if (typeof this.fieldIndex[i] !== \"undefined\") {\n          item[this.fieldIndex[i]] = cell.innerHTML;\n        }\n      } //add row data to item\n\n\n      data.push(item);\n    } //create new element\n\n\n    var newElement = document.createElement(\"div\"); //transfer attributes to new element\n\n    var attributes = element.attributes; // loop through attributes and apply them on div\n\n    for (var i in attributes) {\n      if (_typeof(attributes[i]) == \"object\") {\n        newElement.setAttribute(attributes[i].name, attributes[i].value);\n      }\n    } // replace table with div element\n\n\n    element.parentNode.replaceChild(newElement, element);\n    options.data = data;\n    self.table.options.htmlImported.call(this.table); // // newElement.tabulator(options);\n\n    this.table.element = newElement;\n  }; //extract tabulator attribute options\n\n\n  HtmlTableImport.prototype._extractOptions = function (element, options, defaultOptions) {\n    var attributes = element.attributes;\n    var optionsArr = defaultOptions ? Object.assign([], defaultOptions) : Object.keys(options);\n    var optionsList = {};\n    optionsArr.forEach(function (item) {\n      optionsList[item.toLowerCase()] = item;\n    });\n\n    for (var index in attributes) {\n      var attrib = attributes[index];\n      var name;\n\n      if (attrib && (typeof attrib === 'undefined' ? 'undefined' : _typeof(attrib)) == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0) {\n        name = attrib.name.replace(\"tabulator-\", \"\");\n\n        if (typeof optionsList[name] !== \"undefined\") {\n          options[optionsList[name]] = this._attribValue(attrib.value);\n        }\n      }\n    }\n  }; //get value of attribute\n\n\n  HtmlTableImport.prototype._attribValue = function (value) {\n    if (value === \"true\") {\n      return true;\n    }\n\n    if (value === \"false\") {\n      return false;\n    }\n\n    return value;\n  }; //find column if it has already been defined\n\n\n  HtmlTableImport.prototype._findCol = function (title) {\n    var match = this.table.options.columns.find(function (column) {\n      return column.title === title;\n    });\n    return match || false;\n  }; //extract column from headers\n\n\n  HtmlTableImport.prototype._extractHeaders = function (headers, rows) {\n    for (var index = 0; index < headers.length; index++) {\n      var header = headers[index],\n          exists = false,\n          col = this._findCol(header.textContent),\n          width,\n          attributes;\n\n      if (col) {\n        exists = true;\n      } else {\n        col = {\n          title: header.textContent.trim()\n        };\n      }\n\n      if (!col.field) {\n        col.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n      }\n\n      width = header.getAttribute(\"width\");\n\n      if (width && !col.width) {\n        col.width = width;\n      } //check for tablator inline options\n\n\n      attributes = header.attributes; // //check for tablator inline options\n\n      this._extractOptions(header, col, Column.prototype.defaultOptionList);\n\n      this.fieldIndex[index] = col.field;\n\n      if (col.field == this.table.options.index) {\n        this.hasIndex = true;\n      }\n\n      if (!exists) {\n        this.table.options.columns.push(col);\n      }\n    }\n  }; //generate blank headers\n\n\n  HtmlTableImport.prototype._generateBlankHeaders = function (headers, rows) {\n    for (var index = 0; index < headers.length; index++) {\n      var header = headers[index],\n          col = {\n        title: \"\",\n        field: \"col\" + index\n      };\n      this.fieldIndex[index] = col.field;\n      var width = header.getAttribute(\"width\");\n\n      if (width) {\n        col.width = width;\n      }\n\n      this.table.options.columns.push(col);\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"htmlTableImport\", HtmlTableImport);\n\n  var Keybindings = function Keybindings(table) {\n    this.table = table; //hold Tabulator object\n\n    this.watchKeys = null;\n    this.pressedKeys = null;\n    this.keyupBinding = false;\n    this.keydownBinding = false;\n  };\n\n  Keybindings.prototype.initialize = function () {\n    var bindings = this.table.options.keybindings,\n        mergedBindings = {};\n    this.watchKeys = {};\n    this.pressedKeys = [];\n\n    if (bindings !== false) {\n      for (var key in this.bindings) {\n        mergedBindings[key] = this.bindings[key];\n      }\n\n      if (Object.keys(bindings).length) {\n        for (var _key in bindings) {\n          mergedBindings[_key] = bindings[_key];\n        }\n      }\n\n      this.mapBindings(mergedBindings);\n      this.bindEvents();\n    }\n  };\n\n  Keybindings.prototype.mapBindings = function (bindings) {\n    var _this58 = this;\n\n    var self = this;\n\n    var _loop2 = function _loop2(key) {\n      if (_this58.actions[key]) {\n        if (bindings[key]) {\n          if (_typeof(bindings[key]) !== \"object\") {\n            bindings[key] = [bindings[key]];\n          }\n\n          bindings[key].forEach(function (binding) {\n            self.mapBinding(key, binding);\n          });\n        }\n      } else {\n        console.warn(\"Key Binding Error - no such action:\", key);\n      }\n    };\n\n    for (var key in bindings) {\n      _loop2(key);\n    }\n  };\n\n  Keybindings.prototype.mapBinding = function (action, symbolsList) {\n    var self = this;\n    var binding = {\n      action: this.actions[action],\n      keys: [],\n      ctrl: false,\n      shift: false,\n      meta: false\n    };\n    var symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n    symbols.forEach(function (symbol) {\n      switch (symbol) {\n        case \"ctrl\":\n          binding.ctrl = true;\n          break;\n\n        case \"shift\":\n          binding.shift = true;\n          break;\n\n        case \"meta\":\n          binding.meta = true;\n          break;\n\n        default:\n          symbol = parseInt(symbol);\n          binding.keys.push(symbol);\n\n          if (!self.watchKeys[symbol]) {\n            self.watchKeys[symbol] = [];\n          }\n\n          self.watchKeys[symbol].push(binding);\n      }\n    });\n  };\n\n  Keybindings.prototype.bindEvents = function () {\n    var self = this;\n\n    this.keyupBinding = function (e) {\n      var code = e.keyCode;\n      var bindings = self.watchKeys[code];\n\n      if (bindings) {\n        self.pressedKeys.push(code);\n        bindings.forEach(function (binding) {\n          self.checkBinding(e, binding);\n        });\n      }\n    };\n\n    this.keydownBinding = function (e) {\n      var code = e.keyCode;\n      var bindings = self.watchKeys[code];\n\n      if (bindings) {\n        var index = self.pressedKeys.indexOf(code);\n\n        if (index > -1) {\n          self.pressedKeys.splice(index, 1);\n        }\n      }\n    };\n\n    this.table.element.addEventListener(\"keydown\", this.keyupBinding);\n    this.table.element.addEventListener(\"keyup\", this.keydownBinding);\n  };\n\n  Keybindings.prototype.clearBindings = function () {\n    if (this.keyupBinding) {\n      this.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n    }\n\n    if (this.keydownBinding) {\n      this.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n    }\n  };\n\n  Keybindings.prototype.checkBinding = function (e, binding) {\n    var self = this,\n        match = true;\n\n    if (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\n      binding.keys.forEach(function (key) {\n        var index = self.pressedKeys.indexOf(key);\n\n        if (index == -1) {\n          match = false;\n        }\n      });\n\n      if (match) {\n        binding.action.call(self, e);\n      }\n\n      return true;\n    }\n\n    return false;\n  }; //default bindings\n\n\n  Keybindings.prototype.bindings = {\n    navPrev: \"shift + 9\",\n    navNext: 9,\n    navUp: 38,\n    navDown: 40,\n    scrollPageUp: 33,\n    scrollPageDown: 34,\n    scrollToStart: 36,\n    scrollToEnd: 35,\n    undo: \"ctrl + 90\",\n    redo: \"ctrl + 89\",\n    copyToClipboard: \"ctrl + 67\"\n  }; //default actions\n\n  Keybindings.prototype.actions = {\n    keyBlock: function keyBlock(e) {\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    scrollPageUp: function scrollPageUp(e) {\n      var rowManager = this.table.rowManager,\n          newPos = rowManager.scrollTop - rowManager.height,\n          scrollMax = rowManager.element.scrollHeight;\n      e.preventDefault();\n\n      if (rowManager.displayRowsCount) {\n        if (newPos >= 0) {\n          rowManager.element.scrollTop = newPos;\n        } else {\n          rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n        }\n      }\n\n      this.table.element.focus();\n    },\n    scrollPageDown: function scrollPageDown(e) {\n      var rowManager = this.table.rowManager,\n          newPos = rowManager.scrollTop + rowManager.height,\n          scrollMax = rowManager.element.scrollHeight;\n      e.preventDefault();\n\n      if (rowManager.displayRowsCount) {\n        if (newPos <= scrollMax) {\n          rowManager.element.scrollTop = newPos;\n        } else {\n          rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n        }\n      }\n\n      this.table.element.focus();\n    },\n    scrollToStart: function scrollToStart(e) {\n      var rowManager = this.table.rowManager;\n      e.preventDefault();\n\n      if (rowManager.displayRowsCount) {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n      }\n\n      this.table.element.focus();\n    },\n    scrollToEnd: function scrollToEnd(e) {\n      var rowManager = this.table.rowManager;\n      e.preventDefault();\n\n      if (rowManager.displayRowsCount) {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n      }\n\n      this.table.element.focus();\n    },\n    navPrev: function navPrev(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().prev();\n        }\n      }\n    },\n    navNext: function navNext(e) {\n      var cell = false;\n      var newRow = this.table.options.tabEndNewRow;\n      var nav;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          nav = cell.nav();\n\n          if (!nav.next()) {\n            if (newRow) {\n              cell.getElement().firstChild.blur();\n\n              if (newRow === true) {\n                newRow = this.table.addRow({});\n              } else {\n                if (typeof newRow == \"function\") {\n                  newRow = this.table.addRow(newRow(cell.row.getComponent()));\n                } else {\n                  newRow = this.table.addRow(newRow);\n                }\n              }\n\n              newRow.then(function () {\n                setTimeout(function () {\n                  nav.next();\n                });\n              });\n            }\n          }\n        }\n      }\n    },\n    navLeft: function navLeft(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().left();\n        }\n      }\n    },\n    navRight: function navRight(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().right();\n        }\n      }\n    },\n    navUp: function navUp(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().up();\n        }\n      }\n    },\n    navDown: function navDown(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().down();\n        }\n      }\n    },\n    undo: function undo(e) {\n      var cell = false;\n\n      if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (!cell) {\n          e.preventDefault();\n          this.table.modules.history.undo();\n        }\n      }\n    },\n    redo: function redo(e) {\n      var cell = false;\n\n      if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (!cell) {\n          e.preventDefault();\n          this.table.modules.history.redo();\n        }\n      }\n    },\n    copyToClipboard: function copyToClipboard(e) {\n      if (!this.table.modules.edit.currentCell) {\n        if (this.table.modExists(\"clipboard\", true)) {\n          this.table.modules.clipboard.copy(false, true);\n        }\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"keybindings\", Keybindings);\n\n  var Menu = function Menu(table) {\n    this.table = table; //hold Tabulator object\n\n    this.menuEl = false;\n    this.blurEvent = this.hideMenu.bind(this);\n  };\n\n  Menu.prototype.initializeColumnHeader = function (column) {\n    var _this59 = this;\n\n    var headerMenuEl;\n\n    if (column.definition.headerContextMenu) {\n      column.getElement().addEventListener(\"contextmenu\", function (e) {\n        var menu = typeof column.definition.headerContextMenu == \"function\" ? column.definition.headerContextMenu(column.getComponent()) : column.definition.headerContextMenu;\n        e.preventDefault();\n\n        _this59.loadMenu(e, column, menu);\n      });\n    }\n\n    if (column.definition.headerMenu) {\n      headerMenuEl = document.createElement(\"span\");\n      headerMenuEl.classList.add(\"tabulator-header-menu-button\");\n      headerMenuEl.innerHTML = \"&vellip;\";\n      headerMenuEl.addEventListener(\"click\", function (e) {\n        var menu = typeof column.definition.headerMenu == \"function\" ? column.definition.headerMenu(column.getComponent()) : column.definition.headerMenu;\n        e.stopPropagation();\n        e.preventDefault();\n\n        _this59.loadMenu(e, column, menu);\n      });\n      column.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n    }\n  };\n\n  Menu.prototype.initializeCell = function (cell) {\n    var _this60 = this;\n\n    cell.getElement().addEventListener(\"contextmenu\", function (e) {\n      var menu = typeof cell.column.definition.contextMenu == \"function\" ? cell.column.definition.contextMenu(cell.getComponent()) : cell.column.definition.contextMenu;\n      e.preventDefault();\n\n      _this60.loadMenu(e, cell, menu);\n    });\n  };\n\n  Menu.prototype.initializeRow = function (row) {\n    var _this61 = this;\n\n    row.getElement().addEventListener(\"contextmenu\", function (e) {\n      var menu = typeof _this61.table.options.rowContextMenu == \"function\" ? _this61.table.options.rowContextMenu(row.getComponent()) : _this61.table.options.rowContextMenu;\n      e.preventDefault();\n\n      _this61.loadMenu(e, row, menu);\n    });\n  };\n\n  Menu.prototype.loadMenu = function (e, component, menu) {\n    var _this62 = this;\n\n    var docHeight = Math.max(document.body.offsetHeight, window.innerHeight); //abort if no menu set\n\n    if (!menu || !menu.length) {\n      return;\n    }\n\n    this.hideMenu();\n    this.menuEl = document.createElement(\"div\");\n    this.menuEl.classList.add(\"tabulator-menu\");\n    menu.forEach(function (item) {\n      var itemEl = document.createElement(\"div\");\n      var label = item.label;\n      var disabled = item.disabled;\n\n      if (item.separator) {\n        itemEl.classList.add(\"tabulator-menu-separator\");\n      } else {\n        itemEl.classList.add(\"tabulator-menu-item\");\n\n        if (typeof label == \"function\") {\n          label = label(component.getComponent());\n        }\n\n        if (label instanceof Node) {\n          itemEl.appendChild(label);\n        } else {\n          itemEl.innerHTML = label;\n        }\n\n        if (typeof disabled == \"function\") {\n          disabled = disabled(component.getComponent());\n        }\n\n        if (disabled) {\n          itemEl.classList.add(\"tabulator-menu-item-disabled\");\n          itemEl.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n          });\n        } else {\n          itemEl.addEventListener(\"click\", function (e) {\n            _this62.hideMenu();\n\n            item.action(e, component.getComponent());\n          });\n        }\n      }\n\n      _this62.menuEl.appendChild(itemEl);\n    });\n    this.menuEl.style.top = e.pageY + \"px\";\n    this.menuEl.style.left = e.pageX + \"px\";\n    document.body.addEventListener(\"click\", this.blurEvent);\n    this.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n    setTimeout(function () {\n      document.body.addEventListener(\"contextmenu\", _this62.blurEvent);\n    }, 100);\n    document.body.appendChild(this.menuEl); //move menu to start on right edge if it is too close to the edge of the screen\n\n    if (e.pageX + this.menuEl.offsetWidth >= document.body.offsetWidth) {\n      this.menuEl.style.left = \"\";\n      this.menuEl.style.right = document.body.offsetWidth - e.pageX + \"px\";\n    } //move menu to start on bottom edge if it is too close to the edge of the screen\n\n\n    if (e.pageY + this.menuEl.offsetHeight >= docHeight) {\n      this.menuEl.style.top = \"\";\n      this.menuEl.style.bottom = docHeight - e.pageY + \"px\";\n    }\n  };\n\n  Menu.prototype.hideMenu = function () {\n    if (this.menuEl.parentNode) {\n      this.menuEl.parentNode.removeChild(this.menuEl);\n    }\n\n    if (this.blurEvent) {\n      document.body.removeEventListener(\"click\", this.blurEvent);\n      document.body.removeEventListener(\"contextmenu\", this.blurEvent);\n      this.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n    }\n  }; //default accessors\n\n\n  Menu.prototype.menus = {};\n  Tabulator.prototype.registerModule(\"menu\", Menu);\n\n  var MoveColumns = function MoveColumns(table) {\n    this.table = table; //hold Tabulator object\n\n    this.placeholderElement = this.createPlaceholderElement();\n    this.hoverElement = false; //floating column header element\n\n    this.checkTimeout = false; //click check timeout holder\n\n    this.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\n    this.moving = false; //currently moving column\n\n    this.toCol = false; //destination column\n\n    this.toColAfter = false; //position of moving column relative to the desitnation column\n\n    this.startX = 0; //starting position within header element\n\n    this.autoScrollMargin = 40; //auto scroll on edge when within margin\n\n    this.autoScrollStep = 5; //auto scroll distance in pixels\n\n    this.autoScrollTimeout = false; //auto scroll timeout\n\n    this.touchMove = false;\n    this.moveHover = this.moveHover.bind(this);\n    this.endMove = this.endMove.bind(this);\n  };\n\n  MoveColumns.prototype.createPlaceholderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col\");\n    el.classList.add(\"tabulator-col-placeholder\");\n    return el;\n  };\n\n  MoveColumns.prototype.initializeColumn = function (column) {\n    var self = this,\n        config = {},\n        colEl;\n\n    if (!column.modules.frozen) {\n      colEl = column.getElement();\n\n      config.mousemove = function (e) {\n        if (column.parent === self.moving.parent) {\n          if ((self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(colEl).left + self.table.columnManager.element.scrollLeft > column.getWidth() / 2) {\n            if (self.toCol !== column || !self.toColAfter) {\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n              self.moveColumn(column, true);\n            }\n          } else {\n            if (self.toCol !== column || self.toColAfter) {\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl);\n              self.moveColumn(column, false);\n            }\n          }\n        }\n      }.bind(self);\n\n      colEl.addEventListener(\"mousedown\", function (e) {\n        self.touchMove = false;\n\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, column);\n          }, self.checkPeriod);\n        }\n      });\n      colEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      self.bindTouchEvents(column);\n    }\n\n    column.modules.moveColumn = config;\n  };\n\n  MoveColumns.prototype.bindTouchEvents = function (column) {\n    var self = this,\n        colEl = column.getElement(),\n        startXMove = false,\n        //shifting center position of the cell\n    dir = false,\n        currentCol,\n        nextCol,\n        prevCol,\n        nextColWidth,\n        prevColWidth,\n        nextColWidthLast,\n        prevColWidthLast;\n    colEl.addEventListener(\"touchstart\", function (e) {\n      self.checkTimeout = setTimeout(function () {\n        self.touchMove = true;\n        currentCol = column;\n        nextCol = column.nextColumn();\n        nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n        prevCol = column.prevColumn();\n        prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n        nextColWidthLast = 0;\n        prevColWidthLast = 0;\n        startXMove = false;\n        self.startMove(e, column);\n      }, self.checkPeriod);\n    }, {\n      passive: true\n    });\n    colEl.addEventListener(\"touchmove\", function (e) {\n      var halfCol, diff, moveToCol;\n\n      if (self.moving) {\n        self.moveHover(e);\n\n        if (!startXMove) {\n          startXMove = e.touches[0].pageX;\n        }\n\n        diff = e.touches[0].pageX - startXMove;\n\n        if (diff > 0) {\n          if (nextCol && diff - nextColWidthLast > nextColWidth) {\n            moveToCol = nextCol;\n\n            if (moveToCol !== column) {\n              startXMove = e.touches[0].pageX;\n              moveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement().nextSibling);\n              self.moveColumn(moveToCol, true);\n            }\n          }\n        } else {\n          if (prevCol && -diff - prevColWidthLast > prevColWidth) {\n            moveToCol = prevCol;\n\n            if (moveToCol !== column) {\n              startXMove = e.touches[0].pageX;\n              moveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement());\n              self.moveColumn(moveToCol, false);\n            }\n          }\n        }\n\n        if (moveToCol) {\n          currentCol = moveToCol;\n          nextCol = moveToCol.nextColumn();\n          nextColWidthLast = nextColWidth;\n          nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n          prevCol = moveToCol.prevColumn();\n          prevColWidthLast = prevColWidth;\n          prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n        }\n      }\n    }, {\n      passive: true\n    });\n    colEl.addEventListener(\"touchend\", function (e) {\n      if (self.checkTimeout) {\n        clearTimeout(self.checkTimeout);\n      }\n\n      if (self.moving) {\n        self.endMove(e);\n      }\n    });\n  };\n\n  MoveColumns.prototype.startMove = function (e, column) {\n    var element = column.getElement();\n    this.moving = column;\n    this.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(element).left;\n    this.table.element.classList.add(\"tabulator-block-select\"); //create placeholder\n\n    this.placeholderElement.style.width = column.getWidth() + \"px\";\n    this.placeholderElement.style.height = column.getHeight() + \"px\";\n    element.parentNode.insertBefore(this.placeholderElement, element);\n    element.parentNode.removeChild(element); //create hover element\n\n    this.hoverElement = element.cloneNode(true);\n    this.hoverElement.classList.add(\"tabulator-moving\");\n    this.table.columnManager.getElement().appendChild(this.hoverElement);\n    this.hoverElement.style.left = \"0\";\n    this.hoverElement.style.bottom = \"0\";\n\n    if (!this.touchMove) {\n      this._bindMouseMove();\n\n      document.body.addEventListener(\"mousemove\", this.moveHover);\n      document.body.addEventListener(\"mouseup\", this.endMove);\n    }\n\n    this.moveHover(e);\n  };\n\n  MoveColumns.prototype._bindMouseMove = function () {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.modules.moveColumn.mousemove) {\n        column.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n      }\n    });\n  };\n\n  MoveColumns.prototype._unbindMouseMove = function () {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.modules.moveColumn.mousemove) {\n        column.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n      }\n    });\n  };\n\n  MoveColumns.prototype.moveColumn = function (column, after) {\n    var movingCells = this.moving.getCells();\n    this.toCol = column;\n    this.toColAfter = after;\n\n    if (after) {\n      column.getCells().forEach(function (cell, i) {\n        var cellEl = cell.getElement();\n        cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n      });\n    } else {\n      column.getCells().forEach(function (cell, i) {\n        var cellEl = cell.getElement();\n        cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n      });\n    }\n  };\n\n  MoveColumns.prototype.endMove = function (e) {\n    if (e.which === 1 || this.touchMove) {\n      this._unbindMouseMove();\n\n      this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n      this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n      this.hoverElement.parentNode.removeChild(this.hoverElement);\n      this.table.element.classList.remove(\"tabulator-block-select\");\n\n      if (this.toCol) {\n        this.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n      }\n\n      this.moving = false;\n      this.toCol = false;\n      this.toColAfter = false;\n\n      if (!this.touchMove) {\n        document.body.removeEventListener(\"mousemove\", this.moveHover);\n        document.body.removeEventListener(\"mouseup\", this.endMove);\n      }\n    }\n  };\n\n  MoveColumns.prototype.moveHover = function (e) {\n    var self = this,\n        columnHolder = self.table.columnManager.getElement(),\n        scrollLeft = columnHolder.scrollLeft,\n        xPos = (self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(columnHolder).left + scrollLeft,\n        scrollPos;\n    self.hoverElement.style.left = xPos - self.startX + \"px\";\n\n    if (xPos - scrollLeft < self.autoScrollMargin) {\n      if (!self.autoScrollTimeout) {\n        self.autoScrollTimeout = setTimeout(function () {\n          scrollPos = Math.max(0, scrollLeft - 5);\n          self.table.rowManager.getElement().scrollLeft = scrollPos;\n          self.autoScrollTimeout = false;\n        }, 1);\n      }\n    }\n\n    if (scrollLeft + columnHolder.clientWidth - xPos < self.autoScrollMargin) {\n      if (!self.autoScrollTimeout) {\n        self.autoScrollTimeout = setTimeout(function () {\n          scrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5);\n          self.table.rowManager.getElement().scrollLeft = scrollPos;\n          self.autoScrollTimeout = false;\n        }, 1);\n      }\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"moveColumn\", MoveColumns);\n\n  var MoveRows = function MoveRows(table) {\n    this.table = table; //hold Tabulator object\n\n    this.placeholderElement = this.createPlaceholderElement();\n    this.hoverElement = false; //floating row header element\n\n    this.checkTimeout = false; //click check timeout holder\n\n    this.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\n    this.moving = false; //currently moving row\n\n    this.toRow = false; //destination row\n\n    this.toRowAfter = false; //position of moving row relative to the desitnation row\n\n    this.hasHandle = false; //row has handle instead of fully movable row\n\n    this.startY = 0; //starting Y position within header element\n\n    this.startX = 0; //starting X position within header element\n\n    this.moveHover = this.moveHover.bind(this);\n    this.endMove = this.endMove.bind(this);\n    this.tableRowDropEvent = false;\n    this.touchMove = false;\n    this.connection = false;\n    this.connections = [];\n    this.connectedTable = false;\n    this.connectedRow = false;\n  };\n\n  MoveRows.prototype.createPlaceholderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    el.classList.add(\"tabulator-row-placeholder\");\n    return el;\n  };\n\n  MoveRows.prototype.initialize = function (handle) {\n    this.connection = this.table.options.movableRowsConnectedTables;\n  };\n\n  MoveRows.prototype.setHandle = function (handle) {\n    this.hasHandle = handle;\n  };\n\n  MoveRows.prototype.initializeGroupHeader = function (group) {\n    var self = this,\n        config = {},\n        rowEl; //inter table drag drop\n\n    config.mouseup = function (e) {\n      self.tableRowDrop(e, row);\n    }.bind(self); //same table drag drop\n\n\n    config.mousemove = function (e) {\n      if (e.pageY - Tabulator.prototype.helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop > group.getHeight() / 2) {\n        if (self.toRow !== group || !self.toRowAfter) {\n          var rowEl = group.getElement();\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n          self.moveRow(group, true);\n        }\n      } else {\n        if (self.toRow !== group || self.toRowAfter) {\n          var rowEl = group.getElement();\n\n          if (rowEl.previousSibling) {\n            rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n            self.moveRow(group, false);\n          }\n        }\n      }\n    }.bind(self);\n\n    group.modules.moveRow = config;\n  };\n\n  MoveRows.prototype.initializeRow = function (row) {\n    var self = this,\n        config = {},\n        rowEl; //inter table drag drop\n\n    config.mouseup = function (e) {\n      self.tableRowDrop(e, row);\n    }.bind(self); //same table drag drop\n\n\n    config.mousemove = function (e) {\n      if (e.pageY - Tabulator.prototype.helpers.elOffset(row.element).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\n        if (self.toRow !== row || !self.toRowAfter) {\n          var rowEl = row.getElement();\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n          self.moveRow(row, true);\n        }\n      } else {\n        if (self.toRow !== row || self.toRowAfter) {\n          var rowEl = row.getElement();\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n          self.moveRow(row, false);\n        }\n      }\n    }.bind(self);\n\n    if (!this.hasHandle) {\n      rowEl = row.getElement();\n      rowEl.addEventListener(\"mousedown\", function (e) {\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, row);\n          }, self.checkPeriod);\n        }\n      });\n      rowEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      this.bindTouchEvents(row, row.getElement());\n    }\n\n    row.modules.moveRow = config;\n  };\n\n  MoveRows.prototype.initializeCell = function (cell) {\n    var self = this,\n        cellEl = cell.getElement();\n    cellEl.addEventListener(\"mousedown\", function (e) {\n      if (e.which === 1) {\n        self.checkTimeout = setTimeout(function () {\n          self.startMove(e, cell.row);\n        }, self.checkPeriod);\n      }\n    });\n    cellEl.addEventListener(\"mouseup\", function (e) {\n      if (e.which === 1) {\n        if (self.checkTimeout) {\n          clearTimeout(self.checkTimeout);\n        }\n      }\n    });\n    this.bindTouchEvents(cell.row, cell.getElement());\n  };\n\n  MoveRows.prototype.bindTouchEvents = function (row, element) {\n    var self = this,\n        startYMove = false,\n        //shifting center position of the cell\n    dir = false,\n        currentRow,\n        nextRow,\n        prevRow,\n        nextRowHeight,\n        prevRowHeight,\n        nextRowHeightLast,\n        prevRowHeightLast;\n    element.addEventListener(\"touchstart\", function (e) {\n      self.checkTimeout = setTimeout(function () {\n        self.touchMove = true;\n        currentRow = row;\n        nextRow = row.nextRow();\n        nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n        prevRow = row.prevRow();\n        prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n        nextRowHeightLast = 0;\n        prevRowHeightLast = 0;\n        startYMove = false;\n        self.startMove(e, row);\n      }, self.checkPeriod);\n    }, {\n      passive: true\n    });\n    this.moving, this.toRow, this.toRowAfter;\n    element.addEventListener(\"touchmove\", function (e) {\n      var halfCol, diff, moveToRow;\n\n      if (self.moving) {\n        e.preventDefault();\n        self.moveHover(e);\n\n        if (!startYMove) {\n          startYMove = e.touches[0].pageY;\n        }\n\n        diff = e.touches[0].pageY - startYMove;\n\n        if (diff > 0) {\n          if (nextRow && diff - nextRowHeightLast > nextRowHeight) {\n            moveToRow = nextRow;\n\n            if (moveToRow !== row) {\n              startYMove = e.touches[0].pageY;\n              moveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement().nextSibling);\n              self.moveRow(moveToRow, true);\n            }\n          }\n        } else {\n          if (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\n            moveToRow = prevRow;\n\n            if (moveToRow !== row) {\n              startYMove = e.touches[0].pageY;\n              moveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement());\n              self.moveRow(moveToRow, false);\n            }\n          }\n        }\n\n        if (moveToRow) {\n          currentRow = moveToRow;\n          nextRow = moveToRow.nextRow();\n          nextRowHeightLast = nextRowHeight;\n          nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n          prevRow = moveToRow.prevRow();\n          prevRowHeightLast = prevRowHeight;\n          prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n        }\n      }\n    });\n    element.addEventListener(\"touchend\", function (e) {\n      if (self.checkTimeout) {\n        clearTimeout(self.checkTimeout);\n      }\n\n      if (self.moving) {\n        self.endMove(e);\n        self.touchMove = false;\n      }\n    });\n  };\n\n  MoveRows.prototype._bindMouseMove = function () {\n    var self = this;\n    self.table.rowManager.getDisplayRows().forEach(function (row) {\n      if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n        row.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n      }\n    });\n  };\n\n  MoveRows.prototype._unbindMouseMove = function () {\n    var self = this;\n    self.table.rowManager.getDisplayRows().forEach(function (row) {\n      if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n        row.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n      }\n    });\n  };\n\n  MoveRows.prototype.startMove = function (e, row) {\n    var element = row.getElement();\n    this.setStartPosition(e, row);\n    this.moving = row;\n    this.table.element.classList.add(\"tabulator-block-select\"); //create placeholder\n\n    this.placeholderElement.style.width = row.getWidth() + \"px\";\n    this.placeholderElement.style.height = row.getHeight() + \"px\";\n\n    if (!this.connection) {\n      element.parentNode.insertBefore(this.placeholderElement, element);\n      element.parentNode.removeChild(element);\n    } else {\n      this.table.element.classList.add(\"tabulator-movingrow-sending\");\n      this.connectToTables(row);\n    } //create hover element\n\n\n    this.hoverElement = element.cloneNode(true);\n    this.hoverElement.classList.add(\"tabulator-moving\");\n\n    if (this.connection) {\n      document.body.appendChild(this.hoverElement);\n      this.hoverElement.style.left = \"0\";\n      this.hoverElement.style.top = \"0\";\n      this.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n      this.hoverElement.style.whiteSpace = \"nowrap\";\n      this.hoverElement.style.overflow = \"hidden\";\n      this.hoverElement.style.pointerEvents = \"none\";\n    } else {\n      this.table.rowManager.getTableElement().appendChild(this.hoverElement);\n      this.hoverElement.style.left = \"0\";\n      this.hoverElement.style.top = \"0\";\n\n      this._bindMouseMove();\n    }\n\n    document.body.addEventListener(\"mousemove\", this.moveHover);\n    document.body.addEventListener(\"mouseup\", this.endMove);\n    this.moveHover(e);\n  };\n\n  MoveRows.prototype.setStartPosition = function (e, row) {\n    var pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n        pageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n        element,\n        position;\n    element = row.getElement();\n\n    if (this.connection) {\n      position = element.getBoundingClientRect();\n      this.startX = position.left - pageX + window.pageXOffset;\n      this.startY = position.top - pageY + window.pageYOffset;\n    } else {\n      this.startY = pageY - element.getBoundingClientRect().top;\n    }\n  };\n\n  MoveRows.prototype.endMove = function (e) {\n    if (!e || e.which === 1 || this.touchMove) {\n      this._unbindMouseMove();\n\n      if (!this.connection) {\n        this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n        this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n      }\n\n      this.hoverElement.parentNode.removeChild(this.hoverElement);\n      this.table.element.classList.remove(\"tabulator-block-select\");\n\n      if (this.toRow) {\n        this.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n      }\n\n      this.moving = false;\n      this.toRow = false;\n      this.toRowAfter = false;\n      document.body.removeEventListener(\"mousemove\", this.moveHover);\n      document.body.removeEventListener(\"mouseup\", this.endMove);\n\n      if (this.connection) {\n        this.table.element.classList.remove(\"tabulator-movingrow-sending\");\n        this.disconnectFromTables();\n      }\n    }\n  };\n\n  MoveRows.prototype.moveRow = function (row, after) {\n    this.toRow = row;\n    this.toRowAfter = after;\n  };\n\n  MoveRows.prototype.moveHover = function (e) {\n    if (this.connection) {\n      this.moveHoverConnections.call(this, e);\n    } else {\n      this.moveHoverTable.call(this, e);\n    }\n  };\n\n  MoveRows.prototype.moveHoverTable = function (e) {\n    var rowHolder = this.table.rowManager.getElement(),\n        scrollTop = rowHolder.scrollTop,\n        yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop,\n        scrollPos;\n    this.hoverElement.style.top = yPos - this.startY + \"px\";\n  };\n\n  MoveRows.prototype.moveHoverConnections = function (e) {\n    this.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\";\n    this.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n  }; //establish connection with other tables\n\n\n  MoveRows.prototype.connectToTables = function (row) {\n    var self = this,\n        connections = this.table.modules.comms.getConnections(this.connection);\n    this.table.options.movableRowsSendingStart.call(this.table, connections);\n    this.table.modules.comms.send(this.connection, \"moveRow\", \"connect\", {\n      row: row\n    });\n  }; //disconnect from other tables\n\n\n  MoveRows.prototype.disconnectFromTables = function () {\n    var self = this,\n        connections = this.table.modules.comms.getConnections(this.connection);\n    this.table.options.movableRowsSendingStop.call(this.table, connections);\n    this.table.modules.comms.send(this.connection, \"moveRow\", \"disconnect\");\n  }; //accept incomming connection\n\n\n  MoveRows.prototype.connect = function (table, row) {\n    var self = this;\n\n    if (!this.connectedTable) {\n      this.connectedTable = table;\n      this.connectedRow = row;\n      this.table.element.classList.add(\"tabulator-movingrow-receiving\");\n      self.table.rowManager.getDisplayRows().forEach(function (row) {\n        if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n          row.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n        }\n      });\n      self.tableRowDropEvent = self.tableRowDrop.bind(self);\n      self.table.element.addEventListener(\"mouseup\", self.tableRowDropEvent);\n      this.table.options.movableRowsReceivingStart.call(this.table, row, table);\n      return true;\n    } else {\n      console.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n      return false;\n    }\n  }; //close incomming connection\n\n\n  MoveRows.prototype.disconnect = function (table) {\n    var self = this;\n\n    if (table === this.connectedTable) {\n      this.connectedTable = false;\n      this.connectedRow = false;\n      this.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n      self.table.rowManager.getDisplayRows().forEach(function (row) {\n        if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n          row.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n        }\n      });\n      self.table.element.removeEventListener(\"mouseup\", self.tableRowDropEvent);\n      this.table.options.movableRowsReceivingStop.call(this.table, table);\n    } else {\n      console.warn(\"Move Row Error - trying to disconnect from non connected table\");\n    }\n  };\n\n  MoveRows.prototype.dropComplete = function (table, row, success) {\n    var sender = false;\n\n    if (success) {\n      switch (_typeof(this.table.options.movableRowsSender)) {\n        case \"string\":\n          sender = this.senders[this.table.options.movableRowsSender];\n          break;\n\n        case \"function\":\n          sender = this.table.options.movableRowsSender;\n          break;\n      }\n\n      if (sender) {\n        sender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n      } else {\n        if (this.table.options.movableRowsSender) {\n          console.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n        }\n      }\n\n      this.table.options.movableRowsSent.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    } else {\n      this.table.options.movableRowsSentFailed.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    }\n\n    this.endMove();\n  };\n\n  MoveRows.prototype.tableRowDrop = function (e, row) {\n    var receiver = false,\n        success = false;\n    e.stopImmediatePropagation();\n\n    switch (_typeof(this.table.options.movableRowsReceiver)) {\n      case \"string\":\n        receiver = this.receivers[this.table.options.movableRowsReceiver];\n        break;\n\n      case \"function\":\n        receiver = this.table.options.movableRowsReceiver;\n        break;\n    }\n\n    if (receiver) {\n      success = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    } else {\n      console.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n    }\n\n    if (success) {\n      this.table.options.movableRowsReceived.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    } else {\n      this.table.options.movableRowsReceivedFailed.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    }\n\n    this.table.modules.comms.send(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n      row: row,\n      success: success\n    });\n  };\n\n  MoveRows.prototype.receivers = {\n    insert: function insert(fromRow, toRow, fromTable) {\n      this.table.addRow(fromRow.getData(), undefined, toRow);\n      return true;\n    },\n    add: function add(fromRow, toRow, fromTable) {\n      this.table.addRow(fromRow.getData());\n      return true;\n    },\n    update: function update(fromRow, toRow, fromTable) {\n      if (toRow) {\n        toRow.update(fromRow.getData());\n        return true;\n      }\n\n      return false;\n    },\n    replace: function replace(fromRow, toRow, fromTable) {\n      if (toRow) {\n        this.table.addRow(fromRow.getData(), undefined, toRow);\n        toRow.delete();\n        return true;\n      }\n\n      return false;\n    }\n  };\n  MoveRows.prototype.senders = {\n    delete: function _delete(fromRow, toRow, toTable) {\n      fromRow.delete();\n    }\n  };\n\n  MoveRows.prototype.commsReceived = function (table, action, data) {\n    switch (action) {\n      case \"connect\":\n        return this.connect(table, data.row);\n        break;\n\n      case \"disconnect\":\n        return this.disconnect(table);\n        break;\n\n      case \"dropcomplete\":\n        return this.dropComplete(table, data.row, data.success);\n        break;\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"moveRow\", MoveRows);\n\n  var Mutator = function Mutator(table) {\n    this.table = table; //hold Tabulator object\n\n    this.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\n\n    this.enabled = true;\n  }; //initialize column mutator\n\n\n  Mutator.prototype.initializeColumn = function (column) {\n    var self = this,\n        match = false,\n        config = {};\n    this.allowedTypes.forEach(function (type) {\n      var key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n          mutator;\n\n      if (column.definition[key]) {\n        mutator = self.lookupMutator(column.definition[key]);\n\n        if (mutator) {\n          match = true;\n          config[key] = {\n            mutator: mutator,\n            params: column.definition[key + \"Params\"] || {}\n          };\n        }\n      }\n    });\n\n    if (match) {\n      column.modules.mutate = config;\n    }\n  };\n\n  Mutator.prototype.lookupMutator = function (value) {\n    var mutator = false; //set column mutator\n\n    switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n      case \"string\":\n        if (this.mutators[value]) {\n          mutator = this.mutators[value];\n        } else {\n          console.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n        }\n\n        break;\n\n      case \"function\":\n        mutator = value;\n        break;\n    }\n\n    return mutator;\n  }; //apply mutator to row\n\n\n  Mutator.prototype.transformRow = function (data, type, updatedData) {\n    var self = this,\n        key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n        value;\n\n    if (this.enabled) {\n      self.table.columnManager.traverse(function (column) {\n        var mutator, params, component;\n\n        if (column.modules.mutate) {\n          mutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n          if (mutator) {\n            value = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n            if (type == \"data\" || typeof value !== \"undefined\") {\n              component = column.getComponent();\n              params = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n              column.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n            }\n          }\n        }\n      });\n    }\n\n    return data;\n  }; //apply mutator to new cell value\n\n\n  Mutator.prototype.transformCell = function (cell, value) {\n    var mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n        tempData = {};\n\n    if (mutator) {\n      tempData = Object.assign(tempData, cell.row.getData());\n      cell.column.setFieldValue(tempData, value);\n      return mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n    } else {\n      return value;\n    }\n  };\n\n  Mutator.prototype.enable = function () {\n    this.enabled = true;\n  };\n\n  Mutator.prototype.disable = function () {\n    this.enabled = false;\n  }; //default mutators\n\n\n  Mutator.prototype.mutators = {};\n  Tabulator.prototype.registerModule(\"mutator\", Mutator);\n\n  var Page = function Page(table) {\n    this.table = table; //hold Tabulator object\n\n    this.mode = \"local\";\n    this.progressiveLoad = false;\n    this.size = 0;\n    this.page = 1;\n    this.count = 5;\n    this.max = 1;\n    this.displayIndex = 0; //index in display pipeline\n\n    this.initialLoad = true;\n    this.pageSizes = [];\n    this.dataReceivedNames = {};\n    this.dataSentNames = {};\n    this.createElements();\n  };\n\n  Page.prototype.createElements = function () {\n    var button;\n    this.element = document.createElement(\"span\");\n    this.element.classList.add(\"tabulator-paginator\");\n    this.pagesElement = document.createElement(\"span\");\n    this.pagesElement.classList.add(\"tabulator-pages\");\n    button = document.createElement(\"button\");\n    button.classList.add(\"tabulator-page\");\n    button.setAttribute(\"type\", \"button\");\n    button.setAttribute(\"role\", \"button\");\n    button.setAttribute(\"aria-label\", \"\");\n    button.setAttribute(\"title\", \"\");\n    this.firstBut = button.cloneNode(true);\n    this.firstBut.setAttribute(\"data-page\", \"first\");\n    this.prevBut = button.cloneNode(true);\n    this.prevBut.setAttribute(\"data-page\", \"prev\");\n    this.nextBut = button.cloneNode(true);\n    this.nextBut.setAttribute(\"data-page\", \"next\");\n    this.lastBut = button.cloneNode(true);\n    this.lastBut.setAttribute(\"data-page\", \"last\");\n\n    if (this.table.options.paginationSizeSelector) {\n      this.pageSizeSelect = document.createElement(\"select\");\n      this.pageSizeSelect.classList.add(\"tabulator-page-size\");\n    }\n  };\n\n  Page.prototype.generatePageSizeSelectList = function () {\n    var _this63 = this;\n\n    var pageSizes = [];\n\n    if (this.pageSizeSelect) {\n      if (Array.isArray(this.table.options.paginationSizeSelector)) {\n        pageSizes = this.table.options.paginationSizeSelector;\n        this.pageSizes = pageSizes;\n\n        if (this.pageSizes.indexOf(this.size) == -1) {\n          pageSizes.unshift(this.size);\n        }\n      } else {\n        if (this.pageSizes.indexOf(this.size) == -1) {\n          pageSizes = [];\n\n          for (var i = 1; i < 5; i++) {\n            pageSizes.push(this.size * i);\n          }\n\n          this.pageSizes = pageSizes;\n        } else {\n          pageSizes = this.pageSizes;\n        }\n      }\n\n      while (this.pageSizeSelect.firstChild) {\n        this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n      }\n\n      pageSizes.forEach(function (item) {\n        var itemEl = document.createElement(\"option\");\n        itemEl.value = item;\n        itemEl.innerHTML = item;\n\n        _this63.pageSizeSelect.appendChild(itemEl);\n      });\n      this.pageSizeSelect.value = this.size;\n    }\n  }; //setup pageination\n\n\n  Page.prototype.initialize = function (hidden) {\n    var self = this,\n        pageSelectLabel,\n        testElRow,\n        testElCell; //update param names\n\n    this.dataSentNames = Object.assign({}, this.paginationDataSentNames);\n    this.dataSentNames = Object.assign(this.dataSentNames, this.table.options.paginationDataSent);\n    this.dataReceivedNames = Object.assign({}, this.paginationDataReceivedNames);\n    this.dataReceivedNames = Object.assign(this.dataReceivedNames, this.table.options.paginationDataReceived); //build pagination element\n    //bind localizations\n\n    self.table.modules.localize.bind(\"pagination|first\", function (value) {\n      self.firstBut.innerHTML = value;\n    });\n    self.table.modules.localize.bind(\"pagination|first_title\", function (value) {\n      self.firstBut.setAttribute(\"aria-label\", value);\n      self.firstBut.setAttribute(\"title\", value);\n    });\n    self.table.modules.localize.bind(\"pagination|prev\", function (value) {\n      self.prevBut.innerHTML = value;\n    });\n    self.table.modules.localize.bind(\"pagination|prev_title\", function (value) {\n      self.prevBut.setAttribute(\"aria-label\", value);\n      self.prevBut.setAttribute(\"title\", value);\n    });\n    self.table.modules.localize.bind(\"pagination|next\", function (value) {\n      self.nextBut.innerHTML = value;\n    });\n    self.table.modules.localize.bind(\"pagination|next_title\", function (value) {\n      self.nextBut.setAttribute(\"aria-label\", value);\n      self.nextBut.setAttribute(\"title\", value);\n    });\n    self.table.modules.localize.bind(\"pagination|last\", function (value) {\n      self.lastBut.innerHTML = value;\n    });\n    self.table.modules.localize.bind(\"pagination|last_title\", function (value) {\n      self.lastBut.setAttribute(\"aria-label\", value);\n      self.lastBut.setAttribute(\"title\", value);\n    }); //click bindings\n\n    self.firstBut.addEventListener(\"click\", function () {\n      self.setPage(1);\n    });\n    self.prevBut.addEventListener(\"click\", function () {\n      self.previousPage();\n    });\n    self.nextBut.addEventListener(\"click\", function () {\n      self.nextPage().then(function () {}).catch(function () {});\n    });\n    self.lastBut.addEventListener(\"click\", function () {\n      self.setPage(self.max);\n    });\n\n    if (self.table.options.paginationElement) {\n      self.element = self.table.options.paginationElement;\n    }\n\n    if (this.pageSizeSelect) {\n      pageSelectLabel = document.createElement(\"label\");\n      self.table.modules.localize.bind(\"pagination|page_size\", function (value) {\n        self.pageSizeSelect.setAttribute(\"aria-label\", value);\n        self.pageSizeSelect.setAttribute(\"title\", value);\n        pageSelectLabel.innerHTML = value;\n      });\n      self.element.appendChild(pageSelectLabel);\n      self.element.appendChild(self.pageSizeSelect);\n      self.pageSizeSelect.addEventListener(\"change\", function (e) {\n        self.setPageSize(self.pageSizeSelect.value);\n        self.setPage(1).then(function () {}).catch(function () {});\n      });\n    } //append to DOM\n\n\n    self.element.appendChild(self.firstBut);\n    self.element.appendChild(self.prevBut);\n    self.element.appendChild(self.pagesElement);\n    self.element.appendChild(self.nextBut);\n    self.element.appendChild(self.lastBut);\n\n    if (!self.table.options.paginationElement && !hidden) {\n      self.table.footerManager.append(self.element, self);\n    } //set default values\n\n\n    self.mode = self.table.options.pagination;\n\n    if (self.table.options.paginationSize) {\n      self.size = self.table.options.paginationSize;\n    } else {\n      testElRow = document.createElement(\"div\");\n      testElRow.classList.add(\"tabulator-row\");\n      testElRow.style.visibility = hidden;\n      testElCell = document.createElement(\"div\");\n      testElCell.classList.add(\"tabulator-cell\");\n      testElCell.innerHTML = \"Page Row Test\";\n      testElRow.appendChild(testElCell);\n      self.table.rowManager.getTableElement().appendChild(testElRow);\n      self.size = Math.floor(self.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n      self.table.rowManager.getTableElement().removeChild(testElRow);\n    } // self.page = self.table.options.paginationInitialPage || 1;\n\n\n    self.count = self.table.options.paginationButtonCount;\n    self.generatePageSizeSelectList();\n  };\n\n  Page.prototype.initializeProgressive = function (mode) {\n    this.initialize(true);\n    this.mode = \"progressive_\" + mode;\n    this.progressiveLoad = true;\n  };\n\n  Page.prototype.setDisplayIndex = function (index) {\n    this.displayIndex = index;\n  };\n\n  Page.prototype.getDisplayIndex = function () {\n    return this.displayIndex;\n  }; //calculate maximum page from number of rows\n\n\n  Page.prototype.setMaxRows = function (rowCount) {\n    if (!rowCount) {\n      this.max = 1;\n    } else {\n      this.max = Math.ceil(rowCount / this.size);\n    }\n\n    if (this.page > this.max) {\n      this.page = this.max;\n    }\n  }; //reset to first page without triggering action\n\n\n  Page.prototype.reset = function (force, columnsChanged) {\n    if (this.mode == \"local\" || force) {\n      this.page = 1;\n    }\n\n    if (columnsChanged) {\n      this.initialLoad = true;\n    }\n\n    return true;\n  }; //set the maxmum page\n\n\n  Page.prototype.setMaxPage = function (max) {\n    max = parseInt(max);\n    this.max = max || 1;\n\n    if (this.page > this.max) {\n      this.page = this.max;\n      this.trigger();\n    }\n  }; //set current page number\n\n\n  Page.prototype.setPage = function (page) {\n    var _this64 = this;\n\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      page = parseInt(page);\n\n      if (page > 0 && page <= _this64.max) {\n        _this64.page = page;\n\n        _this64.trigger().then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n\n        if (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.page) {\n          self.table.modules.persistence.save(\"page\");\n        }\n      } else {\n        console.warn(\"Pagination Error - Requested page is out of range of 1 - \" + _this64.max + \":\", page);\n        reject();\n      }\n    });\n  };\n\n  Page.prototype.setPageToRow = function (row) {\n    var _this65 = this;\n\n    return new Promise(function (resolve, reject) {\n      var rows = _this65.table.rowManager.getDisplayRows(_this65.displayIndex - 1);\n\n      var index = rows.indexOf(row);\n\n      if (index > -1) {\n        var page = Math.ceil((index + 1) / _this65.size);\n\n        _this65.setPage(page).then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n      } else {\n        console.warn(\"Pagination Error - Requested row is not visible\");\n        reject();\n      }\n    });\n  };\n\n  Page.prototype.setPageSize = function (size) {\n    size = parseInt(size);\n\n    if (size > 0) {\n      this.size = size;\n    }\n\n    if (this.pageSizeSelect) {\n      // this.pageSizeSelect.value = size;\n      this.generatePageSizeSelectList();\n    }\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page) {\n      this.table.modules.persistence.save(\"page\");\n    }\n  }; //setup the pagination buttons\n\n\n  Page.prototype._setPageButtons = function () {\n    var self = this;\n    var leftSize = Math.floor((this.count - 1) / 2);\n    var rightSize = Math.ceil((this.count - 1) / 2);\n    var min = this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1);\n    var max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max);\n\n    while (self.pagesElement.firstChild) {\n      self.pagesElement.removeChild(self.pagesElement.firstChild);\n    }\n\n    if (self.page == 1) {\n      self.firstBut.disabled = true;\n      self.prevBut.disabled = true;\n    } else {\n      self.firstBut.disabled = false;\n      self.prevBut.disabled = false;\n    }\n\n    if (self.page == self.max) {\n      self.lastBut.disabled = true;\n      self.nextBut.disabled = true;\n    } else {\n      self.lastBut.disabled = false;\n      self.nextBut.disabled = false;\n    }\n\n    for (var i = min; i <= max; i++) {\n      if (i > 0 && i <= self.max) {\n        self.pagesElement.appendChild(self._generatePageButton(i));\n      }\n    }\n\n    this.footerRedraw();\n  };\n\n  Page.prototype._generatePageButton = function (page) {\n    var self = this,\n        button = document.createElement(\"button\");\n    button.classList.add(\"tabulator-page\");\n\n    if (page == self.page) {\n      button.classList.add(\"active\");\n    }\n\n    button.setAttribute(\"type\", \"button\");\n    button.setAttribute(\"role\", \"button\");\n    button.setAttribute(\"aria-label\", \"Show Page \" + page);\n    button.setAttribute(\"title\", \"Show Page \" + page);\n    button.setAttribute(\"data-page\", page);\n    button.textContent = page;\n    button.addEventListener(\"click\", function (e) {\n      self.setPage(page);\n    });\n    return button;\n  }; //previous page\n\n\n  Page.prototype.previousPage = function () {\n    var _this66 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this66.page > 1) {\n        _this66.page--;\n\n        _this66.trigger().then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n\n        if (_this66.table.options.persistence && _this66.table.modExists(\"persistence\", true) && _this66.table.modules.persistence.config.page) {\n          _this66.table.modules.persistence.save(\"page\");\n        }\n      } else {\n        console.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n        reject();\n      }\n    });\n  }; //next page\n\n\n  Page.prototype.nextPage = function () {\n    var _this67 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this67.page < _this67.max) {\n        _this67.page++;\n\n        _this67.trigger().then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n\n        if (_this67.table.options.persistence && _this67.table.modExists(\"persistence\", true) && _this67.table.modules.persistence.config.page) {\n          _this67.table.modules.persistence.save(\"page\");\n        }\n      } else {\n        if (!_this67.progressiveLoad) {\n          console.warn(\"Pagination Error - Next page would be greater than maximum page of \" + _this67.max + \":\", _this67.max + 1);\n        }\n\n        reject();\n      }\n    });\n  }; //return current page number\n\n\n  Page.prototype.getPage = function () {\n    return this.page;\n  }; //return max page number\n\n\n  Page.prototype.getPageMax = function () {\n    return this.max;\n  };\n\n  Page.prototype.getPageSize = function (size) {\n    return this.size;\n  };\n\n  Page.prototype.getMode = function () {\n    return this.mode;\n  }; //return appropriate rows for current page\n\n\n  Page.prototype.getRows = function (data) {\n    var output, start, end;\n\n    if (this.mode == \"local\") {\n      output = [];\n      start = this.size * (this.page - 1);\n      end = start + parseInt(this.size);\n\n      this._setPageButtons();\n\n      for (var i = start; i < end; i++) {\n        if (data[i]) {\n          output.push(data[i]);\n        }\n      }\n\n      return output;\n    } else {\n      this._setPageButtons();\n\n      return data.slice(0);\n    }\n  };\n\n  Page.prototype.trigger = function () {\n    var _this68 = this;\n\n    var left;\n    return new Promise(function (resolve, reject) {\n      switch (_this68.mode) {\n        case \"local\":\n          left = _this68.table.rowManager.scrollLeft;\n\n          _this68.table.rowManager.refreshActiveData(\"page\");\n\n          _this68.table.rowManager.scrollHorizontal(left);\n\n          _this68.table.options.pageLoaded.call(_this68.table, _this68.getPage());\n\n          resolve();\n          break;\n\n        case \"remote\":\n        case \"progressive_load\":\n        case \"progressive_scroll\":\n          _this68.table.modules.ajax.blockActiveRequest();\n\n          _this68._getRemotePage().then(function () {\n            resolve();\n          }).catch(function () {\n            reject();\n          });\n\n          break;\n\n        default:\n          console.warn(\"Pagination Error - no such pagination mode:\", _this68.mode);\n          reject();\n      }\n    });\n  };\n\n  Page.prototype._getRemotePage = function () {\n    var _this69 = this;\n\n    var self = this,\n        oldParams,\n        pageParams;\n    return new Promise(function (resolve, reject) {\n      if (!self.table.modExists(\"ajax\", true)) {\n        reject();\n      } //record old params and restore after request has been made\n\n\n      oldParams = Tabulator.prototype.helpers.deepClone(self.table.modules.ajax.getParams() || {});\n      pageParams = self.table.modules.ajax.getParams(); //configure request params\n\n      pageParams[_this69.dataSentNames.page] = self.page; //set page size if defined\n\n      if (_this69.size) {\n        pageParams[_this69.dataSentNames.size] = _this69.size;\n      } //set sort data if defined\n\n\n      if (_this69.table.options.ajaxSorting && _this69.table.modExists(\"sort\")) {\n        var sorters = self.table.modules.sort.getSort();\n        sorters.forEach(function (item) {\n          delete item.column;\n        });\n        pageParams[_this69.dataSentNames.sorters] = sorters;\n      } //set filter data if defined\n\n\n      if (_this69.table.options.ajaxFiltering && _this69.table.modExists(\"filter\")) {\n        var filters = self.table.modules.filter.getFilters(true, true);\n        pageParams[_this69.dataSentNames.filters] = filters;\n      }\n\n      self.table.modules.ajax.setParams(pageParams);\n      self.table.modules.ajax.sendRequest(_this69.progressiveLoad).then(function (data) {\n        self._parseRemoteData(data);\n\n        resolve();\n      }).catch(function (e) {\n        reject();\n      });\n      self.table.modules.ajax.setParams(oldParams);\n    });\n  };\n\n  Page.prototype._parseRemoteData = function (data) {\n    var self = this,\n        left,\n        data,\n        margin;\n\n    if (typeof data[this.dataReceivedNames.last_page] === \"undefined\") {\n      console.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.last_page + \"' property\");\n    }\n\n    if (data[this.dataReceivedNames.data]) {\n      this.max = parseInt(data[this.dataReceivedNames.last_page]) || 1;\n\n      if (this.progressiveLoad) {\n        switch (this.mode) {\n          case \"progressive_load\":\n            if (this.page == 1) {\n              this.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n            } else {\n              this.table.rowManager.addRows(data[this.dataReceivedNames.data]);\n            }\n\n            if (this.page < this.max) {\n              setTimeout(function () {\n                self.nextPage().then(function () {}).catch(function () {});\n              }, self.table.options.ajaxProgressiveLoadDelay);\n            }\n\n            break;\n\n          case \"progressive_scroll\":\n            data = this.table.rowManager.getData().concat(data[this.dataReceivedNames.data]);\n            this.table.rowManager.setData(data, true, this.initialLoad && this.page == 1);\n            margin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2;\n\n            if (self.table.rowManager.element.scrollHeight <= self.table.rowManager.element.clientHeight + margin) {\n              self.nextPage().then(function () {}).catch(function () {});\n            }\n\n            break;\n        }\n      } else {\n        left = this.table.rowManager.scrollLeft;\n        this.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n        this.table.rowManager.scrollHorizontal(left);\n        this.table.columnManager.scrollHorizontal(left);\n        this.table.options.pageLoaded.call(this.table, this.getPage());\n      }\n\n      this.initialLoad = false;\n    } else {\n      console.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.data + \"' property\");\n    }\n  }; //handle the footer element being redrawn\n\n\n  Page.prototype.footerRedraw = function () {\n    var footer = this.table.footerManager.element;\n\n    if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n      this.pagesElement.style.display = 'none';\n    } else {\n      this.pagesElement.style.display = '';\n\n      if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n        this.pagesElement.style.display = 'none';\n      }\n    }\n  }; //set the paramter names for pagination requests\n\n\n  Page.prototype.paginationDataSentNames = {\n    \"page\": \"page\",\n    \"size\": \"size\",\n    \"sorters\": \"sorters\",\n    // \"sort_dir\":\"sort_dir\",\n    \"filters\": \"filters\" // \"filter_value\":\"filter_value\",\n    // \"filter_type\":\"filter_type\",\n\n  }; //set the property names for pagination responses\n\n  Page.prototype.paginationDataReceivedNames = {\n    \"current_page\": \"current_page\",\n    \"last_page\": \"last_page\",\n    \"data\": \"data\"\n  };\n  Tabulator.prototype.registerModule(\"page\", Page);\n\n  var Persistence = function Persistence(table) {\n    this.table = table; //hold Tabulator object\n\n    this.mode = \"\";\n    this.id = \"\"; // this.persistProps = [\"field\", \"width\", \"visible\"];\n\n    this.defWatcherBlock = false;\n    this.config = {};\n    this.readFunc = false;\n    this.writeFunc = false;\n  }; // Test for whether localStorage is available for use.\n\n\n  Persistence.prototype.localStorageTest = function () {\n    var testKey = \"_tabulator_test\";\n\n    try {\n      window.localStorage.setItem(testKey, testKey);\n      window.localStorage.removeItem(testKey);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }; //setup parameters\n\n\n  Persistence.prototype.initialize = function () {\n    //determine persistent layout storage type\n    var mode = this.table.options.persistenceMode,\n        id = this.table.options.persistenceID,\n        retreivedData;\n    this.mode = mode !== true ? mode : this.localStorageTest() ? \"local\" : \"cookie\";\n\n    if (this.table.options.persistenceReaderFunc) {\n      if (typeof this.table.options.persistenceReaderFunc === \"function\") {\n        this.readFunc = this.table.options.persistenceReaderFunc;\n      } else {\n        if (this.readers[this.table.options.persistenceReaderFunc]) {\n          this.readFunc = this.readers[this.table.options.persistenceReaderFunc];\n        } else {\n          console.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n        }\n      }\n    } else {\n      if (this.readers[this.mode]) {\n        this.readFunc = this.readers[this.mode];\n      } else {\n        console.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n      }\n    }\n\n    if (this.table.options.persistenceWriterFunc) {\n      if (typeof this.table.options.persistenceWriterFunc === \"function\") {\n        this.writeFunc = this.table.options.persistenceWriterFunc;\n      } else {\n        if (this.readers[this.table.options.persistenceWriterFunc]) {\n          this.writeFunc = this.readers[this.table.options.persistenceWriterFunc];\n        } else {\n          console.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n        }\n      }\n    } else {\n      if (this.writers[this.mode]) {\n        this.writeFunc = this.writers[this.mode];\n      } else {\n        console.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n      }\n    } //set storage tag\n\n\n    this.id = \"tabulator-\" + (id || this.table.element.getAttribute(\"id\") || \"\");\n    this.config = {\n      sort: this.table.options.persistence === true || this.table.options.persistence.sort,\n      filter: this.table.options.persistence === true || this.table.options.persistence.filter,\n      group: this.table.options.persistence === true || this.table.options.persistence.group,\n      page: this.table.options.persistence === true || this.table.options.persistence.page,\n      columns: this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n    }; //load pagination data if needed\n\n    if (this.config.page) {\n      retreivedData = this.retreiveData(\"page\");\n\n      if (retreivedData) {\n        if (typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)) {\n          this.table.options.paginationSize = retreivedData.paginationSize;\n        }\n\n        if (typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)) {\n          this.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\n        }\n      }\n    } //load group data if needed\n\n\n    if (this.config.group) {\n      retreivedData = this.retreiveData(\"group\");\n\n      if (retreivedData) {\n        if (typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)) {\n          this.table.options.groupBy = retreivedData.groupBy;\n        }\n\n        if (typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)) {\n          this.table.options.groupStartOpen = retreivedData.groupStartOpen;\n        }\n\n        if (typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)) {\n          this.table.options.groupHeader = retreivedData.groupHeader;\n        }\n      }\n    }\n  };\n\n  Persistence.prototype.initializeColumn = function (column) {\n    var self = this,\n        def,\n        keys;\n\n    if (this.config.columns) {\n      this.defWatcherBlock = true;\n      def = column.getDefinition();\n      keys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n      keys.forEach(function (key) {\n        var props = Object.getOwnPropertyDescriptor(def, key);\n        var value = def[key];\n\n        if (props) {\n          Object.defineProperty(def, key, {\n            set: function set(newValue) {\n              value = newValue;\n\n              if (!self.defWatcherBlock) {\n                self.save(\"columns\");\n              }\n\n              if (props.set) {\n                props.set(newValue);\n              }\n            },\n            get: function get() {\n              if (props.get) {\n                props.get();\n              }\n\n              return value;\n            }\n          });\n        }\n      });\n      this.defWatcherBlock = false;\n    }\n  }; //load saved definitions\n\n\n  Persistence.prototype.load = function (type, current) {\n    var data = this.retreiveData(type);\n\n    if (current) {\n      data = data ? this.mergeDefinition(current, data) : current;\n    }\n\n    return data;\n  }; //retreive data from memory\n\n\n  Persistence.prototype.retreiveData = function (type) {\n    return this.readFunc ? this.readFunc(this.id, type) : false;\n  }; //merge old and new column definitions\n\n\n  Persistence.prototype.mergeDefinition = function (oldCols, newCols) {\n    var self = this,\n        output = []; // oldCols = oldCols || [];\n\n    newCols = newCols || [];\n    newCols.forEach(function (column, to) {\n      var from = self._findColumn(oldCols, column),\n          keys;\n\n      if (from) {\n        if (self.config.columns === true || self.config.columns == undefined) {\n          keys = Object.keys(from);\n          keys.push(\"width\");\n        } else {\n          keys = self.config.columns;\n        }\n\n        keys.forEach(function (key) {\n          if (typeof column[key] !== \"undefined\") {\n            from[key] = column[key];\n          }\n        });\n\n        if (from.columns) {\n          from.columns = self.mergeDefinition(from.columns, column.columns);\n        }\n\n        output.push(from);\n      }\n    });\n    oldCols.forEach(function (column, i) {\n      var from = self._findColumn(newCols, column);\n\n      if (!from) {\n        if (output.length > i) {\n          output.splice(i, 0, column);\n        } else {\n          output.push(column);\n        }\n      }\n    });\n    return output;\n  }; //find matching columns\n\n\n  Persistence.prototype._findColumn = function (columns, subject) {\n    var type = subject.columns ? \"group\" : subject.field ? \"field\" : \"object\";\n    return columns.find(function (col) {\n      switch (type) {\n        case \"group\":\n          return col.title === subject.title && col.columns.length === subject.columns.length;\n          break;\n\n        case \"field\":\n          return col.field === subject.field;\n          break;\n\n        case \"object\":\n          return col === subject;\n          break;\n      }\n    });\n  }; //save data\n\n\n  Persistence.prototype.save = function (type) {\n    var data = {};\n\n    switch (type) {\n      case \"columns\":\n        data = this.parseColumns(this.table.columnManager.getColumns());\n        break;\n\n      case \"filter\":\n        data = this.table.modules.filter.getFilters();\n        break;\n\n      case \"sort\":\n        data = this.validateSorters(this.table.modules.sort.getSort());\n        break;\n\n      case \"group\":\n        data = this.getGroupConfig();\n        break;\n\n      case \"page\":\n        data = this.getPageConfig();\n        break;\n    }\n\n    if (this.writeFunc) {\n      this.writeFunc(this.id, type, data);\n    }\n  }; //ensure sorters contain no function data\n\n\n  Persistence.prototype.validateSorters = function (data) {\n    data.forEach(function (item) {\n      item.column = item.field;\n      delete item.field;\n    });\n    return data;\n  };\n\n  Persistence.prototype.getGroupConfig = function () {\n    if (this.config.group) {\n      if (this.config.group === true || this.config.group.groupBy) {\n        data.groupBy = this.table.options.groupBy;\n      }\n\n      if (this.config.group === true || this.config.group.groupStartOpen) {\n        data.groupStartOpen = this.table.options.groupStartOpen;\n      }\n\n      if (this.config.group === true || this.config.group.groupHeader) {\n        data.groupHeader = this.table.options.groupHeader;\n      }\n    }\n\n    return data;\n  };\n\n  Persistence.prototype.getPageConfig = function () {\n    var data = {};\n\n    if (this.config.page) {\n      if (this.config.page === true || this.config.page.size) {\n        data.paginationSize = this.table.modules.page.getPageSize();\n      }\n\n      if (this.config.page === true || this.config.page.page) {\n        data.paginationInitialPage = this.table.modules.page.getPage();\n      }\n    }\n\n    return data;\n  }; //parse columns for data to store\n\n\n  Persistence.prototype.parseColumns = function (columns) {\n    var self = this,\n        definitions = [];\n    columns.forEach(function (column) {\n      var defStore = {},\n          colDef = column.getDefinition(),\n          keys;\n\n      if (column.isGroup) {\n        defStore.title = colDef.title;\n        defStore.columns = self.parseColumns(column.getColumns());\n      } else {\n        defStore.field = column.getField();\n\n        if (self.config.columns === true || self.config.columns == undefined) {\n          keys = Object.keys(colDef);\n          keys.push(\"width\");\n        } else {\n          keys = self.config.columns;\n        }\n\n        keys.forEach(function (key) {\n          switch (key) {\n            case \"width\":\n              defStore.width = column.getWidth();\n              break;\n\n            case \"visible\":\n              defStore.visible = column.visible;\n              break;\n\n            default:\n              defStore[key] = colDef[key];\n          }\n        });\n      }\n\n      definitions.push(defStore);\n    });\n    return definitions;\n  }; // read peristence information from storage\n\n\n  Persistence.prototype.readers = {\n    local: function local(id, type) {\n      var data = localStorage.getItem(id + \"-\" + type);\n      return data ? JSON.parse(data) : false;\n    },\n    cookie: function cookie(id, type) {\n      var cookie = document.cookie,\n          key = id + \"-\" + type,\n          cookiePos = cookie.indexOf(key + \"=\"),\n          end,\n          data; //if cookie exists, decode and load column data into tabulator\n\n      if (cookiePos > -1) {\n        cookie = cookie.substr(cookiePos);\n        end = cookie.indexOf(\";\");\n\n        if (end > -1) {\n          cookie = cookie.substr(0, end);\n        }\n\n        data = cookie.replace(key + \"=\", \"\");\n      }\n\n      return data ? JSON.parse(data) : false;\n    }\n  }; //write persistence information to storage\n\n  Persistence.prototype.writers = {\n    local: function local(id, type, data) {\n      localStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n    },\n    cookie: function cookie(id, type, data) {\n      var expireDate = new Date();\n      expireDate.setDate(expireDate.getDate() + 10000);\n      document.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n    }\n  };\n  Tabulator.prototype.registerModule(\"persistence\", Persistence);\n\n  var Print = function Print(table) {\n    this.table = table; //hold Tabulator object\n\n    this.element = false;\n    this.manualBlock = false;\n  };\n\n  Print.prototype.initialize = function () {\n    window.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\n    window.addEventListener(\"afterprint\", this.cleanup.bind(this));\n  };\n\n  Print.prototype.replaceTable = function () {\n    if (!this.manualBlock) {\n      this.element = document.createElement(\"div\");\n      this.element.classList.add(\"tabulator-print-table\");\n      this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n      this.table.element.style.display = \"none\";\n      this.table.element.parentNode.insertBefore(this.element, this.table.element);\n    }\n  };\n\n  Print.prototype.cleanup = function () {\n    document.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n      this.table.element.style.display = \"\";\n    }\n  };\n\n  Print.prototype.printFullscreen = function (visible, style, config) {\n    var scrollX = window.scrollX,\n        scrollY = window.scrollY,\n        headerEl = document.createElement(\"div\"),\n        footerEl = document.createElement(\"div\"),\n        tableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible, \"print\"),\n        headerContent,\n        footerContent;\n    this.manualBlock = true;\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-print-fullscreen\");\n\n    if (this.table.options.printHeader) {\n      headerEl.classList.add(\"tabulator-print-header\");\n      headerContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n      if (typeof headerContent == \"string\") {\n        headerEl.innerHTML = headerContent;\n      } else {\n        headerEl.appendChild(headerContent);\n      }\n\n      this.element.appendChild(headerEl);\n    }\n\n    this.element.appendChild(tableEl);\n\n    if (this.table.options.printFooter) {\n      footerEl.classList.add(\"tabulator-print-footer\");\n      footerContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n      if (typeof footerContent == \"string\") {\n        footerEl.innerHTML = footerContent;\n      } else {\n        footerEl.appendChild(footerContent);\n      }\n\n      this.element.appendChild(footerEl);\n    }\n\n    document.body.classList.add(\"tabulator-print-fullscreen-hide\");\n    document.body.appendChild(this.element);\n\n    if (this.table.options.printFormatter) {\n      this.table.options.printFormatter(this.element, tableEl);\n    }\n\n    window.print();\n    this.cleanup();\n    window.scrollTo(scrollX, scrollY);\n    this.manualBlock = false;\n  };\n\n  Tabulator.prototype.registerModule(\"print\", Print);\n\n  var ReactiveData = function ReactiveData(table) {\n    this.table = table; //hold Tabulator object\n\n    this.data = false;\n    this.blocked = false; //block reactivity while performing update\n\n    this.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\n    this.currentVersion = 0;\n  };\n\n  ReactiveData.prototype.watchData = function (data) {\n    var self = this,\n        pushFunc,\n        version;\n    this.currentVersion++;\n    version = this.currentVersion;\n    self.unwatchData();\n    self.data = data; //override array push function\n\n    self.origFuncs.push = data.push;\n    Object.defineProperty(self.data, \"push\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var args = Array.from(arguments);\n\n        if (!self.blocked && version === self.currentVersion) {\n          args.forEach(function (arg) {\n            self.table.rowManager.addRowActual(arg, false);\n          });\n        }\n\n        return self.origFuncs.push.apply(data, arguments);\n      }\n    }); //override array unshift function\n\n    self.origFuncs.unshift = data.unshift;\n    Object.defineProperty(self.data, \"unshift\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var args = Array.from(arguments);\n\n        if (!self.blocked && version === self.currentVersion) {\n          args.forEach(function (arg) {\n            self.table.rowManager.addRowActual(arg, true);\n          });\n        }\n\n        return self.origFuncs.unshift.apply(data, arguments);\n      }\n    }); //override array shift function\n\n    self.origFuncs.shift = data.shift;\n    Object.defineProperty(self.data, \"shift\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var row;\n\n        if (!self.blocked && version === self.currentVersion) {\n          if (self.data.length) {\n            row = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\n            if (row) {\n              row.deleteActual();\n            }\n          }\n        }\n\n        return self.origFuncs.shift.call(data);\n      }\n    }); //override array pop function\n\n    self.origFuncs.pop = data.pop;\n    Object.defineProperty(self.data, \"pop\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var row;\n\n        if (!self.blocked && version === self.currentVersion) {\n          if (self.data.length) {\n            row = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\n            if (row) {\n              row.deleteActual();\n            }\n          }\n        }\n\n        return self.origFuncs.pop.call(data);\n      }\n    }); //override array splice function\n\n    self.origFuncs.splice = data.splice;\n    Object.defineProperty(self.data, \"splice\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var args = Array.from(arguments),\n            start = args[0] < 0 ? data.length + args[0] : args[0],\n            end = args[1],\n            newRows = args[2] ? args.slice(2) : false,\n            startRow;\n\n        if (!self.blocked && version === self.currentVersion) {\n          //add new rows\n          if (newRows) {\n            startRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\n            if (startRow) {\n              newRows.forEach(function (rowData) {\n                self.table.rowManager.addRowActual(rowData, true, startRow, true);\n              });\n            } else {\n              newRows = newRows.slice().reverse();\n              newRows.forEach(function (rowData) {\n                self.table.rowManager.addRowActual(rowData, true, false, true);\n              });\n            }\n          } //delete removed rows\n\n\n          if (end !== 0) {\n            var oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n            oldRows.forEach(function (rowData, i) {\n              var row = self.table.rowManager.getRowFromDataObject(rowData);\n\n              if (row) {\n                row.deleteActual(i !== oldRows.length - 1);\n              }\n            });\n          }\n\n          if (newRows || end !== 0) {\n            self.table.rowManager.reRenderInPosition();\n          }\n        }\n\n        return self.origFuncs.splice.apply(data, arguments);\n      }\n    });\n  };\n\n  ReactiveData.prototype.unwatchData = function () {\n    if (this.data !== false) {\n      for (var key in this.origFuncs) {\n        Object.defineProperty(this.data, key, {\n          enumerable: true,\n          configurable: true,\n          writable: true,\n          value: this.origFuncs.key\n        });\n      }\n    }\n  };\n\n  ReactiveData.prototype.watchRow = function (row) {\n    var self = this,\n        data = row.getData();\n    this.blocked = true;\n\n    for (var key in data) {\n      this.watchKey(row, data, key);\n    }\n\n    this.blocked = false;\n  };\n\n  ReactiveData.prototype.watchKey = function (row, data, key) {\n    var self = this,\n        props = Object.getOwnPropertyDescriptor(data, key),\n        value = data[key],\n        version = this.currentVersion;\n    Object.defineProperty(data, key, {\n      set: function set(newValue) {\n        value = newValue;\n\n        if (!self.blocked && version === self.currentVersion) {\n          var update = {};\n          update[key] = newValue;\n          row.updateData(update);\n        }\n\n        if (props.set) {\n          props.set(newValue);\n        }\n      },\n      get: function get() {\n        if (props.get) {\n          props.get();\n        }\n\n        return value;\n      }\n    });\n  };\n\n  ReactiveData.prototype.unwatchRow = function (row) {\n    var data = row.getData();\n\n    for (var key in data) {\n      Object.defineProperty(data, key, {\n        value: data[key]\n      });\n    }\n  };\n\n  ReactiveData.prototype.block = function () {\n    this.blocked = true;\n  };\n\n  ReactiveData.prototype.unblock = function () {\n    this.blocked = false;\n  };\n\n  Tabulator.prototype.registerModule(\"reactiveData\", ReactiveData);\n\n  var ResizeColumns = function ResizeColumns(table) {\n    this.table = table; //hold Tabulator object\n\n    this.startColumn = false;\n    this.startX = false;\n    this.startWidth = false;\n    this.handle = null;\n    this.prevHandle = null;\n  };\n\n  ResizeColumns.prototype.initializeColumn = function (type, column, element) {\n    var self = this,\n        variableHeight = false,\n        mode = this.table.options.resizableColumns; //set column resize mode\n\n    if (type === \"header\") {\n      variableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n      column.modules.resize = {\n        variableHeight: variableHeight\n      };\n    }\n\n    if (mode === true || mode == type) {\n      var handle = document.createElement('div');\n      handle.className = \"tabulator-col-resize-handle\";\n      var prevHandle = document.createElement('div');\n      prevHandle.className = \"tabulator-col-resize-handle prev\";\n      handle.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n      });\n\n      var handleDown = function handleDown(e) {\n        var nearestColumn = column.getLastColumn();\n\n        if (nearestColumn && self._checkResizability(nearestColumn)) {\n          self.startColumn = column;\n\n          self._mouseDown(e, nearestColumn, handle);\n        }\n      };\n\n      handle.addEventListener(\"mousedown\", handleDown);\n      handle.addEventListener(\"touchstart\", handleDown, {\n        passive: true\n      }); //reszie column on  double click\n\n      handle.addEventListener(\"dblclick\", function (e) {\n        var col = column.getLastColumn();\n\n        if (col && self._checkResizability(col)) {\n          e.stopPropagation();\n          col.reinitializeWidth(true);\n        }\n      });\n      prevHandle.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n      });\n\n      var prevHandleDown = function prevHandleDown(e) {\n        var nearestColumn, colIndex, prevColumn;\n        nearestColumn = column.getFirstColumn();\n\n        if (nearestColumn) {\n          colIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n          prevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n          if (prevColumn && self._checkResizability(prevColumn)) {\n            self.startColumn = column;\n\n            self._mouseDown(e, prevColumn, prevHandle);\n          }\n        }\n      };\n\n      prevHandle.addEventListener(\"mousedown\", prevHandleDown);\n      prevHandle.addEventListener(\"touchstart\", prevHandleDown, {\n        passive: true\n      }); //resize column on double click\n\n      prevHandle.addEventListener(\"dblclick\", function (e) {\n        var nearestColumn, colIndex, prevColumn;\n        nearestColumn = column.getFirstColumn();\n\n        if (nearestColumn) {\n          colIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n          prevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n          if (prevColumn && self._checkResizability(prevColumn)) {\n            e.stopPropagation();\n            prevColumn.reinitializeWidth(true);\n          }\n        }\n      });\n      element.appendChild(handle);\n      element.appendChild(prevHandle);\n    }\n  };\n\n  ResizeColumns.prototype._checkResizability = function (column) {\n    return typeof column.definition.resizable != \"undefined\" ? column.definition.resizable : this.table.options.resizableColumns;\n  };\n\n  ResizeColumns.prototype._mouseDown = function (e, column, handle) {\n    var self = this;\n    self.table.element.classList.add(\"tabulator-block-select\");\n\n    function mouseMove(e) {\n      // self.table.columnManager.tempScrollBlock();\n      column.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\n\n      if (!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n        column.checkCellHeights();\n      }\n    }\n\n    function mouseUp(e) {\n      //block editor from taking action while resizing is taking place\n      if (self.startColumn.modules.edit) {\n        self.startColumn.modules.edit.blocked = false;\n      }\n\n      if (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n        column.checkCellHeights();\n      }\n\n      document.body.removeEventListener(\"mouseup\", mouseUp);\n      document.body.removeEventListener(\"mousemove\", mouseMove);\n      handle.removeEventListener(\"touchmove\", mouseMove);\n      handle.removeEventListener(\"touchend\", mouseUp);\n      self.table.element.classList.remove(\"tabulator-block-select\");\n\n      if (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.columns) {\n        self.table.modules.persistence.save(\"columns\");\n      }\n\n      self.table.options.columnResized.call(self.table, column.getComponent());\n    }\n\n    e.stopPropagation(); //prevent resize from interfereing with movable columns\n    //block editor from taking action while resizing is taking place\n\n    if (self.startColumn.modules.edit) {\n      self.startColumn.modules.edit.blocked = true;\n    }\n\n    self.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n    self.startWidth = column.getWidth();\n    document.body.addEventListener(\"mousemove\", mouseMove);\n    document.body.addEventListener(\"mouseup\", mouseUp);\n    handle.addEventListener(\"touchmove\", mouseMove, {\n      passive: true\n    });\n    handle.addEventListener(\"touchend\", mouseUp);\n  };\n\n  Tabulator.prototype.registerModule(\"resizeColumns\", ResizeColumns);\n\n  var ResizeRows = function ResizeRows(table) {\n    this.table = table; //hold Tabulator object\n\n    this.startColumn = false;\n    this.startY = false;\n    this.startHeight = false;\n    this.handle = null;\n    this.prevHandle = null;\n  };\n\n  ResizeRows.prototype.initializeRow = function (row) {\n    var self = this,\n        rowEl = row.getElement();\n    var handle = document.createElement('div');\n    handle.className = \"tabulator-row-resize-handle\";\n    var prevHandle = document.createElement('div');\n    prevHandle.className = \"tabulator-row-resize-handle prev\";\n    handle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    var handleDown = function handleDown(e) {\n      self.startRow = row;\n\n      self._mouseDown(e, row, handle);\n    };\n\n    handle.addEventListener(\"mousedown\", handleDown);\n    handle.addEventListener(\"touchstart\", handleDown, {\n      passive: true\n    });\n    prevHandle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    var prevHandleDown = function prevHandleDown(e) {\n      var prevRow = self.table.rowManager.prevDisplayRow(row);\n\n      if (prevRow) {\n        self.startRow = prevRow;\n\n        self._mouseDown(e, prevRow, prevHandle);\n      }\n    };\n\n    prevHandle.addEventListener(\"mousedown\", prevHandleDown);\n    prevHandle.addEventListener(\"touchstart\", prevHandleDown, {\n      passive: true\n    });\n    rowEl.appendChild(handle);\n    rowEl.appendChild(prevHandle);\n  };\n\n  ResizeRows.prototype._mouseDown = function (e, row, handle) {\n    var self = this;\n    self.table.element.classList.add(\"tabulator-block-select\");\n\n    function mouseMove(e) {\n      row.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n    }\n\n    function mouseUp(e) {\n      // //block editor from taking action while resizing is taking place\n      // if(self.startColumn.modules.edit){\n      // \tself.startColumn.modules.edit.blocked = false;\n      // }\n      document.body.removeEventListener(\"mouseup\", mouseMove);\n      document.body.removeEventListener(\"mousemove\", mouseMove);\n      handle.removeEventListener(\"touchmove\", mouseMove);\n      handle.removeEventListener(\"touchend\", mouseUp);\n      self.table.element.classList.remove(\"tabulator-block-select\");\n      self.table.options.rowResized.call(this.table, row.getComponent());\n    }\n\n    e.stopPropagation(); //prevent resize from interfereing with movable columns\n    //block editor from taking action while resizing is taking place\n    // if(self.startColumn.modules.edit){\n    // \tself.startColumn.modules.edit.blocked = true;\n    // }\n\n    self.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n    self.startHeight = row.getHeight();\n    document.body.addEventListener(\"mousemove\", mouseMove);\n    document.body.addEventListener(\"mouseup\", mouseUp);\n    handle.addEventListener(\"touchmove\", mouseMove, {\n      passive: true\n    });\n    handle.addEventListener(\"touchend\", mouseUp);\n  };\n\n  Tabulator.prototype.registerModule(\"resizeRows\", ResizeRows);\n\n  var ResizeTable = function ResizeTable(table) {\n    this.table = table; //hold Tabulator object\n\n    this.binding = false;\n    this.observer = false;\n    this.containerObserver = false;\n    this.tableHeight = 0;\n    this.tableWidth = 0;\n    this.containerHeight = 0;\n    this.containerWidth = 0;\n    this.autoResize = false;\n  };\n\n  ResizeTable.prototype.initialize = function (row) {\n    var _this70 = this;\n\n    var table = this.table,\n        tableStyle;\n    this.tableHeight = table.element.clientHeight;\n    this.tableWidth = table.element.clientWidth;\n\n    if (table.element.parentNode) {\n      this.containerHeight = table.element.parentNode.clientHeight;\n      this.containerWidth = table.element.parentNode.clientWidth;\n    }\n\n    if (typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\") {\n      this.autoResize = true;\n      this.observer = new ResizeObserver(function (entry) {\n        if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n          var nodeHeight = Math.floor(entry[0].contentRect.height);\n          var nodeWidth = Math.floor(entry[0].contentRect.width);\n\n          if (_this70.tableHeight != nodeHeight || _this70.tableWidth != nodeWidth) {\n            _this70.tableHeight = nodeHeight;\n            _this70.tableWidth = nodeWidth;\n\n            if (table.element.parentNode) {\n              _this70.containerHeight = table.element.parentNode.clientHeight;\n              _this70.containerWidth = table.element.parentNode.clientWidth;\n            }\n\n            table.redraw();\n          }\n        }\n      });\n      this.observer.observe(table.element);\n      tableStyle = window.getComputedStyle(table.element);\n\n      if (this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))) {\n        this.containerObserver = new ResizeObserver(function (entry) {\n          if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n            var nodeHeight = Math.floor(entry[0].contentRect.height);\n            var nodeWidth = Math.floor(entry[0].contentRect.width);\n\n            if (_this70.containerHeight != nodeHeight || _this70.containerWidth != nodeWidth) {\n              _this70.containerHeight = nodeHeight;\n              _this70.containerWidth = nodeWidth;\n              _this70.tableHeight = table.element.clientHeight;\n              _this70.tableWidth = table.element.clientWidth;\n              table.redraw();\n            }\n\n            table.redraw();\n          }\n        });\n        this.containerObserver.observe(this.table.element.parentNode);\n      }\n    } else {\n      this.binding = function () {\n        if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n          table.redraw();\n        }\n      };\n\n      window.addEventListener(\"resize\", this.binding);\n    }\n  };\n\n  ResizeTable.prototype.clearBindings = function (row) {\n    if (this.binding) {\n      window.removeEventListener(\"resize\", this.binding);\n    }\n\n    if (this.observer) {\n      this.observer.unobserve(this.table.element);\n    }\n\n    if (this.containerObserver) {\n      this.containerObserver.unobserve(this.table.element.parentNode);\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"resizeTable\", ResizeTable);\n\n  var ResponsiveLayout = function ResponsiveLayout(table) {\n    this.table = table; //hold Tabulator object\n\n    this.columns = [];\n    this.hiddenColumns = [];\n    this.mode = \"\";\n    this.index = 0;\n    this.collapseFormatter = [];\n    this.collapseStartOpen = true;\n    this.collapseHandleColumn = false;\n  }; //generate resposive columns list\n\n\n  ResponsiveLayout.prototype.initialize = function () {\n    var self = this,\n        columns = [];\n    this.mode = this.table.options.responsiveLayout;\n    this.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n    this.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n    this.hiddenColumns = []; //detemine level of responsivity for each column\n\n    this.table.columnManager.columnsByIndex.forEach(function (column, i) {\n      if (column.modules.responsive) {\n        if (column.modules.responsive.order && column.modules.responsive.visible) {\n          column.modules.responsive.index = i;\n          columns.push(column);\n\n          if (!column.visible && self.mode === \"collapse\") {\n            self.hiddenColumns.push(column);\n          }\n        }\n      }\n    }); //sort list by responsivity\n\n    columns = columns.reverse();\n    columns = columns.sort(function (a, b) {\n      var diff = b.modules.responsive.order - a.modules.responsive.order;\n      return diff || b.modules.responsive.index - a.modules.responsive.index;\n    });\n    this.columns = columns;\n\n    if (this.mode === \"collapse\") {\n      this.generateCollapsedContent();\n    } //assign collapse column\n\n\n    for (var _iterator = this.table.columnManager.columnsByIndex, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var col = _ref;\n\n      if (col.definition.formatter == \"responsiveCollapse\") {\n        this.collapseHandleColumn = col;\n        break;\n      }\n    }\n\n    if (this.collapseHandleColumn) {\n      if (this.hiddenColumns.length) {\n        this.collapseHandleColumn.show();\n      } else {\n        this.collapseHandleColumn.hide();\n      }\n    }\n  }; //define layout information\n\n\n  ResponsiveLayout.prototype.initializeColumn = function (column) {\n    var def = column.getDefinition();\n    column.modules.responsive = {\n      order: typeof def.responsive === \"undefined\" ? 1 : def.responsive,\n      visible: def.visible === false ? false : true\n    };\n  };\n\n  ResponsiveLayout.prototype.initializeRow = function (row) {\n    var el;\n\n    if (row.type !== \"calc\") {\n      el = document.createElement(\"div\");\n      el.classList.add(\"tabulator-responsive-collapse\");\n      row.modules.responsiveLayout = {\n        element: el,\n        open: this.collapseStartOpen\n      };\n\n      if (!this.collapseStartOpen) {\n        el.style.display = 'none';\n      }\n    }\n  };\n\n  ResponsiveLayout.prototype.layoutRow = function (row) {\n    var rowEl = row.getElement();\n\n    if (row.modules.responsiveLayout) {\n      rowEl.appendChild(row.modules.responsiveLayout.element);\n      this.generateCollapsedRowContent(row);\n    }\n  }; //update column visibility\n\n\n  ResponsiveLayout.prototype.updateColumnVisibility = function (column, visible) {\n    var index;\n\n    if (column.modules.responsive) {\n      column.modules.responsive.visible = visible;\n      this.initialize();\n    }\n  };\n\n  ResponsiveLayout.prototype.hideColumn = function (column) {\n    var colCount = this.hiddenColumns.length;\n    column.hide(false, true);\n\n    if (this.mode === \"collapse\") {\n      this.hiddenColumns.unshift(column);\n      this.generateCollapsedContent();\n\n      if (this.collapseHandleColumn && !colCount) {\n        this.collapseHandleColumn.show();\n      }\n    }\n  };\n\n  ResponsiveLayout.prototype.showColumn = function (column) {\n    var index;\n    column.show(false, true); //set column width to prevent calculation loops on uninitialized columns\n\n    column.setWidth(column.getWidth());\n\n    if (this.mode === \"collapse\") {\n      index = this.hiddenColumns.indexOf(column);\n\n      if (index > -1) {\n        this.hiddenColumns.splice(index, 1);\n      }\n\n      this.generateCollapsedContent();\n\n      if (this.collapseHandleColumn && !this.hiddenColumns.length) {\n        this.collapseHandleColumn.hide();\n      }\n    }\n  }; //redraw columns to fit space\n\n\n  ResponsiveLayout.prototype.update = function () {\n    var self = this,\n        working = true;\n\n    while (working) {\n      var width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\n      var diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\n\n      if (diff < 0) {\n        //table is too wide\n        var column = self.columns[self.index];\n\n        if (column) {\n          self.hideColumn(column);\n          self.index++;\n        } else {\n          working = false;\n        }\n      } else {\n        //table has spare space\n        var _column = self.columns[self.index - 1];\n\n        if (_column) {\n          if (diff > 0) {\n            if (diff >= _column.getWidth()) {\n              self.showColumn(_column);\n              self.index--;\n            } else {\n              working = false;\n            }\n          } else {\n            working = false;\n          }\n        } else {\n          working = false;\n        }\n      }\n\n      if (!self.table.rowManager.activeRowsCount) {\n        self.table.rowManager.renderEmptyScroll();\n      }\n    }\n  };\n\n  ResponsiveLayout.prototype.generateCollapsedContent = function () {\n    var self = this,\n        rows = this.table.rowManager.getDisplayRows();\n    rows.forEach(function (row) {\n      self.generateCollapsedRowContent(row);\n    });\n  };\n\n  ResponsiveLayout.prototype.generateCollapsedRowContent = function (row) {\n    var el, contents;\n\n    if (row.modules.responsiveLayout) {\n      el = row.modules.responsiveLayout.element;\n\n      while (el.firstChild) {\n        el.removeChild(el.firstChild);\n      }\n\n      contents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\n      if (contents) {\n        el.appendChild(contents);\n      }\n    }\n  };\n\n  ResponsiveLayout.prototype.generateCollapsedRowData = function (row) {\n    var self = this,\n        data = row.getData(),\n        output = [],\n        mockCellComponent;\n    this.hiddenColumns.forEach(function (column) {\n      var value = column.getFieldValue(data);\n\n      if (column.definition.title && column.field) {\n        if (column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters) {\n          mockCellComponent = {\n            value: false,\n            data: {},\n            getValue: function getValue() {\n              return value;\n            },\n            getData: function getData() {\n              return data;\n            },\n            getElement: function getElement() {\n              return document.createElement(\"div\");\n            },\n            getRow: function getRow() {\n              return row.getComponent();\n            },\n            getColumn: function getColumn() {\n              return column.getComponent();\n            }\n          };\n          output.push({\n            title: column.definition.title,\n            value: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params)\n          });\n        } else {\n          output.push({\n            title: column.definition.title,\n            value: value\n          });\n        }\n      }\n    });\n    return output;\n  };\n\n  ResponsiveLayout.prototype.formatCollapsedData = function (data) {\n    var list = document.createElement(\"table\"),\n        listContents = \"\";\n    data.forEach(function (item) {\n      var div = document.createElement(\"div\");\n\n      if (item.value instanceof Node) {\n        div.appendChild(item.value);\n        item.value = div.innerHTML;\n      }\n\n      listContents += \"<tr><td><strong>\" + item.title + \"</strong></td><td>\" + item.value + \"</td></tr>\";\n    });\n    list.innerHTML = listContents;\n    return Object.keys(data).length ? list : \"\";\n  };\n\n  Tabulator.prototype.registerModule(\"responsiveLayout\", ResponsiveLayout);\n\n  var SelectRow = function SelectRow(table) {\n    this.table = table; //hold Tabulator object\n\n    this.selecting = false; //flag selecting in progress\n\n    this.lastClickedRow = false; //last clicked row\n\n    this.selectPrev = []; //hold previously selected element for drag drop selection\n\n    this.selectedRows = []; //hold selected rows\n\n    this.headerCheckboxElement = null; // hold header select element\n  };\n\n  SelectRow.prototype.clearSelectionData = function (silent) {\n    this.selecting = false;\n    this.lastClickedRow = false;\n    this.selectPrev = [];\n    this.selectedRows = [];\n\n    if (!silent) {\n      this._rowSelectionChanged();\n    }\n  };\n\n  SelectRow.prototype.initializeRow = function (row) {\n    var self = this,\n        element = row.getElement(); // trigger end of row selection\n\n    var endSelect = function endSelect() {\n      setTimeout(function () {\n        self.selecting = false;\n      }, 50);\n      document.body.removeEventListener(\"mouseup\", endSelect);\n    };\n\n    row.modules.select = {\n      selected: false\n    }; //set row selection class\n\n    if (self.table.options.selectableCheck.call(this.table, row.getComponent())) {\n      element.classList.add(\"tabulator-selectable\");\n      element.classList.remove(\"tabulator-unselectable\");\n\n      if (self.table.options.selectable && self.table.options.selectable != \"highlight\") {\n        if (self.table.options.selectableRangeMode === \"click\") {\n          element.addEventListener(\"click\", function (e) {\n            if (e.shiftKey) {\n              self.table._clearSelection();\n\n              self.lastClickedRow = self.lastClickedRow || row;\n              var lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\n              var rowIdx = self.table.rowManager.getDisplayRowIndex(row);\n              var fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n              var toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n              var rows = self.table.rowManager.getDisplayRows().slice(0);\n              var toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\n              if (e.ctrlKey || e.metaKey) {\n                toggledRows.forEach(function (toggledRow) {\n                  if (toggledRow !== self.lastClickedRow) {\n                    if (self.table.options.selectable !== true && !self.isRowSelected(row)) {\n                      if (self.selectedRows.length < self.table.options.selectable) {\n                        self.toggleRow(toggledRow);\n                      }\n                    } else {\n                      self.toggleRow(toggledRow);\n                    }\n                  }\n                });\n                self.lastClickedRow = row;\n              } else {\n                self.deselectRows(undefined, true);\n\n                if (self.table.options.selectable !== true) {\n                  if (toggledRows.length > self.table.options.selectable) {\n                    toggledRows = toggledRows.slice(0, self.table.options.selectable);\n                  }\n                }\n\n                self.selectRows(toggledRows);\n              }\n\n              self.table._clearSelection();\n            } else if (e.ctrlKey || e.metaKey) {\n              self.toggleRow(row);\n              self.lastClickedRow = row;\n            } else {\n              self.deselectRows(undefined, true);\n              self.selectRows(row);\n              self.lastClickedRow = row;\n            }\n          });\n        } else {\n          element.addEventListener(\"click\", function (e) {\n            if (!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()) {\n              self.table._clearSelection();\n            }\n\n            if (!self.selecting) {\n              self.toggleRow(row);\n            }\n          });\n          element.addEventListener(\"mousedown\", function (e) {\n            if (e.shiftKey) {\n              self.table._clearSelection();\n\n              self.selecting = true;\n              self.selectPrev = [];\n              document.body.addEventListener(\"mouseup\", endSelect);\n              document.body.addEventListener(\"keyup\", endSelect);\n              self.toggleRow(row);\n              return false;\n            }\n          });\n          element.addEventListener(\"mouseenter\", function (e) {\n            if (self.selecting) {\n              self.table._clearSelection();\n\n              self.toggleRow(row);\n\n              if (self.selectPrev[1] == row) {\n                self.toggleRow(self.selectPrev[0]);\n              }\n            }\n          });\n          element.addEventListener(\"mouseout\", function (e) {\n            if (self.selecting) {\n              self.table._clearSelection();\n\n              self.selectPrev.unshift(row);\n            }\n          });\n        }\n      }\n    } else {\n      element.classList.add(\"tabulator-unselectable\");\n      element.classList.remove(\"tabulator-selectable\");\n    }\n  }; //toggle row selection\n\n\n  SelectRow.prototype.toggleRow = function (row) {\n    if (this.table.options.selectableCheck.call(this.table, row.getComponent())) {\n      if (row.modules.select && row.modules.select.selected) {\n        this._deselectRow(row);\n      } else {\n        this._selectRow(row);\n      }\n    }\n  }; //select a number of rows\n\n\n  SelectRow.prototype.selectRows = function (rows) {\n    var _this71 = this;\n\n    var rowMatch;\n\n    switch (typeof rows === 'undefined' ? 'undefined' : _typeof(rows)) {\n      case \"undefined\":\n        this.table.rowManager.rows.forEach(function (row) {\n          _this71._selectRow(row, true, true);\n        });\n\n        this._rowSelectionChanged();\n\n        break;\n\n      case \"string\":\n        rowMatch = this.table.rowManager.findRow(rows);\n\n        if (rowMatch) {\n          this._selectRow(rowMatch, true, true);\n        } else {\n          this.table.rowManager.getRows(rows).forEach(function (row) {\n            _this71._selectRow(row, true, true);\n          });\n        }\n\n        this._rowSelectionChanged();\n\n        break;\n\n      default:\n        if (Array.isArray(rows)) {\n          rows.forEach(function (row) {\n            _this71._selectRow(row, true, true);\n          });\n\n          this._rowSelectionChanged();\n        } else {\n          this._selectRow(rows, false, true);\n        }\n\n        break;\n    }\n  }; //select an individual row\n\n\n  SelectRow.prototype._selectRow = function (rowInfo, silent, force) {\n    var index; //handle max row count\n\n    if (!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force) {\n      if (this.selectedRows.length >= this.table.options.selectable) {\n        if (this.table.options.selectableRollingSelection) {\n          this._deselectRow(this.selectedRows[0]);\n        } else {\n          return false;\n        }\n      }\n    }\n\n    var row = this.table.rowManager.findRow(rowInfo);\n\n    if (row) {\n      if (this.selectedRows.indexOf(row) == -1) {\n        if (!row.modules.select) {\n          row.modules.select = {};\n        }\n\n        row.modules.select.selected = true;\n\n        if (row.modules.select.checkboxEl) {\n          row.modules.select.checkboxEl.checked = true;\n        }\n\n        row.getElement().classList.add(\"tabulator-selected\");\n        this.selectedRows.push(row);\n\n        if (this.table.options.dataTreeSelectPropagate) {\n          this.childRowSelection(row, true);\n        }\n\n        if (!silent) {\n          this.table.options.rowSelected.call(this.table, row.getComponent());\n        }\n\n        this._rowSelectionChanged(silent);\n      }\n    } else {\n      if (!silent) {\n        console.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n      }\n    }\n  };\n\n  SelectRow.prototype.isRowSelected = function (row) {\n    return this.selectedRows.indexOf(row) !== -1;\n  }; //deselect a number of rows\n\n\n  SelectRow.prototype.deselectRows = function (rows, silent) {\n    var self = this,\n        rowCount;\n\n    if (typeof rows == \"undefined\") {\n      rowCount = self.selectedRows.length;\n\n      for (var i = 0; i < rowCount; i++) {\n        self._deselectRow(self.selectedRows[0], true);\n      }\n\n      self._rowSelectionChanged(silent);\n    } else {\n      if (Array.isArray(rows)) {\n        rows.forEach(function (row) {\n          self._deselectRow(row, true);\n        });\n\n        self._rowSelectionChanged(silent);\n      } else {\n        self._deselectRow(rows, silent);\n      }\n    }\n  }; //deselect an individual row\n\n\n  SelectRow.prototype._deselectRow = function (rowInfo, silent) {\n    var self = this,\n        row = self.table.rowManager.findRow(rowInfo),\n        index;\n\n    if (row) {\n      index = self.selectedRows.findIndex(function (selectedRow) {\n        return selectedRow == row;\n      });\n\n      if (index > -1) {\n        if (!row.modules.select) {\n          row.modules.select = {};\n        }\n\n        row.modules.select.selected = false;\n\n        if (row.modules.select.checkboxEl) {\n          row.modules.select.checkboxEl.checked = false;\n        }\n\n        row.getElement().classList.remove(\"tabulator-selected\");\n        self.selectedRows.splice(index, 1);\n\n        if (this.table.options.dataTreeSelectPropagate) {\n          this.childRowSelection(row, false);\n        }\n\n        if (!silent) {\n          self.table.options.rowDeselected.call(this.table, row.getComponent());\n        }\n\n        self._rowSelectionChanged(silent);\n      }\n    } else {\n      if (!silent) {\n        console.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n      }\n    }\n  };\n\n  SelectRow.prototype.getSelectedData = function () {\n    var data = [];\n    this.selectedRows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    return data;\n  };\n\n  SelectRow.prototype.getSelectedRows = function () {\n    var rows = [];\n    this.selectedRows.forEach(function (row) {\n      rows.push(row.getComponent());\n    });\n    return rows;\n  };\n\n  SelectRow.prototype._rowSelectionChanged = function (silent) {\n    if (this.headerCheckboxElement) {\n      if (this.selectedRows.length === 0) {\n        this.headerCheckboxElement.checked = false;\n        this.headerCheckboxElement.indeterminate = false;\n      } else if (this.table.rowManager.rows.length === this.selectedRows.length) {\n        this.headerCheckboxElement.checked = true;\n        this.headerCheckboxElement.indeterminate = false;\n      } else {\n        this.headerCheckboxElement.indeterminate = true;\n        this.headerCheckboxElement.checked = false;\n      }\n    }\n\n    if (!silent) {\n      this.table.options.rowSelectionChanged.call(this.table, this.getSelectedData(), this.getSelectedRows());\n    }\n  };\n\n  SelectRow.prototype.registerRowSelectCheckbox = function (row, element) {\n    if (!row._row.modules.select) {\n      row._row.modules.select = {};\n    }\n\n    row._row.modules.select.checkboxEl = element;\n  };\n\n  SelectRow.prototype.registerHeaderSelectCheckbox = function (element) {\n    this.headerCheckboxElement = element;\n  };\n\n  SelectRow.prototype.childRowSelection = function (row, select) {\n    var children = this.table.modules.dataTree.getChildren(row);\n\n    if (select) {\n      for (var _iterator2 = children, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) break;\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) break;\n          _ref2 = _i2.value;\n        }\n\n        var child = _ref2;\n\n        this._selectRow(child, true);\n      }\n    } else {\n      for (var _iterator3 = children, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n        var _ref3;\n\n        if (_isArray3) {\n          if (_i3 >= _iterator3.length) break;\n          _ref3 = _iterator3[_i3++];\n        } else {\n          _i3 = _iterator3.next();\n          if (_i3.done) break;\n          _ref3 = _i3.value;\n        }\n\n        var _child = _ref3;\n\n        this._deselectRow(_child, true);\n      }\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"selectRow\", SelectRow);\n\n  var Sort = function Sort(table) {\n    this.table = table; //hold Tabulator object\n\n    this.sortList = []; //holder current sort\n\n    this.changed = false; //has the sort changed since last render\n  }; //initialize column header for sorting\n\n\n  Sort.prototype.initializeColumn = function (column, content) {\n    var self = this,\n        sorter = false,\n        colEl,\n        arrowEl;\n\n    switch (_typeof(column.definition.sorter)) {\n      case \"string\":\n        if (self.sorters[column.definition.sorter]) {\n          sorter = self.sorters[column.definition.sorter];\n        } else {\n          console.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n        }\n\n        break;\n\n      case \"function\":\n        sorter = column.definition.sorter;\n        break;\n    }\n\n    column.modules.sort = {\n      sorter: sorter,\n      dir: \"none\",\n      params: column.definition.sorterParams || {},\n      startingDir: column.definition.headerSortStartingDir || \"asc\",\n      tristate: typeof column.definition.headerSortTristate !== \"undefined\" ? column.definition.headerSortTristate : this.table.options.headerSortTristate\n    };\n\n    if (typeof column.definition.headerSort === \"undefined\" ? this.table.options.headerSort !== false : column.definition.headerSort !== false) {\n      colEl = column.getElement();\n      colEl.classList.add(\"tabulator-sortable\");\n      arrowEl = document.createElement(\"div\");\n      arrowEl.classList.add(\"tabulator-arrow\"); //create sorter arrow\n\n      content.appendChild(arrowEl); //sort on click\n\n      colEl.addEventListener(\"click\", function (e) {\n        var dir = \"\",\n            sorters = [],\n            match = false;\n\n        if (column.modules.sort) {\n          if (column.modules.sort.tristate) {\n            if (column.modules.sort.dir == \"none\") {\n              dir = column.modules.sort.startingDir;\n            } else {\n              if (column.modules.sort.dir == column.modules.sort.startingDir) {\n                dir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n              } else {\n                dir = \"none\";\n              }\n            }\n          } else {\n            switch (column.modules.sort.dir) {\n              case \"asc\":\n                dir = \"desc\";\n                break;\n\n              case \"desc\":\n                dir = \"asc\";\n                break;\n\n              default:\n                dir = column.modules.sort.startingDir;\n            }\n          }\n\n          if (self.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n            sorters = self.getSort();\n            match = sorters.findIndex(function (sorter) {\n              return sorter.field === column.getField();\n            });\n\n            if (match > -1) {\n              sorters[match].dir = dir;\n\n              if (match != sorters.length - 1) {\n                match = sorters.splice(match, 1)[0];\n\n                if (dir != \"none\") {\n                  sorters.push(match);\n                }\n              }\n            } else {\n              if (dir != \"none\") {\n                sorters.push({\n                  column: column,\n                  dir: dir\n                });\n              }\n            } //add to existing sort\n\n\n            self.setSort(sorters);\n          } else {\n            if (dir == \"none\") {\n              self.clear();\n            } else {\n              //sort by column only\n              self.setSort(column, dir);\n            }\n          }\n\n          self.table.rowManager.sorterRefresh(!self.sortList.length);\n        }\n      });\n    }\n  }; //check if the sorters have changed since last use\n\n\n  Sort.prototype.hasChanged = function () {\n    var changed = this.changed;\n    this.changed = false;\n    return changed;\n  }; //return current sorters\n\n\n  Sort.prototype.getSort = function () {\n    var self = this,\n        sorters = [];\n    self.sortList.forEach(function (item) {\n      if (item.column) {\n        sorters.push({\n          column: item.column.getComponent(),\n          field: item.column.getField(),\n          dir: item.dir\n        });\n      }\n    });\n    return sorters;\n  }; //change sort list and trigger sort\n\n\n  Sort.prototype.setSort = function (sortList, dir) {\n    var self = this,\n        newSortList = [];\n\n    if (!Array.isArray(sortList)) {\n      sortList = [{\n        column: sortList,\n        dir: dir\n      }];\n    }\n\n    sortList.forEach(function (item) {\n      var column;\n      column = self.table.columnManager.findColumn(item.column);\n\n      if (column) {\n        item.column = column;\n        newSortList.push(item);\n        self.changed = true;\n      } else {\n        console.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n      }\n    });\n    self.sortList = newSortList;\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.sort) {\n      this.table.modules.persistence.save(\"sort\");\n    }\n  }; //clear sorters\n\n\n  Sort.prototype.clear = function () {\n    this.setSort([]);\n  }; //find appropriate sorter for column\n\n\n  Sort.prototype.findSorter = function (column) {\n    var row = this.table.rowManager.activeRows[0],\n        sorter = \"string\",\n        field,\n        value;\n\n    if (row) {\n      row = row.getData();\n      field = column.getField();\n\n      if (field) {\n        value = column.getFieldValue(row);\n\n        switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n          case \"undefined\":\n            sorter = \"string\";\n            break;\n\n          case \"boolean\":\n            sorter = \"boolean\";\n            break;\n\n          default:\n            if (!isNaN(value) && value !== \"\") {\n              sorter = \"number\";\n            } else {\n              if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n                sorter = \"alphanum\";\n              }\n            }\n\n            break;\n        }\n      }\n    }\n\n    return this.sorters[sorter];\n  }; //work through sort list sorting data\n\n\n  Sort.prototype.sort = function (data) {\n    var self = this,\n        sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n        sortListActual = [],\n        lastSort;\n\n    if (self.table.options.dataSorting) {\n      self.table.options.dataSorting.call(self.table, self.getSort());\n    }\n\n    self.clearColumnHeaders();\n\n    if (!self.table.options.ajaxSorting) {\n      //build list of valid sorters and trigger column specific callbacks before sort begins\n      sortList.forEach(function (item, i) {\n        var sortObj = item.column.modules.sort;\n\n        if (item.column && sortObj) {\n          //if no sorter has been defined, take a guess\n          if (!sortObj.sorter) {\n            sortObj.sorter = self.findSorter(item.column);\n          }\n\n          item.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n          sortListActual.push(item);\n        }\n\n        self.setColumnHeader(item.column, item.dir);\n      }); //sort data\n\n      if (sortListActual.length) {\n        self._sortItems(data, sortListActual);\n      }\n    } else {\n      sortList.forEach(function (item, i) {\n        self.setColumnHeader(item.column, item.dir);\n      });\n    }\n\n    if (self.table.options.dataSorted) {\n      self.table.options.dataSorted.call(self.table, self.getSort(), self.table.rowManager.getComponents(\"active\"));\n    }\n  }; //clear sort arrows on columns\n\n\n  Sort.prototype.clearColumnHeaders = function () {\n    this.table.columnManager.getRealColumns().forEach(function (column) {\n      if (column.modules.sort) {\n        column.modules.sort.dir = \"none\";\n        column.getElement().setAttribute(\"aria-sort\", \"none\");\n      }\n    });\n  }; //set the column header sort direction\n\n\n  Sort.prototype.setColumnHeader = function (column, dir) {\n    column.modules.sort.dir = dir;\n    column.getElement().setAttribute(\"aria-sort\", dir);\n  }; //sort each item in sort list\n\n\n  Sort.prototype._sortItems = function (data, sortList) {\n    var _this72 = this;\n\n    var sorterCount = sortList.length - 1;\n    data.sort(function (a, b) {\n      var result;\n\n      for (var i = sorterCount; i >= 0; i--) {\n        var sortItem = sortList[i];\n        result = _this72._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n        if (result !== 0) {\n          break;\n        }\n      }\n\n      return result;\n    });\n  }; //process individual rows for a sort function on active data\n\n\n  Sort.prototype._sortRow = function (a, b, column, dir, params) {\n    var el1Comp, el2Comp, colComp; //switch elements depending on search direction\n\n    var el1 = dir == \"asc\" ? a : b;\n    var el2 = dir == \"asc\" ? b : a;\n    a = column.getFieldValue(el1.getData());\n    b = column.getFieldValue(el2.getData());\n    a = typeof a !== \"undefined\" ? a : \"\";\n    b = typeof b !== \"undefined\" ? b : \"\";\n    el1Comp = el1.getComponent();\n    el2Comp = el2.getComponent();\n    return column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n  }; //default data sorters\n\n\n  Sort.prototype.sorters = {\n    //sort numbers\n    number: function number(a, b, aRow, bRow, column, dir, params) {\n      var alignEmptyValues = params.alignEmptyValues;\n      var decimal = params.decimalSeparator || \".\";\n      var thousand = params.thousandSeparator || \",\";\n      var emptyAlign = 0;\n      a = parseFloat(String(a).split(thousand).join(\"\").split(decimal).join(\".\"));\n      b = parseFloat(String(b).split(thousand).join(\"\").split(decimal).join(\".\")); //handle non numeric values\n\n      if (isNaN(a)) {\n        emptyAlign = isNaN(b) ? 0 : -1;\n      } else if (isNaN(b)) {\n        emptyAlign = 1;\n      } else {\n        //compare valid values\n        return a - b;\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    },\n    //sort strings\n    string: function string(a, b, aRow, bRow, column, dir, params) {\n      var alignEmptyValues = params.alignEmptyValues;\n      var emptyAlign = 0;\n      var locale; //handle empty values\n\n      if (!a) {\n        emptyAlign = !b ? 0 : -1;\n      } else if (!b) {\n        emptyAlign = 1;\n      } else {\n        //compare valid values\n        switch (_typeof(params.locale)) {\n          case \"boolean\":\n            if (params.locale) {\n              locale = this.table.modules.localize.getLocale();\n            }\n\n            break;\n\n          case \"string\":\n            locale = params.locale;\n            break;\n        }\n\n        return String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    },\n    //sort date\n    date: function date(a, b, aRow, bRow, column, dir, params) {\n      if (!params.format) {\n        params.format = \"DD/MM/YYYY\";\n      }\n\n      return this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n    },\n    //sort hh:mm formatted times\n    time: function time(a, b, aRow, bRow, column, dir, params) {\n      if (!params.format) {\n        params.format = \"hh:mm\";\n      }\n\n      return this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n    },\n    //sort datetime\n    datetime: function datetime(a, b, aRow, bRow, column, dir, params) {\n      var format = params.format || \"DD/MM/YYYY hh:mm:ss\",\n          alignEmptyValues = params.alignEmptyValues,\n          emptyAlign = 0;\n\n      if (typeof moment != \"undefined\") {\n        a = moment(a, format);\n        b = moment(b, format);\n\n        if (!a.isValid()) {\n          emptyAlign = !b.isValid() ? 0 : -1;\n        } else if (!b.isValid()) {\n          emptyAlign = 1;\n        } else {\n          //compare valid values\n          return a - b;\n        } //fix empty values in position\n\n\n        if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n          emptyAlign *= -1;\n        }\n\n        return emptyAlign;\n      } else {\n        console.error(\"Sort Error - 'datetime' sorter is dependant on moment.js\");\n      }\n    },\n    //sort booleans\n    boolean: function boolean(a, b, aRow, bRow, column, dir, params) {\n      var el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n      var el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n      return el1 - el2;\n    },\n    //sort if element contains any data\n    array: function array(a, b, aRow, bRow, column, dir, params) {\n      var el1 = 0;\n      var el2 = 0;\n      var type = params.type || \"length\";\n      var alignEmptyValues = params.alignEmptyValues;\n      var emptyAlign = 0;\n\n      function calc(value) {\n        switch (type) {\n          case \"length\":\n            return value.length;\n            break;\n\n          case \"sum\":\n            return value.reduce(function (c, d) {\n              return c + d;\n            });\n            break;\n\n          case \"max\":\n            return Math.max.apply(null, value);\n            break;\n\n          case \"min\":\n            return Math.min.apply(null, value);\n            break;\n\n          case \"avg\":\n            return value.reduce(function (c, d) {\n              return c + d;\n            }) / value.length;\n            break;\n        }\n      } //handle non array values\n\n\n      if (!Array.isArray(a)) {\n        alignEmptyValues = !Array.isArray(b) ? 0 : -1;\n      } else if (!Array.isArray(b)) {\n        alignEmptyValues = 1;\n      } else {\n        //compare valid values\n        el1 = a ? calc(a) : 0;\n        el2 = b ? calc(b) : 0;\n        return el1 - el2;\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    },\n    //sort if element contains any data\n    exists: function exists(a, b, aRow, bRow, column, dir, params) {\n      var el1 = typeof a == \"undefined\" ? 0 : 1;\n      var el2 = typeof b == \"undefined\" ? 0 : 1;\n      return el1 - el2;\n    },\n    //sort alpha numeric strings\n    alphanum: function alphanum(as, bs, aRow, bRow, column, dir, params) {\n      var a,\n          b,\n          a1,\n          b1,\n          i = 0,\n          L,\n          rx = /(\\d+)|(\\D+)/g,\n          rd = /\\d/;\n      var alignEmptyValues = params.alignEmptyValues;\n      var emptyAlign = 0; //handle empty values\n\n      if (!as && as !== 0) {\n        emptyAlign = !bs && bs !== 0 ? 0 : -1;\n      } else if (!bs && bs !== 0) {\n        emptyAlign = 1;\n      } else {\n        if (isFinite(as) && isFinite(bs)) return as - bs;\n        a = String(as).toLowerCase();\n        b = String(bs).toLowerCase();\n        if (a === b) return 0;\n        if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n        a = a.match(rx);\n        b = b.match(rx);\n        L = a.length > b.length ? b.length : a.length;\n\n        while (i < L) {\n          a1 = a[i];\n          b1 = b[i++];\n\n          if (a1 !== b1) {\n            if (isFinite(a1) && isFinite(b1)) {\n              if (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n              if (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n              return a1 - b1;\n            } else return a1 > b1 ? 1 : -1;\n          }\n        }\n\n        return a.length > b.length;\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    }\n  };\n  Tabulator.prototype.registerModule(\"sort\", Sort);\n\n  var Validate = function Validate(table) {\n    this.table = table;\n  }; //validate\n\n\n  Validate.prototype.initializeColumn = function (column) {\n    var self = this,\n        config = [],\n        validator;\n\n    if (column.definition.validator) {\n      if (Array.isArray(column.definition.validator)) {\n        column.definition.validator.forEach(function (item) {\n          validator = self._extractValidator(item);\n\n          if (validator) {\n            config.push(validator);\n          }\n        });\n      } else {\n        validator = this._extractValidator(column.definition.validator);\n\n        if (validator) {\n          config.push(validator);\n        }\n      }\n\n      column.modules.validate = config.length ? config : false;\n    }\n  };\n\n  Validate.prototype._extractValidator = function (value) {\n    var type, params, pos;\n\n    switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n      case \"string\":\n        pos = value.indexOf(':');\n\n        if (pos > -1) {\n          type = value.substring(0, pos);\n          params = value.substring(pos + 1);\n        } else {\n          type = value;\n        }\n\n        return this._buildValidator(type, params);\n        break;\n\n      case \"function\":\n        return this._buildValidator(value);\n        break;\n\n      case \"object\":\n        return this._buildValidator(value.type, value.parameters);\n        break;\n    }\n  };\n\n  Validate.prototype._buildValidator = function (type, params) {\n    var func = typeof type == \"function\" ? type : this.validators[type];\n\n    if (!func) {\n      console.warn(\"Validator Setup Error - No matching validator found:\", type);\n      return false;\n    } else {\n      return {\n        type: typeof type == \"function\" ? \"function\" : type,\n        func: func,\n        params: params\n      };\n    }\n  };\n\n  Validate.prototype.validate = function (validators, cell, value) {\n    var self = this,\n        valid = [];\n\n    if (validators) {\n      validators.forEach(function (item) {\n        if (!item.func.call(self, cell, value, item.params)) {\n          valid.push({\n            type: item.type,\n            parameters: item.params\n          });\n        }\n      });\n    }\n\n    return valid.length ? valid : true;\n  };\n\n  Validate.prototype.validators = {\n    //is integer\n    integer: function integer(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      value = Number(value);\n      return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n    },\n    //is float\n    float: function float(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      value = Number(value);\n      return typeof value === 'number' && isFinite(value) && value % 1 !== 0;\n    },\n    //must be a number\n    numeric: function numeric(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return !isNaN(value);\n    },\n    //must be a string\n    string: function string(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return isNaN(value);\n    },\n    //maximum value\n    max: function max(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return parseFloat(value) <= parameters;\n    },\n    //minimum value\n    min: function min(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return parseFloat(value) >= parameters;\n    },\n    //minimum string length\n    minLength: function minLength(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return String(value).length >= parameters;\n    },\n    //maximum string length\n    maxLength: function maxLength(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return String(value).length <= parameters;\n    },\n    //in provided value list\n    in: function _in(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      if (typeof parameters == \"string\") {\n        parameters = parameters.split(\"|\");\n      }\n\n      return value === \"\" || parameters.indexOf(value) > -1;\n    },\n    //must match provided regex\n    regex: function regex(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      var reg = new RegExp(parameters);\n      return reg.test(value);\n    },\n    //value must be unique in this column\n    unique: function unique(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      var unique = true;\n      var cellData = cell.getData();\n\n      var column = cell.getColumn()._getSelf();\n\n      this.table.rowManager.rows.forEach(function (row) {\n        var data = row.getData();\n\n        if (data !== cellData) {\n          if (value == column.getFieldValue(data)) {\n            unique = false;\n          }\n        }\n      });\n      return unique;\n    },\n    //must have a value\n    required: function required(cell, value, parameters) {\n      return value !== \"\" && value !== null && typeof value !== \"undefined\";\n    }\n  };\n  Tabulator.prototype.registerModule(\"validate\", Validate);\n  return Tabulator;\n});","map":{"version":3,"sources":["D:/TraniningGlobits/baitap_level2/client/react/node_modules/tabulator-tables/dist/js/tabulator.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","global","factory","exports","module","define","amd","Tabulator","Array","findIndex","Object","defineProperty","value","predicate","TypeError","o","len","length","thisArg","arguments","k","kValue","call","find","undefined","ColumnManager","table","blockHozScrollEvent","headersElement","createHeadersElement","element","createHeaderElement","rowManager","columns","columnsByIndex","columnsByField","scrollLeft","insertBefore","firstChild","el","document","createElement","classList","add","options","headerVisible","initialize","self","setRowManager","manager","getElement","getHeadersElement","scrollHorizontal","left","hozAdjust","scrollWidth","clientWidth","style","marginLeft","modExists","modules","frozenColumns","generateColumnsFromRowData","data","cols","row","sorter","key","col","field","title","isArray","isNaN","match","push","setColumns","removeChild","reset","forEach","def","i","_addColumn","_reIndexColumns","responsiveLayout","redraw","definition","before","nextToColumn","column","Column","colEl","index","findColumnIndex","parentIndex","indexOf","getTopColumn","nextEl","splice","parentNode","nextSibling","unshift","appendChild","columnRendered","registerColumnField","registerColumnPosition","reRegisterPosition","_verticalAlignHeaders","minHeight","height","clearVerticalAlign","getHeight","verticalAlign","columnHeaderVertAlign","adjustTableSize","findColumn","subject","ColumnComponent","_getSelf","HTMLElement","getColumnByField","getColumnsByFieldRoot","root","_this","matches","keys","fieldRoot","split","getColumnByIndex","getFirstVisibileColumn","visible","getColumns","getRealColumns","traverse","callback","getDefinitions","active","output","getDefinition","getDefinitionTree","getComponents","structured","getComponent","getWidth","width","moveColumn","from","to","after","moveColumnActual","columnCalcs","recalc","activeRows","reinitialize","parent","isGroup","_moveColumnInArray","columnMoved","columnManager","persistence","config","save","updateRows","fromIndex","toIndex","rows","cells","cell","scrollToColumn","position","ifVisible","_this2","offset","adjust","Promise","resolve","reject","scrollToColumnPosition","scrollToColumnIfVisible","offsetLeft","offsetWidth","Math","max","min","console","warn","generateCells","generateCell","getFlexBaseWidth","totalWidth","fixedWidth","scrollHeight","clientHeight","minWidth","colWidth","columnMinWidth","parseInt","addColumn","_this3","layout","getMode","reinitializeWidth","deregisterColumn","getField","force","helpers","elVisible","resetScroll","update","footerManager","_column","type","getCells","getVisibility","show","hide","toggle","delete","getSubColumns","getParentColumn","scrollTo","getTable","headerFilterFocus","filter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","move","toColumn","getNextColumn","nextCol","nextColumn","getPrevColumn","prevCol","prevColumn","updateDefinition","updates","contentElement","titleElement","groupElement","createGroupElement","tooltip","hozAlign","vertAlign","fieldStructure","getFieldValue","setFieldValue","titleFormatterRendered","setField","invalidOptionWarnings","checkDefinition","cellEvents","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","widthStyled","minWidthStyled","widthFixed","_mapDepricatedFunctionality","newCol","attachColumn","checkColumnVisibility","rowHandle","movableRows","moveRow","setHandle","_buildHeader","bindModuleColumns","setAttribute","_this4","defaultOptionList","nestedFieldSeparator","_getNestedData","_getFlatData","_setNestedData","_setFlatData","hideInHtml","htmlOutput","align","setTooltip","headerTooltip","tooltipsHeader","localize","bind","headerVertical","_bindEvents","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","resizableColumns","resizeColumns","initializeColumn","headerFilter","headerFilterPlaceholder","setHeaderFilterColumnPlaceholder","movableColumns","topCalc","bottomCalc","addEventListener","e","dblTap","tapHold","tap","headerClick","headerDblClick","headerContext","headerTap","passive","headerDblTap","clearTimeout","setTimeout","headerTapHold","cellEdited","cellEditing","cellEditCancelled","sortable","sort","headerContextMenu","headerMenu","menu","initializeColumnHeader","format","editor","edit","validator","validate","mutator","accessor","cssClass","classeNames","className","setMinWidth","tooltips","cellHozAlign","cellVertAlign","_buildColumnHeaderTitle","titleHolderElement","editableTitle","stopPropagation","focus","columnTitleChanged","text","_formatColumnHeaderTitle","_this5","formatter","contents","params","mockCell","onRendered","titleFormatter","getFormatter","getValue","titleFormatterParams","Node","innerHTML","_this6","dataObj","structure","alignment","parentHeight","getGroupElement","offsetHeight","paddingTop","rowNumColumn","getFirstColumn","getLastColumn","updateBranches","colDefs","columnVisibilityChanged","silent","responsiveToggle","display","updateColumnVisibility","matchChildWidths","childWidth","maxWidth","setWidth","setWidthActual","floor","checkCellHeights","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","_this7","currentCell","cancelEdit","cellCount","Cell","_nextVisibleColumn","_prevVisibleColumn","hideHeaderFilterElements","fitToData","showHeaderFilterElements","clearWidth","_this8","assign","then","catch","err","deleteCell","RowManager","createHolderElement","tableElement","createTableElement","heightFixer","firstRender","renderMode","fixedHeight","activeRowsCount","displayRows","displayRowsCount","scrollTop","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","redrawBlock","redrawBlockRestoreConfig","redrawBlockRederInPosition","getTableElement","getRowPosition","setColumnManager","setRenderMode","groupBy","groupRows","scrollHeaders","top","dir","scrollVertical","ajaxProgressiveLoad","ajax","nextPage","findRow","Row","RowComponent","_match","getRowFromDataObject","getRowFromPosition","scrollToRow","_this9","rowIndex","getDisplayRows","rowEl","rowTop","scrollToRowPosition","scrollToRowIfVisible","elOffset","abs","_virtualRenderFill","offsetTop","setData","renderInPosition","columnsChanged","_this10","pagination","_setDataActual","reRenderInPosition","autoColumns","dataLoading","_wipeElements","history","clear","selectRow","clearSelectionData","reactiveData","watchData","dataLoaded","refreshActiveData","error","wipe","deleteRow","blockRedraw","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","regenerateRowNumbers","rowDeleted","dataEdited","getData","updateGroupRows","addRow","pos","addRowActual","action","addRows","_this11","findAddRowPos","reverse","item","addRowPos","dispRows","paginationAddRow","page","getPageSize","assignRowToGroup","getGroup","_moveRowInArray","rowAdded","posFrom","posTo","moveRowActual","rowMoved","_this12","Group","prevDisplayRow","toGroup","fromGroup","removeRow","insertRow","start","end","styleRow","clearData","getRowIndex","findRowIndex","getDisplayRowIndex","nextDisplayRow","rowOnly","nextRow","prevRow","list","transform","getRows","getDataCount","_genRemoteRequest","_this13","ajaxSorting","sorters","getSort","paginationDataSentNames","ajaxFiltering","filters","getFilters","setParams","sendRequest","filterRefresh","setPage","loadData","sorterRefresh","loadOrignalData","progressiveLoad","stage","skipStage","cascadeOrder","selectable","selectablePersistence","deselectRows","slice","resetDisplayRows","frozenRows","isFrozen","getDisplayIndex","setDisplayIndex","getNextDisplayIndex","setDisplayRows","dataTree","setMaxRows","renderTable","layoutColumnsOnNewData","_this14","getCell","_generateContents","getVisibleRows","viewable","topEdge","bottomEdge","topFound","topRow","bottomRow","getRenderMode","topOffset","diff","virtualDom","renderStarted","_simpleRender","renderEmptyScroll","placeholder","renderComplete","_clearVirtualDom","checkClassicModeGroupHeaderWidth","onlyGroupHeaders","visibility","paddingBottom","remove","forceMove","holder","topPad","rowsHeight","topPadHeight","heightOccupied","ceil","rowHeight","initialized","normalizeHeight","vDomScrollHeight","countGroups","topDiff","bottomDiff","margin","_addTopRow","_removeBottomRow","_removeTopRow","_addBottomRow","topRowHeight","_quickNormalizeRowHeight","bottomRowHeight","initialHeight","otherHeight","external","maxHeight","virtualDomBuffer","resizeTable","autoResize","restoreRedraw","tableWidth","browser","event","createEvent","initEvent","dispatchEvent","Event","_row","getIndex","getPosition","pageTo","setPageToRow","moveToRow","updateData","select","selectRows","deselect","toggleSelect","toggleRow","isSelected","isRowSelected","freeze","freezeRow","unfreeze","unfreezeRow","treeCollapse","collapseRow","treeExpand","expandRow","treeToggle","getTreeParent","getTreeChildren","reformat","getNextRow","getPrevRow","heightStyled","manualHeight","outerHeight","generateElement","detachElement","initializeRow","rowContextMenu","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowTap","rowDblTap","rowTapHold","deleteCells","layoutRow","cellRendered","rowFormatter","resizableRows","resizeRows","reinitializeHeight","setHeight","clearHeight","transformRow","watchRow","updatedData","_this15","tempData","newRowData","JSON","parse","block","attrname","unblock","setValueProcessData","redrawNeeded","rowUpdated","getCellIndex","findCell","findNextEditableCell","nextCell","allowEdit","check","findPrevEditableCell","prevCell","toRow","_this16","deleteActual","_deselectRow","group","recalcRowGroup","CellComponent","_cell","getOldValue","getRow","getColumn","setValue","mutate","restoreOldValue","setValueActual","nav","checkHeight","oldValue","build","_configureCell","vertAligns","bottom","middle","hozAligns","right","center","textAlign","alignItems","justifyContent","classNames","tooltipGenerationMode","_generateTooltip","_bindClickEvents","_bindTouchEvents","_bindMouseEvents","bindEditor","initializeCell","component","preventDefault","selection","range","body","createTextRange","moveToElementText","window","getSelection","createRange","selectNode","removeAllRanges","addRange","val","formatValue","changed","newValue","transformCell","contextMenu","layoutElement","editCell","editing","getCurrentCell","calcs","next","prev","up","down","FooterManager","links","_initialize","footerElement","querySelector","append","activate","prepend","deactivate","link","footerRedraw","browserSlow","browserMobile","initializeElement","initializeOptions","_create","comms","register","defaultOptions","columnVertAlign","initialSort","initialFilter","initialHeaderFilter","columnHeaderSortMulti","sortOrderReverse","headerSort","headerSortTristate","keybindings","tabEndNewRow","clipboard","clipboardCopyStyled","clipboardCopyConfig","clipboardCopyFormatter","clipboardCopyRowRange","clipboardPasteParser","clipboardPasteAction","clipboardCopied","clipboardPasted","clipboardPasteError","downloadDataFormatter","downloadReady","blob","downloadComplete","downloadConfig","dataTreeElementColumn","dataTreeBranchElement","dataTreeChildIndent","dataTreeChildField","dataTreeCollapseElement","dataTreeExpandElement","dataTreeStartExpanded","dataTreeRowExpanded","dataTreeRowCollapsed","dataTreeChildColumnCalcs","dataTreeSelectPropagate","printAsHtml","printFormatter","printHeader","printFooter","printCopyStyle","printStyled","printVisibleRows","printRowRange","printConfig","selectableRangeMode","selectableRollingSelection","selectableCheck","headerFilterLiveFilterDelay","locale","langs","persistentLayout","persistentSort","persistentFilter","persistenceID","persistenceMode","persistenceReaderFunc","persistenceWriterFunc","responsiveLayoutCollapseStartOpen","responsiveLayoutCollapseUseFormatters","responsiveLayoutCollapseFormatter","paginationSize","paginationInitialPage","paginationButtonCount","paginationSizeSelector","paginationElement","paginationDataSent","paginationDataReceived","ajaxURL","ajaxURLGenerator","ajaxParams","ajaxConfig","ajaxContentType","ajaxRequestFunc","ajaxLoader","ajaxLoaderLoading","ajaxLoaderError","ajaxProgressiveLoadDelay","ajaxProgressiveLoadScrollMargin","groupStartOpen","groupValues","groupHeader","htmlOutputConfig","movableRowsConnectedTables","movableRowsSender","movableRowsReceiver","movableRowsSendingStart","movableRowsSent","movableRowsSentFailed","movableRowsSendingStop","movableRowsReceivingStart","movableRowsReceived","movableRowsReceivedFailed","movableRowsReceivingStop","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","tableBuilding","tableBuilt","rowSelectionChanged","rowSelected","rowDeselected","rowResized","columnResized","htmlImporting","htmlImported","ajaxRequesting","ajaxResponse","ajaxError","dataFiltering","dataFiltered","dataSorting","dataSorted","groupToggleElement","groupClosedShowCalcs","dataGrouping","dataGrouped","groupVisibilityChanged","groupClick","groupDblClick","groupContext","groupTap","groupDblTap","groupTapHold","pageLoaded","localized","validationFailed","historyUndo","historyRedo","clipboardCopyHeader","columnHeaders","_clearSelection","empty","_clearObjectPointers","bindModules","tagName","htmlTableImport","parseTable","_buildElement","_loadInitialData","_this17","mod","_detectBrowser","setHeaderFilterPlaceholder","installLang","setLocale","span","load","setSort","setFilter","print","destroy","deregister","unwatchData","clearBindings","ua","navigator","userAgent","vendor","opera","test","substr","setDataFromLocalFile","extensions","_this18","input","accept","file","files","reader","FileReader","readAsText","onload","result","_setData","onerror","click","blockActiveRequest","inPosition","setConfig","setUrl","getUrl","searchRows","search","searchData","getHtml","export","printFullscreen","getAjaxUrl","replaceData","_this19","responses","addData","_this20","updateOrAddData","_this21","newRows","_this22","count","successCount","foundRows","doneCheck","a","b","_this23","updateOrAddRow","_this24","updateRow","_this25","_this26","fromRow","copyToClipboard","selector","copy","getColumnDefinitions","getColumnLayout","parseColumns","setColumnLayout","mergeDefinition","showColumn","hideColumn","toggleColumn","_this27","deleteColumn","_this28","updateColumnDefinition","_this29","fromColumn","_this30","getLocale","getLang","sortList","getSorters","clearSort","addFilter","all","getHeaderFilters","removeFilter","clearFilter","clearHeaderFilter","deselectRow","toggleSelectRow","getSelectedRows","getSelectedData","setMaxPage","_this31","setPageSize","size","previousPage","getPage","getPageMax","setGroupBy","groups","setGroupStartOpen","values","setGroupHeader","getGroups","getGroupedData","getCalcResults","getResults","recalcAll","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","undo","redo","getHistoryUndoSize","getHistoryRedoSize","download","filename","downloadToTab","tableComms","receive","moduleBindings","extendModule","name","property","source","registerModule","plugin","required","box","getBoundingClientRect","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","deepClone","clone","Date","tables","lookupTable","query","results","querySelectorAll","matchElement","concat","findTable","Layout","mode","modes","fitData","fitDataFill","fitDataStretch","_this32","colsWidth","gap","lastCol","responsive","fitColumns","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","nextColWidth","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","Localize","lang","bindings","default","headerFilters","_setLangProp","desiredLocale","traverseLang","trans","path","prop","language","toLowerCase","prefix","_executeBindings","getText","pathArray","_getLangElement","level","rootPath","_loop","binding","Comms","getConnections","selectors","connections","connection","con","send","commsReceived","Accessor","allowedTypes","charAt","toUpperCase","lookupAccessor","accessors","dataIn","Ajax","url","urlGenerator","loaderElement","createLoaderElement","msgElement","createMsgElement","loadingElement","errorElement","loaderPromise","loading","requestOrder","template","trim","content","defaultLoaderPromise","defaultURLGenerator","initializeProgressive","getParams","_loadDefaultConfig","method","defaultConfig","_loadDataProgressive","_loadDataStandard","_this33","generateParamsList","serializeParams","encoded","encodeURIComponent","join","_this34","requestNo","esc","showLoader","hideLoader","showError","shouldLoad","includes","contentType","contentTypeFormatters","headers","Accept","location","origin","credentials","fetch","response","ok","json","status","statusText","stringify","form","FormData","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","botRow","topInitialized","botInitialized","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","rowsToData","generateRow","recalcGroup","getRowGroup","_this35","getChildGroups","rowData","generateRowData","generateTopRow","generateBottomRow","_this36","open","children","getFilteredTreeChildren","disable","enable","paramKey","hasTopCalcs","hasBottomCalcs","getKey","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","avg","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","toString","String","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","_this37","plain","html","generatePlainContent","clipboardData","originalEvent","paste","setPasteParser","setPasteAction","originalSelectionText","getElementsByTagName","internal","sel","textRange","selectNodeContents","execCommand","pasteActions","parser","pasteParsers","checkPaseOrigin","getPasteData","mutateData","valid","target","success","headerFindSuccess","columnMap","shift","replace","insert","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","dummyEl","firstCol","tabIndex","childArray","controlEl","generateControlElement","cloneNode","marginRight","paddingLeft","getComputedStyle","getPropertyValue","_this38","oldControl","replaceChild","_this39","getChildren","child","_this40","generateChildren","subChildren","sub","_this41","childData","childRow","checkForRestyle","getChildField","Download","fields","interceptCallback","downloadFunc","processConfig","buildLink","mime","triggerDownload","downloaders","processColumns","processDefinitions","processData","columnGroups","rowGroups","processedDefinitions","colData","processColumnGroup","processDefinition","_this42","maxDepth","processedColumn","groupData","depth","subGroup","subGroupData","downloadTitle","_this43","processGroupData","visRows","_this44","newTab","Blob","URL","createObjectURL","msSaveOrOpenBlob","intercept","csv","setFileContents","titles","delimiter","fileContents","parseSimpleTitles","parseColumnGroup","parseRows","parseGroup","bom","pdf","header","headerDepth","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","orientation","unit","colSpan","rowSpan","parseValue","parseRow","styles","calcObj","addCalcRow","calcData","doc","autoTable","addPageContent","head","documentProcessing","xlsx","sheetName","workbook","XLSX","utils","book_new","groupRowIndexs","groupColumnIndexs","calcRowIndexs","SheetNames","Sheets","generateSheet","worksheet","rowsToSheet","sheet","s","c","r","sheet_add_aoa","encode_range","merges","generateMerges","padColumnTitles","merge","sheetOnly","sheets","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","write","bookType","bookSST","Edit","mouseClick","recursionBlock","invalidEdit","editable","editorParams","editors","clearEditor","cellEl","contains","preventScroll","focusCellNoEvent","forceEdit","focusScrollAdjust","rendered","cellEditor","cancel","blur","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","keyCode","maskAutoFill","cellValue","padding","boxSizing","elementAttributes","getAttribute","onChange","textarea","vertNav","verticalNavigation","whiteSpace","resize","heightNow","selectionStart","stopImmediatePropagation","number","step","blurFunc","removeEventListener","initialValue","initialDisplayValue","defaultValue","listEl","dataItems","displayItems","currentItem","blurable","cancelItem","getUniqueColumnValues","sortValuesList","parseItems","inputValues","curentValue","dataList","displayList","processComplexListItem","label","listItemFormatter","setCurrentItem","fillList","chooseItem","hideList","showList","removeScrollListener","cursor","readOnly","autocomplete","allItems","filterList","term","intialLoad","items","searchEl","searchFunc","addNotice","searchingPlaceholder","fillListIfNotEmpty","showListOnEmpty","notice","clearList","itemList","emptyPlaceholder","current","freetext","allowEmpty","showInputValue","star","maxStars","stars","starsHolder","createElementNS","starChange","buildStar","starHolder","nextStar","changeValue","overflow","textOverflow","progress","percent","handle","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","backgroundColor","screenX","tickCross","tristate","indetermValue","indeterminateValue","indetermState","marginTop","indeterminate","checked","Export","cloneTableStyle","colVisProp","genereateTable","generateHeaderElements","generateBodyElements","rowLookup","mapElementStyles","_this45","selectedRows","generateColumnGroupHeaders","_this46","_this47","columnVisCheck","groupHeadersToRows","_this48","headerEl","_this49","oddRow","evenRow","calcRow","firstRow","firstCell","firstGroup","lastCell","styleCells","treeElementField","getElementsByClassName","bodyEl","cellWrapper","formatCells","formatExportValue","renderedCallback","rowComponent","props","lookup","fromStyle","Filter","headerFilterColumns","prevHeaderFilterChangeCheck","filterType","tagType","attrType","filterChangeCheck","filterFunc","prevSuccess","emptyFunc","headerFilterFunc","headerFilterFuncParams","fieldVal","colVal","func","generateHeaderFilterElement","_this50","filterElement","editorElement","typingTimer","searchTrigger","headerElement","headerFilterEmptyCheck","headerFilterParams","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","filtersToArray","_this51","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","_","filterVal","rowVal","filterParams","regex","RegExp","like","_in","Format","lookupFormatter","formatterPrint","formatterClipboard","formatterHtmlOutput","crossElement","formatters","plaintext","sanitizeHTML","entityMap","emptyToSpace","formatterParams","money","floatVal","integer","decimal","rgx","decimalSym","thousandSym","thousand","symbolAfter","urlPrefix","labelField","urlField","image","truthy","allowTruthy","tick","tickElement","cross","datetime","inputFormat","outputFormat","invalid","invalidPlaceholder","newDatetime","moment","isValid","datetimediff","suffix","humanize","date","duration","starActive","starInactive","traffic","colors","color","percentValue","legendAlign","legend","legendColor","barEl","legendEl","holderEl","buttonTick","buttonCross","rownum","responsiveCollapse","toggleList","isOpen","rowSelection","_this52","checkbox","registerRowSelectCheckbox","registerHeaderSelectCheckbox","FrozenColumns","leftColumns","rightColumns","leftMargin","rightMargin","rightPadding","initializationMode","scrollEndTimer","paddingRight","edge","frozenCheck","frozen","_this53","calcMargins","layoutColumnPosition","layoutCalcRows","_calcSpace","allCells","_this54","leftParents","parentEl","getColGroupParentElement","_this55","FrozenRows","styleRows","GroupComponent","_group","getParentGroup","toggleVisibility","groupManager","generator","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","old","groupList","elementContents","arrowElement","createElements","addBindings","createValueGroups","arrow","initializeGroupHeader","_this56","allowedValues","_createGroup","toggleElement","groupID","groupKey","headerGenerator","conformRowData","generateGroupHeaderContents","scrollHeader","removeGroup","getHeadersAndRows","noCalc","_visSet","getRowCount","compoment","addBindingsd","childNodes","GroupRows","langValue","lookupFunc","generateGroups","groupComponents","_this57","pullGroupListData","groupListData","rowCount","headerContent","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowCount","History","undoers","redoers","cellEdit","rowAdd","rowDelete","newRow","_rebindRow","rowMove","oldRow","HtmlTableImport","fieldIndex","hasIndex","newTable","_extractOptions","_extractHeaders","_generateBlankHeaders","newElement","attributes","optionsArr","optionsList","attrib","_attribValue","_findCol","exists","textContent","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","mergedBindings","_key","mapBindings","bindEvents","_this58","_loop2","actions","mapBinding","symbolsList","ctrl","meta","symbols","code","checkBinding","ctrlKey","shiftKey","metaKey","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","keyBlock","newPos","scrollMax","navLeft","navRight","Menu","menuEl","blurEvent","hideMenu","_this59","headerMenuEl","loadMenu","_this60","_this61","_this62","docHeight","innerHeight","itemEl","disabled","separator","pageY","pageX","menus","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","mousemove","touches","which","startMove","bindTouchEvents","startXMove","currentCol","prevColWidth","nextColWidthLast","prevColWidthLast","halfCol","moveToCol","_bindMouseMove","_unbindMouseMove","movingCells","columnHolder","xPos","scrollPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connectedTable","connectedRow","mouseup","tableRowDrop","previousSibling","startYMove","currentRow","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","connect","disconnect","dropComplete","sender","senders","receiver","receivers","fromTable","_delete","toTable","Mutator","enabled","lookupMutator","mutators","mutatorEdit","Page","initialLoad","pageSizes","dataReceivedNames","dataSentNames","button","pagesElement","firstBut","prevBut","nextBut","lastBut","pageSizeSelect","generatePageSizeSelectList","_this63","hidden","pageSelectLabel","testElRow","testElCell","paginationDataReceivedNames","trigger","_this64","_this65","_setPageButtons","leftSize","rightSize","_generatePageButton","_this66","_this67","_this68","_getRemotePage","_this69","oldParams","pageParams","_parseRemoteData","last_page","footer","Persistence","id","defWatcherBlock","readFunc","writeFunc","localStorageTest","testKey","localStorage","setItem","removeItem","retreivedData","readers","writers","retreiveData","getOwnPropertyDescriptor","set","get","oldCols","newCols","_findColumn","validateSorters","getGroupConfig","getPageConfig","definitions","defStore","colDef","local","getItem","cookie","cookiePos","expireDate","setDate","getDate","toUTCString","Print","manualBlock","replaceTable","cleanup","scrollX","scrollY","footerEl","tableEl","footerContent","ReactiveData","origFuncs","currentVersion","pushFunc","version","enumerable","configurable","args","arg","apply","pop","startRow","oldRows","writable","watchKey","unwatchRow","ResizeColumns","startColumn","startWidth","prevHandle","variableHeight","handleDown","nearestColumn","_checkResizability","_mouseDown","prevHandleDown","colIndex","resizable","mouseMove","mouseUp","ResizeRows","startHeight","screenY","ResizeTable","observer","containerObserver","tableHeight","containerHeight","containerWidth","_this70","tableStyle","ResizeObserver","entry","nodeHeight","contentRect","nodeWidth","observe","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","formatCollapsedData","order","generateCollapsedContent","_iterator","_isArray","_i","_ref","done","generateCollapsedRowContent","colCount","working","generateCollapsedRowData","mockCellComponent","listContents","div","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","_rowSelectionChanged","endSelect","selected","lastClickedRowIdx","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","_selectRow","_this71","rowMatch","rowInfo","checkboxEl","childRowSelection","selectedRow","_iterator2","_isArray2","_i2","_ref2","_iterator3","_isArray3","_i3","_ref3","_child","Sort","arrowEl","sorterParams","startingDir","headerSortStartingDir","newSortList","findSorter","sortListActual","lastSort","clearColumnHeaders","sortObj","setColumnHeader","_sortItems","_this72","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","colComp","el1","el2","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","emptyAlign","string","localeCompare","time","boolean","array","calc","d","alphanum","as","bs","a1","b1","L","rx","rd","isFinite","Validate","_extractValidator","substring","_buildValidator","parameters","validators","float","numeric","minLength","maxLength","in","reg","unique","cellData"],"mappings":"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","sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/* Tabulator v4.6.3 (c) Oliver Folkerd */\n\n;(function (global, factory) {\n\tif ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined') {\n\t\tmodule.exports = factory();\n\t} else if (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else {\n\t\tglobal.Tabulator = factory();\n\t}\n})(this, function () {\n\n\t'use strict';\n\n\t// https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n\n\n\tif (!Array.prototype.findIndex) {\n\n\t\tObject.defineProperty(Array.prototype, 'findIndex', {\n\n\t\t\tvalue: function value(predicate) {\n\n\t\t\t\t// 1. Let O be ? ToObject(this value).\n\n\n\t\t\t\tif (this == null) {\n\n\t\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t\t}\n\n\t\t\t\tvar o = Object(this);\n\n\t\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n\n\t\t\t\tvar len = o.length >>> 0;\n\n\t\t\t\t// 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n\n\t\t\t\tif (typeof predicate !== 'function') {\n\n\t\t\t\t\tthrow new TypeError('predicate must be a function');\n\t\t\t\t}\n\n\t\t\t\t// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n\t\t\t\tvar thisArg = arguments[1];\n\n\t\t\t\t// 5. Let k be 0.\n\n\n\t\t\t\tvar k = 0;\n\n\t\t\t\t// 6. Repeat, while k < len\n\n\n\t\t\t\twhile (k < len) {\n\n\t\t\t\t\t// a. Let Pk be ! ToString(k).\n\n\n\t\t\t\t\t// b. Let kValue be ? Get(O, Pk).\n\n\n\t\t\t\t\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\n\n\t\t\t\t\t// d. If testResult is true, return k.\n\n\n\t\t\t\t\tvar kValue = o[k];\n\n\t\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\n\t\t\t\t\t\treturn k;\n\t\t\t\t\t}\n\n\t\t\t\t\t// e. Increase k by 1.\n\n\n\t\t\t\t\tk++;\n\t\t\t\t}\n\n\t\t\t\t// 7. Return -1.\n\n\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t});\n\t}\n\n\t// https://tc39.github.io/ecma262/#sec-array.prototype.find\n\n\n\tif (!Array.prototype.find) {\n\n\t\tObject.defineProperty(Array.prototype, 'find', {\n\n\t\t\tvalue: function value(predicate) {\n\n\t\t\t\t// 1. Let O be ? ToObject(this value).\n\n\n\t\t\t\tif (this == null) {\n\n\t\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t\t}\n\n\t\t\t\tvar o = Object(this);\n\n\t\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n\n\t\t\t\tvar len = o.length >>> 0;\n\n\t\t\t\t// 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n\n\t\t\t\tif (typeof predicate !== 'function') {\n\n\t\t\t\t\tthrow new TypeError('predicate must be a function');\n\t\t\t\t}\n\n\t\t\t\t// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n\t\t\t\tvar thisArg = arguments[1];\n\n\t\t\t\t// 5. Let k be 0.\n\n\n\t\t\t\tvar k = 0;\n\n\t\t\t\t// 6. Repeat, while k < len\n\n\n\t\t\t\twhile (k < len) {\n\n\t\t\t\t\t// a. Let Pk be ! ToString(k).\n\n\n\t\t\t\t\t// b. Let kValue be ? Get(O, Pk).\n\n\n\t\t\t\t\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\n\n\t\t\t\t\t// d. If testResult is true, return kValue.\n\n\n\t\t\t\t\tvar kValue = o[k];\n\n\t\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\n\t\t\t\t\t\treturn kValue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// e. Increase k by 1.\n\n\n\t\t\t\t\tk++;\n\t\t\t\t}\n\n\t\t\t\t// 7. Return undefined.\n\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t});\n\t}\n\n\tvar ColumnManager = function ColumnManager(table) {\n\n\t\tthis.table = table; //hold parent table\n\n\n\t\tthis.blockHozScrollEvent = false;\n\n\t\tthis.headersElement = this.createHeadersElement();\n\n\t\tthis.element = this.createHeaderElement(); //containing element\n\n\n\t\tthis.rowManager = null; //hold row manager object\n\n\n\t\tthis.columns = []; // column definition object\n\n\n\t\tthis.columnsByIndex = []; //columns by index\n\n\n\t\tthis.columnsByField = {}; //columns by field\n\n\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.element.insertBefore(this.headersElement, this.element.firstChild);\n\t};\n\n\t////////////// Setup Functions /////////////////\n\n\n\tColumnManager.prototype.createHeadersElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-headers\");\n\n\t\treturn el;\n\t};\n\n\tColumnManager.prototype.createHeaderElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-header\");\n\n\t\tif (!this.table.options.headerVisible) {\n\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\n\t\treturn el;\n\t};\n\n\tColumnManager.prototype.initialize = function () {\n\n\t\tvar self = this;\n\n\t\t//scroll body along with header\n\n\n\t\t// self.element.addEventListener(\"scroll\", function(e){\n\n\n\t\t// \tif(!self.blockHozScrollEvent){\n\n\n\t\t// \t\tself.table.rowManager.scrollHorizontal(self.element.scrollLeft);\n\n\n\t\t// \t}\n\n\n\t\t// });\n\n\t};\n\n\t//link to row manager\n\n\n\tColumnManager.prototype.setRowManager = function (manager) {\n\n\t\tthis.rowManager = manager;\n\t};\n\n\t//return containing element\n\n\n\tColumnManager.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\t//return header containing element\n\n\n\tColumnManager.prototype.getHeadersElement = function () {\n\n\t\treturn this.headersElement;\n\t};\n\n\t// ColumnManager.prototype.tempScrollBlock = function(){\n\n\n\t// \tclearTimeout(this.blockHozScrollEvent);\n\n\n\t// \tthis.blockHozScrollEvent = setTimeout(() => {this.blockHozScrollEvent = false;}, 50);\n\n\n\t// }\n\n\n\t//scroll horizontally to match table body\n\n\n\tColumnManager.prototype.scrollHorizontal = function (left) {\n\n\t\tvar hozAdjust = 0,\n\t\t    scrollWidth = this.element.scrollWidth - this.table.element.clientWidth;\n\n\t\t// this.tempScrollBlock();\n\n\n\t\tthis.element.scrollLeft = left;\n\n\t\t//adjust for vertical scrollbar moving table when present\n\n\n\t\tif (left > scrollWidth) {\n\n\t\t\thozAdjust = left - scrollWidth;\n\n\t\t\tthis.element.style.marginLeft = -hozAdjust + \"px\";\n\t\t} else {\n\n\t\t\tthis.element.style.marginLeft = 0;\n\t\t}\n\n\t\t//keep frozen columns fixed in position\n\n\n\t\t//this._calcFrozenColumnsPos(hozAdjust + 3);\n\n\n\t\tthis.scrollLeft = left;\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.scrollHorizontal();\n\t\t}\n\t};\n\n\t///////////// Column Setup Functions /////////////\n\n\n\tColumnManager.prototype.generateColumnsFromRowData = function (data) {\n\n\t\tvar cols = [],\n\t\t    row,\n\t\t    sorter;\n\n\t\tif (data && data.length) {\n\n\t\t\trow = data[0];\n\n\t\t\tfor (var key in row) {\n\n\t\t\t\tvar col = {\n\n\t\t\t\t\tfield: key,\n\n\t\t\t\t\ttitle: key\n\n\t\t\t\t};\n\n\t\t\t\tvar value = row[key];\n\n\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\n\t\t\t\t\tcase \"undefined\":\n\n\t\t\t\t\t\tsorter = \"string\";\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\n\t\t\t\t\t\tsorter = \"boolean\";\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"object\":\n\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\n\t\t\t\t\t\t\tsorter = \"array\";\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tcol.sorter = sorter;\n\n\t\t\t\tcols.push(col);\n\t\t\t}\n\n\t\t\tthis.table.options.columns = cols;\n\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t};\n\n\tColumnManager.prototype.setColumns = function (cols, row) {\n\n\t\tvar self = this;\n\n\t\twhile (self.headersElement.firstChild) {\n\t\t\tself.headersElement.removeChild(self.headersElement.firstChild);\n\t\t}self.columns = [];\n\n\t\tself.columnsByIndex = [];\n\n\t\tself.columnsByField = {};\n\n\t\t//reset frozen columns\n\n\n\t\tif (self.table.modExists(\"frozenColumns\")) {\n\n\t\t\tself.table.modules.frozenColumns.reset();\n\t\t}\n\n\t\tcols.forEach(function (def, i) {\n\n\t\t\tself._addColumn(def);\n\t\t});\n\n\t\tself._reIndexColumns();\n\n\t\tif (self.table.options.responsiveLayout && self.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tself.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tself.redraw(true);\n\t};\n\n\tColumnManager.prototype._addColumn = function (definition, before, nextToColumn) {\n\n\t\tvar column = new Column(definition, this),\n\t\t    colEl = column.getElement(),\n\t\t    index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\n\t\tif (nextToColumn && index > -1) {\n\n\t\t\tvar parentIndex = this.columns.indexOf(nextToColumn.getTopColumn());\n\n\t\t\tvar nextEl = nextToColumn.getElement();\n\n\t\t\tif (before) {\n\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t} else {\n\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (before) {\n\n\t\t\t\tthis.columns.unshift(column);\n\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t} else {\n\n\t\t\t\tthis.columns.push(column);\n\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\n\t\t\tcolumn.columnRendered();\n\t\t}\n\n\t\treturn column;\n\t};\n\n\tColumnManager.prototype.registerColumnField = function (col) {\n\n\t\tif (col.definition.field) {\n\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t};\n\n\tColumnManager.prototype.registerColumnPosition = function (col) {\n\n\t\tthis.columnsByIndex.push(col);\n\t};\n\n\tColumnManager.prototype._reIndexColumns = function () {\n\n\t\tthis.columnsByIndex = [];\n\n\t\tthis.columns.forEach(function (column) {\n\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t};\n\n\t//ensure column headers take up the correct amount of space in column groups\n\n\n\tColumnManager.prototype._verticalAlignHeaders = function () {\n\n\t\tvar self = this,\n\t\t    minHeight = 0;\n\n\t\tself.columns.forEach(function (column) {\n\n\t\t\tvar height;\n\n\t\t\tcolumn.clearVerticalAlign();\n\n\t\t\theight = column.getHeight();\n\n\t\t\tif (height > minHeight) {\n\n\t\t\t\tminHeight = height;\n\t\t\t}\n\t\t});\n\n\t\tself.columns.forEach(function (column) {\n\n\t\t\tcolumn.verticalAlign(self.table.options.columnHeaderVertAlign, minHeight);\n\t\t});\n\n\t\tself.rowManager.adjustTableSize();\n\t};\n\n\t//////////////// Column Details /////////////////\n\n\n\tColumnManager.prototype.findColumn = function (subject) {\n\n\t\tvar self = this;\n\n\t\tif ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n\n\t\t\tif (subject instanceof Column) {\n\n\t\t\t\t//subject is column element\n\n\n\t\t\t\treturn subject;\n\t\t\t} else if (subject instanceof ColumnComponent) {\n\n\t\t\t\t//subject is public column component\n\n\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t} else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n\n\t\t\t\t//subject is a HTML element of the column header\n\n\n\t\t\t\tvar match = self.columns.find(function (column) {\n\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t} else {\n\n\t\t\t//subject should be treated as the field name of the column\n\n\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\n\t\treturn false;\n\t};\n\n\tColumnManager.prototype.getColumnByField = function (field) {\n\n\t\treturn this.columnsByField[field];\n\t};\n\n\tColumnManager.prototype.getColumnsByFieldRoot = function (root) {\n\t\tvar _this = this;\n\n\t\tvar matches = [];\n\n\t\tObject.keys(this.columnsByField).forEach(function (field) {\n\n\t\t\tvar fieldRoot = field.split(\".\")[0];\n\n\t\t\tif (fieldRoot === root) {\n\n\t\t\t\tmatches.push(_this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\n\t\treturn matches;\n\t};\n\n\tColumnManager.prototype.getColumnByIndex = function (index) {\n\n\t\treturn this.columnsByIndex[index];\n\t};\n\n\tColumnManager.prototype.getFirstVisibileColumn = function (index) {\n\n\t\tvar index = this.columnsByIndex.findIndex(function (col) {\n\n\t\t\treturn col.visible;\n\t\t});\n\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t};\n\n\tColumnManager.prototype.getColumns = function () {\n\n\t\treturn this.columns;\n\t};\n\n\tColumnManager.prototype.findColumnIndex = function (column) {\n\n\t\treturn this.columnsByIndex.findIndex(function (col) {\n\n\t\t\treturn column === col;\n\t\t});\n\t};\n\n\t//return all columns that are not groups\n\n\n\tColumnManager.prototype.getRealColumns = function () {\n\n\t\treturn this.columnsByIndex;\n\t};\n\n\t//travers across columns and call action\n\n\n\tColumnManager.prototype.traverse = function (callback) {\n\n\t\tvar self = this;\n\n\t\tself.columnsByIndex.forEach(function (column, i) {\n\n\t\t\tcallback(column, i);\n\t\t});\n\t};\n\n\t//get defintions of actual columns\n\n\n\tColumnManager.prototype.getDefinitions = function (active) {\n\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tself.columnsByIndex.forEach(function (column) {\n\n\t\t\tif (!active || active && column.visible) {\n\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\t//get full nested definition tree\n\n\n\tColumnManager.prototype.getDefinitionTree = function () {\n\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tself.columns.forEach(function (column) {\n\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tColumnManager.prototype.getComponents = function (structured) {\n\n\t\tvar self = this,\n\t\t    output = [],\n\t\t    columns = structured ? self.columns : self.columnsByIndex;\n\n\t\tcolumns.forEach(function (column) {\n\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tColumnManager.prototype.getWidth = function () {\n\n\t\tvar width = 0;\n\n\t\tthis.columnsByIndex.forEach(function (column) {\n\n\t\t\tif (column.visible) {\n\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\treturn width;\n\t};\n\n\tColumnManager.prototype.moveColumn = function (from, to, after) {\n\n\t\tthis.moveColumnActual(from, to, after);\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t}\n\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\n\t\tif (after) {\n\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\n\t\tthis._verticalAlignHeaders();\n\n\t\tthis.table.rowManager.reinitialize();\n\t};\n\n\tColumnManager.prototype.moveColumnActual = function (from, to, after) {\n\n\t\tif (from.parent.isGroup) {\n\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t} else {\n\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tif (this.table.options.columnMoved) {\n\n\t\t\tthis.table.options.columnMoved.call(this.table, from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t}\n\t};\n\n\tColumnManager.prototype._moveColumnInArray = function (columns, from, to, after, updateRows) {\n\n\t\tvar fromIndex = columns.indexOf(from),\n\t\t    toIndex;\n\n\t\tif (fromIndex > -1) {\n\n\t\t\tcolumns.splice(fromIndex, 1);\n\n\t\t\ttoIndex = columns.indexOf(to);\n\n\t\t\tif (toIndex > -1) {\n\n\t\t\t\tif (after) {\n\n\t\t\t\t\ttoIndex = toIndex + 1;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\n\t\t\tcolumns.splice(toIndex, 0, from);\n\n\t\t\tif (updateRows) {\n\n\t\t\t\tthis.table.rowManager.rows.forEach(function (row) {\n\n\t\t\t\t\tif (row.cells.length) {\n\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tColumnManager.prototype.scrollToColumn = function (column, position, ifVisible) {\n\t\tvar _this2 = this;\n\n\t\tvar left = 0,\n\t\t    offset = 0,\n\t\t    adjust = 0,\n\t\t    colEl = column.getElement();\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (typeof position === \"undefined\") {\n\n\t\t\t\tposition = _this2.table.options.scrollToColumnPosition;\n\t\t\t}\n\n\t\t\tif (typeof ifVisible === \"undefined\") {\n\n\t\t\t\tifVisible = _this2.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\n\t\t\tif (column.visible) {\n\n\t\t\t\t//align to correct position\n\n\n\t\t\t\tswitch (position) {\n\n\t\t\t\t\tcase \"middle\":\n\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tadjust = -_this2.element.clientWidth / 2;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"right\":\n\n\t\t\t\t\t\tadjust = colEl.clientWidth - _this2.headersElement.clientWidth;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t//check column visibility\n\n\n\t\t\t\tif (!ifVisible) {\n\n\t\t\t\t\toffset = colEl.offsetLeft;\n\n\t\t\t\t\tif (offset > 0 && offset + colEl.offsetWidth < _this2.element.clientWidth) {\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//calculate scroll position\n\n\n\t\t\t\tleft = colEl.offsetLeft + _this2.element.scrollLeft + adjust;\n\n\t\t\t\tleft = Math.max(Math.min(left, _this2.table.rowManager.element.scrollWidth - _this2.table.rowManager.element.clientWidth), 0);\n\n\t\t\t\t_this2.table.rowManager.scrollHorizontal(left);\n\n\t\t\t\t_this2.scrollHorizontal(left);\n\n\t\t\t\tresolve();\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//////////////// Cell Management /////////////////\n\n\n\tColumnManager.prototype.generateCells = function (row) {\n\n\t\tvar self = this;\n\n\t\tvar cells = [];\n\n\t\tself.columnsByIndex.forEach(function (column) {\n\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\n\t\treturn cells;\n\t};\n\n\t//////////////// Column Management /////////////////\n\n\n\tColumnManager.prototype.getFlexBaseWidth = function () {\n\n\t\tvar self = this,\n\t\t    totalWidth = self.table.element.clientWidth,\n\t\t    //table element width\n\n\n\t\tfixedWidth = 0;\n\n\t\t//adjust for vertical scrollbar if present\n\n\n\t\tif (self.rowManager.element.scrollHeight > self.rowManager.element.clientHeight) {\n\n\t\t\ttotalWidth -= self.rowManager.element.offsetWidth - self.rowManager.element.clientWidth;\n\t\t}\n\n\t\tthis.columnsByIndex.forEach(function (column) {\n\n\t\t\tvar width, minWidth, colWidth;\n\n\t\t\tif (column.visible) {\n\n\t\t\t\twidth = column.definition.width || 0;\n\n\t\t\t\tminWidth = typeof column.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(column.minWidth);\n\n\t\t\t\tif (typeof width == \"string\") {\n\n\t\t\t\t\tif (width.indexOf(\"%\") > -1) {\n\n\t\t\t\t\t\tcolWidth = totalWidth / 100 * parseInt(width);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t}\n\t\t});\n\n\t\treturn fixedWidth;\n\t};\n\n\tColumnManager.prototype.addColumn = function (definition, before, nextToColumn) {\n\t\tvar _this3 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this3._addColumn(definition, before, nextToColumn);\n\n\t\t\t_this3._reIndexColumns();\n\n\t\t\tif (_this3.table.options.responsiveLayout && _this3.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\t_this3.table.modules.responsiveLayout.initialize();\n\t\t\t}\n\n\t\t\tif (_this3.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\t_this3.table.modules.columnCalcs.recalc(_this3.table.rowManager.activeRows);\n\t\t\t}\n\n\t\t\t_this3.redraw();\n\n\t\t\tif (_this3.table.modules.layout.getMode() != \"fitColumns\") {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\t_this3._verticalAlignHeaders();\n\n\t\t\t_this3.table.rowManager.reinitialize();\n\n\t\t\tresolve(column);\n\t\t});\n\t};\n\n\t//remove column from system\n\n\n\tColumnManager.prototype.deregisterColumn = function (column) {\n\n\t\tvar field = column.getField(),\n\t\t    index;\n\n\t\t//remove from field list\n\n\n\t\tif (field) {\n\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\n\t\t//remove from index list\n\n\n\t\tindex = this.columnsByIndex.indexOf(column);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\n\t\t//remove from column list\n\n\n\t\tindex = this.columns.indexOf(column);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tthis.redraw();\n\t};\n\n\t//redraw columns\n\n\n\tColumnManager.prototype.redraw = function (force) {\n\n\t\tif (force) {\n\n\t\t\tif (Tabulator.prototype.helpers.elVisible(this.element)) {\n\n\t\t\t\tthis._verticalAlignHeaders();\n\t\t\t}\n\n\t\t\tthis.table.rowManager.resetScroll();\n\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\n\t\tif ([\"fitColumns\", \"fitDataStretch\"].indexOf(this.table.modules.layout.getMode()) > -1) {\n\n\t\t\tthis.table.modules.layout.layout();\n\t\t} else {\n\n\t\t\tif (force) {\n\n\t\t\t\tthis.table.modules.layout.layout();\n\t\t\t} else {\n\n\t\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t}\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t}\n\n\t\tif (force) {\n\n\t\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t\t}\n\n\t\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\tthis.table.modules.columnCalcs.redraw();\n\t\t\t}\n\t\t}\n\n\t\tthis.table.footerManager.redraw();\n\t};\n\n\t//public column object\n\n\tvar ColumnComponent = function ColumnComponent(column) {\n\n\t\tthis._column = column;\n\n\t\tthis.type = \"ColumnComponent\";\n\t};\n\n\tColumnComponent.prototype.getElement = function () {\n\n\t\treturn this._column.getElement();\n\t};\n\n\tColumnComponent.prototype.getDefinition = function () {\n\n\t\treturn this._column.getDefinition();\n\t};\n\n\tColumnComponent.prototype.getField = function () {\n\n\t\treturn this._column.getField();\n\t};\n\n\tColumnComponent.prototype.getCells = function () {\n\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function (cell) {\n\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t};\n\n\tColumnComponent.prototype.getVisibility = function () {\n\n\t\treturn this._column.visible;\n\t};\n\n\tColumnComponent.prototype.show = function () {\n\n\t\tif (this._column.isGroup) {\n\n\t\t\tthis._column.columns.forEach(function (column) {\n\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t} else {\n\n\t\t\tthis._column.show();\n\t\t}\n\t};\n\n\tColumnComponent.prototype.hide = function () {\n\n\t\tif (this._column.isGroup) {\n\n\t\t\tthis._column.columns.forEach(function (column) {\n\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t} else {\n\n\t\t\tthis._column.hide();\n\t\t}\n\t};\n\n\tColumnComponent.prototype.toggle = function () {\n\n\t\tif (this._column.visible) {\n\n\t\t\tthis.hide();\n\t\t} else {\n\n\t\t\tthis.show();\n\t\t}\n\t};\n\n\tColumnComponent.prototype.delete = function () {\n\n\t\treturn this._column.delete();\n\t};\n\n\tColumnComponent.prototype.getSubColumns = function () {\n\n\t\tvar output = [];\n\n\t\tif (this._column.columns.length) {\n\n\t\t\tthis._column.columns.forEach(function (column) {\n\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tColumnComponent.prototype.getParentColumn = function () {\n\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n\t};\n\n\tColumnComponent.prototype._getSelf = function () {\n\n\t\treturn this._column;\n\t};\n\n\tColumnComponent.prototype.scrollTo = function () {\n\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column);\n\t};\n\n\tColumnComponent.prototype.getTable = function () {\n\n\t\treturn this._column.table;\n\t};\n\n\tColumnComponent.prototype.headerFilterFocus = function () {\n\n\t\tif (this._column.table.modExists(\"filter\", true)) {\n\n\t\t\tthis._column.table.modules.filter.setHeaderFilterFocus(this._column);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.reloadHeaderFilter = function () {\n\n\t\tif (this._column.table.modExists(\"filter\", true)) {\n\n\t\t\tthis._column.table.modules.filter.reloadHeaderFilter(this._column);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.getHeaderFilterValue = function () {\n\n\t\tif (this._column.table.modExists(\"filter\", true)) {\n\n\t\t\treturn this._column.table.modules.filter.getHeaderFilterValue(this._column);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.setHeaderFilterValue = function (value) {\n\n\t\tif (this._column.table.modExists(\"filter\", true)) {\n\n\t\t\tthis._column.table.modules.filter.setHeaderFilterValue(this._column, value);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.move = function (to, after) {\n\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif (toColumn) {\n\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.getNextColumn = function () {\n\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t};\n\n\tColumnComponent.prototype.getPrevColumn = function () {\n\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t};\n\n\tColumnComponent.prototype.updateDefinition = function (updates) {\n\n\t\treturn this._column.updateDefinition(updates);\n\t};\n\n\tvar Column = function Column(def, parent) {\n\n\t\tvar self = this;\n\n\t\tthis.table = parent.table;\n\n\t\tthis.definition = def; //column definition\n\n\t\tthis.parent = parent; //hold parent object\n\n\t\tthis.type = \"column\"; //type of element\n\n\t\tthis.columns = []; //child columns\n\n\t\tthis.cells = []; //cells bound to this column\n\n\t\tthis.element = this.createElement(); //column header element\n\n\t\tthis.contentElement = false;\n\n\t\tthis.titleElement = false;\n\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\n\t\tthis.isGroup = false;\n\n\t\tthis.tooltip = false; //hold column tooltip\n\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\n\n\t\t//multi dimensional filed handling\n\n\t\tthis.field = \"\";\n\n\t\tthis.fieldStructure = \"\";\n\n\t\tthis.getFieldValue = \"\";\n\n\t\tthis.setFieldValue = \"\";\n\n\t\tthis.titleFormatterRendered = false;\n\n\t\tthis.setField(this.definition.field);\n\n\t\tif (this.table.options.invalidOptionWarnings) {\n\n\t\t\tthis.checkDefinition();\n\t\t}\n\n\t\tthis.modules = {}; //hold module variables;\n\n\n\t\tthis.cellEvents = {\n\n\t\t\tcellClick: false,\n\n\t\t\tcellDblClick: false,\n\n\t\t\tcellContext: false,\n\n\t\t\tcellTap: false,\n\n\t\t\tcellDblTap: false,\n\n\t\t\tcellTapHold: false,\n\n\t\t\tcellMouseEnter: false,\n\n\t\t\tcellMouseLeave: false,\n\n\t\t\tcellMouseOver: false,\n\n\t\t\tcellMouseOut: false,\n\n\t\t\tcellMouseMove: false\n\n\t\t};\n\n\t\tthis.width = null; //column width\n\n\t\tthis.widthStyled = \"\"; //column width prestyled to improve render efficiency\n\n\t\tthis.minWidth = null; //column minimum width\n\n\t\tthis.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\n\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\n\n\t\tthis.visible = true; //default visible state\n\n\n\t\tthis._mapDepricatedFunctionality();\n\n\t\t//initialize column\n\n\t\tif (def.columns) {\n\n\t\t\tthis.isGroup = true;\n\n\t\t\tdef.columns.forEach(function (def, i) {\n\n\t\t\t\tvar newCol = new Column(def, self);\n\n\t\t\t\tself.attachColumn(newCol);\n\t\t\t});\n\n\t\t\tself.checkColumnVisibility();\n\t\t} else {\n\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\n\t\tif (def.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")) {\n\n\t\t\tthis.table.modules.moveRow.setHandle(true);\n\t\t}\n\n\t\tthis._buildHeader();\n\n\t\tthis.bindModuleColumns();\n\t};\n\n\tColumn.prototype.createElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\treturn el;\n\t};\n\n\tColumn.prototype.createGroupElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\n\t\treturn el;\n\t};\n\n\tColumn.prototype.checkDefinition = function () {\n\t\tvar _this4 = this;\n\n\t\tObject.keys(this.definition).forEach(function (key) {\n\n\t\t\tif (_this4.defaultOptionList.indexOf(key) === -1) {\n\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (_this4.field || _this4.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t};\n\n\tColumn.prototype.setField = function (field) {\n\n\t\tthis.field = field;\n\n\t\tthis.fieldStructure = field ? this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field] : [];\n\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t};\n\n\t//register column position with column manager\n\n\tColumn.prototype.registerColumnPosition = function (column) {\n\n\t\tthis.parent.registerColumnPosition(column);\n\t};\n\n\t//register column position with column manager\n\n\tColumn.prototype.registerColumnField = function (column) {\n\n\t\tthis.parent.registerColumnField(column);\n\t};\n\n\t//trigger position registration\n\n\tColumn.prototype.reRegisterPosition = function () {\n\n\t\tif (this.isGroup) {\n\n\t\t\tthis.columns.forEach(function (column) {\n\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t} else {\n\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t};\n\n\tColumn.prototype._mapDepricatedFunctionality = function () {\n\n\t\tif (typeof this.definition.hideInHtml !== \"undefined\") {\n\n\t\t\tthis.definition.htmlOutput = !this.definition.hideInHtml;\n\n\t\t\tconsole.warn(\"hideInHtml column definition property is deprecated, you should now use htmlOutput\");\n\t\t}\n\n\t\tif (typeof this.definition.align !== \"undefined\") {\n\n\t\t\tthis.definition.hozAlign = this.definition.align;\n\n\t\t\tconsole.warn(\"align column definition property is deprecated, you should now use hozAlign\");\n\t\t}\n\t};\n\n\tColumn.prototype.setTooltip = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition;\n\n\t\t//set header tooltips\n\n\t\tvar tooltip = def.headerTooltip || def.tooltip === false ? def.headerTooltip : self.table.options.tooltipsHeader;\n\n\t\tif (tooltip) {\n\n\t\t\tif (tooltip === true) {\n\n\t\t\t\tif (def.field) {\n\n\t\t\t\t\tself.table.modules.localize.bind(\"columns|\" + def.field, function (value) {\n\n\t\t\t\t\t\tself.element.setAttribute(\"title\", value || def.title);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\tself.element.setAttribute(\"title\", def.title);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (typeof tooltip == \"function\") {\n\n\t\t\t\t\ttooltip = tooltip(self.getComponent());\n\n\t\t\t\t\tif (tooltip === false) {\n\n\t\t\t\t\t\ttooltip = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tself.element.setAttribute(\"title\", tooltip);\n\t\t\t}\n\t\t} else {\n\n\t\t\tself.element.setAttribute(\"title\", \"\");\n\t\t}\n\t};\n\n\t//build header element\n\n\tColumn.prototype._buildHeader = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition;\n\n\t\twhile (self.element.firstChild) {\n\t\t\tself.element.removeChild(self.element.firstChild);\n\t\t}if (def.headerVertical) {\n\n\t\t\tself.element.classList.add(\"tabulator-col-vertical\");\n\n\t\t\tif (def.headerVertical === \"flip\") {\n\n\t\t\t\tself.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\n\t\tself.contentElement = self._bindEvents();\n\n\t\tself.contentElement = self._buildColumnHeaderContent();\n\n\t\tself.element.appendChild(self.contentElement);\n\n\t\tif (self.isGroup) {\n\n\t\t\tself._buildGroupHeader();\n\t\t} else {\n\n\t\t\tself._buildColumnHeader();\n\t\t}\n\n\t\tself.setTooltip();\n\n\t\t//set resizable handles\n\n\t\tif (self.table.options.resizableColumns && self.table.modExists(\"resizeColumns\")) {\n\n\t\t\tself.table.modules.resizeColumns.initializeColumn(\"header\", self, self.element);\n\t\t}\n\n\t\t//set resizable handles\n\n\t\tif (def.headerFilter && self.table.modExists(\"filter\") && self.table.modExists(\"edit\")) {\n\n\t\t\tif (typeof def.headerFilterPlaceholder !== \"undefined\" && def.field) {\n\n\t\t\t\tself.table.modules.localize.setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\n\t\t\t}\n\n\t\t\tself.table.modules.filter.initializeColumn(self);\n\t\t}\n\n\t\t//set resizable handles\n\n\t\tif (self.table.modExists(\"frozenColumns\")) {\n\n\t\t\tself.table.modules.frozenColumns.initializeColumn(self);\n\t\t}\n\n\t\t//set movable column\n\n\t\tif (self.table.options.movableColumns && !self.isGroup && self.table.modExists(\"moveColumn\")) {\n\n\t\t\tself.table.modules.moveColumn.initializeColumn(self);\n\t\t}\n\n\t\t//set calcs column\n\n\t\tif ((def.topCalc || def.bottomCalc) && self.table.modExists(\"columnCalcs\")) {\n\n\t\t\tself.table.modules.columnCalcs.initializeColumn(self);\n\t\t}\n\n\t\t//handle persistence\n\n\t\tif (self.table.modExists(\"persistence\") && self.table.modules.persistence.config.columns) {\n\n\t\t\tself.table.modules.persistence.initializeColumn(self);\n\t\t}\n\n\t\t//update header tooltip on mouse enter\n\n\t\tself.element.addEventListener(\"mouseenter\", function (e) {\n\n\t\t\tself.setTooltip();\n\t\t});\n\t};\n\n\tColumn.prototype._bindEvents = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition,\n\t\t    dblTap,\n\t\t    tapHold,\n\t\t    tap;\n\n\t\t//setup header click event bindings\n\n\t\tif (typeof def.headerClick == \"function\") {\n\n\t\t\tself.element.addEventListener(\"click\", function (e) {\n\t\t\t\tdef.headerClick(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (typeof def.headerDblClick == \"function\") {\n\n\t\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\t\t\t\tdef.headerDblClick(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (typeof def.headerContext == \"function\") {\n\n\t\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\t\t\t\tdef.headerContext(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\t//setup header tap event bindings\n\n\t\tif (typeof def.headerTap == \"function\") {\n\n\t\t\ttap = false;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\ttap = true;\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (tap) {\n\n\t\t\t\t\tdef.headerTap(e, self.getComponent());\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif (typeof def.headerDblTap == \"function\") {\n\n\t\t\tdblTap = null;\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (dblTap) {\n\n\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tdef.headerDblTap(e, self.getComponent());\n\t\t\t\t} else {\n\n\t\t\t\t\tdblTap = setTimeout(function () {\n\n\t\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (typeof def.headerTapHold == \"function\") {\n\n\t\t\ttapHold = null;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function () {\n\n\t\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\t\ttapHold = null;\n\n\t\t\t\t\ttap = false;\n\n\t\t\t\t\tdef.headerTapHold(e, self.getComponent());\n\t\t\t\t}, 1000);\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\n\t\t//store column cell click event bindings\n\n\t\tif (typeof def.cellClick == \"function\") {\n\n\t\t\tself.cellEvents.cellClick = def.cellClick;\n\t\t}\n\n\t\tif (typeof def.cellDblClick == \"function\") {\n\n\t\t\tself.cellEvents.cellDblClick = def.cellDblClick;\n\t\t}\n\n\t\tif (typeof def.cellContext == \"function\") {\n\n\t\t\tself.cellEvents.cellContext = def.cellContext;\n\t\t}\n\n\t\t//store column mouse event bindings\n\n\t\tif (typeof def.cellMouseEnter == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseEnter = def.cellMouseEnter;\n\t\t}\n\n\t\tif (typeof def.cellMouseLeave == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseLeave = def.cellMouseLeave;\n\t\t}\n\n\t\tif (typeof def.cellMouseOver == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseOver = def.cellMouseOver;\n\t\t}\n\n\t\tif (typeof def.cellMouseOut == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseOut = def.cellMouseOut;\n\t\t}\n\n\t\tif (typeof def.cellMouseMove == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseMove = def.cellMouseMove;\n\t\t}\n\n\t\t//setup column cell tap event bindings\n\n\t\tif (typeof def.cellTap == \"function\") {\n\n\t\t\tself.cellEvents.cellTap = def.cellTap;\n\t\t}\n\n\t\tif (typeof def.cellDblTap == \"function\") {\n\n\t\t\tself.cellEvents.cellDblTap = def.cellDblTap;\n\t\t}\n\n\t\tif (typeof def.cellTapHold == \"function\") {\n\n\t\t\tself.cellEvents.cellTapHold = def.cellTapHold;\n\t\t}\n\n\t\t//setup column cell edit callbacks\n\n\t\tif (typeof def.cellEdited == \"function\") {\n\n\t\t\tself.cellEvents.cellEdited = def.cellEdited;\n\t\t}\n\n\t\tif (typeof def.cellEditing == \"function\") {\n\n\t\t\tself.cellEvents.cellEditing = def.cellEditing;\n\t\t}\n\n\t\tif (typeof def.cellEditCancelled == \"function\") {\n\n\t\t\tself.cellEvents.cellEditCancelled = def.cellEditCancelled;\n\t\t}\n\t};\n\n\t//build header element for header\n\n\tColumn.prototype._buildColumnHeader = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition,\n\t\t    table = self.table,\n\t\t    sortable;\n\n\t\t//set column sorter\n\n\t\tif (table.modExists(\"sort\")) {\n\n\t\t\ttable.modules.sort.initializeColumn(self, self.contentElement);\n\t\t}\n\n\t\t//set column header context menu\n\n\t\tif ((def.headerContextMenu || def.headerMenu) && table.modExists(\"menu\")) {\n\n\t\t\ttable.modules.menu.initializeColumnHeader(self);\n\t\t}\n\n\t\t//set column formatter\n\n\t\tif (table.modExists(\"format\")) {\n\n\t\t\ttable.modules.format.initializeColumn(self);\n\t\t}\n\n\t\t//set column editor\n\n\t\tif (typeof def.editor != \"undefined\" && table.modExists(\"edit\")) {\n\n\t\t\ttable.modules.edit.initializeColumn(self);\n\t\t}\n\n\t\t//set colum validator\n\n\t\tif (typeof def.validator != \"undefined\" && table.modExists(\"validate\")) {\n\n\t\t\ttable.modules.validate.initializeColumn(self);\n\t\t}\n\n\t\t//set column mutator\n\n\t\tif (table.modExists(\"mutator\")) {\n\n\t\t\ttable.modules.mutator.initializeColumn(self);\n\t\t}\n\n\t\t//set column accessor\n\n\t\tif (table.modExists(\"accessor\")) {\n\n\t\t\ttable.modules.accessor.initializeColumn(self);\n\t\t}\n\n\t\t//set respoviveLayout\n\n\t\tif (_typeof(table.options.responsiveLayout) && table.modExists(\"responsiveLayout\")) {\n\n\t\t\ttable.modules.responsiveLayout.initializeColumn(self);\n\t\t}\n\n\t\t//set column visibility\n\n\t\tif (typeof def.visible != \"undefined\") {\n\n\t\t\tif (def.visible) {\n\n\t\t\t\tself.show(true);\n\t\t\t} else {\n\n\t\t\t\tself.hide(true);\n\t\t\t}\n\t\t}\n\n\t\t//asign additional css classes to column header\n\n\t\tif (def.cssClass) {\n\n\t\t\tvar classeNames = def.cssClass.split(\" \");\n\n\t\t\tclasseNames.forEach(function (className) {\n\n\t\t\t\tself.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tif (def.field) {\n\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\n\t\t//set min width if present\n\n\t\tself.setMinWidth(typeof def.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(def.minWidth));\n\n\t\tself.reinitializeWidth();\n\n\t\t//set tooltip if present\n\n\t\tself.tooltip = self.definition.tooltip || self.definition.tooltip === false ? self.definition.tooltip : self.table.options.tooltips;\n\n\t\t//set orizontal text alignment\n\n\t\tself.hozAlign = typeof self.definition.hozAlign == \"undefined\" ? self.table.options.cellHozAlign : self.definition.hozAlign;\n\n\t\tself.vertAlign = typeof self.definition.vertAlign == \"undefined\" ? self.table.options.cellVertAlign : self.definition.vertAlign;\n\t};\n\n\tColumn.prototype._buildColumnHeaderContent = function () {\n\n\t\tvar def = this.definition,\n\t\t    table = this.table;\n\n\t\tvar contentElement = document.createElement(\"div\");\n\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\n\t\tcontentElement.appendChild(this.titleElement);\n\n\t\treturn contentElement;\n\t};\n\n\t//build title element of column\n\n\tColumn.prototype._buildColumnHeaderTitle = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition,\n\t\t    table = self.table,\n\t\t    title;\n\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\n\t\tif (def.editableTitle) {\n\n\t\t\tvar titleElement = document.createElement(\"input\");\n\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\n\t\t\ttitleElement.addEventListener(\"click\", function (e) {\n\n\t\t\t\te.stopPropagation();\n\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\n\t\t\ttitleElement.addEventListener(\"change\", function () {\n\n\t\t\t\tdef.title = titleElement.value;\n\n\t\t\t\ttable.options.columnTitleChanged.call(self.table, self.getComponent());\n\t\t\t});\n\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\n\t\t\tif (def.field) {\n\n\t\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, function (text) {\n\n\t\t\t\t\ttitleElement.value = text || def.title || \"&nbsp;\";\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\ttitleElement.value = def.title || \"&nbsp;\";\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (def.field) {\n\n\t\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, function (text) {\n\n\t\t\t\t\tself._formatColumnHeaderTitle(titleHolderElement, text || def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tself._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\n\t\treturn titleHolderElement;\n\t};\n\n\tColumn.prototype._formatColumnHeaderTitle = function (el, title) {\n\t\tvar _this5 = this;\n\n\t\tvar formatter, contents, params, mockCell, onRendered;\n\n\t\tif (this.definition.titleFormatter && this.table.modExists(\"format\")) {\n\n\t\t\tformatter = this.table.modules.format.getFormatter(this.definition.titleFormatter);\n\n\t\t\tonRendered = function onRendered(callback) {\n\n\t\t\t\t_this5.titleFormatterRendered = callback;\n\t\t\t};\n\n\t\t\tmockCell = {\n\n\t\t\t\tgetValue: function getValue() {\n\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\n\t\t\t\tgetElement: function getElement() {\n\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tparams = this.definition.titleFormatterParams || {};\n\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\n\t\t\tcontents = formatter.call(this.table.modules.format, mockCell, params, onRendered);\n\n\t\t\tswitch (typeof contents === 'undefined' ? 'undefined' : _typeof(contents)) {\n\n\t\t\t\tcase \"object\":\n\n\t\t\t\t\tif (contents instanceof Node) {\n\n\t\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tel.innerHTML = \"\";\n\n\t\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"undefined\":\n\n\t\t\t\tcase \"null\":\n\n\t\t\t\t\tel.innerHTML = \"\";\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tel.innerHTML = contents;\n\n\t\t\t}\n\t\t} else {\n\n\t\t\tel.innerHTML = title;\n\t\t}\n\t};\n\n\t//build header element for column group\n\n\tColumn.prototype._buildGroupHeader = function () {\n\t\tvar _this6 = this;\n\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\n\t\t//asign additional css classes to column header\n\n\t\tif (this.definition.cssClass) {\n\n\t\t\tvar classeNames = this.definition.cssClass.split(\" \");\n\n\t\t\tclasseNames.forEach(function (className) {\n\n\t\t\t\t_this6.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.element.appendChild(this.groupElement);\n\t};\n\n\t//flat field lookup\n\n\tColumn.prototype._getFlatData = function (data) {\n\n\t\treturn data[this.field];\n\t};\n\n\t//nested field lookup\n\n\tColumn.prototype._getNestedData = function (data) {\n\n\t\tvar dataObj = data,\n\t\t    structure = this.fieldStructure,\n\t\t    length = structure.length,\n\t\t    output;\n\n\t\tfor (var i = 0; i < length; i++) {\n\n\t\t\tdataObj = dataObj[structure[i]];\n\n\t\t\toutput = dataObj;\n\n\t\t\tif (!dataObj) {\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t};\n\n\t//flat field set\n\n\tColumn.prototype._setFlatData = function (data, value) {\n\n\t\tif (this.field) {\n\n\t\t\tdata[this.field] = value;\n\t\t}\n\t};\n\n\t//nested field set\n\n\tColumn.prototype._setNestedData = function (data, value) {\n\n\t\tvar dataObj = data,\n\t\t    structure = this.fieldStructure,\n\t\t    length = structure.length;\n\n\t\tfor (var i = 0; i < length; i++) {\n\n\t\t\tif (i == length - 1) {\n\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t} else {\n\n\t\t\t\tif (!dataObj[structure[i]]) {\n\n\t\t\t\t\tif (typeof value !== \"undefined\") {\n\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t};\n\n\t//attach column to this group\n\n\tColumn.prototype.attachColumn = function (column) {\n\n\t\tvar self = this;\n\n\t\tif (self.groupElement) {\n\n\t\t\tself.columns.push(column);\n\n\t\t\tself.groupElement.appendChild(column.getElement());\n\t\t} else {\n\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t};\n\n\t//vertically align header in column\n\n\tColumn.prototype.verticalAlign = function (alignment, height) {\n\n\t\t//calculate height of column header and group holder element\n\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : height || this.parent.getHeadersElement().clientHeight;\n\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n\n\t\tthis.element.style.height = parentHeight + \"px\";\n\n\t\tif (this.isGroup) {\n\n\t\t\tthis.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + \"px\";\n\t\t}\n\n\t\t//vertically align cell contents\n\n\t\tif (!this.isGroup && alignment !== \"top\") {\n\n\t\t\tif (alignment === \"bottom\") {\n\n\t\t\t\tthis.element.style.paddingTop = this.element.clientHeight - this.contentElement.offsetHeight + \"px\";\n\t\t\t} else {\n\n\t\t\t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) / 2 + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tthis.columns.forEach(function (column) {\n\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t};\n\n\t//clear vertical alignmenet\n\n\tColumn.prototype.clearVerticalAlign = function () {\n\n\t\tthis.element.style.paddingTop = \"\";\n\n\t\tthis.element.style.height = \"\";\n\n\t\tthis.element.style.minHeight = \"\";\n\n\t\tthis.groupElement.style.minHeight = \"\";\n\n\t\tthis.columns.forEach(function (column) {\n\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\t};\n\n\tColumn.prototype.bindModuleColumns = function () {\n\n\t\t//check if rownum formatter is being used on a column\n\n\t\tif (this.definition.formatter == \"rownum\") {\n\n\t\t\tthis.table.rowManager.rowNumColumn = this;\n\t\t}\n\t};\n\n\t//// Retreive Column Information ////\n\n\n\t//return column header element\n\n\tColumn.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\t//return colunm group element\n\n\tColumn.prototype.getGroupElement = function () {\n\n\t\treturn this.groupElement;\n\t};\n\n\t//return field name\n\n\tColumn.prototype.getField = function () {\n\n\t\treturn this.field;\n\t};\n\n\t//return the first column in a group\n\n\tColumn.prototype.getFirstColumn = function () {\n\n\t\tif (!this.isGroup) {\n\n\t\t\treturn this;\n\t\t} else {\n\n\t\t\tif (this.columns.length) {\n\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\t//return the last column in a group\n\n\tColumn.prototype.getLastColumn = function () {\n\n\t\tif (!this.isGroup) {\n\n\t\t\treturn this;\n\t\t} else {\n\n\t\t\tif (this.columns.length) {\n\n\t\t\t\treturn this.columns[this.columns.length - 1].getLastColumn();\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\t//return all columns in a group\n\n\tColumn.prototype.getColumns = function () {\n\n\t\treturn this.columns;\n\t};\n\n\t//return all columns in a group\n\n\tColumn.prototype.getCells = function () {\n\n\t\treturn this.cells;\n\t};\n\n\t//retreive the top column in a group of columns\n\n\tColumn.prototype.getTopColumn = function () {\n\n\t\tif (this.parent.isGroup) {\n\n\t\t\treturn this.parent.getTopColumn();\n\t\t} else {\n\n\t\t\treturn this;\n\t\t}\n\t};\n\n\t//return column definition object\n\n\tColumn.prototype.getDefinition = function (updateBranches) {\n\n\t\tvar colDefs = [];\n\n\t\tif (this.isGroup && updateBranches) {\n\n\t\t\tthis.columns.forEach(function (column) {\n\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\n\t\treturn this.definition;\n\t};\n\n\t//////////////////// Actions ////////////////////\n\n\n\tColumn.prototype.checkColumnVisibility = function () {\n\n\t\tvar visible = false;\n\n\t\tthis.columns.forEach(function (column) {\n\n\t\t\tif (column.visible) {\n\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\n\t\tif (visible) {\n\n\t\t\tthis.show();\n\n\t\t\tthis.parent.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n\t\t} else {\n\n\t\t\tthis.hide();\n\t\t}\n\t};\n\n\t//show column\n\n\tColumn.prototype.show = function (silent, responsiveToggle) {\n\n\t\tif (!this.visible) {\n\n\t\t\tthis.visible = true;\n\n\t\t\tthis.element.style.display = \"\";\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function (cell) {\n\n\t\t\t\tcell.show();\n\t\t\t});\n\n\t\t\tif (!this.isGroup && this.width === null) {\n\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\n\t\t\tthis.table.columnManager._verticalAlignHeaders();\n\n\t\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t\t}\n\n\t\t\tif (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n\t\t\t}\n\n\t\t\tif (!silent) {\n\n\t\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), true);\n\t\t\t}\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t};\n\n\t//hide column\n\n\tColumn.prototype.hide = function (silent, responsiveToggle) {\n\n\t\tif (this.visible) {\n\n\t\t\tthis.visible = false;\n\n\t\t\tthis.element.style.display = \"none\";\n\n\t\t\tthis.table.columnManager._verticalAlignHeaders();\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function (cell) {\n\n\t\t\t\tcell.hide();\n\t\t\t});\n\n\t\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t\t}\n\n\t\t\tif (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n\t\t\t}\n\n\t\t\tif (!silent) {\n\n\t\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n\t\t\t}\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t};\n\n\tColumn.prototype.matchChildWidths = function () {\n\n\t\tvar childWidth = 0;\n\n\t\tif (this.contentElement && this.columns.length) {\n\n\t\t\tthis.columns.forEach(function (column) {\n\n\t\t\t\tif (column.visible) {\n\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.contentElement.style.maxWidth = childWidth - 1 + \"px\";\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t};\n\n\tColumn.prototype.setWidth = function (width) {\n\n\t\tthis.widthFixed = true;\n\n\t\tthis.setWidthActual(width);\n\t};\n\n\tColumn.prototype.setWidthActual = function (width) {\n\n\t\tif (isNaN(width)) {\n\n\t\t\twidth = Math.floor(this.table.element.clientWidth / 100 * parseInt(width));\n\t\t}\n\n\t\twidth = Math.max(this.minWidth, width);\n\n\t\tthis.width = width;\n\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\n\t\tthis.element.style.width = this.widthStyled;\n\n\t\tif (!this.isGroup) {\n\n\t\t\tthis.cells.forEach(function (cell) {\n\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\n\t\tif (this.parent.isGroup) {\n\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\n\t\t//set resizable handles\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t}\n\t};\n\n\tColumn.prototype.checkCellHeights = function () {\n\n\t\tvar rows = [];\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tif (cell.row.heightInitialized) {\n\n\t\t\t\tif (cell.row.getElement().offsetParent !== null) {\n\n\t\t\t\t\trows.push(cell.row);\n\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t} else {\n\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\trows.forEach(function (row) {\n\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function (row) {\n\n\t\t\trow.setCellHeight();\n\t\t});\n\t};\n\n\tColumn.prototype.getWidth = function () {\n\n\t\tvar width = 0;\n\n\t\tif (this.isGroup) {\n\n\t\t\tthis.columns.forEach(function (column) {\n\n\t\t\t\tif (column.visible) {\n\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\n\t\t\twidth = this.width;\n\t\t}\n\n\t\treturn width;\n\t};\n\n\tColumn.prototype.getHeight = function () {\n\n\t\treturn this.element.offsetHeight;\n\t};\n\n\tColumn.prototype.setMinWidth = function (minWidth) {\n\n\t\tthis.minWidth = minWidth;\n\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tcell.setMinWidth();\n\t\t});\n\t};\n\n\tColumn.prototype.delete = function () {\n\t\tvar _this7 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this7.isGroup) {\n\n\t\t\t\t_this7.columns.forEach(function (column) {\n\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//cancel edit if column is currently being edited\n\n\t\t\tif (_this7.table.modExists(\"edit\")) {\n\n\t\t\t\tif (_this7.table.modules.edit.currentCell.column === _this7) {\n\n\t\t\t\t\t_this7.table.modules.edit.cancelEdit();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar cellCount = _this7.cells.length;\n\n\t\t\tfor (var i = 0; i < cellCount; i++) {\n\n\t\t\t\t_this7.cells[0].delete();\n\t\t\t}\n\n\t\t\t_this7.element.parentNode.removeChild(_this7.element);\n\n\t\t\t_this7.table.columnManager.deregisterColumn(_this7);\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tColumn.prototype.columnRendered = function () {\n\n\t\tif (this.titleFormatterRendered) {\n\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\t};\n\n\t//////////////// Cell Management /////////////////\n\n\n\t//generate cell for this column\n\n\tColumn.prototype.generateCell = function (row) {\n\n\t\tvar self = this;\n\n\t\tvar cell = new Cell(self, row);\n\n\t\tthis.cells.push(cell);\n\n\t\treturn cell;\n\t};\n\n\tColumn.prototype.nextColumn = function () {\n\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t};\n\n\tColumn.prototype._nextVisibleColumn = function (index) {\n\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t};\n\n\tColumn.prototype.prevColumn = function () {\n\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t};\n\n\tColumn.prototype._prevVisibleColumn = function (index) {\n\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t};\n\n\tColumn.prototype.reinitializeWidth = function (force) {\n\n\t\tthis.widthFixed = false;\n\n\t\t//set width if present\n\n\t\tif (typeof this.definition.width !== \"undefined\" && !force) {\n\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\n\t\t//hide header filters to prevent them altering column width\n\n\t\tif (this.table.modExists(\"filter\")) {\n\n\t\t\tthis.table.modules.filter.hideHeaderFilterElements();\n\t\t}\n\n\t\tthis.fitToData();\n\n\t\t//show header filters again after layout is complete\n\n\t\tif (this.table.modExists(\"filter\")) {\n\n\t\t\tthis.table.modules.filter.showHeaderFilterElements();\n\t\t}\n\t};\n\n\t//set column width to maximum cell width\n\n\tColumn.prototype.fitToData = function () {\n\n\t\tvar self = this;\n\n\t\tif (!this.widthFixed) {\n\n\t\t\tthis.element.style.width = \"\";\n\n\t\t\tself.cells.forEach(function (cell) {\n\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\n\t\tvar maxWidth = this.element.offsetWidth;\n\n\t\tif (!self.width || !this.widthFixed) {\n\n\t\t\tself.cells.forEach(function (cell) {\n\n\t\t\t\tvar width = cell.getWidth();\n\n\t\t\t\tif (width > maxWidth) {\n\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (maxWidth) {\n\n\t\t\t\tself.setWidthActual(maxWidth + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tColumn.prototype.updateDefinition = function (updates) {\n\t\tvar _this8 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar definition;\n\n\t\t\tif (!_this8.isGroup) {\n\n\t\t\t\tdefinition = Object.assign({}, _this8.getDefinition());\n\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\n\t\t\t\t_this8.table.columnManager.addColumn(definition, false, _this8).then(function (column) {\n\n\t\t\t\t\tif (definition.field == _this8.field) {\n\n\t\t\t\t\t\t_this8.field = false; //cleair field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t}\n\n\t\t\t\t\t_this8.delete().then(function () {\n\n\t\t\t\t\t\tresolve(column.getComponent());\n\t\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t});\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Update Error - The updateDefintion function is only available on columns, not column groups\");\n\n\t\t\t\treject(\"Column Update Error - The updateDefintion function is only available on columns, not column groups\");\n\t\t\t}\n\t\t});\n\t};\n\n\tColumn.prototype.deleteCell = function (cell) {\n\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t};\n\n\tColumn.prototype.defaultOptionList = [\"title\", \"field\", \"columns\", \"visible\", \"align\", \"hozAlign\", \"vertAlign\", \"width\", \"minWidth\", \"widthGrow\", \"widthShrink\", \"resizable\", \"frozen\", \"responsive\", \"tooltip\", \"cssClass\", \"rowHandle\", \"hideInHtml\", \"print\", \"htmlOutput\", \"sorter\", \"sorterParams\", \"formatter\", \"formatterParams\", \"variableHeight\", \"editable\", \"editor\", \"editorParams\", \"validator\", \"mutator\", \"mutatorParams\", \"mutatorData\", \"mutatorDataParams\", \"mutatorEdit\", \"mutatorEditParams\", \"mutatorClipboard\", \"mutatorClipboardParams\", \"accessor\", \"accessorParams\", \"accessorData\", \"accessorDataParams\", \"accessorDownload\", \"accessorDownloadParams\", \"accessorClipboard\", \"accessorClipboardParams\", \"accessorPrint\", \"accessorPrintParams\", \"accessorHtmlOutput\", \"accessorHtmlOutputParams\", \"clipboard\", \"download\", \"downloadTitle\", \"topCalc\", \"topCalcParams\", \"topCalcFormatter\", \"topCalcFormatterParams\", \"bottomCalc\", \"bottomCalcParams\", \"bottomCalcFormatter\", \"bottomCalcFormatterParams\", \"cellClick\", \"cellDblClick\", \"cellContext\", \"cellTap\", \"cellDblTap\", \"cellTapHold\", \"cellMouseEnter\", \"cellMouseLeave\", \"cellMouseOver\", \"cellMouseOut\", \"cellMouseMove\", \"cellEditing\", \"cellEdited\", \"cellEditCancelled\", \"headerSort\", \"headerSortStartingDir\", \"headerSortTristate\", \"headerClick\", \"headerDblClick\", \"headerContext\", \"headerTap\", \"headerDblTap\", \"headerTapHold\", \"headerTooltip\", \"headerVertical\", \"editableTitle\", \"titleFormatter\", \"titleFormatterParams\", \"headerFilter\", \"headerFilterPlaceholder\", \"headerFilterParams\", \"headerFilterEmptyCheck\", \"headerFilterFunc\", \"headerFilterFuncParams\", \"headerFilterLiveFilter\", \"print\", \"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"formatterPrint\", \"formatterPrintParams\", \"formatterClipboard\", \"formatterClipboardParams\", \"formatterHtmlOutput\", \"formatterHtmlOutputParams\"];\n\n\t//////////////// Event Bindings /////////////////\n\n\n\t//////////////// Object Generation /////////////////\n\n\tColumn.prototype.getComponent = function () {\n\n\t\treturn new ColumnComponent(this);\n\t};\n\n\tvar RowManager = function RowManager(table) {\n\n\t\tthis.table = table;\n\n\t\tthis.element = this.createHolderElement(); //containing element\n\n\t\tthis.tableElement = this.createTableElement(); //table element\n\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\n\t\tthis.columnManager = null; //hold column manager object\n\n\t\tthis.height = 0; //hold height of table element\n\n\n\t\tthis.firstRender = false; //handle first render\n\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\n\t\tthis.fixedHeight = false; //current rendering mode\n\n\n\t\tthis.rows = []; //hold row data objects\n\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\n\t\tthis.activeRowsCount = 0; //count of active rows\n\n\n\t\tthis.displayRows = []; //rows currently on display in the table\n\n\t\tthis.displayRowsCount = 0; //count of display rows\n\n\n\t\tthis.scrollTop = 0;\n\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\n\t\tthis.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\n\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\n\n\t\tthis.rowNumColumn = false; //hold column component for row number column\n\n\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\n\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\n\t\tthis.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\n\t};\n\n\t//////////////// Setup Functions /////////////////\n\n\n\tRowManager.prototype.createHolderElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-tableHolder\");\n\n\t\tel.setAttribute(\"tabindex\", 0);\n\n\t\treturn el;\n\t};\n\n\tRowManager.prototype.createTableElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-table\");\n\n\t\treturn el;\n\t};\n\n\t//return containing element\n\n\tRowManager.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\t//return table element\n\n\tRowManager.prototype.getTableElement = function () {\n\n\t\treturn this.tableElement;\n\t};\n\n\t//return position of row in table\n\n\tRowManager.prototype.getRowPosition = function (row, active) {\n\n\t\tif (active) {\n\n\t\t\treturn this.activeRows.indexOf(row);\n\t\t} else {\n\n\t\t\treturn this.rows.indexOf(row);\n\t\t}\n\t};\n\n\t//link to column manager\n\n\tRowManager.prototype.setColumnManager = function (manager) {\n\n\t\tthis.columnManager = manager;\n\t};\n\n\tRowManager.prototype.initialize = function () {\n\n\t\tvar self = this;\n\n\t\tself.setRenderMode();\n\n\t\t//initialize manager\n\n\t\tself.element.appendChild(self.tableElement);\n\n\t\tself.firstRender = true;\n\n\t\t//scroll header along with table body\n\n\t\tself.element.addEventListener(\"scroll\", function () {\n\n\t\t\tvar left = self.element.scrollLeft;\n\n\t\t\t//handle horizontal scrolling\n\n\t\t\tif (self.scrollLeft != left) {\n\n\t\t\t\tself.columnManager.scrollHorizontal(left);\n\n\t\t\t\tif (self.table.options.groupBy) {\n\n\t\t\t\t\tself.table.modules.groupRows.scrollHeaders(left);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\tself.table.modules.columnCalcs.scrollHorizontal(left);\n\t\t\t\t}\n\n\t\t\t\tself.table.options.scrollHorizontal(left);\n\t\t\t}\n\n\t\t\tself.scrollLeft = left;\n\t\t});\n\n\t\t//handle virtual dom scrolling\n\n\t\tif (this.renderMode === \"virtual\") {\n\n\t\t\tself.element.addEventListener(\"scroll\", function () {\n\n\t\t\t\tvar top = self.element.scrollTop;\n\n\t\t\t\tvar dir = self.scrollTop > top;\n\n\t\t\t\t//handle verical scrolling\n\n\t\t\t\tif (self.scrollTop != top) {\n\n\t\t\t\t\tself.scrollTop = top;\n\n\t\t\t\t\tself.scrollVertical(dir);\n\n\t\t\t\t\tif (self.table.options.ajaxProgressiveLoad == \"scroll\") {\n\n\t\t\t\t\t\tself.table.modules.ajax.nextPage(self.element.scrollHeight - self.element.clientHeight - top);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.table.options.scrollVertical(top);\n\t\t\t\t} else {\n\n\t\t\t\t\tself.scrollTop = top;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t////////////////// Row Manipulation //////////////////\n\n\n\tRowManager.prototype.findRow = function (subject) {\n\n\t\tvar self = this;\n\n\t\tif ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n\n\t\t\tif (subject instanceof Row) {\n\n\t\t\t\t//subject is row element\n\n\t\t\t\treturn subject;\n\t\t\t} else if (subject instanceof RowComponent) {\n\n\t\t\t\t//subject is public row component\n\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t} else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n\n\t\t\t\t//subject is a HTML element of the row\n\n\t\t\t\tvar match = self.rows.find(function (row) {\n\n\t\t\t\t\treturn row.element === subject;\n\t\t\t\t});\n\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t} else if (typeof subject == \"undefined\" || subject === null) {\n\n\t\t\treturn false;\n\t\t} else {\n\n\t\t\t//subject should be treated as the index of the row\n\n\t\t\tvar _match = self.rows.find(function (row) {\n\n\t\t\t\treturn row.data[self.table.options.index] == subject;\n\t\t\t});\n\n\t\t\treturn _match || false;\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\n\t\treturn false;\n\t};\n\n\tRowManager.prototype.getRowFromDataObject = function (data) {\n\n\t\tvar match = this.rows.find(function (row) {\n\n\t\t\treturn row.data === data;\n\t\t});\n\n\t\treturn match || false;\n\t};\n\n\tRowManager.prototype.getRowFromPosition = function (position, active) {\n\n\t\tif (active) {\n\n\t\t\treturn this.activeRows[position];\n\t\t} else {\n\n\t\t\treturn this.rows[position];\n\t\t}\n\t};\n\n\tRowManager.prototype.scrollToRow = function (row, position, ifVisible) {\n\t\tvar _this9 = this;\n\n\t\tvar rowIndex = this.getDisplayRows().indexOf(row),\n\t\t    rowEl = row.getElement(),\n\t\t    rowTop,\n\t\t    offset = 0;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (rowIndex > -1) {\n\n\t\t\t\tif (typeof position === \"undefined\") {\n\n\t\t\t\t\tposition = _this9.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif (typeof ifVisible === \"undefined\") {\n\n\t\t\t\t\tifVisible = _this9.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\tif (position === \"nearest\") {\n\n\t\t\t\t\tswitch (_this9.renderMode) {\n\n\t\t\t\t\t\tcase \"classic\":\n\n\t\t\t\t\t\t\trowTop = Tabulator.prototype.helpers.elOffset(rowEl).top;\n\n\t\t\t\t\t\t\tposition = Math.abs(_this9.element.scrollTop - rowTop) > Math.abs(_this9.element.scrollTop + _this9.element.clientHeight - rowTop) ? \"bottom\" : \"top\";\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"virtual\":\n\n\t\t\t\t\t\t\tposition = Math.abs(_this9.vDomTop - rowIndex) > Math.abs(_this9.vDomBottom - rowIndex) ? \"bottom\" : \"top\";\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\n\t\t\t\tif (!ifVisible) {\n\n\t\t\t\t\tif (Tabulator.prototype.helpers.elVisible(rowEl)) {\n\n\t\t\t\t\t\toffset = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this9.element).top;\n\n\t\t\t\t\t\tif (offset > 0 && offset < _this9.element.clientHeight - rowEl.offsetHeight) {\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\n\t\t\t\tswitch (_this9.renderMode) {\n\n\t\t\t\t\tcase \"classic\":\n\n\t\t\t\t\t\t_this9.element.scrollTop = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this9.element).top + _this9.element.scrollTop;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"virtual\":\n\n\t\t\t\t\t\t_this9._virtualRenderFill(rowIndex, true);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t//align to correct position\n\n\t\t\t\tswitch (position) {\n\n\t\t\t\t\tcase \"middle\":\n\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif (_this9.element.scrollHeight - _this9.element.scrollTop == _this9.element.clientHeight) {\n\n\t\t\t\t\t\t\t_this9.element.scrollTop = _this9.element.scrollTop + (rowEl.offsetTop - _this9.element.scrollTop) - (_this9.element.scrollHeight - rowEl.offsetTop) / 2;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_this9.element.scrollTop = _this9.element.scrollTop - _this9.element.clientHeight / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif (_this9.element.scrollHeight - _this9.element.scrollTop == _this9.element.clientHeight) {\n\n\t\t\t\t\t\t\t_this9.element.scrollTop = _this9.element.scrollTop - (_this9.element.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_this9.element.scrollTop = _this9.element.scrollTop - _this9.element.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t};\n\n\t////////////////// Data Handling //////////////////\n\n\n\tRowManager.prototype.setData = function (data, renderInPosition, columnsChanged) {\n\t\tvar _this10 = this;\n\n\t\tvar self = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (renderInPosition && _this10.getDisplayRows().length) {\n\n\t\t\t\tif (self.table.options.pagination) {\n\n\t\t\t\t\tself._setDataActual(data, true);\n\t\t\t\t} else {\n\n\t\t\t\t\t_this10.reRenderInPosition(function () {\n\n\t\t\t\t\t\tself._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (_this10.table.options.autoColumns && columnsChanged) {\n\n\t\t\t\t\t_this10.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\n\t\t\t\t_this10.resetScroll();\n\n\t\t\t\t_this10._setDataActual(data);\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tRowManager.prototype._setDataActual = function (data, renderInPosition) {\n\n\t\tvar self = this;\n\n\t\tself.table.options.dataLoading.call(this.table, data);\n\n\t\tthis._wipeElements();\n\n\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\n\t\t\tthis.table.modules.history.clear();\n\t\t}\n\n\t\tif (Array.isArray(data)) {\n\n\t\t\tif (this.table.modExists(\"selectRow\")) {\n\n\t\t\t\tthis.table.modules.selectRow.clearSelectionData();\n\t\t\t}\n\n\t\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n\n\t\t\t\tthis.table.modules.reactiveData.watchData(data);\n\t\t\t}\n\n\t\t\tdata.forEach(function (def, i) {\n\n\t\t\t\tif (def && (typeof def === 'undefined' ? 'undefined' : _typeof(def)) === \"object\") {\n\n\t\t\t\t\tvar row = new Row(def, self);\n\n\t\t\t\t\tself.rows.push(row);\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.table.options.dataLoaded.call(this.table, data);\n\n\t\t\tself.refreshActiveData(false, false, renderInPosition);\n\t\t} else {\n\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data === 'undefined' ? 'undefined' : _typeof(data), \"\\nData:     \", data);\n\t\t}\n\t};\n\n\tRowManager.prototype._wipeElements = function () {\n\n\t\tthis.rows.forEach(function (row) {\n\n\t\t\trow.wipe();\n\t\t});\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tthis.table.modules.groupRows.wipe();\n\t\t}\n\n\t\tthis.rows = [];\n\t};\n\n\tRowManager.prototype.deleteRow = function (row, blockRedraw) {\n\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\t    activeIndex = this.activeRows.indexOf(row);\n\n\t\tif (activeIndex > -1) {\n\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\n\t\tif (allIndex > -1) {\n\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\n\t\tthis.setActiveRows(this.activeRows);\n\n\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\tvar displayIndex = rows.indexOf(row);\n\n\t\t\tif (displayIndex > -1) {\n\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\n\t\tif (!blockRedraw) {\n\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\n\t\tthis.regenerateRowNumbers();\n\n\t\tthis.table.options.rowDeleted.call(this.table, row.getComponent());\n\n\t\tthis.table.options.dataEdited.call(this.table, this.getData());\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t} else if (this.table.options.pagination && this.table.modExists(\"page\")) {\n\n\t\t\tthis.refreshActiveData(false, false, true);\n\t\t} else {\n\n\t\t\tif (this.table.options.pagination && this.table.modExists(\"page\")) {\n\n\t\t\t\tthis.refreshActiveData(\"page\");\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype.addRow = function (data, pos, index, blockRedraw) {\n\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\n\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\n\t\t\tthis.table.modules.history.action(\"rowAdd\", row, { data: data, pos: pos, index: index });\n\t\t}\n\n\t\treturn row;\n\t};\n\n\t//add multiple rows\n\n\tRowManager.prototype.addRows = function (data, pos, index) {\n\t\tvar _this11 = this;\n\n\t\tvar self = this,\n\t\t    length = 0,\n\t\t    rows = [];\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tpos = _this11.findAddRowPos(pos);\n\n\t\t\tif (!Array.isArray(data)) {\n\n\t\t\t\tdata = [data];\n\t\t\t}\n\n\t\t\tlength = data.length - 1;\n\n\t\t\tif (typeof index == \"undefined\" && pos || typeof index !== \"undefined\" && !pos) {\n\n\t\t\t\tdata.reverse();\n\t\t\t}\n\n\t\t\tdata.forEach(function (item, i) {\n\n\t\t\t\tvar row = self.addRow(item, pos, index, true);\n\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\tif (_this11.table.options.groupBy && _this11.table.modExists(\"groupRows\")) {\n\n\t\t\t\t_this11.table.modules.groupRows.updateGroupRows(true);\n\t\t\t} else if (_this11.table.options.pagination && _this11.table.modExists(\"page\")) {\n\n\t\t\t\t_this11.refreshActiveData(false, false, true);\n\t\t\t} else {\n\n\t\t\t\t_this11.reRenderInPosition();\n\t\t\t}\n\n\t\t\t//recalc column calculations if present\n\n\t\t\tif (_this11.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\t_this11.table.modules.columnCalcs.recalc(_this11.table.rowManager.activeRows);\n\t\t\t}\n\n\t\t\t_this11.regenerateRowNumbers();\n\n\t\t\tresolve(rows);\n\t\t});\n\t};\n\n\tRowManager.prototype.findAddRowPos = function (pos) {\n\n\t\tif (typeof pos === \"undefined\") {\n\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\n\t\tif (pos === \"pos\") {\n\n\t\t\tpos = true;\n\t\t}\n\n\t\tif (pos === \"bottom\") {\n\n\t\t\tpos = false;\n\t\t}\n\n\t\treturn pos;\n\t};\n\n\tRowManager.prototype.addRowActual = function (data, pos, index, blockRedraw) {\n\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\t    top = this.findAddRowPos(pos),\n\t\t    allIndex = -1,\n\t\t    activeIndex,\n\t\t    dispRows;\n\n\t\tif (!index && this.table.options.pagination && this.table.options.paginationAddRow == \"page\") {\n\n\t\t\tdispRows = this.getDisplayRows();\n\n\t\t\tif (top) {\n\n\t\t\t\tif (dispRows.length) {\n\n\t\t\t\t\tindex = dispRows[0];\n\t\t\t\t} else {\n\n\t\t\t\t\tif (this.activeRows.length) {\n\n\t\t\t\t\t\tindex = this.activeRows[this.activeRows.length - 1];\n\n\t\t\t\t\t\ttop = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (dispRows.length) {\n\n\t\t\t\t\tindex = dispRows[dispRows.length - 1];\n\n\t\t\t\t\ttop = dispRows.length < this.table.modules.page.getPageSize() ? false : true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof index !== \"undefined\") {\n\n\t\t\tindex = this.findRow(index);\n\t\t}\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tthis.table.modules.groupRows.assignRowToGroup(row);\n\n\t\t\tvar groupRows = row.getGroup().rows;\n\n\t\t\tif (groupRows.length > 1) {\n\n\t\t\t\tif (!index || index && groupRows.indexOf(index) == -1) {\n\n\t\t\t\t\tif (top) {\n\n\t\t\t\t\t\tif (groupRows[0] !== row) {\n\n\t\t\t\t\t\t\tindex = groupRows[0];\n\n\t\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (groupRows[groupRows.length - 1] !== row) {\n\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length - 1];\n\n\t\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (index) {\n\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\n\t\tif (index && allIndex > -1) {\n\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\n\t\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\n\t\t\t\tif (displayIndex > -1) {\n\n\t\t\t\t\trows.splice(top ? displayIndex : displayIndex + 1, 0, row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (activeIndex > -1) {\n\n\t\t\t\tthis.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row);\n\t\t\t}\n\n\t\t\tthis.rows.splice(top ? allIndex : allIndex + 1, 0, row);\n\t\t} else {\n\n\t\t\tif (top) {\n\n\t\t\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\n\t\t\t\tthis.activeRows.unshift(row);\n\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t} else {\n\n\t\t\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\n\t\t\t\tthis.activeRows.push(row);\n\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\n\t\tthis.setActiveRows(this.activeRows);\n\n\t\tthis.table.options.rowAdded.call(this.table, row.getComponent());\n\n\t\tthis.table.options.dataEdited.call(this.table, this.getData());\n\n\t\tif (!blockRedraw) {\n\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\n\t\treturn row;\n\t};\n\n\tRowManager.prototype.moveRow = function (from, to, after) {\n\n\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\n\t\t\tthis.table.modules.history.action(\"rowMove\", from, { posFrom: this.getRowPosition(from), posTo: this.getRowPosition(to), to: to, after: after });\n\t\t}\n\n\t\tthis.moveRowActual(from, to, after);\n\n\t\tthis.regenerateRowNumbers();\n\n\t\tthis.table.options.rowMoved.call(this.table, from.getComponent());\n\t};\n\n\tRowManager.prototype.moveRowActual = function (from, to, after) {\n\t\tvar _this12 = this;\n\n\t\tthis._moveRowInArray(this.rows, from, to, after);\n\n\t\tthis._moveRowInArray(this.activeRows, from, to, after);\n\n\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\t_this12._moveRowInArray(rows, from, to, after);\n\t\t});\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tif (!after && to instanceof Group) {\n\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\n\t\t\tvar toGroup = to.getGroup();\n\n\t\t\tvar fromGroup = from.getGroup();\n\n\t\t\tif (toGroup === fromGroup) {\n\n\t\t\t\tthis._moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t} else {\n\n\t\t\t\tif (fromGroup) {\n\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype._moveRowInArray = function (rows, from, to, after) {\n\n\t\tvar fromIndex, toIndex, start, end;\n\n\t\tif (from !== to) {\n\n\t\t\tfromIndex = rows.indexOf(from);\n\n\t\t\tif (fromIndex > -1) {\n\n\t\t\t\trows.splice(fromIndex, 1);\n\n\t\t\t\ttoIndex = rows.indexOf(to);\n\n\t\t\t\tif (toIndex > -1) {\n\n\t\t\t\t\tif (after) {\n\n\t\t\t\t\t\trows.splice(toIndex + 1, 0, from);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//restyle rows\n\n\t\t\tif (rows === this.getDisplayRows()) {\n\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex + 1;\n\n\t\t\t\tfor (var i = start; i <= end; i++) {\n\n\t\t\t\t\tif (rows[i]) {\n\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype.clearData = function () {\n\n\t\tthis.setData([]);\n\t};\n\n\tRowManager.prototype.getRowIndex = function (row) {\n\n\t\treturn this.findRowIndex(row, this.rows);\n\t};\n\n\tRowManager.prototype.getDisplayRowIndex = function (row) {\n\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\n\t\treturn index > -1 ? index : false;\n\t};\n\n\tRowManager.prototype.nextDisplayRow = function (row, rowOnly) {\n\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\t    nextRow = false;\n\n\t\tif (index !== false && index < this.displayRowsCount - 1) {\n\n\t\t\tnextRow = this.getDisplayRows()[index + 1];\n\t\t}\n\n\t\tif (nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")) {\n\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\n\t\treturn nextRow;\n\t};\n\n\tRowManager.prototype.prevDisplayRow = function (row, rowOnly) {\n\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\t    prevRow = false;\n\n\t\tif (index) {\n\n\t\t\tprevRow = this.getDisplayRows()[index - 1];\n\t\t}\n\n\t\tif (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")) {\n\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\n\t\treturn prevRow;\n\t};\n\n\tRowManager.prototype.findRowIndex = function (row, list) {\n\n\t\tvar rowIndex;\n\n\t\trow = this.findRow(row);\n\n\t\tif (row) {\n\n\t\t\trowIndex = list.indexOf(row);\n\n\t\t\tif (rowIndex > -1) {\n\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRowManager.prototype.getData = function (active, transform) {\n\n\t\tvar output = [],\n\t\t    rows = this.getRows(active);\n\n\t\trows.forEach(function (row) {\n\n\t\t\tif (row.type == \"row\") {\n\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tRowManager.prototype.getComponents = function (active) {\n\n\t\tvar output = [],\n\t\t    rows = this.getRows(active);\n\n\t\trows.forEach(function (row) {\n\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tRowManager.prototype.getDataCount = function (active) {\n\n\t\tvar rows = this.getRows(active);\n\n\t\treturn rows.length;\n\t};\n\n\tRowManager.prototype._genRemoteRequest = function () {\n\t\tvar _this13 = this;\n\n\t\tvar table = this.table,\n\t\t    options = table.options,\n\t\t    params = {};\n\n\t\tif (table.modExists(\"page\")) {\n\n\t\t\t//set sort data if defined\n\n\t\t\tif (options.ajaxSorting) {\n\n\t\t\t\tvar sorters = this.table.modules.sort.getSort();\n\n\t\t\t\tsorters.forEach(function (item) {\n\n\t\t\t\t\tdelete item.column;\n\t\t\t\t});\n\n\t\t\t\tparams[this.table.modules.page.paginationDataSentNames.sorters] = sorters;\n\t\t\t}\n\n\t\t\t//set filter data if defined\n\n\t\t\tif (options.ajaxFiltering) {\n\n\t\t\t\tvar filters = this.table.modules.filter.getFilters(true, true);\n\n\t\t\t\tparams[this.table.modules.page.paginationDataSentNames.filters] = filters;\n\t\t\t}\n\n\t\t\tthis.table.modules.ajax.setParams(params, true);\n\t\t}\n\n\t\ttable.modules.ajax.sendRequest().then(function (data) {\n\n\t\t\t_this13._setDataActual(data, true);\n\t\t}).catch(function (e) {});\n\t};\n\n\t//choose the path to refresh data after a filter update\n\n\tRowManager.prototype.filterRefresh = function () {\n\n\t\tvar table = this.table,\n\t\t    options = table.options,\n\t\t    left = this.scrollLeft;\n\n\t\tif (options.ajaxFiltering) {\n\n\t\t\tif (options.pagination == \"remote\" && table.modExists(\"page\")) {\n\n\t\t\t\ttable.modules.page.reset(true);\n\n\t\t\t\ttable.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t\t\t} else if (options.ajaxProgressiveLoad) {\n\n\t\t\t\ttable.modules.ajax.loadData().then(function () {}).catch(function () {});\n\t\t\t} else {\n\n\t\t\t\t//assume data is url, make ajax call to url to get data\n\n\t\t\t\tthis._genRemoteRequest();\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.refreshActiveData(\"filter\");\n\t\t}\n\n\t\tthis.scrollHorizontal(left);\n\t};\n\n\t//choose the path to refresh data after a sorter update\n\n\tRowManager.prototype.sorterRefresh = function (loadOrignalData) {\n\n\t\tvar table = this.table,\n\t\t    options = this.table.options,\n\t\t    left = this.scrollLeft;\n\n\t\tif (options.ajaxSorting) {\n\n\t\t\tif ((options.pagination == \"remote\" || options.progressiveLoad) && table.modExists(\"page\")) {\n\n\t\t\t\ttable.modules.page.reset(true);\n\n\t\t\t\ttable.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t\t\t} else if (options.ajaxProgressiveLoad) {\n\n\t\t\t\ttable.modules.ajax.loadData().then(function () {}).catch(function () {});\n\t\t\t} else {\n\n\t\t\t\t//assume data is url, make ajax call to url to get data\n\n\t\t\t\tthis._genRemoteRequest();\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.refreshActiveData(loadOrignalData ? \"filter\" : \"sort\");\n\t\t}\n\n\t\tthis.scrollHorizontal(left);\n\t};\n\n\tRowManager.prototype.scrollHorizontal = function (left) {\n\n\t\tthis.scrollLeft = left;\n\n\t\tthis.element.scrollLeft = left;\n\n\t\tif (this.table.options.groupBy) {\n\n\t\t\tthis.table.modules.groupRows.scrollHeaders(left);\n\t\t}\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tthis.table.modules.columnCalcs.scrollHorizontal(left);\n\t\t}\n\t};\n\n\t//set active data set\n\n\tRowManager.prototype.refreshActiveData = function (stage, skipStage, renderInPosition) {\n\n\t\tvar self = this,\n\t\t    table = this.table,\n\t\t    cascadeOrder = [\"all\", \"filter\", \"sort\", \"display\", \"freeze\", \"group\", \"tree\", \"page\"],\n\t\t    displayIndex;\n\n\t\tif (this.redrawBlock) {\n\n\t\t\tif (!this.redrawBlockRestoreConfig || cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage)) {\n\n\t\t\t\tthis.redrawBlockRestoreConfig = {\n\n\t\t\t\t\tstage: stage,\n\n\t\t\t\t\tskipStage: skipStage,\n\n\t\t\t\t\trenderInPosition: renderInPosition\n\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn;\n\t\t} else {\n\n\t\t\tif (self.table.modExists(\"edit\")) {\n\n\t\t\t\tself.table.modules.edit.cancelEdit();\n\t\t\t}\n\n\t\t\tif (!stage) {\n\n\t\t\t\tstage = \"all\";\n\t\t\t}\n\n\t\t\tif (table.options.selectable && !table.options.selectablePersistence && table.modExists(\"selectRow\")) {\n\n\t\t\t\ttable.modules.selectRow.deselectRows();\n\t\t\t}\n\n\t\t\t//cascade through data refresh stages\n\n\t\t\tswitch (stage) {\n\n\t\t\t\tcase \"all\":\n\n\t\t\t\tcase \"filter\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.modExists(\"filter\")) {\n\n\t\t\t\t\t\t\tself.setActiveRows(table.modules.filter.filter(self.rows));\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tself.setActiveRows(self.rows.slice(0));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\tcase \"sort\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.modExists(\"sort\")) {\n\n\t\t\t\t\t\t\ttable.modules.sort.sort(this.activeRows);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t//regenerate row numbers for row number formatter if in use\n\n\t\t\t\t\tthis.regenerateRowNumbers();\n\n\t\t\t\t//generic stage to allow for pipeline trigger after the data manipulation stage\n\n\t\t\t\tcase \"display\":\n\n\t\t\t\t\tthis.resetDisplayRows();\n\n\t\t\t\tcase \"freeze\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (this.table.modExists(\"frozenRows\")) {\n\n\t\t\t\t\t\t\tif (table.modules.frozenRows.isFrozen()) {\n\n\t\t\t\t\t\t\t\tif (!table.modules.frozenRows.getDisplayIndex()) {\n\n\t\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdisplayIndex = table.modules.frozenRows.getDisplayIndex();\n\n\t\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.frozenRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\t\tif (displayIndex !== true) {\n\n\t\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\tcase \"group\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.options.groupBy && table.modExists(\"groupRows\")) {\n\n\t\t\t\t\t\t\tif (!table.modules.groupRows.getDisplayIndex()) {\n\n\t\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = table.modules.groupRows.getDisplayIndex();\n\n\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.groupRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\tif (displayIndex !== true) {\n\n\t\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\tcase \"tree\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.options.dataTree && table.modExists(\"dataTree\")) {\n\n\t\t\t\t\t\t\tif (!table.modules.dataTree.getDisplayIndex()) {\n\n\t\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = table.modules.dataTree.getDisplayIndex();\n\n\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.dataTree.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\tif (displayIndex !== true) {\n\n\t\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (table.options.pagination && table.modExists(\"page\") && !renderInPosition) {\n\n\t\t\t\t\t\tif (table.modules.page.getMode() == \"local\") {\n\n\t\t\t\t\t\t\ttable.modules.page.reset();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\tcase \"page\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.options.pagination && table.modExists(\"page\")) {\n\n\t\t\t\t\t\t\tif (!table.modules.page.getDisplayIndex()) {\n\n\t\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = table.modules.page.getDisplayIndex();\n\n\t\t\t\t\t\t\tif (table.modules.page.getMode() == \"local\") {\n\n\t\t\t\t\t\t\t\ttable.modules.page.setMaxRows(this.getDisplayRows(displayIndex - 1).length);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.page.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\tif (displayIndex !== true) {\n\n\t\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (Tabulator.prototype.helpers.elVisible(self.element)) {\n\n\t\t\t\tif (renderInPosition) {\n\n\t\t\t\t\tself.reRenderInPosition();\n\t\t\t\t} else {\n\n\t\t\t\t\tself.renderTable();\n\n\t\t\t\t\tif (table.options.layoutColumnsOnNewData) {\n\n\t\t\t\t\t\tself.table.columnManager.redraw(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (table.modExists(\"columnCalcs\")) {\n\n\t\t\t\ttable.modules.columnCalcs.recalc(this.activeRows);\n\t\t\t}\n\t\t}\n\t};\n\n\t//regenerate row numbers for row number formatter if in use\n\n\tRowManager.prototype.regenerateRowNumbers = function () {\n\t\tvar _this14 = this;\n\n\t\tif (this.rowNumColumn) {\n\n\t\t\tthis.activeRows.forEach(function (row) {\n\n\t\t\t\tvar cell = row.getCell(_this14.rowNumColumn);\n\n\t\t\t\tif (cell) {\n\n\t\t\t\t\tcell._generateContents();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tRowManager.prototype.setActiveRows = function (activeRows) {\n\n\t\tthis.activeRows = activeRows;\n\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t};\n\n\t//reset display rows array\n\n\tRowManager.prototype.resetDisplayRows = function () {\n\n\t\tthis.displayRows = [];\n\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\n\t\tif (this.table.modExists(\"frozenRows\")) {\n\n\t\t\tthis.table.modules.frozenRows.setDisplayIndex(0);\n\t\t}\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tthis.table.modules.groupRows.setDisplayIndex(0);\n\t\t}\n\n\t\tif (this.table.options.pagination && this.table.modExists(\"page\")) {\n\n\t\t\tthis.table.modules.page.setDisplayIndex(0);\n\t\t}\n\t};\n\n\tRowManager.prototype.getNextDisplayIndex = function () {\n\n\t\treturn this.displayRows.length;\n\t};\n\n\t//set display row pipeline data\n\n\tRowManager.prototype.setDisplayRows = function (displayRows, index) {\n\n\t\tvar output = true;\n\n\t\tif (index && typeof this.displayRows[index] != \"undefined\") {\n\n\t\t\tthis.displayRows[index] = displayRows;\n\n\t\t\toutput = true;\n\t\t} else {\n\n\t\t\tthis.displayRows.push(displayRows);\n\n\t\t\toutput = index = this.displayRows.length - 1;\n\t\t}\n\n\t\tif (index == this.displayRows.length - 1) {\n\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tRowManager.prototype.getDisplayRows = function (index) {\n\n\t\tif (typeof index == \"undefined\") {\n\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [];\n\t\t} else {\n\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t};\n\n\tRowManager.prototype.getVisibleRows = function (viewable) {\n\n\t\tvar topEdge = this.element.scrollTop,\n\t\t    bottomEdge = this.element.clientHeight + topEdge,\n\t\t    topFound = false,\n\t\t    topRow = 0,\n\t\t    bottomRow = 0,\n\t\t    rows = this.getDisplayRows();\n\n\t\tif (viewable) {\n\n\t\t\tthis.getDisplayRows();\n\n\t\t\tfor (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n\n\t\t\t\tif (rows[i]) {\n\n\t\t\t\t\tif (!topFound) {\n\n\t\t\t\t\t\tif (topEdge - rows[i].getElement().offsetTop >= 0) {\n\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\ttopRow = this.vDomTop;\n\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t};\n\n\t//repeat action accross display rows\n\n\tRowManager.prototype.displayRowIterator = function (callback) {\n\n\t\tthis.displayRows.forEach(callback);\n\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n\t};\n\n\t//return only actual rows (not group headers etc)\n\n\tRowManager.prototype.getRows = function (active) {\n\n\t\tvar rows;\n\n\t\tswitch (active) {\n\n\t\t\tcase \"active\":\n\n\t\t\t\trows = this.activeRows;\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"display\":\n\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"visible\":\n\n\t\t\t\trows = this.getVisibleRows(true);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\trows = this.rows;\n\n\t\t}\n\n\t\treturn rows;\n\t};\n\n\t///////////////// Table Rendering /////////////////\n\n\n\t//trigger rerender of table in current position\n\n\tRowManager.prototype.reRenderInPosition = function (callback) {\n\n\t\tif (this.getRenderMode() == \"virtual\") {\n\n\t\t\tif (this.redrawBlock) {\n\n\t\t\t\tif (callback) {\n\n\t\t\t\t\tcallback();\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.redrawBlockRederInPosition = true;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tvar scrollTop = this.element.scrollTop;\n\n\t\t\t\tvar topRow = false;\n\n\t\t\t\tvar topOffset = false;\n\n\t\t\t\tvar left = this.scrollLeft;\n\n\t\t\t\tvar rows = this.getDisplayRows();\n\n\t\t\t\tfor (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n\n\t\t\t\t\tif (rows[i]) {\n\n\t\t\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\t\t\tif (topOffset === false || Math.abs(diff) < topOffset) {\n\n\t\t\t\t\t\t\ttopOffset = diff;\n\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (callback) {\n\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\n\t\t\t\tthis._virtualRenderFill(topRow === false ? this.displayRowsCount - 1 : topRow, true, topOffset || 0);\n\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.renderTable();\n\n\t\t\tif (callback) {\n\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype.setRenderMode = function () {\n\n\t\tif (this.table.options.virtualDom) {\n\n\t\t\tthis.renderMode = \"virtual\";\n\n\t\t\tif (this.table.element.clientHeight || this.table.options.height) {\n\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t} else {\n\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.renderMode = \"classic\";\n\t\t}\n\t};\n\n\tRowManager.prototype.getRenderMode = function () {\n\n\t\treturn this.renderMode;\n\t};\n\n\tRowManager.prototype.renderTable = function () {\n\n\t\tthis.table.options.renderStarted.call(this.table);\n\n\t\tthis.element.scrollTop = 0;\n\n\t\tswitch (this.renderMode) {\n\n\t\t\tcase \"classic\":\n\n\t\t\t\tthis._simpleRender();\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"virtual\":\n\n\t\t\t\tthis._virtualRenderFill();\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (this.firstRender) {\n\n\t\t\tif (this.displayRowsCount) {\n\n\t\t\t\tthis.firstRender = false;\n\n\t\t\t\tthis.table.modules.layout.layout();\n\t\t\t} else {\n\n\t\t\t\tthis.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t}\n\n\t\tif (!this.displayRowsCount) {\n\n\t\t\tif (this.table.options.placeholder) {\n\n\t\t\t\tthis.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\n\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\n\n\t\t\t\tthis.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tthis.table.options.renderComplete.call(this.table);\n\t};\n\n\t//simple render on heightless table\n\n\tRowManager.prototype._simpleRender = function () {\n\n\t\tthis._clearVirtualDom();\n\n\t\tif (this.displayRowsCount) {\n\n\t\t\tthis.checkClassicModeGroupHeaderWidth();\n\t\t} else {\n\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t};\n\n\tRowManager.prototype.checkClassicModeGroupHeaderWidth = function () {\n\n\t\tvar self = this,\n\t\t    element = this.tableElement,\n\t\t    onlyGroupHeaders = true;\n\n\t\tself.getDisplayRows().forEach(function (row, index) {\n\n\t\t\tself.styleRow(row, index);\n\n\t\t\telement.appendChild(row.getElement());\n\n\t\t\trow.initialize(true);\n\n\t\t\tif (row.type !== \"group\") {\n\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\n\t\tif (onlyGroupHeaders) {\n\n\t\t\telement.style.minWidth = self.table.columnManager.getWidth() + \"px\";\n\t\t} else {\n\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t};\n\n\t//show scrollbars on empty table div\n\n\tRowManager.prototype.renderEmptyScroll = function () {\n\n\t\tif (this.table.options.placeholder) {\n\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t} else {\n\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\n\t\t\tthis.tableElement.style.minHeight = \"1px\";\n\n\t\t\tthis.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t};\n\n\tRowManager.prototype._clearVirtualDom = function () {\n\n\t\tvar element = this.tableElement;\n\n\t\tif (this.table.options.placeholder && this.table.options.placeholder.parentNode) {\n\n\t\t\tthis.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\n\t\t}\n\n\t\t// element.children.detach();\n\n\t\twhile (element.firstChild) {\n\t\t\telement.removeChild(element.firstChild);\n\t\t}element.style.paddingTop = \"\";\n\n\t\telement.style.paddingBottom = \"\";\n\n\t\telement.style.minWidth = \"\";\n\n\t\telement.style.minHeight = \"\";\n\n\t\telement.style.display = \"\";\n\n\t\telement.style.visibility = \"\";\n\n\t\tthis.scrollTop = 0;\n\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\n\t\tthis.vDomBottom = 0;\n\n\t\tthis.vDomTopPad = 0;\n\n\t\tthis.vDomBottomPad = 0;\n\t};\n\n\tRowManager.prototype.styleRow = function (row, index) {\n\n\t\tvar rowEl = row.getElement();\n\n\t\tif (index % 2) {\n\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t} else {\n\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t};\n\n\t//full virtual render\n\n\tRowManager.prototype._virtualRenderFill = function (position, forceMove, offset) {\n\n\t\tvar self = this,\n\t\t    element = self.tableElement,\n\t\t    holder = self.element,\n\t\t    topPad = 0,\n\t\t    rowsHeight = 0,\n\t\t    topPadHeight = 0,\n\t\t    i = 0,\n\t\t    onlyGroupHeaders = true,\n\t\t    rows = self.getDisplayRows();\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif (!position) {\n\n\t\t\tself._clearVirtualDom();\n\t\t} else {\n\n\t\t\twhile (element.firstChild) {\n\t\t\t\telement.removeChild(element.firstChild);\n\t\t\t} //check if position is too close to bottom of table\n\n\t\t\tvar heightOccupied = (self.displayRowsCount - position + 1) * self.vDomRowHeight;\n\n\t\t\tif (heightOccupied < self.height) {\n\n\t\t\t\tposition -= Math.ceil((self.height - heightOccupied) / self.vDomRowHeight);\n\n\t\t\t\tif (position < 0) {\n\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\n\t\t\ttopPad = Math.min(Math.max(Math.floor(self.vDomWindowBuffer / self.vDomRowHeight), self.vDomWindowMinMarginRows), position);\n\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif (self.displayRowsCount && Tabulator.prototype.helpers.elVisible(self.element)) {\n\n\t\t\tself.vDomTop = position;\n\n\t\t\tself.vDomBottom = position - 1;\n\n\t\t\twhile ((rowsHeight <= self.height + self.vDomWindowBuffer || i < self.vDomWindowMinTotalRows) && self.vDomBottom < self.displayRowsCount - 1) {\n\n\t\t\t\tvar index = self.vDomBottom + 1,\n\t\t\t\t    row = rows[index],\n\t\t\t\t    rowHeight = 0;\n\n\t\t\t\tself.styleRow(row, index);\n\n\t\t\t\telement.appendChild(row.getElement());\n\n\t\t\t\tif (!row.initialized) {\n\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t} else {\n\n\t\t\t\t\tif (!row.heightInitialized) {\n\n\t\t\t\t\t\trow.normalizeHeight(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowHeight = row.getHeight();\n\n\t\t\t\tif (i < topPad) {\n\n\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t} else {\n\n\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t}\n\n\t\t\t\tif (rowHeight > this.vDomWindowBuffer) {\n\n\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t}\n\n\t\t\t\tif (row.type !== \"group\") {\n\n\t\t\t\t\tonlyGroupHeaders = false;\n\t\t\t\t}\n\n\t\t\t\tself.vDomBottom++;\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tif (!position) {\n\n\t\t\t\tthis.vDomTopPad = 0;\n\n\t\t\t\t//adjust rowheight to match average of rendered elements\n\n\t\t\t\tself.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n\n\t\t\t\tself.vDomBottomPad = self.vDomRowHeight * (self.displayRowsCount - self.vDomBottom - 1);\n\n\t\t\t\tself.vDomScrollHeight = topPadHeight + rowsHeight + self.vDomBottomPad - self.height;\n\t\t\t} else {\n\n\t\t\t\tself.vDomTopPad = !forceMove ? self.scrollTop - topPadHeight : self.vDomRowHeight * this.vDomTop + offset;\n\n\t\t\t\tself.vDomBottomPad = self.vDomBottom == self.displayRowsCount - 1 ? 0 : Math.max(self.vDomScrollHeight - self.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\n\t\t\telement.style.paddingTop = self.vDomTopPad + \"px\";\n\n\t\t\telement.style.paddingBottom = self.vDomBottomPad + \"px\";\n\n\t\t\tif (forceMove) {\n\n\t\t\t\tthis.scrollTop = self.vDomTopPad + topPadHeight + offset - (this.element.scrollWidth > this.element.clientWidth ? this.element.offsetHeight - this.element.clientHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.element.scrollHeight - this.height);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\n\t\t\tif (this.element.scrollWidth > this.element.offsetWidth && forceMove) {\n\n\t\t\t\tthis.scrollTop += this.element.offsetHeight - this.element.clientHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\telement.style.minWidth = onlyGroupHeaders ? self.table.columnManager.getWidth() + \"px\" : \"\";\n\n\t\t\tif (self.table.options.groupBy) {\n\n\t\t\t\tif (self.table.modules.layout.getMode() != \"fitDataFill\" && self.displayRowsCount == self.table.modules.groupRows.countGroups()) {\n\n\t\t\t\t\tself.tableElement.style.minWidth = self.table.columnManager.getWidth();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\n\t\tif (!this.fixedHeight) {\n\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t};\n\n\t//handle vertical scrolling\n\n\tRowManager.prototype.scrollVertical = function (dir) {\n\n\t\tvar topDiff = this.scrollTop - this.vDomScrollPosTop;\n\n\t\tvar bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\n\t\tif (-topDiff > margin || bottomDiff > margin) {\n\n\t\t\t//if big scroll redraw table;\n\n\t\t\tvar left = this.scrollLeft;\n\n\t\t\tthis._virtualRenderFill(Math.floor(this.element.scrollTop / this.element.scrollHeight * this.displayRowsCount));\n\n\t\t\tthis.scrollHorizontal(left);\n\t\t} else {\n\n\t\t\tif (dir) {\n\n\t\t\t\t//scrolling up\n\n\t\t\t\tif (topDiff < 0) {\n\n\t\t\t\t\tthis._addTopRow(-topDiff);\n\t\t\t\t}\n\n\t\t\t\tif (bottomDiff < 0) {\n\n\t\t\t\t\t//hide bottom row if needed\n\n\t\t\t\t\tif (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\n\n\t\t\t\t\t\tthis._removeBottomRow(-bottomDiff);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t//scrolling down\n\n\t\t\t\tif (topDiff >= 0) {\n\n\t\t\t\t\t//hide top row if needed\n\n\t\t\t\t\tif (this.scrollTop > this.vDomWindowBuffer) {\n\n\t\t\t\t\t\tthis._removeTopRow(topDiff);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (bottomDiff >= 0) {\n\n\t\t\t\t\tthis._addBottomRow(bottomDiff);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype._addTopRow = function (topDiff) {\n\t\tvar i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n\n\t\tvar table = this.tableElement,\n\t\t    rows = this.getDisplayRows();\n\n\t\tif (this.vDomTop) {\n\n\t\t\tvar index = this.vDomTop - 1,\n\t\t\t    topRow = rows[index],\n\t\t\t    topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n\t\t\t//hide top row if needed\n\n\t\t\tif (topDiff >= topRowHeight) {\n\n\t\t\t\tthis.styleRow(topRow, index);\n\n\t\t\t\ttable.insertBefore(topRow.getElement(), table.firstChild);\n\n\t\t\t\tif (!topRow.initialized || !topRow.heightInitialized) {\n\n\t\t\t\t\tthis.vDomTopNewRows.push(topRow);\n\n\t\t\t\t\tif (!topRow.heightInitialized) {\n\n\t\t\t\t\t\ttopRow.clearCellHeight();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttopRow.initialize();\n\n\t\t\t\tthis.vDomTopPad -= topRowHeight;\n\n\t\t\t\tif (this.vDomTopPad < 0) {\n\n\t\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t\t}\n\n\t\t\t\tif (!index) {\n\n\t\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t}\n\n\t\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\n\t\t\t\tthis.vDomScrollPosTop -= topRowHeight;\n\n\t\t\t\tthis.vDomTop--;\n\t\t\t}\n\n\t\t\ttopDiff = -(this.scrollTop - this.vDomScrollPosTop);\n\n\t\t\tif (topRow.getHeight() > this.vDomWindowBuffer) {\n\n\t\t\t\tthis.vDomWindowBuffer = topRow.getHeight() * 2;\n\t\t\t}\n\n\t\t\tif (i < this.vDomMaxRenderChain && this.vDomTop && topDiff >= (rows[this.vDomTop - 1].getHeight() || this.vDomRowHeight)) {\n\n\t\t\t\tthis._addTopRow(topDiff, i + 1);\n\t\t\t} else {\n\n\t\t\t\tthis._quickNormalizeRowHeight(this.vDomTopNewRows);\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype._removeTopRow = function (topDiff) {\n\n\t\tvar table = this.tableElement,\n\t\t    topRow = this.getDisplayRows()[this.vDomTop],\n\t\t    topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n\t\tif (topDiff >= topRowHeight) {\n\n\t\t\tvar rowEl = topRow.getElement();\n\n\t\t\trowEl.parentNode.removeChild(rowEl);\n\n\t\t\tthis.vDomTopPad += topRowHeight;\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? topRowHeight : topRowHeight + this.vDomWindowBuffer;\n\n\t\t\tthis.vDomTop++;\n\n\t\t\ttopDiff = this.scrollTop - this.vDomScrollPosTop;\n\n\t\t\tthis._removeTopRow(topDiff);\n\t\t}\n\t};\n\n\tRowManager.prototype._addBottomRow = function (bottomDiff) {\n\t\tvar i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n\n\t\tvar table = this.tableElement,\n\t\t    rows = this.getDisplayRows();\n\n\t\tif (this.vDomBottom < this.displayRowsCount - 1) {\n\n\t\t\tvar index = this.vDomBottom + 1,\n\t\t\t    bottomRow = rows[index],\n\t\t\t    bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n\t\t\t//hide bottom row if needed\n\n\t\t\tif (bottomDiff >= bottomRowHeight) {\n\n\t\t\t\tthis.styleRow(bottomRow, index);\n\n\t\t\t\ttable.appendChild(bottomRow.getElement());\n\n\t\t\t\tif (!bottomRow.initialized || !bottomRow.heightInitialized) {\n\n\t\t\t\t\tthis.vDomBottomNewRows.push(bottomRow);\n\n\t\t\t\t\tif (!bottomRow.heightInitialized) {\n\n\t\t\t\t\t\tbottomRow.clearCellHeight();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbottomRow.initialize();\n\n\t\t\t\tthis.vDomBottomPad -= bottomRowHeight;\n\n\t\t\t\tif (this.vDomBottomPad < 0 || index == this.displayRowsCount - 1) {\n\n\t\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t\t}\n\n\t\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\n\t\t\t\tthis.vDomScrollPosBottom += bottomRowHeight;\n\n\t\t\t\tthis.vDomBottom++;\n\t\t\t}\n\n\t\t\tbottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\n\t\t\tif (bottomRow.getHeight() > this.vDomWindowBuffer) {\n\n\t\t\t\tthis.vDomWindowBuffer = bottomRow.getHeight() * 2;\n\t\t\t}\n\n\t\t\tif (i < this.vDomMaxRenderChain && this.vDomBottom < this.displayRowsCount - 1 && bottomDiff >= (rows[this.vDomBottom + 1].getHeight() || this.vDomRowHeight)) {\n\n\t\t\t\tthis._addBottomRow(bottomDiff, i + 1);\n\t\t\t} else {\n\n\t\t\t\tthis._quickNormalizeRowHeight(this.vDomBottomNewRows);\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype._removeBottomRow = function (bottomDiff) {\n\n\t\tvar table = this.tableElement,\n\t\t    bottomRow = this.getDisplayRows()[this.vDomBottom],\n\t\t    bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n\t\tif (bottomDiff >= bottomRowHeight) {\n\n\t\t\tvar rowEl = bottomRow.getElement();\n\n\t\t\tif (rowEl.parentNode) {\n\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.vDomBottomPad += bottomRowHeight;\n\n\t\t\tif (this.vDomBottomPad < 0) {\n\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\n\t\t\tthis.vDomScrollPosBottom -= bottomRowHeight;\n\n\t\t\tthis.vDomBottom--;\n\n\t\t\tbottomDiff = -(this.scrollTop - this.vDomScrollPosBottom);\n\n\t\t\tthis._removeBottomRow(bottomDiff);\n\t\t}\n\t};\n\n\tRowManager.prototype._quickNormalizeRowHeight = function (rows) {\n\n\t\trows.forEach(function (row) {\n\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function (row) {\n\n\t\t\trow.setCellHeight();\n\t\t});\n\n\t\trows.length = 0;\n\t};\n\n\t//normalize height of active rows\n\n\tRowManager.prototype.normalizeHeight = function () {\n\n\t\tthis.activeRows.forEach(function (row) {\n\n\t\t\trow.normalizeHeight();\n\t\t});\n\t};\n\n\t//adjust the height of the table holder to fit in the Tabulator element\n\n\tRowManager.prototype.adjustTableSize = function () {\n\n\t\tvar initialHeight = this.element.clientHeight,\n\t\t    modExists;\n\n\t\tif (this.renderMode === \"virtual\") {\n\n\t\t\tvar otherHeight = this.columnManager.getElement().offsetHeight + (this.table.footerManager && !this.table.footerManager.external ? this.table.footerManager.getElement().offsetHeight : 0);\n\n\t\t\tif (this.fixedHeight) {\n\n\t\t\t\tthis.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\n\t\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n\n\t\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t} else {\n\n\t\t\t\tthis.element.style.height = \"\";\n\n\t\t\t\tthis.element.style.height = this.table.element.clientHeight - otherHeight + \"px\";\n\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\n\t\t\tthis.height = this.element.clientHeight;\n\n\t\t\tthis.vDomWindowBuffer = this.table.options.virtualDomBuffer || this.height;\n\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\n\t\t\tif (!this.fixedHeight && initialHeight != this.element.clientHeight) {\n\n\t\t\t\tmodExists = this.table.modExists(\"resizeTable\");\n\n\t\t\t\tif (modExists && !this.table.modules.resizeTable.autoResize || !modExists) {\n\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//renitialize all rows\n\n\tRowManager.prototype.reinitialize = function () {\n\n\t\tthis.rows.forEach(function (row) {\n\n\t\t\trow.reinitialize();\n\t\t});\n\t};\n\n\t//prevent table from being redrawn\n\n\tRowManager.prototype.blockRedraw = function () {\n\n\t\tthis.redrawBlock = true;\n\n\t\tthis.redrawBlockRestoreConfig = false;\n\t};\n\n\t//restore table redrawing\n\n\tRowManager.prototype.restoreRedraw = function () {\n\n\t\tthis.redrawBlock = false;\n\n\t\tif (this.redrawBlockRestoreConfig) {\n\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.stage, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t} else {\n\n\t\t\tif (this.redrawBlockRederInPosition) {\n\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\n\t\tthis.redrawBlockRederInPosition = false;\n\t};\n\n\t//redraw table\n\n\tRowManager.prototype.redraw = function (force) {\n\n\t\tvar pos = 0,\n\t\t    left = this.scrollLeft;\n\n\t\tthis.adjustTableSize();\n\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\n\t\tif (!force) {\n\n\t\t\tif (this.renderMode == \"classic\") {\n\n\t\t\t\tif (this.table.options.groupBy) {\n\n\t\t\t\t\tthis.refreshActiveData(\"group\", false, false);\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._simpleRender();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tthis.reRenderInPosition();\n\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t}\n\n\t\t\tif (!this.displayRowsCount) {\n\n\t\t\t\tif (this.table.options.placeholder) {\n\n\t\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.renderTable();\n\t\t}\n\t};\n\n\tRowManager.prototype.resetScroll = function () {\n\n\t\tthis.element.scrollLeft = 0;\n\n\t\tthis.element.scrollTop = 0;\n\n\t\tif (this.table.browser === \"ie\") {\n\n\t\t\tvar event = document.createEvent(\"Event\");\n\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\n\t\t\tthis.element.dispatchEvent(event);\n\t\t} else {\n\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t};\n\n\t//public row object\n\n\tvar RowComponent = function RowComponent(row) {\n\n\t\tthis._row = row;\n\t};\n\n\tRowComponent.prototype.getData = function (transform) {\n\n\t\treturn this._row.getData(transform);\n\t};\n\n\tRowComponent.prototype.getElement = function () {\n\n\t\treturn this._row.getElement();\n\t};\n\n\tRowComponent.prototype.getCells = function () {\n\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function (cell) {\n\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t};\n\n\tRowComponent.prototype.getCell = function (column) {\n\n\t\tvar cell = this._row.getCell(column);\n\n\t\treturn cell ? cell.getComponent() : false;\n\t};\n\n\tRowComponent.prototype.getIndex = function () {\n\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t};\n\n\tRowComponent.prototype.getPosition = function (active) {\n\n\t\treturn this._row.table.rowManager.getRowPosition(this._row, active);\n\t};\n\n\tRowComponent.prototype.delete = function () {\n\n\t\treturn this._row.delete();\n\t};\n\n\tRowComponent.prototype.scrollTo = function () {\n\n\t\treturn this._row.table.rowManager.scrollToRow(this._row);\n\t};\n\n\tRowComponent.prototype.pageTo = function () {\n\n\t\tif (this._row.table.modExists(\"page\", true)) {\n\n\t\t\treturn this._row.table.modules.page.setPageToRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.move = function (to, after) {\n\n\t\tthis._row.moveToRow(to, after);\n\t};\n\n\tRowComponent.prototype.update = function (data) {\n\n\t\treturn this._row.updateData(data);\n\t};\n\n\tRowComponent.prototype.normalizeHeight = function () {\n\n\t\tthis._row.normalizeHeight(true);\n\t};\n\n\tRowComponent.prototype.select = function () {\n\n\t\tthis._row.table.modules.selectRow.selectRows(this._row);\n\t};\n\n\tRowComponent.prototype.deselect = function () {\n\n\t\tthis._row.table.modules.selectRow.deselectRows(this._row);\n\t};\n\n\tRowComponent.prototype.toggleSelect = function () {\n\n\t\tthis._row.table.modules.selectRow.toggleRow(this._row);\n\t};\n\n\tRowComponent.prototype.isSelected = function () {\n\n\t\treturn this._row.table.modules.selectRow.isRowSelected(this._row);\n\t};\n\n\tRowComponent.prototype._getSelf = function () {\n\n\t\treturn this._row;\n\t};\n\n\tRowComponent.prototype.freeze = function () {\n\n\t\tif (this._row.table.modExists(\"frozenRows\", true)) {\n\n\t\t\tthis._row.table.modules.frozenRows.freezeRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.unfreeze = function () {\n\n\t\tif (this._row.table.modExists(\"frozenRows\", true)) {\n\n\t\t\tthis._row.table.modules.frozenRows.unfreezeRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.treeCollapse = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\tthis._row.table.modules.dataTree.collapseRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.treeExpand = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\tthis._row.table.modules.dataTree.expandRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.treeToggle = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\tthis._row.table.modules.dataTree.toggleRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.getTreeParent = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\treturn this._row.table.modules.dataTree.getTreeParent(this._row);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRowComponent.prototype.getTreeChildren = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\treturn this._row.table.modules.dataTree.getTreeChildren(this._row);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRowComponent.prototype.reformat = function () {\n\n\t\treturn this._row.reinitialize();\n\t};\n\n\tRowComponent.prototype.getGroup = function () {\n\n\t\treturn this._row.getGroup().getComponent();\n\t};\n\n\tRowComponent.prototype.getTable = function () {\n\n\t\treturn this._row.table;\n\t};\n\n\tRowComponent.prototype.getNextRow = function () {\n\n\t\tvar row = this._row.nextRow();\n\n\t\treturn row ? row.getComponent() : row;\n\t};\n\n\tRowComponent.prototype.getPrevRow = function () {\n\n\t\tvar row = this._row.prevRow();\n\n\t\treturn row ? row.getComponent() : row;\n\t};\n\n\tvar Row = function Row(data, parent) {\n\t\tvar type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"row\";\n\n\n\t\tthis.table = parent.table;\n\n\t\tthis.parent = parent;\n\n\t\tthis.data = {};\n\n\t\tthis.type = type; //type of element\n\n\t\tthis.element = this.createElement();\n\n\t\tthis.modules = {}; //hold module variables;\n\n\t\tthis.cells = [];\n\n\t\tthis.height = 0; //hold element height\n\n\t\tthis.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\n\n\t\tthis.manualHeight = false; //user has manually set row height\n\n\t\tthis.outerHeight = 0; //holde lements outer height\n\n\t\tthis.initialized = false; //element has been rendered\n\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\n\n\t\tthis.setData(data);\n\n\t\tthis.generateElement();\n\t};\n\n\tRow.prototype.createElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\n\t\tel.setAttribute(\"role\", \"row\");\n\n\t\treturn el;\n\t};\n\n\tRow.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\tRow.prototype.detachElement = function () {\n\n\t\tif (this.element && this.element.parentNode) {\n\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t};\n\n\tRow.prototype.generateElement = function () {\n\n\t\tvar self = this,\n\t\t    dblTap,\n\t\t    tapHold,\n\t\t    tap;\n\n\t\t//set row selection characteristics\n\n\t\tif (self.table.options.selectable !== false && self.table.modExists(\"selectRow\")) {\n\n\t\t\tself.table.modules.selectRow.initializeRow(this);\n\t\t}\n\n\t\t//setup movable rows\n\n\t\tif (self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n\n\t\t\tself.table.modules.moveRow.initializeRow(this);\n\t\t}\n\n\t\t//setup data tree\n\n\t\tif (self.table.options.dataTree !== false && self.table.modExists(\"dataTree\")) {\n\n\t\t\tself.table.modules.dataTree.initializeRow(this);\n\t\t}\n\n\t\t//setup column colapse container\n\n\t\tif (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n\n\t\t\tself.table.modules.responsiveLayout.initializeRow(this);\n\t\t}\n\n\t\t//set column menu\n\n\t\tif (self.table.options.rowContextMenu && this.table.modExists(\"menu\")) {\n\n\t\t\tself.table.modules.menu.initializeRow(this);\n\t\t}\n\n\t\t//handle row click events\n\n\t\tif (self.table.options.rowClick) {\n\n\t\t\tself.element.addEventListener(\"click\", function (e) {\n\n\t\t\t\tself.table.options.rowClick(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowDblClick) {\n\n\t\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\n\t\t\t\tself.table.options.rowDblClick(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowContext) {\n\n\t\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\n\t\t\t\tself.table.options.rowContext(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\t//handle mouse events\n\n\t\tif (self.table.options.rowMouseEnter) {\n\n\t\t\tself.element.addEventListener(\"mouseenter\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseEnter(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowMouseLeave) {\n\n\t\t\tself.element.addEventListener(\"mouseleave\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseLeave(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowMouseOver) {\n\n\t\t\tself.element.addEventListener(\"mouseover\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseOver(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowMouseOut) {\n\n\t\t\tself.element.addEventListener(\"mouseout\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseOut(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowMouseMove) {\n\n\t\t\tself.element.addEventListener(\"mousemove\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseMove(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowTap) {\n\n\t\t\ttap = false;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\ttap = true;\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (tap) {\n\n\t\t\t\t\tself.table.options.rowTap(e, self.getComponent());\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowDblTap) {\n\n\t\t\tdblTap = null;\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (dblTap) {\n\n\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tself.table.options.rowDblTap(e, self.getComponent());\n\t\t\t\t} else {\n\n\t\t\t\t\tdblTap = setTimeout(function () {\n\n\t\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowTapHold) {\n\n\t\t\ttapHold = null;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function () {\n\n\t\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\t\ttapHold = null;\n\n\t\t\t\t\ttap = false;\n\n\t\t\t\t\tself.table.options.rowTapHold(e, self.getComponent());\n\t\t\t\t}, 1000);\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\t};\n\n\tRow.prototype.generateCells = function () {\n\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t};\n\n\t//functions to setup on first render\n\n\tRow.prototype.initialize = function (force) {\n\n\t\tvar self = this;\n\n\t\tif (!self.initialized || force) {\n\n\t\t\tself.deleteCells();\n\n\t\t\twhile (self.element.firstChild) {\n\t\t\t\tself.element.removeChild(self.element.firstChild);\n\t\t\t} //handle frozen cells\n\n\t\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\t\tthis.table.modules.frozenColumns.layoutRow(this);\n\t\t\t}\n\n\t\t\tthis.generateCells();\n\n\t\t\tself.cells.forEach(function (cell) {\n\n\t\t\t\tself.element.appendChild(cell.getElement());\n\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\n\t\t\tif (force) {\n\n\t\t\t\tself.normalizeHeight();\n\t\t\t}\n\n\t\t\t//setup movable rows\n\n\t\t\tif (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n\n\t\t\t\tself.table.modules.dataTree.layoutRow(this);\n\t\t\t}\n\n\t\t\t//setup column colapse container\n\n\t\t\tif (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n\n\t\t\t\tself.table.modules.responsiveLayout.layoutRow(this);\n\t\t\t}\n\n\t\t\tif (self.table.options.rowFormatter) {\n\n\t\t\t\tself.table.options.rowFormatter(self.getComponent());\n\t\t\t}\n\n\t\t\t//set resizable handles\n\n\t\t\tif (self.table.options.resizableRows && self.table.modExists(\"resizeRows\")) {\n\n\t\t\t\tself.table.modules.resizeRows.initializeRow(self);\n\t\t\t}\n\n\t\t\tself.initialized = true;\n\t\t}\n\t};\n\n\tRow.prototype.reinitializeHeight = function () {\n\n\t\tthis.heightInitialized = false;\n\n\t\tif (this.element.offsetParent !== null) {\n\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t};\n\n\tRow.prototype.reinitialize = function () {\n\n\t\tthis.initialized = false;\n\n\t\tthis.heightInitialized = false;\n\n\t\tif (!this.manualHeight) {\n\n\t\t\tthis.height = 0;\n\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\n\t\tif (this.element.offsetParent !== null) {\n\n\t\t\tthis.initialize(true);\n\t\t}\n\t};\n\n\t//get heights when doing bulk row style calcs in virtual DOM\n\n\tRow.prototype.calcHeight = function (force) {\n\n\t\tvar maxHeight = 0,\n\t\t    minHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tvar height = cell.getHeight();\n\n\t\t\tif (height > maxHeight) {\n\n\t\t\t\tmaxHeight = height;\n\t\t\t}\n\t\t});\n\n\t\tif (force) {\n\n\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t} else {\n\n\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t}\n\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t};\n\n\t//set of cells\n\n\tRow.prototype.setCellHeight = function () {\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tcell.setHeight();\n\t\t});\n\n\t\tthis.heightInitialized = true;\n\t};\n\n\tRow.prototype.clearCellHeight = function () {\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tcell.clearHeight();\n\t\t});\n\t};\n\n\t//normalize the height of elements in the row\n\n\tRow.prototype.normalizeHeight = function (force) {\n\n\t\tif (force) {\n\n\t\t\tthis.clearCellHeight();\n\t\t}\n\n\t\tthis.calcHeight(force);\n\n\t\tthis.setCellHeight();\n\t};\n\n\t// Row.prototype.setHeight = function(height){\n\n\t// \tthis.height = height;\n\n\n\t// \tthis.setCellHeight();\n\n\t// };\n\n\n\t//set height of rows\n\n\tRow.prototype.setHeight = function (height, force) {\n\n\t\tif (this.height != height || force) {\n\n\t\t\tthis.manualHeight = true;\n\n\t\t\tthis.height = height;\n\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\n\t\t\tthis.setCellHeight();\n\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t};\n\n\t//return rows outer height\n\n\tRow.prototype.getHeight = function () {\n\n\t\treturn this.outerHeight;\n\t};\n\n\t//return rows outer Width\n\n\tRow.prototype.getWidth = function () {\n\n\t\treturn this.element.offsetWidth;\n\t};\n\n\t//////////////// Cell Management /////////////////\n\n\n\tRow.prototype.deleteCell = function (cell) {\n\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t};\n\n\t//////////////// Data Management /////////////////\n\n\n\tRow.prototype.setData = function (data) {\n\n\t\tif (this.table.modExists(\"mutator\")) {\n\n\t\t\tdata = this.table.modules.mutator.transformRow(data, \"data\");\n\t\t}\n\n\t\tthis.data = data;\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n\n\t\t\tthis.table.modules.reactiveData.watchRow(this);\n\t\t}\n\t};\n\n\t//update the rows data\n\n\tRow.prototype.updateData = function (updatedData) {\n\t\tvar _this15 = this;\n\n\t\tvar visible = Tabulator.prototype.helpers.elVisible(this.element),\n\t\t    tempData = {},\n\t\t    newRowData;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (typeof updatedData === \"string\") {\n\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\n\t\t\tif (_this15.table.options.reactiveData && _this15.table.modExists(\"reactiveData\", true)) {\n\n\t\t\t\t_this15.table.modules.reactiveData.block();\n\t\t\t}\n\n\t\t\t//mutate incomming data if needed\n\n\t\t\tif (_this15.table.modExists(\"mutator\")) {\n\n\t\t\t\ttempData = Object.assign(tempData, _this15.data);\n\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\n\t\t\t\tnewRowData = _this15.table.modules.mutator.transformRow(tempData, \"data\", updatedData);\n\t\t\t} else {\n\n\t\t\t\tnewRowData = updatedData;\n\t\t\t}\n\n\t\t\t//set data\n\n\t\t\tfor (var attrname in newRowData) {\n\n\t\t\t\t_this15.data[attrname] = newRowData[attrname];\n\t\t\t}\n\n\t\t\tif (_this15.table.options.reactiveData && _this15.table.modExists(\"reactiveData\", true)) {\n\n\t\t\t\t_this15.table.modules.reactiveData.unblock();\n\t\t\t}\n\n\t\t\t//update affected cells only\n\n\t\t\tfor (var attrname in updatedData) {\n\n\t\t\t\tvar columns = _this15.table.columnManager.getColumnsByFieldRoot(attrname);\n\n\t\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\t\tvar cell = _this15.getCell(column.getField());\n\n\t\t\t\t\tif (cell) {\n\n\t\t\t\t\t\tvar value = column.getFieldValue(newRowData);\n\n\t\t\t\t\t\tif (cell.getValue() != value) {\n\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\n\t\t\t\t\t\t\tif (visible) {\n\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Partial reinitialization if visible\n\n\t\t\tif (visible) {\n\n\t\t\t\t_this15.normalizeHeight(true);\n\n\t\t\t\tif (_this15.table.options.rowFormatter) {\n\n\t\t\t\t\t_this15.table.options.rowFormatter(_this15.getComponent());\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t_this15.initialized = false;\n\n\t\t\t\t_this15.height = 0;\n\n\t\t\t\t_this15.heightStyled = \"\";\n\t\t\t}\n\n\t\t\tif (_this15.table.options.dataTree !== false && _this15.table.modExists(\"dataTree\") && _this15.table.modules.dataTree.redrawNeeded(updatedData)) {\n\n\t\t\t\t_this15.table.modules.dataTree.initializeRow(_this15);\n\n\t\t\t\t_this15.table.modules.dataTree.layoutRow(_this15);\n\n\t\t\t\t_this15.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t\t\t}\n\n\t\t\t//this.reinitialize();\n\n\n\t\t\t_this15.table.options.rowUpdated.call(_this15.table, _this15.getComponent());\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tRow.prototype.getData = function (transform) {\n\n\t\tvar self = this;\n\n\t\tif (transform) {\n\n\t\t\tif (self.table.modExists(\"accessor\")) {\n\n\t\t\t\treturn self.table.modules.accessor.transformRow(self.data, transform);\n\t\t\t}\n\t\t} else {\n\n\t\t\treturn this.data;\n\t\t}\n\t};\n\n\tRow.prototype.getCell = function (column) {\n\n\t\tvar match = false;\n\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\n\t\tmatch = this.cells.find(function (cell) {\n\n\t\t\treturn cell.column === column;\n\t\t});\n\n\t\treturn match;\n\t};\n\n\tRow.prototype.getCellIndex = function (findCell) {\n\n\t\treturn this.cells.findIndex(function (cell) {\n\n\t\t\treturn cell === findCell;\n\t\t});\n\t};\n\n\tRow.prototype.findNextEditableCell = function (index) {\n\n\t\tvar nextCell = false;\n\n\t\tif (index < this.cells.length - 1) {\n\n\t\t\tfor (var i = index + 1; i < this.cells.length; i++) {\n\n\t\t\t\tvar cell = this.cells[i];\n\n\t\t\t\tif (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n\n\t\t\t\t\tvar allowEdit = true;\n\n\t\t\t\t\tif (typeof cell.column.modules.edit.check == \"function\") {\n\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (allowEdit) {\n\n\t\t\t\t\t\tnextCell = cell;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn nextCell;\n\t};\n\n\tRow.prototype.findPrevEditableCell = function (index) {\n\n\t\tvar prevCell = false;\n\n\t\tif (index > 0) {\n\n\t\t\tfor (var i = index - 1; i >= 0; i--) {\n\n\t\t\t\tvar cell = this.cells[i],\n\t\t\t\t    allowEdit = true;\n\n\t\t\t\tif (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n\n\t\t\t\t\tif (typeof cell.column.modules.edit.check == \"function\") {\n\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (allowEdit) {\n\n\t\t\t\t\t\tprevCell = cell;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn prevCell;\n\t};\n\n\tRow.prototype.getCells = function () {\n\n\t\treturn this.cells;\n\t};\n\n\tRow.prototype.nextRow = function () {\n\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\n\t\treturn row || false;\n\t};\n\n\tRow.prototype.prevRow = function () {\n\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\n\t\treturn row || false;\n\t};\n\n\tRow.prototype.moveToRow = function (to, before) {\n\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\n\t\tif (toRow) {\n\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t};\n\n\t///////////////////// Actions  /////////////////////\n\n\n\tRow.prototype.delete = function () {\n\t\tvar _this16 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar index, rows;\n\n\t\t\tif (_this16.table.options.history && _this16.table.modExists(\"history\")) {\n\n\t\t\t\tif (_this16.table.options.groupBy && _this16.table.modExists(\"groupRows\")) {\n\n\t\t\t\t\trows = _this16.getGroup().rows;\n\n\t\t\t\t\tindex = rows.indexOf(_this16);\n\n\t\t\t\t\tif (index) {\n\n\t\t\t\t\t\tindex = rows[index - 1];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tindex = _this16.table.rowManager.getRowIndex(_this16);\n\n\t\t\t\t\tif (index) {\n\n\t\t\t\t\t\tindex = _this16.table.rowManager.rows[index - 1];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_this16.table.modules.history.action(\"rowDelete\", _this16, { data: _this16.getData(), pos: !index, index: index });\n\t\t\t}\n\n\t\t\t_this16.deleteActual();\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tRow.prototype.deleteActual = function (blockRedraw) {\n\n\t\tvar index = this.table.rowManager.getRowIndex(this);\n\n\t\t//deselect row if it is selected\n\n\t\tif (this.table.modExists(\"selectRow\")) {\n\n\t\t\tthis.table.modules.selectRow._deselectRow(this, true);\n\t\t}\n\n\t\t//cancel edit if row is currently being edited\n\n\t\tif (this.table.modExists(\"edit\")) {\n\n\t\t\tif (this.table.modules.edit.currentCell.row === this) {\n\n\t\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t\t}\n\t\t}\n\n\t\t// if(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\n\n\t\t// \tthis.table.modules.dataTree.collapseRow(this, true);\n\n\t\t// }\n\n\n\t\t//remove any reactive data watchers from row object\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {}\n\n\t\t// this.table.modules.reactiveData.unwatchRow(this);\n\n\t\t//remove from group\n\n\t\tif (this.modules.group) {\n\n\t\t\tthis.modules.group.removeRow(this);\n\t\t}\n\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\n\t\tthis.deleteCells();\n\n\t\tthis.initialized = false;\n\n\t\tthis.heightInitialized = false;\n\n\t\t//recalc column calculations if present\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this);\n\t\t\t} else {\n\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t\t}\n\t\t}\n\t};\n\n\tRow.prototype.deleteCells = function () {\n\n\t\tvar cellCount = this.cells.length;\n\n\t\tfor (var i = 0; i < cellCount; i++) {\n\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t};\n\n\tRow.prototype.wipe = function () {\n\n\t\tthis.deleteCells();\n\n\t\twhile (this.element.firstChild) {\n\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t}this.element = false;\n\n\t\tthis.modules = {};\n\n\t\tif (this.element.parentNode) {\n\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t};\n\n\tRow.prototype.getGroup = function () {\n\n\t\treturn this.modules.group || false;\n\t};\n\n\t//////////////// Object Generation /////////////////\n\n\tRow.prototype.getComponent = function () {\n\n\t\treturn new RowComponent(this);\n\t};\n\n\t//public row object\n\n\tvar CellComponent = function CellComponent(cell) {\n\n\t\tthis._cell = cell;\n\t};\n\n\tCellComponent.prototype.getValue = function () {\n\n\t\treturn this._cell.getValue();\n\t};\n\n\tCellComponent.prototype.getOldValue = function () {\n\n\t\treturn this._cell.getOldValue();\n\t};\n\n\tCellComponent.prototype.getElement = function () {\n\n\t\treturn this._cell.getElement();\n\t};\n\n\tCellComponent.prototype.getRow = function () {\n\n\t\treturn this._cell.row.getComponent();\n\t};\n\n\tCellComponent.prototype.getData = function () {\n\n\t\treturn this._cell.row.getData();\n\t};\n\n\tCellComponent.prototype.getField = function () {\n\n\t\treturn this._cell.column.getField();\n\t};\n\n\tCellComponent.prototype.getColumn = function () {\n\n\t\treturn this._cell.column.getComponent();\n\t};\n\n\tCellComponent.prototype.setValue = function (value, mutate) {\n\n\t\tif (typeof mutate == \"undefined\") {\n\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t};\n\n\tCellComponent.prototype.restoreOldValue = function () {\n\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t};\n\n\tCellComponent.prototype.edit = function (force) {\n\n\t\treturn this._cell.edit(force);\n\t};\n\n\tCellComponent.prototype.cancelEdit = function () {\n\n\t\tthis._cell.cancelEdit();\n\t};\n\n\tCellComponent.prototype.nav = function () {\n\n\t\treturn this._cell.nav();\n\t};\n\n\tCellComponent.prototype.checkHeight = function () {\n\n\t\tthis._cell.checkHeight();\n\t};\n\n\tCellComponent.prototype.getTable = function () {\n\n\t\treturn this._cell.table;\n\t};\n\n\tCellComponent.prototype._getSelf = function () {\n\n\t\treturn this._cell;\n\t};\n\n\tvar Cell = function Cell(column, row) {\n\n\t\tthis.table = column.table;\n\n\t\tthis.column = column;\n\n\t\tthis.row = row;\n\n\t\tthis.element = null;\n\n\t\tthis.value = null;\n\n\t\tthis.oldValue = null;\n\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\n\t\tthis.width = null;\n\n\t\tthis.minWidth = null;\n\n\t\tthis.build();\n\t};\n\n\t//////////////// Setup Functions /////////////////\n\n\n\t//generate element\n\n\tCell.prototype.build = function () {\n\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\t};\n\n\tCell.prototype.generateElement = function () {\n\n\t\tthis.element = document.createElement('div');\n\n\t\tthis.element.className = \"tabulator-cell\";\n\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\n\t\tthis.element = this.element;\n\t};\n\n\tCell.prototype._configureCell = function () {\n\n\t\tvar self = this,\n\t\t    cellEvents = self.column.cellEvents,\n\t\t    element = self.element,\n\t\t    field = this.column.getField(),\n\t\t    vertAligns = {\n\n\t\t\ttop: \"flex-start\",\n\n\t\t\tbottom: \"flex-end\",\n\n\t\t\tmiddle: \"center\"\n\n\t\t},\n\t\t    hozAligns = {\n\n\t\t\tleft: \"flex-start\",\n\n\t\t\tright: \"flex-end\",\n\n\t\t\tcenter: \"center\"\n\n\t\t};\n\n\t\t//set text alignment\n\n\t\telement.style.textAlign = self.column.hozAlign;\n\n\t\tif (self.column.vertAlign) {\n\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[self.column.vertAlign] || \"\";\n\n\t\t\tif (self.column.hozAlign) {\n\n\t\t\t\telement.style.justifyContent = hozAligns[self.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif (field) {\n\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\n\t\tif (self.column.definition.cssClass) {\n\n\t\t\tvar classNames = self.column.definition.cssClass.split(\" \");\n\n\t\t\tclassNames.forEach(function (className) {\n\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\t//update tooltip on mouse enter\n\n\t\tif (this.table.options.tooltipGenerationMode === \"hover\") {\n\n\t\t\telement.addEventListener(\"mouseenter\", function (e) {\n\n\t\t\t\tself._generateTooltip();\n\t\t\t});\n\t\t}\n\n\t\tself._bindClickEvents(cellEvents);\n\n\t\tself._bindTouchEvents(cellEvents);\n\n\t\tself._bindMouseEvents(cellEvents);\n\n\t\tif (self.column.modules.edit) {\n\n\t\t\tself.table.modules.edit.bindEditor(self);\n\t\t}\n\n\t\tif (self.column.definition.rowHandle && self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n\n\t\t\tself.table.modules.moveRow.initializeCell(self);\n\t\t}\n\n\t\t//hide cell if not visible\n\n\t\tif (!self.column.visible) {\n\n\t\t\tself.hide();\n\t\t}\n\t};\n\n\tCell.prototype._bindClickEvents = function (cellEvents) {\n\n\t\tvar self = this,\n\t\t    element = self.element;\n\n\t\t//set event bindings\n\n\t\tif (cellEvents.cellClick || self.table.options.cellClick) {\n\n\t\t\telement.addEventListener(\"click\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellClick) {\n\n\t\t\t\t\tcellEvents.cellClick.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellClick) {\n\n\t\t\t\t\tself.table.options.cellClick.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellDblClick || this.table.options.cellDblClick) {\n\n\t\t\telement.addEventListener(\"dblclick\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellDblClick) {\n\n\t\t\t\t\tcellEvents.cellDblClick.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellDblClick) {\n\n\t\t\t\t\tself.table.options.cellDblClick.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\n\t\t\telement.addEventListener(\"dblclick\", function (e) {\n\n\t\t\t\tif (self.table.modExists(\"edit\")) {\n\n\t\t\t\t\tif (self.table.modules.edit.currentCell === self) {\n\n\t\t\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\ttry {\n\n\t\t\t\t\tif (document.selection) {\n\t\t\t\t\t\t// IE\n\n\t\t\t\t\t\tvar range = document.body.createTextRange();\n\n\t\t\t\t\t\trange.moveToElementText(self.element);\n\n\t\t\t\t\t\trange.select();\n\t\t\t\t\t} else if (window.getSelection) {\n\n\t\t\t\t\t\tvar range = document.createRange();\n\n\t\t\t\t\t\trange.selectNode(self.element);\n\n\t\t\t\t\t\twindow.getSelection().removeAllRanges();\n\n\t\t\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellContext || this.table.options.cellContext) {\n\n\t\t\telement.addEventListener(\"contextmenu\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellContext) {\n\n\t\t\t\t\tcellEvents.cellContext.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellContext) {\n\n\t\t\t\t\tself.table.options.cellContext.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tCell.prototype._bindMouseEvents = function (cellEvents) {\n\n\t\tvar self = this,\n\t\t    element = self.element;\n\n\t\tif (cellEvents.cellMouseEnter || self.table.options.cellMouseEnter) {\n\n\t\t\telement.addEventListener(\"mouseenter\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseEnter) {\n\n\t\t\t\t\tcellEvents.cellMouseEnter.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseEnter) {\n\n\t\t\t\t\tself.table.options.cellMouseEnter.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellMouseLeave || self.table.options.cellMouseLeave) {\n\n\t\t\telement.addEventListener(\"mouseleave\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseLeave) {\n\n\t\t\t\t\tcellEvents.cellMouseLeave.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseLeave) {\n\n\t\t\t\t\tself.table.options.cellMouseLeave.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellMouseOver || self.table.options.cellMouseOver) {\n\n\t\t\telement.addEventListener(\"mouseover\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseOver) {\n\n\t\t\t\t\tcellEvents.cellMouseOver.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseOver) {\n\n\t\t\t\t\tself.table.options.cellMouseOver.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellMouseOut || self.table.options.cellMouseOut) {\n\n\t\t\telement.addEventListener(\"mouseout\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseOut) {\n\n\t\t\t\t\tcellEvents.cellMouseOut.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseOut) {\n\n\t\t\t\t\tself.table.options.cellMouseOut.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellMouseMove || self.table.options.cellMouseMove) {\n\n\t\t\telement.addEventListener(\"mousemove\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseMove) {\n\n\t\t\t\t\tcellEvents.cellMouseMove.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseMove) {\n\n\t\t\t\t\tself.table.options.cellMouseMove.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tCell.prototype._bindTouchEvents = function (cellEvents) {\n\n\t\tvar self = this,\n\t\t    element = self.element,\n\t\t    dblTap,\n\t\t    tapHold,\n\t\t    tap;\n\n\t\tif (cellEvents.cellTap || this.table.options.cellTap) {\n\n\t\t\ttap = false;\n\n\t\t\telement.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\ttap = true;\n\t\t\t}, { passive: true });\n\n\t\t\telement.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (tap) {\n\n\t\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\t\tif (cellEvents.cellTap) {\n\n\t\t\t\t\t\tcellEvents.cellTap.call(self.table, e, component);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.cellTap) {\n\n\t\t\t\t\t\tself.table.options.cellTap.call(self.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellDblTap || this.table.options.cellDblTap) {\n\n\t\t\tdblTap = null;\n\n\t\t\telement.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (dblTap) {\n\n\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\t\tif (cellEvents.cellDblTap) {\n\n\t\t\t\t\t\tcellEvents.cellDblTap.call(self.table, e, component);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.cellDblTap) {\n\n\t\t\t\t\t\tself.table.options.cellDblTap.call(self.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tdblTap = setTimeout(function () {\n\n\t\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellTapHold || this.table.options.cellTapHold) {\n\n\t\t\ttapHold = null;\n\n\t\t\telement.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function () {\n\n\t\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\t\ttapHold = null;\n\n\t\t\t\t\ttap = false;\n\n\t\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\t\tif (cellEvents.cellTapHold) {\n\n\t\t\t\t\t\tcellEvents.cellTapHold.call(self.table, e, component);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.cellTapHold) {\n\n\t\t\t\t\t\tself.table.options.cellTapHold.call(self.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}, 1000);\n\t\t\t}, { passive: true });\n\n\t\t\telement.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\t};\n\n\t//generate cell contents\n\n\tCell.prototype._generateContents = function () {\n\n\t\tvar val;\n\n\t\tif (this.table.modExists(\"format\")) {\n\n\t\t\tval = this.table.modules.format.formatValue(this);\n\t\t} else {\n\n\t\t\tval = this.element.innerHTML = this.value;\n\t\t}\n\n\t\tswitch (typeof val === 'undefined' ? 'undefined' : _typeof(val)) {\n\n\t\t\tcase \"object\":\n\n\t\t\t\tif (val instanceof Node) {\n\n\t\t\t\t\t//clear previous cell contents\n\n\t\t\t\t\twhile (this.element.firstChild) {\n\t\t\t\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t\t\t\t}this.element.appendChild(val);\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif (val != null) {\n\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"undefined\":\n\n\t\t\tcase \"null\":\n\n\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthis.element.innerHTML = val;\n\n\t\t}\n\t};\n\n\tCell.prototype.cellRendered = function () {\n\n\t\tif (this.table.modExists(\"format\") && this.table.modules.format.cellRendered) {\n\n\t\t\tthis.table.modules.format.cellRendered(this);\n\t\t}\n\t};\n\n\t//generate tooltip text\n\n\tCell.prototype._generateTooltip = function () {\n\n\t\tvar tooltip = this.column.tooltip;\n\n\t\tif (tooltip) {\n\n\t\t\tif (tooltip === true) {\n\n\t\t\t\ttooltip = this.value;\n\t\t\t} else if (typeof tooltip == \"function\") {\n\n\t\t\t\ttooltip = tooltip(this.getComponent());\n\n\t\t\t\tif (tooltip === false) {\n\n\t\t\t\t\ttooltip = \"\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof tooltip === \"undefined\") {\n\n\t\t\t\ttooltip = \"\";\n\t\t\t}\n\n\t\t\tthis.element.setAttribute(\"title\", tooltip);\n\t\t} else {\n\n\t\t\tthis.element.setAttribute(\"title\", \"\");\n\t\t}\n\t};\n\n\t//////////////////// Getters ////////////////////\n\n\tCell.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\tCell.prototype.getValue = function () {\n\n\t\treturn this.value;\n\t};\n\n\tCell.prototype.getOldValue = function () {\n\n\t\treturn this.oldValue;\n\t};\n\n\t//////////////////// Actions ////////////////////\n\n\n\tCell.prototype.setValue = function (value, mutate) {\n\n\t\tvar changed = this.setValueProcessData(value, mutate),\n\t\t    component;\n\n\t\tif (changed) {\n\n\t\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\n\t\t\t\tthis.table.modules.history.action(\"cellEdit\", this, { oldValue: this.oldValue, newValue: this.value });\n\t\t\t}\n\n\t\t\tcomponent = this.getComponent();\n\n\t\t\tif (this.column.cellEvents.cellEdited) {\n\n\t\t\t\tthis.column.cellEvents.cellEdited.call(this.table, component);\n\t\t\t}\n\n\t\t\tthis.cellRendered();\n\n\t\t\tthis.table.options.cellEdited.call(this.table, component);\n\n\t\t\tthis.table.options.dataEdited.call(this.table, this.table.rowManager.getData());\n\t\t}\n\t};\n\n\tCell.prototype.setValueProcessData = function (value, mutate) {\n\n\t\tvar changed = false;\n\n\t\tif (this.value != value) {\n\n\t\t\tchanged = true;\n\n\t\t\tif (mutate) {\n\n\t\t\t\tif (this.column.modules.mutate) {\n\n\t\t\t\t\tvalue = this.table.modules.mutator.transformCell(this, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif (changed && this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tif (this.column.definition.topCalc || this.column.definition.bottomCalc) {\n\n\t\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\t\t\tif (this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\") {\n\n\t\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.table.options.columnCalcs != \"table\") {\n\n\t\t\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this.row);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t};\n\n\tCell.prototype.setValueActual = function (value) {\n\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n\n\t\t\tthis.table.modules.reactiveData.block();\n\t\t}\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n\n\t\t\tthis.table.modules.reactiveData.unblock();\n\t\t}\n\n\t\tthis._generateContents();\n\n\t\tthis._generateTooltip();\n\n\t\t//set resizable handles\n\n\t\tif (this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\")) {\n\n\t\t\tthis.table.modules.resizeColumns.initializeColumn(\"cell\", this.column, this.element);\n\t\t}\n\n\t\t//set column menu\n\n\t\tif (this.column.definition.contextMenu && this.table.modExists(\"menu\")) {\n\n\t\t\tthis.table.modules.menu.initializeCell(this);\n\t\t}\n\n\t\t//handle frozen cells\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.layoutElement(this.element, this.column);\n\t\t}\n\t};\n\n\tCell.prototype.setWidth = function () {\n\n\t\tthis.width = this.column.width;\n\n\t\tthis.element.style.width = this.column.widthStyled;\n\t};\n\n\tCell.prototype.clearWidth = function () {\n\n\t\tthis.width = \"\";\n\n\t\tthis.element.style.width = \"\";\n\t};\n\n\tCell.prototype.getWidth = function () {\n\n\t\treturn this.width || this.element.offsetWidth;\n\t};\n\n\tCell.prototype.setMinWidth = function () {\n\n\t\tthis.minWidth = this.column.minWidth;\n\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t};\n\n\tCell.prototype.checkHeight = function () {\n\n\t\t// var height = this.element.css(\"height\");\n\n\t\tthis.row.reinitializeHeight();\n\t};\n\n\tCell.prototype.clearHeight = function () {\n\n\t\tthis.element.style.height = \"\";\n\n\t\tthis.height = null;\n\t};\n\n\tCell.prototype.setHeight = function () {\n\n\t\tthis.height = this.row.height;\n\n\t\tthis.element.style.height = this.row.heightStyled;\n\t};\n\n\tCell.prototype.getHeight = function () {\n\n\t\treturn this.height || this.element.offsetHeight;\n\t};\n\n\tCell.prototype.show = function () {\n\n\t\tthis.element.style.display = \"\";\n\t};\n\n\tCell.prototype.hide = function () {\n\n\t\tthis.element.style.display = \"none\";\n\t};\n\n\tCell.prototype.edit = function (force) {\n\n\t\tif (this.table.modExists(\"edit\", true)) {\n\n\t\t\treturn this.table.modules.edit.editCell(this, force);\n\t\t}\n\t};\n\n\tCell.prototype.cancelEdit = function () {\n\n\t\tif (this.table.modExists(\"edit\", true)) {\n\n\t\t\tvar editing = this.table.modules.edit.getCurrentCell();\n\n\t\t\tif (editing && editing._getSelf() === this) {\n\n\t\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t\t}\n\t\t}\n\t};\n\n\tCell.prototype.delete = function () {\n\n\t\tif (!this.table.rowManager.redrawBlock) {\n\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\n\t\tthis.column.deleteCell(this);\n\n\t\tthis.row.deleteCell(this);\n\n\t\tthis.calcs = {};\n\t};\n\n\t//////////////// Navigation /////////////////\n\n\n\tCell.prototype.nav = function () {\n\n\t\tvar self = this,\n\t\t    nextCell = false,\n\t\t    index = this.row.getCellIndex(this);\n\n\t\treturn {\n\n\t\t\tnext: function next() {\n\n\t\t\t\tvar nextCell = this.right(),\n\t\t\t\t    nextRow;\n\n\t\t\t\tif (!nextCell) {\n\n\t\t\t\t\tnextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n\t\t\t\t\tif (nextRow) {\n\n\t\t\t\t\t\tnextCell = nextRow.findNextEditableCell(-1);\n\n\t\t\t\t\t\tif (nextCell) {\n\n\t\t\t\t\t\t\tnextCell.edit();\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tprev: function prev() {\n\n\t\t\t\tvar nextCell = this.left(),\n\t\t\t\t    prevRow;\n\n\t\t\t\tif (!nextCell) {\n\n\t\t\t\t\tprevRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n\t\t\t\t\tif (prevRow) {\n\n\t\t\t\t\t\tnextCell = prevRow.findPrevEditableCell(prevRow.cells.length);\n\n\t\t\t\t\t\tif (nextCell) {\n\n\t\t\t\t\t\t\tnextCell.edit();\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tleft: function left() {\n\n\t\t\t\tnextCell = self.row.findPrevEditableCell(index);\n\n\t\t\t\tif (nextCell) {\n\n\t\t\t\t\tnextCell.edit();\n\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tright: function right() {\n\n\t\t\t\tnextCell = self.row.findNextEditableCell(index);\n\n\t\t\t\tif (nextCell) {\n\n\t\t\t\t\tnextCell.edit();\n\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tup: function up() {\n\n\t\t\t\tvar nextRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n\t\t\t\tif (nextRow) {\n\n\t\t\t\t\tnextRow.cells[index].edit();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdown: function down() {\n\n\t\t\t\tvar nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n\t\t\t\tif (nextRow) {\n\n\t\t\t\t\tnextRow.cells[index].edit();\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\t};\n\n\tCell.prototype.getIndex = function () {\n\n\t\tthis.row.getCellIndex(this);\n\t};\n\n\t//////////////// Object Generation /////////////////\n\n\tCell.prototype.getComponent = function () {\n\n\t\treturn new CellComponent(this);\n\t};\n\n\tvar FooterManager = function FooterManager(table) {\n\n\t\tthis.table = table;\n\n\t\tthis.active = false;\n\n\t\tthis.element = this.createElement(); //containing element\n\n\t\tthis.external = false;\n\n\t\tthis.links = [];\n\n\t\tthis._initialize();\n\t};\n\n\tFooterManager.prototype.createElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t};\n\n\tFooterManager.prototype._initialize = function (element) {\n\n\t\tif (this.table.options.footerElement) {\n\n\t\t\tswitch (_typeof(this.table.options.footerElement)) {\n\n\t\t\t\tcase \"string\":\n\n\t\t\t\t\tif (this.table.options.footerElement[0] === \"<\") {\n\n\t\t\t\t\t\tthis.element.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.external = true;\n\n\t\t\t\t\t\tthis.element = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t};\n\n\tFooterManager.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\tFooterManager.prototype.append = function (element, parent) {\n\n\t\tthis.activate(parent);\n\n\t\tthis.element.appendChild(element);\n\n\t\tthis.table.rowManager.adjustTableSize();\n\t};\n\n\tFooterManager.prototype.prepend = function (element, parent) {\n\n\t\tthis.activate(parent);\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\n\t\tthis.table.rowManager.adjustTableSize();\n\t};\n\n\tFooterManager.prototype.remove = function (element) {\n\n\t\telement.parentNode.removeChild(element);\n\n\t\tthis.deactivate();\n\t};\n\n\tFooterManager.prototype.deactivate = function (force) {\n\n\t\tif (!this.element.firstChild || force) {\n\n\t\t\tif (!this.external) {\n\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\n\t\t\tthis.active = false;\n\t\t}\n\n\t\t// this.table.rowManager.adjustTableSize();\n\t};\n\n\tFooterManager.prototype.activate = function (parent) {\n\n\t\tif (!this.active) {\n\n\t\t\tthis.active = true;\n\n\t\t\tif (!this.external) {\n\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\n\t\tif (parent) {\n\n\t\t\tthis.links.push(parent);\n\t\t}\n\t};\n\n\tFooterManager.prototype.redraw = function () {\n\n\t\tthis.links.forEach(function (link) {\n\n\t\t\tlink.footerRedraw();\n\t\t});\n\t};\n\n\tvar Tabulator = function Tabulator(element, options) {\n\n\t\tthis.options = {};\n\n\t\tthis.columnManager = null; // hold Column Manager\n\n\t\tthis.rowManager = null; //hold Row Manager\n\n\t\tthis.footerManager = null; //holder Footer Manager\n\n\t\tthis.browser = \"\"; //hold current browser type\n\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\n\t\tthis.browserMobile = false; //check if running on moble, prevent resize cancelling edit on keyboard appearence\n\n\n\t\tthis.modules = {}; //hold all modules bound to this table\n\n\n\t\tthis.initializeElement(element);\n\n\t\tthis.initializeOptions(options || {});\n\n\t\tthis._create();\n\n\t\tTabulator.prototype.comms.register(this); //register table for inderdevice communication\n\t};\n\n\t//default setup options\n\n\tTabulator.prototype.defaultOptions = {\n\n\t\theight: false, //height of tabulator\n\n\t\tminHeight: false, //minimum height of tabulator\n\n\t\tmaxHeight: false, //maximum height of tabulator\n\n\n\t\tlayout: \"fitData\", ///layout type \"fitColumns\" | \"fitData\"\n\n\t\tlayoutColumnsOnNewData: false, //update column widths on setData\n\n\n\t\tcolumnMinWidth: 40, //minimum global width for a column\n\n\t\tcolumnHeaderVertAlign: \"top\", //vertical alignment of column headers\n\n\t\tcolumnVertAlign: false, // DEPRECATED - Left to allow warning\n\n\n\t\tresizableColumns: true, //resizable columns\n\n\t\tresizableRows: false, //resizable rows\n\n\t\tautoResize: true, //auto resize table\n\n\n\t\tcolumns: [], //store for colum header info\n\n\n\t\tcellHozAlign: \"\", //horizontal align columns\n\n\t\tcellVertAlign: \"\", //certical align columns\n\n\n\t\tdata: [], //default starting data\n\n\n\t\tautoColumns: false, //build columns from data row structure\n\n\n\t\treactiveData: false, //enable data reactivity\n\n\n\t\tnestedFieldSeparator: \".\", //seperatpr for nested data\n\n\n\t\ttooltips: false, //Tool tip value\n\n\t\ttooltipsHeader: false, //Tool tip for headers\n\n\t\ttooltipGenerationMode: \"load\", //when to generate tooltips\n\n\n\t\tinitialSort: false, //initial sorting criteria\n\n\t\tinitialFilter: false, //initial filtering criteria\n\n\t\tinitialHeaderFilter: false, //initial header filtering criteria\n\n\n\t\tcolumnHeaderSortMulti: true, //multiple or single column sorting\n\n\n\t\tsortOrderReverse: false, //reverse internal sort ordering\n\n\n\t\theaderSort: true, //set default global header sort\n\n\t\theaderSortTristate: false, //set default tristate header sorting\n\n\n\t\tfooterElement: false, //hold footer element\n\n\n\t\tindex: \"id\", //filed for row index\n\n\n\t\tkeybindings: [], //array for keybindings\n\n\n\t\ttabEndNewRow: false, //create new row when tab to end of table\n\n\n\t\tinvalidOptionWarnings: true, //allow toggling of invalid option warnings\n\n\n\t\tclipboard: false, //enable clipboard\n\n\t\tclipboardCopyStyled: true, //formatted table data\n\n\t\tclipboardCopyConfig: false, //clipboard config\n\n\t\tclipboardCopyFormatter: false, //DEPRICATED - REMOVE in 5.0\n\n\t\tclipboardCopyRowRange: \"active\", //restrict clipboard to visible rows only\n\n\t\tclipboardPasteParser: \"table\", //convert pasted clipboard data to rows\n\n\t\tclipboardPasteAction: \"insert\", //how to insert pasted data into the table\n\n\n\t\tclipboardCopied: function clipboardCopied() {}, //data has been copied to the clipboard\n\n\t\tclipboardPasted: function clipboardPasted() {}, //data has been pasted into the table\n\n\t\tclipboardPasteError: function clipboardPasteError() {}, //data has not successfully been pasted into the table\n\n\n\t\tdownloadDataFormatter: false, //function to manipulate table data before it is downloaded\n\n\t\tdownloadReady: function downloadReady(data, blob) {\n\t\t\treturn blob;\n\t\t}, //function to manipulate download data\n\n\t\tdownloadComplete: false, //function to manipulate download data\n\n\t\tdownloadConfig: false, //download config\n\n\n\t\tdataTree: false, //enable data tree\n\n\t\tdataTreeElementColumn: false,\n\n\t\tdataTreeBranchElement: true, //show data tree branch element\n\n\t\tdataTreeChildIndent: 9, //data tree child indent in px\n\n\t\tdataTreeChildField: \"_children\", //data tre column field to look for child rows\n\n\t\tdataTreeCollapseElement: false, //data tree row collapse element\n\n\t\tdataTreeExpandElement: false, //data tree row expand element\n\n\t\tdataTreeStartExpanded: false,\n\n\t\tdataTreeRowExpanded: function dataTreeRowExpanded() {}, //row has been expanded\n\n\t\tdataTreeRowCollapsed: function dataTreeRowCollapsed() {}, //row has been collapsed\n\n\t\tdataTreeChildColumnCalcs: false, //include visible data tree rows in column calculations\n\n\t\tdataTreeSelectPropagate: false, //seleccting a parent row selects its children\n\n\n\t\tprintAsHtml: false, //enable print as html\n\n\t\tprintFormatter: false, //printing page formatter\n\n\t\tprintHeader: false, //page header contents\n\n\t\tprintFooter: false, //page footer contents\n\n\t\tprintCopyStyle: true, //DEPRICATED - REMOVE in 5.0\n\n\t\tprintStyled: true, //enable print as html styling\n\n\t\tprintVisibleRows: true, //DEPRICATED - REMOVE in 5.0\n\n\t\tprintRowRange: \"visible\", //restrict print to visible rows only\n\n\t\tprintConfig: {}, //print config options\n\n\n\t\taddRowPos: \"bottom\", //position to insert blank rows, top|bottom\n\n\n\t\tselectable: \"highlight\", //highlight rows on hover\n\n\t\tselectableRangeMode: \"drag\", //highlight rows on hover\n\n\t\tselectableRollingSelection: true, //roll selection once maximum number of selectable rows is reached\n\n\t\tselectablePersistence: true, // maintain selection when table view is updated\n\n\t\tselectableCheck: function selectableCheck(data, row) {\n\t\t\treturn true;\n\t\t}, //check wheather row is selectable\n\n\n\t\theaderFilterLiveFilterDelay: 300, //delay before updating column after user types in header filter\n\n\t\theaderFilterPlaceholder: false, //placeholder text to display in header filters\n\n\n\t\theaderVisible: true, //hide header\n\n\n\t\thistory: false, //enable edit history\n\n\n\t\tlocale: false, //current system language\n\n\t\tlangs: {},\n\n\t\tvirtualDom: true, //enable DOM virtualization\n\n\t\tvirtualDomBuffer: 0, // set virtual DOM buffer size\n\n\n\t\tpersistentLayout: false, //DEPRICATED - REMOVE in 5.0\n\n\t\tpersistentSort: false, //DEPRICATED - REMOVE in 5.0\n\n\t\tpersistentFilter: false, //DEPRICATED - REMOVE in 5.0\n\n\t\tpersistenceID: \"\", //key for persistent storage\n\n\t\tpersistenceMode: true, //mode for storing persistence information\n\n\t\tpersistenceReaderFunc: false, //function for handling persistence data reading\n\n\t\tpersistenceWriterFunc: false, //function for handling persistence data writing\n\n\n\t\tpersistence: false,\n\n\t\tresponsiveLayout: false, //responsive layout flags\n\n\t\tresponsiveLayoutCollapseStartOpen: true, //start showing collapsed data\n\n\t\tresponsiveLayoutCollapseUseFormatters: true, //responsive layout collapse formatter\n\n\t\tresponsiveLayoutCollapseFormatter: false, //responsive layout collapse formatter\n\n\n\t\tpagination: false, //set pagination type\n\n\t\tpaginationSize: false, //set number of rows to a page\n\n\t\tpaginationInitialPage: 1, //initail page to show on load\n\n\t\tpaginationButtonCount: 5, // set count of page button\n\n\t\tpaginationSizeSelector: false, //add pagination size selector element\n\n\t\tpaginationElement: false, //element to hold pagination numbers\n\n\t\tpaginationDataSent: {}, //pagination data sent to the server\n\n\t\tpaginationDataReceived: {}, //pagination data received from the server\n\n\t\tpaginationAddRow: \"page\", //add rows on table or page\n\n\n\t\tajaxURL: false, //url for ajax loading\n\n\t\tajaxURLGenerator: false,\n\n\t\tajaxParams: {}, //params for ajax loading\n\n\t\tajaxConfig: \"get\", //ajax request type\n\n\t\tajaxContentType: \"form\", //ajax request type\n\n\t\tajaxRequestFunc: false, //promise function\n\n\t\tajaxLoader: true, //show loader\n\n\t\tajaxLoaderLoading: false, //loader element\n\n\t\tajaxLoaderError: false, //loader element\n\n\t\tajaxFiltering: false,\n\n\t\tajaxSorting: false,\n\n\t\tajaxProgressiveLoad: false, //progressive loading\n\n\t\tajaxProgressiveLoadDelay: 0, //delay between requests\n\n\t\tajaxProgressiveLoadScrollMargin: 0, //margin before scroll begins\n\n\n\t\tgroupBy: false, //enable table grouping and set field to group by\n\n\t\tgroupStartOpen: true, //starting state of group\n\n\t\tgroupValues: false,\n\n\t\tgroupHeader: false, //header generation function\n\n\n\t\thtmlOutputConfig: false, //html outypu config\n\n\n\t\tmovableColumns: false, //enable movable columns\n\n\n\t\tmovableRows: false, //enable movable rows\n\n\t\tmovableRowsConnectedTables: false, //tables for movable rows to be connected to\n\n\t\tmovableRowsSender: false,\n\n\t\tmovableRowsReceiver: \"insert\",\n\n\t\tmovableRowsSendingStart: function movableRowsSendingStart() {},\n\n\t\tmovableRowsSent: function movableRowsSent() {},\n\n\t\tmovableRowsSentFailed: function movableRowsSentFailed() {},\n\n\t\tmovableRowsSendingStop: function movableRowsSendingStop() {},\n\n\t\tmovableRowsReceivingStart: function movableRowsReceivingStart() {},\n\n\t\tmovableRowsReceived: function movableRowsReceived() {},\n\n\t\tmovableRowsReceivedFailed: function movableRowsReceivedFailed() {},\n\n\t\tmovableRowsReceivingStop: function movableRowsReceivingStop() {},\n\n\t\tscrollToRowPosition: \"top\",\n\n\t\tscrollToRowIfVisible: true,\n\n\t\tscrollToColumnPosition: \"left\",\n\n\t\tscrollToColumnIfVisible: true,\n\n\t\trowFormatter: false,\n\n\t\trowFormatterPrint: null,\n\n\t\trowFormatterClipboard: null,\n\n\t\trowFormatterHtmlOutput: null,\n\n\t\tplaceholder: false,\n\n\t\t//table building callbacks\n\n\t\ttableBuilding: function tableBuilding() {},\n\n\t\ttableBuilt: function tableBuilt() {},\n\n\t\t//render callbacks\n\n\t\trenderStarted: function renderStarted() {},\n\n\t\trenderComplete: function renderComplete() {},\n\n\t\t//row callbacks\n\n\t\trowClick: false,\n\n\t\trowDblClick: false,\n\n\t\trowContext: false,\n\n\t\trowTap: false,\n\n\t\trowDblTap: false,\n\n\t\trowTapHold: false,\n\n\t\trowMouseEnter: false,\n\n\t\trowMouseLeave: false,\n\n\t\trowMouseOver: false,\n\n\t\trowMouseOut: false,\n\n\t\trowMouseMove: false,\n\n\t\trowContextMenu: false,\n\n\t\trowAdded: function rowAdded() {},\n\n\t\trowDeleted: function rowDeleted() {},\n\n\t\trowMoved: function rowMoved() {},\n\n\t\trowUpdated: function rowUpdated() {},\n\n\t\trowSelectionChanged: function rowSelectionChanged() {},\n\n\t\trowSelected: function rowSelected() {},\n\n\t\trowDeselected: function rowDeselected() {},\n\n\t\trowResized: function rowResized() {},\n\n\t\t//cell callbacks\n\n\t\t//row callbacks\n\n\t\tcellClick: false,\n\n\t\tcellDblClick: false,\n\n\t\tcellContext: false,\n\n\t\tcellTap: false,\n\n\t\tcellDblTap: false,\n\n\t\tcellTapHold: false,\n\n\t\tcellMouseEnter: false,\n\n\t\tcellMouseLeave: false,\n\n\t\tcellMouseOver: false,\n\n\t\tcellMouseOut: false,\n\n\t\tcellMouseMove: false,\n\n\t\tcellEditing: function cellEditing() {},\n\n\t\tcellEdited: function cellEdited() {},\n\n\t\tcellEditCancelled: function cellEditCancelled() {},\n\n\t\t//column callbacks\n\n\t\tcolumnMoved: false,\n\n\t\tcolumnResized: function columnResized() {},\n\n\t\tcolumnTitleChanged: function columnTitleChanged() {},\n\n\t\tcolumnVisibilityChanged: function columnVisibilityChanged() {},\n\n\t\t//HTML iport callbacks\n\n\t\thtmlImporting: function htmlImporting() {},\n\n\t\thtmlImported: function htmlImported() {},\n\n\t\t//data callbacks\n\n\t\tdataLoading: function dataLoading() {},\n\n\t\tdataLoaded: function dataLoaded() {},\n\n\t\tdataEdited: function dataEdited() {},\n\n\t\t//ajax callbacks\n\n\t\tajaxRequesting: function ajaxRequesting() {},\n\n\t\tajaxResponse: false,\n\n\t\tajaxError: function ajaxError() {},\n\n\t\t//filtering callbacks\n\n\t\tdataFiltering: false,\n\n\t\tdataFiltered: false,\n\n\t\t//sorting callbacks\n\n\t\tdataSorting: function dataSorting() {},\n\n\t\tdataSorted: function dataSorted() {},\n\n\t\t//grouping callbacks\n\n\t\tgroupToggleElement: \"arrow\",\n\n\t\tgroupClosedShowCalcs: false,\n\n\t\tdataGrouping: function dataGrouping() {},\n\n\t\tdataGrouped: false,\n\n\t\tgroupVisibilityChanged: function groupVisibilityChanged() {},\n\n\t\tgroupClick: false,\n\n\t\tgroupDblClick: false,\n\n\t\tgroupContext: false,\n\n\t\tgroupTap: false,\n\n\t\tgroupDblTap: false,\n\n\t\tgroupTapHold: false,\n\n\t\tcolumnCalcs: true,\n\n\t\t//pagination callbacks\n\n\t\tpageLoaded: function pageLoaded() {},\n\n\t\t//localization callbacks\n\n\t\tlocalized: function localized() {},\n\n\t\t//validation has failed\n\n\t\tvalidationFailed: function validationFailed() {},\n\n\t\t//history callbacks\n\n\t\thistoryUndo: function historyUndo() {},\n\n\t\thistoryRedo: function historyRedo() {},\n\n\t\t//scroll callbacks\n\n\t\tscrollHorizontal: function scrollHorizontal() {},\n\n\t\tscrollVertical: function scrollVertical() {}\n\n\t};\n\n\tTabulator.prototype.initializeOptions = function (options) {\n\n\t\t//warn user if option is not available\n\n\t\tif (options.invalidOptionWarnings !== false) {\n\n\t\t\tfor (var key in options) {\n\n\t\t\t\tif (typeof this.defaultOptions[key] === \"undefined\") {\n\n\t\t\t\t\tconsole.warn(\"Invalid table constructor option:\", key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//assign options to table\n\n\t\tfor (var key in this.defaultOptions) {\n\n\t\t\tif (key in options) {\n\n\t\t\t\tthis.options[key] = options[key];\n\t\t\t} else {\n\n\t\t\t\tif (Array.isArray(this.defaultOptions[key])) {\n\n\t\t\t\t\tthis.options[key] = [];\n\t\t\t\t} else if (_typeof(this.defaultOptions[key]) === \"object\" && this.defaultOptions[key] !== null) {\n\n\t\t\t\t\tthis.options[key] = {};\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.options[key] = this.defaultOptions[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.initializeElement = function (element) {\n\n\t\tif (typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement) {\n\n\t\t\tthis.element = element;\n\n\t\t\treturn true;\n\t\t} else if (typeof element === \"string\") {\n\n\t\t\tthis.element = document.querySelector(element);\n\n\t\t\tif (this.element) {\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//convert depricated functionality to new functions\n\n\tTabulator.prototype._mapDepricatedFunctionality = function () {\n\n\t\t//map depricated persistance setup options\n\n\t\tif (this.options.persistentLayout || this.options.persistentSort || this.options.persistentFilter) {\n\n\t\t\tif (!this.options.persistence) {\n\n\t\t\t\tthis.options.persistence = {};\n\t\t\t}\n\t\t}\n\n\t\tif (typeof this.options.clipboardCopyHeader !== \"undefined\") {\n\n\t\t\tthis.options.columnHeaders = this.options.clipboardCopyHeader;\n\n\t\t\tconsole.warn(\"DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option\");\n\t\t}\n\n\t\tif (this.options.printVisibleRows !== true) {\n\n\t\t\tconsole.warn(\"printVisibleRows option is deprecated, you should now use the printRowRange option\");\n\n\t\t\tthis.options.persistence.printRowRange = \"active\";\n\t\t}\n\n\t\tif (this.options.printCopyStyle !== true) {\n\n\t\t\tconsole.warn(\"printCopyStyle option is deprecated, you should now use the printStyled option\");\n\n\t\t\tthis.options.persistence.printStyled = this.options.printCopyStyle;\n\t\t}\n\n\t\tif (this.options.persistentLayout) {\n\n\t\t\tconsole.warn(\"persistentLayout option is deprecated, you should now use the persistence option\");\n\n\t\t\tif (this.options.persistence !== true && typeof this.options.persistence.columns === \"undefined\") {\n\n\t\t\t\tthis.options.persistence.columns = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.persistentSort) {\n\n\t\t\tconsole.warn(\"persistentSort option is deprecated, you should now use the persistence option\");\n\n\t\t\tif (this.options.persistence !== true && typeof this.options.persistence.sort === \"undefined\") {\n\n\t\t\t\tthis.options.persistence.sort = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.persistentFilter) {\n\n\t\t\tconsole.warn(\"persistentFilter option is deprecated, you should now use the persistence option\");\n\n\t\t\tif (this.options.persistence !== true && typeof this.options.persistence.filter === \"undefined\") {\n\n\t\t\t\tthis.options.persistence.filter = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.columnVertAlign) {\n\n\t\t\tconsole.warn(\"columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option\");\n\n\t\t\tthis.options.columnHeaderVertAlign = this.options.columnVertAlign;\n\t\t}\n\t};\n\n\tTabulator.prototype._clearSelection = function () {\n\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\n\t\tif (window.getSelection) {\n\n\t\t\tif (window.getSelection().empty) {\n\t\t\t\t// Chrome\n\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {\n\t\t\t\t// Firefox\n\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {\n\t\t\t// IE?\n\n\t\t\tdocument.selection.empty();\n\t\t}\n\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t};\n\n\t//concreate table\n\n\tTabulator.prototype._create = function () {\n\n\t\tthis._clearObjectPointers();\n\n\t\tthis._mapDepricatedFunctionality();\n\n\t\tthis.bindModules();\n\n\t\tif (this.element.tagName === \"TABLE\") {\n\n\t\t\tif (this.modExists(\"htmlTableImport\", true)) {\n\n\t\t\t\tthis.modules.htmlTableImport.parseTable();\n\t\t\t}\n\t\t}\n\n\t\tthis.columnManager = new ColumnManager(this);\n\n\t\tthis.rowManager = new RowManager(this);\n\n\t\tthis.footerManager = new FooterManager(this);\n\n\t\tthis.columnManager.setRowManager(this.rowManager);\n\n\t\tthis.rowManager.setColumnManager(this.columnManager);\n\n\t\tthis._buildElement();\n\n\t\tthis._loadInitialData();\n\t};\n\n\t//clear pointers to objects in default config object\n\n\tTabulator.prototype._clearObjectPointers = function () {\n\n\t\tthis.options.columns = this.options.columns.slice(0);\n\n\t\tif (!this.options.reactiveData) {\n\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t};\n\n\t//build tabulator element\n\n\tTabulator.prototype._buildElement = function () {\n\t\tvar _this17 = this;\n\n\t\tvar element = this.element,\n\t\t    mod = this.modules,\n\t\t    options = this.options;\n\n\t\toptions.tableBuilding.call(this);\n\n\t\telement.classList.add(\"tabulator\");\n\n\t\telement.setAttribute(\"role\", \"grid\");\n\n\t\t//empty element\n\n\t\twhile (element.firstChild) {\n\t\t\telement.removeChild(element.firstChild);\n\t\t} //set table height\n\n\t\tif (options.height) {\n\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\n\t\t\telement.style.height = options.height;\n\t\t}\n\n\t\t//set table min height\n\n\t\tif (options.minHeight !== false) {\n\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\n\t\t//set table maxHeight\n\n\t\tif (options.maxHeight !== false) {\n\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\n\t\tthis.columnManager.initialize();\n\n\t\tthis.rowManager.initialize();\n\n\t\tthis._detectBrowser();\n\n\t\tif (this.modExists(\"layout\", true)) {\n\n\t\t\tmod.layout.initialize(options.layout);\n\t\t}\n\n\t\t//set localization\n\n\t\tif (options.headerFilterPlaceholder !== false) {\n\n\t\t\tmod.localize.setHeaderFilterPlaceholder(options.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor (var locale in options.langs) {\n\n\t\t\tmod.localize.installLang(locale, options.langs[locale]);\n\t\t}\n\n\t\tmod.localize.setLocale(options.locale);\n\n\t\t//configure placeholder element\n\n\t\tif (typeof options.placeholder == \"string\") {\n\n\t\t\tvar el = document.createElement(\"div\");\n\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\n\t\t\tvar span = document.createElement(\"span\");\n\n\t\t\tspan.innerHTML = options.placeholder;\n\n\t\t\tel.appendChild(span);\n\n\t\t\toptions.placeholder = el;\n\t\t}\n\n\t\t//build table elements\n\n\t\telement.appendChild(this.columnManager.getElement());\n\n\t\telement.appendChild(this.rowManager.getElement());\n\n\t\tif (options.footerElement) {\n\n\t\t\tthis.footerManager.activate();\n\t\t}\n\n\t\tif (options.persistence && this.modExists(\"persistence\", true)) {\n\n\t\t\tmod.persistence.initialize();\n\t\t}\n\n\t\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.columns) {\n\n\t\t\toptions.columns = mod.persistence.load(\"columns\", options.columns);\n\t\t}\n\n\t\tif (options.movableRows && this.modExists(\"moveRow\")) {\n\n\t\t\tmod.moveRow.initialize();\n\t\t}\n\n\t\tif (options.autoColumns && this.options.data) {\n\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\n\t\tif (this.modExists(\"columnCalcs\")) {\n\n\t\t\tmod.columnCalcs.initialize();\n\t\t}\n\n\t\tthis.columnManager.setColumns(options.columns);\n\n\t\tif (options.dataTree && this.modExists(\"dataTree\", true)) {\n\n\t\t\tmod.dataTree.initialize();\n\t\t}\n\n\t\tif (this.modExists(\"frozenRows\")) {\n\n\t\t\tthis.modules.frozenRows.initialize();\n\t\t}\n\n\t\tif ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort || options.initialSort) && this.modExists(\"sort\", true)) {\n\n\t\t\tvar sorters = [];\n\n\t\t\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort) {\n\n\t\t\t\tsorters = mod.persistence.load(\"sort\");\n\n\t\t\t\tif (sorters === false && options.initialSort) {\n\n\t\t\t\t\tsorters = options.initialSort;\n\t\t\t\t}\n\t\t\t} else if (options.initialSort) {\n\n\t\t\t\tsorters = options.initialSort;\n\t\t\t}\n\n\t\t\tmod.sort.setSort(sorters);\n\t\t}\n\n\t\tif ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter || options.initialFilter) && this.modExists(\"filter\", true)) {\n\n\t\t\tvar filters = [];\n\n\t\t\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter) {\n\n\t\t\t\tfilters = mod.persistence.load(\"filter\");\n\n\t\t\t\tif (filters === false && options.initialFilter) {\n\n\t\t\t\t\tfilters = options.initialFilter;\n\t\t\t\t}\n\t\t\t} else if (options.initialFilter) {\n\n\t\t\t\tfilters = options.initialFilter;\n\t\t\t}\n\n\t\t\tmod.filter.setFilter(filters);\n\t\t}\n\n\t\tif (options.initialHeaderFilter && this.modExists(\"filter\", true)) {\n\n\t\t\toptions.initialHeaderFilter.forEach(function (item) {\n\n\t\t\t\tvar column = _this17.columnManager.findColumn(item.field);\n\n\t\t\t\tif (column) {\n\n\t\t\t\t\tmod.filter.setHeaderFilterValue(column, item.value);\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.modExists(\"ajax\")) {\n\n\t\t\tmod.ajax.initialize();\n\t\t}\n\n\t\tif (options.pagination && this.modExists(\"page\", true)) {\n\n\t\t\tmod.page.initialize();\n\t\t}\n\n\t\tif (options.groupBy && this.modExists(\"groupRows\", true)) {\n\n\t\t\tmod.groupRows.initialize();\n\t\t}\n\n\t\tif (this.modExists(\"keybindings\")) {\n\n\t\t\tmod.keybindings.initialize();\n\t\t}\n\n\t\tif (this.modExists(\"selectRow\")) {\n\n\t\t\tmod.selectRow.clearSelectionData(true);\n\t\t}\n\n\t\tif (options.autoResize && this.modExists(\"resizeTable\")) {\n\n\t\t\tmod.resizeTable.initialize();\n\t\t}\n\n\t\tif (this.modExists(\"clipboard\")) {\n\n\t\t\tmod.clipboard.initialize();\n\t\t}\n\n\t\tif (options.printAsHtml && this.modExists(\"print\")) {\n\n\t\t\tmod.print.initialize();\n\t\t}\n\n\t\toptions.tableBuilt.call(this);\n\t};\n\n\tTabulator.prototype._loadInitialData = function () {\n\n\t\tvar self = this;\n\n\t\tif (self.options.pagination && self.modExists(\"page\")) {\n\n\t\t\tself.modules.page.reset(true, true);\n\n\t\t\tif (self.options.pagination == \"local\") {\n\n\t\t\t\tif (self.options.data.length) {\n\n\t\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t\t} else {\n\n\t\t\t\t\tif ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n\n\t\t\t\t\t\tself.modules.ajax.loadData(false, true).then(function () {}).catch(function () {\n\n\t\t\t\t\t\t\tif (self.options.paginationInitialPage) {\n\n\t\t\t\t\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (self.options.paginationInitialPage) {\n\n\t\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (self.options.ajaxURL) {\n\n\t\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage).then(function () {}).catch(function () {});\n\t\t\t\t} else {\n\n\t\t\t\t\tself.rowManager.setData([], false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (self.options.data.length) {\n\n\t\t\t\tself.rowManager.setData(self.options.data);\n\t\t\t} else {\n\n\t\t\t\tif ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n\n\t\t\t\t\tself.modules.ajax.loadData(false, true).then(function () {}).catch(function () {});\n\t\t\t\t} else {\n\n\t\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//deconstructor\n\n\tTabulator.prototype.destroy = function () {\n\n\t\tvar element = this.element;\n\n\t\tTabulator.prototype.comms.deregister(this); //deregister table from inderdevice communication\n\n\n\t\tif (this.options.reactiveData && this.modExists(\"reactiveData\", true)) {\n\n\t\t\tthis.modules.reactiveData.unwatchData();\n\t\t}\n\n\t\t//clear row data\n\n\t\tthis.rowManager.rows.forEach(function (row) {\n\n\t\t\trow.wipe();\n\t\t});\n\n\t\tthis.rowManager.rows = [];\n\n\t\tthis.rowManager.activeRows = [];\n\n\t\tthis.rowManager.displayRows = [];\n\n\t\t//clear event bindings\n\n\t\tif (this.options.autoResize && this.modExists(\"resizeTable\")) {\n\n\t\t\tthis.modules.resizeTable.clearBindings();\n\t\t}\n\n\t\tif (this.modExists(\"keybindings\")) {\n\n\t\t\tthis.modules.keybindings.clearBindings();\n\t\t}\n\n\t\t//clear DOM\n\n\t\twhile (element.firstChild) {\n\t\t\telement.removeChild(element.firstChild);\n\t\t}element.classList.remove(\"tabulator\");\n\t};\n\n\tTabulator.prototype._detectBrowser = function () {\n\n\t\tvar ua = navigator.userAgent || navigator.vendor || window.opera;\n\n\t\tif (ua.indexOf(\"Trident\") > -1) {\n\n\t\t\tthis.browser = \"ie\";\n\n\t\t\tthis.browserSlow = true;\n\t\t} else if (ua.indexOf(\"Edge\") > -1) {\n\n\t\t\tthis.browser = \"edge\";\n\n\t\t\tthis.browserSlow = true;\n\t\t} else if (ua.indexOf(\"Firefox\") > -1) {\n\n\t\t\tthis.browser = \"firefox\";\n\n\t\t\tthis.browserSlow = false;\n\t\t} else {\n\n\t\t\tthis.browser = \"other\";\n\n\t\t\tthis.browserSlow = false;\n\t\t}\n\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0, 4));\n\t};\n\n\t////////////////// Data Handling //////////////////\n\n\n\t//block table redrawing\n\n\tTabulator.prototype.blockRedraw = function () {\n\n\t\treturn this.rowManager.blockRedraw();\n\t};\n\n\t//restore table redrawing\n\n\tTabulator.prototype.restoreRedraw = function () {\n\n\t\treturn this.rowManager.restoreRedraw();\n\t};\n\n\t//local data from local file\n\n\tTabulator.prototype.setDataFromLocalFile = function (extensions) {\n\t\tvar _this18 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar input = document.createElement(\"input\");\n\n\t\t\tinput.type = \"file\";\n\n\t\t\tinput.accept = extensions || \".json,application/json\";\n\n\t\t\tinput.addEventListener(\"change\", function (e) {\n\n\t\t\t\tvar file = input.files[0],\n\t\t\t\t    reader = new FileReader(),\n\t\t\t\t    data;\n\n\t\t\t\treader.readAsText(file);\n\n\t\t\t\treader.onload = function (e) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tdata = JSON.parse(reader.result);\n\t\t\t\t\t} catch (e) {\n\n\t\t\t\t\t\tconsole.warn(\"File Load Error - File contents is invalid JSON\", e);\n\n\t\t\t\t\t\treject(e);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t_this18._setData(data).then(function (data) {\n\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\t\tresolve(err);\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\treader.onerror = function (e) {\n\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tinput.click();\n\t\t});\n\t};\n\n\t//load data\n\n\tTabulator.prototype.setData = function (data, params, config) {\n\n\t\tif (this.modExists(\"ajax\")) {\n\n\t\t\tthis.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\treturn this._setData(data, params, config, false, true);\n\t};\n\n\tTabulator.prototype._setData = function (data, params, config, inPosition, columnsChanged) {\n\n\t\tvar self = this;\n\n\t\tif (typeof data === \"string\") {\n\n\t\t\tif (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0) {\n\n\t\t\t\t//data is a json encoded string\n\n\t\t\t\treturn self.rowManager.setData(JSON.parse(data), inPosition, columnsChanged);\n\t\t\t} else {\n\n\t\t\t\tif (self.modExists(\"ajax\", true)) {\n\n\t\t\t\t\tif (params) {\n\n\t\t\t\t\t\tself.modules.ajax.setParams(params);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config) {\n\n\t\t\t\t\t\tself.modules.ajax.setConfig(config);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.modules.ajax.setUrl(data);\n\n\t\t\t\t\tif (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n\n\t\t\t\t\t\tself.modules.page.reset(true, true);\n\n\t\t\t\t\t\treturn self.modules.page.setPage(1);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//assume data is url, make ajax call to url to get data\n\n\t\t\t\t\t\treturn self.modules.ajax.loadData(inPosition, columnsChanged);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (data) {\n\n\t\t\t\t//asume data is already an object\n\n\t\t\t\treturn self.rowManager.setData(data, inPosition, columnsChanged);\n\t\t\t} else {\n\n\t\t\t\t//no data provided, check if ajaxURL is present;\n\n\t\t\t\tif (self.modExists(\"ajax\") && (self.modules.ajax.getUrl || self.options.ajaxURLGenerator)) {\n\n\t\t\t\t\tif (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n\n\t\t\t\t\t\tself.modules.page.reset(true, true);\n\n\t\t\t\t\t\treturn self.modules.page.setPage(1);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\treturn self.modules.ajax.loadData(inPosition, columnsChanged);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\t//empty data\n\n\t\t\t\t\treturn self.rowManager.setData([], inPosition, columnsChanged);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//clear data\n\n\tTabulator.prototype.clearData = function () {\n\n\t\tif (this.modExists(\"ajax\")) {\n\n\t\t\tthis.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\tthis.rowManager.clearData();\n\t};\n\n\t//get table data array\n\n\tTabulator.prototype.getData = function (active) {\n\n\t\tif (active === true) {\n\n\t\t\tconsole.warn(\"passing a boolean to the getData function is deprecated, you should now pass the string 'active'\");\n\n\t\t\tactive = \"active\";\n\t\t}\n\n\t\treturn this.rowManager.getData(active);\n\t};\n\n\t//get table data array count\n\n\tTabulator.prototype.getDataCount = function (active) {\n\n\t\tif (active === true) {\n\n\t\t\tconsole.warn(\"passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'\");\n\n\t\t\tactive = \"active\";\n\t\t}\n\n\t\treturn this.rowManager.getDataCount(active);\n\t};\n\n\t//search for specific row components\n\n\tTabulator.prototype.searchRows = function (field, type, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\treturn this.modules.filter.search(\"rows\", field, type, value);\n\t\t}\n\t};\n\n\t//search for specific data\n\n\tTabulator.prototype.searchData = function (field, type, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\treturn this.modules.filter.search(\"data\", field, type, value);\n\t\t}\n\t};\n\n\t//get table html\n\n\tTabulator.prototype.getHtml = function (visible, style, config) {\n\n\t\tif (this.modExists(\"export\", true)) {\n\n\t\t\treturn this.modules.export.getHtml(visible, style, config);\n\t\t}\n\t};\n\n\t//get print html\n\n\tTabulator.prototype.print = function (visible, style, config) {\n\n\t\tif (this.modExists(\"print\", true)) {\n\n\t\t\treturn this.modules.print.printFullscreen(visible, style, config);\n\t\t}\n\t};\n\n\t//retrieve Ajax URL\n\n\tTabulator.prototype.getAjaxUrl = function () {\n\n\t\tif (this.modExists(\"ajax\", true)) {\n\n\t\t\treturn this.modules.ajax.getUrl();\n\t\t}\n\t};\n\n\t//replace data, keeping table in position with same sort\n\n\tTabulator.prototype.replaceData = function (data, params, config) {\n\n\t\tif (this.modExists(\"ajax\")) {\n\n\t\t\tthis.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\treturn this._setData(data, params, config, true);\n\t};\n\n\t//update table data\n\n\tTabulator.prototype.updateData = function (data) {\n\t\tvar _this19 = this;\n\n\t\tvar self = this;\n\n\t\tvar responses = 0;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this19.modExists(\"ajax\")) {\n\n\t\t\t\t_this19.modules.ajax.blockActiveRequest();\n\t\t\t}\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (data) {\n\n\t\t\t\tdata.forEach(function (item) {\n\n\t\t\t\t\tvar row = self.rowManager.findRow(item[self.options.index]);\n\n\t\t\t\t\tif (row) {\n\n\t\t\t\t\t\tresponses++;\n\n\t\t\t\t\t\trow.updateData(item).then(function () {\n\n\t\t\t\t\t\t\tresponses--;\n\n\t\t\t\t\t\t\tif (!responses) {\n\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.addData = function (data, pos, index) {\n\t\tvar _this20 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this20.modExists(\"ajax\")) {\n\n\t\t\t\t_this20.modules.ajax.blockActiveRequest();\n\t\t\t}\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (data) {\n\n\t\t\t\t_this20.rowManager.addRows(data, pos, index).then(function (rows) {\n\n\t\t\t\t\tvar output = [];\n\n\t\t\t\t\trows.forEach(function (row) {\n\n\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(output);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//update table data\n\n\tTabulator.prototype.updateOrAddData = function (data) {\n\t\tvar _this21 = this;\n\n\t\tvar self = this,\n\t\t    rows = [],\n\t\t    responses = 0;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this21.modExists(\"ajax\")) {\n\n\t\t\t\t_this21.modules.ajax.blockActiveRequest();\n\t\t\t}\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (data) {\n\n\t\t\t\tdata.forEach(function (item) {\n\n\t\t\t\t\tvar row = self.rowManager.findRow(item[self.options.index]);\n\n\t\t\t\t\tresponses++;\n\n\t\t\t\t\tif (row) {\n\n\t\t\t\t\t\trow.updateData(item).then(function () {\n\n\t\t\t\t\t\t\tresponses--;\n\n\t\t\t\t\t\t\trows.push(row.getComponent());\n\n\t\t\t\t\t\t\tif (!responses) {\n\n\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tself.rowManager.addRows(item).then(function (newRows) {\n\n\t\t\t\t\t\t\tresponses--;\n\n\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\n\t\t\t\t\t\t\tif (!responses) {\n\n\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//get row object\n\n\tTabulator.prototype.getRow = function (index) {\n\n\t\tvar row = this.rowManager.findRow(index);\n\n\t\tif (row) {\n\n\t\t\treturn row.getComponent();\n\t\t} else {\n\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//get row object\n\n\tTabulator.prototype.getRowFromPosition = function (position, active) {\n\n\t\tvar row = this.rowManager.getRowFromPosition(position, active);\n\n\t\tif (row) {\n\n\t\t\treturn row.getComponent();\n\t\t} else {\n\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//delete row from table\n\n\tTabulator.prototype.deleteRow = function (index) {\n\t\tvar _this22 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar self = _this22,\n\t\t\t    count = 0,\n\t\t\t    successCount = 0,\n\t\t\t    foundRows = [];\n\n\t\t\tfunction doneCheck() {\n\n\t\t\t\tcount++;\n\n\t\t\t\tif (count == index.length) {\n\n\t\t\t\t\tif (successCount) {\n\n\t\t\t\t\t\tself.rowManager.reRenderInPosition();\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!Array.isArray(index)) {\n\n\t\t\t\tindex = [index];\n\t\t\t}\n\n\t\t\t//find matching rows\n\n\t\t\tindex.forEach(function (item) {\n\n\t\t\t\tvar row = _this22.rowManager.findRow(item, true);\n\n\t\t\t\tif (row) {\n\n\t\t\t\t\tfoundRows.push(row);\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Delete Error - No matching row found:\", item);\n\n\t\t\t\t\treject(\"Delete Error - No matching row found\");\n\n\t\t\t\t\tdoneCheck();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//sort rows into correct order to ensure smooth delete from table\n\n\t\t\tfoundRows.sort(function (a, b) {\n\n\t\t\t\treturn _this22.rowManager.rows.indexOf(a) > _this22.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t\t});\n\n\t\t\tfoundRows.forEach(function (row) {\n\n\t\t\t\trow.delete().then(function () {\n\n\t\t\t\t\tsuccessCount++;\n\n\t\t\t\t\tdoneCheck();\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\tdoneCheck();\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n\n\t//add row to table\n\n\tTabulator.prototype.addRow = function (data, pos, index) {\n\t\tvar _this23 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\t_this23.rowManager.addRows(data, pos, index).then(function (rows) {\n\n\t\t\t\t//recalc column calculations if present\n\n\t\t\t\tif (_this23.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\t_this23.modules.columnCalcs.recalc(_this23.rowManager.activeRows);\n\t\t\t\t}\n\n\t\t\t\tresolve(rows[0].getComponent());\n\t\t\t});\n\t\t});\n\t};\n\n\t//update a row if it exitsts otherwise create it\n\n\tTabulator.prototype.updateOrAddRow = function (index, data) {\n\t\tvar _this24 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar row = _this24.rowManager.findRow(index);\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (row) {\n\n\t\t\t\trow.updateData(data).then(function () {\n\n\t\t\t\t\t//recalc column calculations if present\n\n\t\t\t\t\tif (_this24.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\t\t_this24.modules.columnCalcs.recalc(_this24.rowManager.activeRows);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(row.getComponent());\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\trow = _this24.rowManager.addRows(data).then(function (rows) {\n\n\t\t\t\t\t//recalc column calculations if present\n\n\t\t\t\t\tif (_this24.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\t\t_this24.modules.columnCalcs.recalc(_this24.rowManager.activeRows);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(rows[0].getComponent());\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\t//update row data\n\n\tTabulator.prototype.updateRow = function (index, data) {\n\t\tvar _this25 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar row = _this25.rowManager.findRow(index);\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (row) {\n\n\t\t\t\trow.updateData(data).then(function () {\n\n\t\t\t\t\tresolve(row.getComponent());\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\n\t\t\t\treject(\"Update Error - No matching row found\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//scroll to row in DOM\n\n\tTabulator.prototype.scrollToRow = function (index, position, ifVisible) {\n\t\tvar _this26 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar row = _this26.rowManager.findRow(index);\n\n\t\t\tif (row) {\n\n\t\t\t\t_this26.rowManager.scrollToRow(row, position, ifVisible).then(function () {\n\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\n\t\t\t\treject(\"Scroll Error - No matching row found\");\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.moveRow = function (from, to, after) {\n\n\t\tvar fromRow = this.rowManager.findRow(from);\n\n\t\tif (fromRow) {\n\n\t\t\tfromRow.moveToRow(to, after);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t};\n\n\tTabulator.prototype.getRows = function (active) {\n\n\t\tif (active === true) {\n\n\t\t\tconsole.warn(\"passing a boolean to the getRows function is deprecated, you should now pass the string 'active'\");\n\n\t\t\tactive = \"active\";\n\t\t}\n\n\t\treturn this.rowManager.getComponents(active);\n\t};\n\n\t//get position of row in table\n\n\tTabulator.prototype.getRowPosition = function (index, active) {\n\n\t\tvar row = this.rowManager.findRow(index);\n\n\t\tif (row) {\n\n\t\t\treturn this.rowManager.getRowPosition(row, active);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//copy table data to clipboard\n\n\tTabulator.prototype.copyToClipboard = function (selector) {\n\n\t\tif (this.modExists(\"clipboard\", true)) {\n\n\t\t\tthis.modules.clipboard.copy(selector);\n\t\t}\n\t};\n\n\t/////////////// Column Functions  ///////////////\n\n\n\tTabulator.prototype.setColumns = function (definition) {\n\n\t\tthis.columnManager.setColumns(definition);\n\t};\n\n\tTabulator.prototype.getColumns = function (structured) {\n\n\t\treturn this.columnManager.getComponents(structured);\n\t};\n\n\tTabulator.prototype.getColumn = function (field) {\n\n\t\tvar col = this.columnManager.findColumn(field);\n\n\t\tif (col) {\n\n\t\t\treturn col.getComponent();\n\t\t} else {\n\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getColumnDefinitions = function () {\n\n\t\treturn this.columnManager.getDefinitionTree();\n\t};\n\n\tTabulator.prototype.getColumnLayout = function () {\n\n\t\tif (this.modExists(\"persistence\", true)) {\n\n\t\t\treturn this.modules.persistence.parseColumns(this.columnManager.getColumns());\n\t\t}\n\t};\n\n\tTabulator.prototype.setColumnLayout = function (layout) {\n\n\t\tif (this.modExists(\"persistence\", true)) {\n\n\t\t\tthis.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns, layout));\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.showColumn = function (field) {\n\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\n\t\t\tcolumn.show();\n\n\t\t\tif (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.modules.responsiveLayout.update();\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.hideColumn = function (field) {\n\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\n\t\t\tcolumn.hide();\n\n\t\t\tif (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.modules.responsiveLayout.update();\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.toggleColumn = function (field) {\n\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\n\t\t\tif (column.visible) {\n\n\t\t\t\tcolumn.hide();\n\t\t\t} else {\n\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.addColumn = function (definition, before, field) {\n\t\tvar _this27 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this27.columnManager.findColumn(field);\n\n\t\t\t_this27.columnManager.addColumn(definition, before, column).then(function (column) {\n\n\t\t\t\tresolve(column.getComponent());\n\t\t\t}).catch(function (err) {\n\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t};\n\n\tTabulator.prototype.deleteColumn = function (field) {\n\t\tvar _this28 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this28.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\tcolumn.delete().then(function () {\n\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.updateColumnDefinition = function (field, definition) {\n\t\tvar _this29 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this29.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\tcolumn.updateDefinition(definition).then(function (col) {\n\n\t\t\t\t\tresolve(col);\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.moveColumn = function (from, to, after) {\n\n\t\tvar fromColumn = this.columnManager.findColumn(from);\n\n\t\tvar toColumn = this.columnManager.findColumn(to);\n\n\t\tif (fromColumn) {\n\n\t\t\tif (toColumn) {\n\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t};\n\n\t//scroll to column in DOM\n\n\tTabulator.prototype.scrollToColumn = function (field, position, ifVisible) {\n\t\tvar _this30 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this30.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\t_this30.columnManager.scrollToColumn(column, position, ifVisible).then(function () {\n\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\n\t\t\t\treject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//////////// Localization Functions  ////////////\n\n\tTabulator.prototype.setLocale = function (locale) {\n\n\t\tthis.modules.localize.setLocale(locale);\n\t};\n\n\tTabulator.prototype.getLocale = function () {\n\n\t\treturn this.modules.localize.getLocale();\n\t};\n\n\tTabulator.prototype.getLang = function (locale) {\n\n\t\treturn this.modules.localize.getLang(locale);\n\t};\n\n\t//////////// General Public Functions ////////////\n\n\n\t//redraw list without updating data\n\n\tTabulator.prototype.redraw = function (force) {\n\n\t\tthis.columnManager.redraw(force);\n\n\t\tthis.rowManager.redraw(force);\n\t};\n\n\tTabulator.prototype.setHeight = function (height) {\n\n\t\tif (this.rowManager.renderMode !== \"classic\") {\n\n\t\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\n\t\t\tthis.element.style.height = this.options.height;\n\n\t\t\tthis.rowManager.setRenderMode();\n\n\t\t\tthis.rowManager.redraw();\n\t\t} else {\n\n\t\t\tconsole.warn(\"setHeight function is not available in classic render mode\");\n\t\t}\n\t};\n\n\t///////////////////// Sorting ////////////////////\n\n\n\t//trigger sort\n\n\tTabulator.prototype.setSort = function (sortList, dir) {\n\n\t\tif (this.modExists(\"sort\", true)) {\n\n\t\t\tthis.modules.sort.setSort(sortList, dir);\n\n\t\t\tthis.rowManager.sorterRefresh();\n\t\t}\n\t};\n\n\tTabulator.prototype.getSorters = function () {\n\n\t\tif (this.modExists(\"sort\", true)) {\n\n\t\t\treturn this.modules.sort.getSort();\n\t\t}\n\t};\n\n\tTabulator.prototype.clearSort = function () {\n\n\t\tif (this.modExists(\"sort\", true)) {\n\n\t\t\tthis.modules.sort.clear();\n\n\t\t\tthis.rowManager.sorterRefresh();\n\t\t}\n\t};\n\n\t///////////////////// Filtering ////////////////////\n\n\n\t//set standard filters\n\n\tTabulator.prototype.setFilter = function (field, type, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.setFilter(field, type, value);\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t//add filter to array\n\n\tTabulator.prototype.addFilter = function (field, type, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.addFilter(field, type, value);\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t//get all filters\n\n\tTabulator.prototype.getFilters = function (all) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\treturn this.modules.filter.getFilters(all);\n\t\t}\n\t};\n\n\tTabulator.prototype.setHeaderFilterFocus = function (field) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tvar column = this.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\tthis.modules.filter.setHeaderFilterFocus(column);\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.getHeaderFilterValue = function (field) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tvar column = this.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\treturn this.modules.filter.getHeaderFilterValue(column);\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.setHeaderFilterValue = function (field, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tvar column = this.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\tthis.modules.filter.setHeaderFilterValue(column, value);\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.getHeaderFilters = function () {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\treturn this.modules.filter.getHeaderFilters();\n\t\t}\n\t};\n\n\t//remove filter from array\n\n\tTabulator.prototype.removeFilter = function (field, type, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.removeFilter(field, type, value);\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t//clear filters\n\n\tTabulator.prototype.clearFilter = function (all) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.clearFilter(all);\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t//clear header filters\n\n\tTabulator.prototype.clearHeaderFilter = function () {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.clearHeaderFilter();\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t///////////////////// Filtering ////////////////////\n\n\tTabulator.prototype.selectRow = function (rows) {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\tif (rows === true) {\n\n\t\t\t\tconsole.warn(\"passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'\");\n\n\t\t\t\trows = \"active\";\n\t\t\t}\n\n\t\t\tthis.modules.selectRow.selectRows(rows);\n\t\t}\n\t};\n\n\tTabulator.prototype.deselectRow = function (rows) {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\tthis.modules.selectRow.deselectRows(rows);\n\t\t}\n\t};\n\n\tTabulator.prototype.toggleSelectRow = function (row) {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\tthis.modules.selectRow.toggleRow(row);\n\t\t}\n\t};\n\n\tTabulator.prototype.getSelectedRows = function () {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\treturn this.modules.selectRow.getSelectedRows();\n\t\t}\n\t};\n\n\tTabulator.prototype.getSelectedData = function () {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\treturn this.modules.selectRow.getSelectedData();\n\t\t}\n\t};\n\n\t//////////// Pagination Functions  ////////////\n\n\n\tTabulator.prototype.setMaxPage = function (max) {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\tthis.modules.page.setMaxPage(max);\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.setPage = function (page) {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\treturn this.modules.page.setPage(page);\n\t\t} else {\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\treject();\n\t\t\t});\n\t\t}\n\t};\n\n\tTabulator.prototype.setPageToRow = function (row) {\n\t\tvar _this31 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this31.options.pagination && _this31.modExists(\"page\")) {\n\n\t\t\t\trow = _this31.rowManager.findRow(row);\n\n\t\t\t\tif (row) {\n\n\t\t\t\t\t_this31.modules.page.setPageToRow(row).then(function () {\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).catch(function () {\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.setPageSize = function (size) {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\tthis.modules.page.setPageSize(size);\n\n\t\t\tthis.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getPageSize = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\", true)) {\n\n\t\t\treturn this.modules.page.getPageSize();\n\t\t}\n\t};\n\n\tTabulator.prototype.previousPage = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\tthis.modules.page.previousPage();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.nextPage = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\tthis.modules.page.nextPage();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getPage = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\treturn this.modules.page.getPage();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getPageMax = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\treturn this.modules.page.getPageMax();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t///////////////// Grouping Functions ///////////////\n\n\n\tTabulator.prototype.setGroupBy = function (groups) {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\tthis.options.groupBy = groups;\n\n\t\t\tthis.modules.groupRows.initialize();\n\n\t\t\tthis.rowManager.refreshActiveData(\"display\");\n\n\t\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\n\t\t\t\tthis.modules.persistence.save(\"group\");\n\t\t\t}\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.setGroupStartOpen = function (values) {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\tthis.options.groupStartOpen = values;\n\n\t\t\tthis.modules.groupRows.initialize();\n\n\t\t\tif (this.options.groupBy) {\n\n\t\t\t\tthis.rowManager.refreshActiveData(\"group\");\n\n\t\t\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\n\t\t\t\t\tthis.modules.persistence.save(\"group\");\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t\t}\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.setGroupHeader = function (values) {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\tthis.options.groupHeader = values;\n\n\t\t\tthis.modules.groupRows.initialize();\n\n\t\t\tif (this.options.groupBy) {\n\n\t\t\t\tthis.rowManager.refreshActiveData(\"group\");\n\n\t\t\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\n\t\t\t\t\tthis.modules.persistence.save(\"group\");\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t\t}\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getGroups = function (values) {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\treturn this.modules.groupRows.getGroups(true);\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t// get grouped table data in the same format as getData()\n\n\tTabulator.prototype.getGroupedData = function () {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\treturn this.options.groupBy ? this.modules.groupRows.getGroupedData() : this.getData();\n\t\t}\n\t};\n\n\t///////////////// Column Calculation Functions ///////////////\n\n\tTabulator.prototype.getCalcResults = function () {\n\n\t\tif (this.modExists(\"columnCalcs\", true)) {\n\n\t\t\treturn this.modules.columnCalcs.getResults();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.recalc = function () {\n\n\t\tif (this.modExists(\"columnCalcs\", true)) {\n\n\t\t\tthis.modules.columnCalcs.recalcAll(this.rowManager.activeRows);\n\t\t}\n\t};\n\n\t/////////////// Navigation Management //////////////\n\n\n\tTabulator.prototype.navigatePrev = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\treturn cell.nav().prev();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateNext = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\treturn cell.nav().next();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateLeft = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\treturn cell.nav().left();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateRight = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\treturn cell.nav().right();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateUp = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\treturn cell.nav().up();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateDown = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\treturn cell.nav().down();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/////////////// History Management //////////////\n\n\tTabulator.prototype.undo = function () {\n\n\t\tif (this.options.history && this.modExists(\"history\", true)) {\n\n\t\t\treturn this.modules.history.undo();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.redo = function () {\n\n\t\tif (this.options.history && this.modExists(\"history\", true)) {\n\n\t\t\treturn this.modules.history.redo();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getHistoryUndoSize = function () {\n\n\t\tif (this.options.history && this.modExists(\"history\", true)) {\n\n\t\t\treturn this.modules.history.getHistoryUndoSize();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getHistoryRedoSize = function () {\n\n\t\tif (this.options.history && this.modExists(\"history\", true)) {\n\n\t\t\treturn this.modules.history.getHistoryRedoSize();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/////////////// Download Management //////////////\n\n\n\tTabulator.prototype.download = function (type, filename, options, active) {\n\n\t\tif (this.modExists(\"download\", true)) {\n\n\t\t\tthis.modules.download.download(type, filename, options, active);\n\t\t}\n\t};\n\n\tTabulator.prototype.downloadToTab = function (type, filename, options, active) {\n\n\t\tif (this.modExists(\"download\", true)) {\n\n\t\t\tthis.modules.download.download(type, filename, options, active, true);\n\t\t}\n\t};\n\n\t/////////// Inter Table Communications ///////////\n\n\n\tTabulator.prototype.tableComms = function (table, module, action, data) {\n\n\t\tthis.modules.comms.receive(table, module, action, data);\n\t};\n\n\t////////////// Extension Management //////////////\n\n\n\t//object to hold module\n\n\tTabulator.prototype.moduleBindings = {};\n\n\t//extend module\n\n\tTabulator.prototype.extendModule = function (name, property, values) {\n\n\t\tif (Tabulator.prototype.moduleBindings[name]) {\n\n\t\t\tvar source = Tabulator.prototype.moduleBindings[name].prototype[property];\n\n\t\t\tif (source) {\n\n\t\t\t\tif ((typeof values === 'undefined' ? 'undefined' : _typeof(values)) == \"object\") {\n\n\t\t\t\t\tfor (var key in values) {\n\n\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t}\n\t};\n\n\t//add module to tabulator\n\n\tTabulator.prototype.registerModule = function (name, module) {\n\n\t\tvar self = this;\n\n\t\tTabulator.prototype.moduleBindings[name] = module;\n\t};\n\n\t//ensure that module are bound to instantiated function\n\n\tTabulator.prototype.bindModules = function () {\n\n\t\tthis.modules = {};\n\n\t\tfor (var name in Tabulator.prototype.moduleBindings) {\n\n\t\t\tthis.modules[name] = new Tabulator.prototype.moduleBindings[name](this);\n\t\t}\n\t};\n\n\t//Check for module\n\n\tTabulator.prototype.modExists = function (plugin, required) {\n\n\t\tif (this.modules[plugin]) {\n\n\t\t\treturn true;\n\t\t} else {\n\n\t\t\tif (required) {\n\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.helpers = {\n\n\t\telVisible: function elVisible(el) {\n\n\t\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t\t},\n\n\t\telOffset: function elOffset(el) {\n\n\t\t\tvar box = el.getBoundingClientRect();\n\n\t\t\treturn {\n\n\t\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\n\t\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\n\t\t\t};\n\t\t},\n\n\t\tdeepClone: function deepClone(obj) {\n\n\t\t\tvar clone = Array.isArray(obj) ? [] : {};\n\n\t\t\tfor (var i in obj) {\n\n\t\t\t\tif (obj[i] != null && _typeof(obj[i]) === \"object\") {\n\n\t\t\t\t\tif (obj[i] instanceof Date) {\n\n\t\t\t\t\t\tclone[i] = new Date(obj[i]);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tclone[i] = this.deepClone(obj[i]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tclone[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn clone;\n\t\t}\n\n\t};\n\n\tTabulator.prototype.comms = {\n\n\t\ttables: [],\n\n\t\tregister: function register(table) {\n\n\t\t\tTabulator.prototype.comms.tables.push(table);\n\t\t},\n\n\t\tderegister: function deregister(table) {\n\n\t\t\tvar index = Tabulator.prototype.comms.tables.indexOf(table);\n\n\t\t\tif (index > -1) {\n\n\t\t\t\tTabulator.prototype.comms.tables.splice(index, 1);\n\t\t\t}\n\t\t},\n\n\t\tlookupTable: function lookupTable(query, silent) {\n\n\t\t\tvar results = [],\n\t\t\t    matches,\n\t\t\t    match;\n\n\t\t\tif (typeof query === \"string\") {\n\n\t\t\t\tmatches = document.querySelectorAll(query);\n\n\t\t\t\tif (matches.length) {\n\n\t\t\t\t\tfor (var i = 0; i < matches.length; i++) {\n\n\t\t\t\t\t\tmatch = Tabulator.prototype.comms.matchElement(matches[i]);\n\n\t\t\t\t\t\tif (match) {\n\n\t\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement || query instanceof Tabulator) {\n\n\t\t\t\tmatch = Tabulator.prototype.comms.matchElement(query);\n\n\t\t\t\tif (match) {\n\n\t\t\t\t\tresults.push(match);\n\t\t\t\t}\n\t\t\t} else if (Array.isArray(query)) {\n\n\t\t\t\tquery.forEach(function (item) {\n\n\t\t\t\t\tresults = results.concat(Tabulator.prototype.comms.lookupTable(item));\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif (!silent) {\n\n\t\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn results;\n\t\t},\n\n\t\tmatchElement: function matchElement(element) {\n\n\t\t\treturn Tabulator.prototype.comms.tables.find(function (table) {\n\n\t\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\n\t\t\t});\n\t\t}\n\n\t};\n\n\tTabulator.prototype.findTable = function (query) {\n\n\t\tvar results = Tabulator.prototype.comms.lookupTable(query, true);\n\n\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t};\n\n\tvar Layout = function Layout(table) {\n\n\t\tthis.table = table;\n\n\t\tthis.mode = null;\n\t};\n\n\t//initialize layout system\n\n\n\tLayout.prototype.initialize = function (layout) {\n\n\t\tif (this.modes[layout]) {\n\n\t\t\tthis.mode = layout;\n\t\t} else {\n\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t};\n\n\tLayout.prototype.getMode = function () {\n\n\t\treturn this.mode;\n\t};\n\n\t//trigger table layout\n\n\n\tLayout.prototype.layout = function () {\n\n\t\tthis.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\n\t};\n\n\t//layout render functions\n\n\n\tLayout.prototype.modes = {\n\n\t\t//resize columns to fit data the contain\n\n\n\t\t\"fitData\": function fitData(columns) {\n\n\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t});\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t},\n\n\t\t//resize columns to fit data the contain and stretch row to fill table\n\n\n\t\t\"fitDataFill\": function fitDataFill(columns) {\n\n\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t});\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t},\n\n\t\t//resize columns to fit data the contain and stretch last column to fill table\n\n\n\t\t\"fitDataStretch\": function fitDataStretch(columns) {\n\t\t\tvar _this32 = this;\n\n\t\t\tvar colsWidth = 0,\n\t\t\t    tableWidth = this.table.rowManager.element.clientWidth,\n\t\t\t    gap = 0,\n\t\t\t    lastCol = false;\n\n\t\t\tcolumns.forEach(function (column, i) {\n\n\t\t\t\tif (!column.widthFixed) {\n\n\t\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t\t}\n\n\t\t\t\tif (_this32.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\n\n\t\t\t\t\tlastCol = column;\n\t\t\t\t}\n\n\t\t\t\tif (column.visible) {\n\n\t\t\t\t\tcolsWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (lastCol) {\n\n\t\t\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\t\tlastCol.setWidth(0);\n\n\t\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t\t}\n\n\t\t\t\tif (gap > 0) {\n\n\t\t\t\t\tlastCol.setWidth(gap);\n\t\t\t\t} else {\n\n\t\t\t\t\tlastCol.reinitializeWidth();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//resize columns to fit\n\n\n\t\t\"fitColumns\": function fitColumns(columns) {\n\n\t\t\tvar self = this;\n\n\t\t\tvar totalWidth = self.table.element.clientWidth; //table element width\n\n\n\t\t\tvar fixedWidth = 0; //total width of columns with a defined width\n\n\n\t\t\tvar flexWidth = 0; //total width available to flexible columns\n\n\n\t\t\tvar flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\n\n\n\t\t\tvar flexColWidth = 0; //desired width of flexible columns\n\n\n\t\t\tvar flexColumns = []; //array of flexible width columns\n\n\n\t\t\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\n\n\t\t\tvar flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\n\n\n\t\t\tvar overflowWidth = 0; //horizontal overflow width\n\n\n\t\t\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\n\t\t\tfunction calcWidth(width) {\n\n\t\t\t\tvar colWidth;\n\n\t\t\t\tif (typeof width == \"string\") {\n\n\t\t\t\t\tif (width.indexOf(\"%\") > -1) {\n\n\t\t\t\t\t\tcolWidth = totalWidth / 100 * parseInt(width);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\n\t\t\t\treturn colWidth;\n\t\t\t}\n\n\t\t\t//ensure columns resize to take up the correct amount of space\n\n\n\t\t\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\n\n\t\t\t\tvar oversizeCols = [],\n\t\t\t\t    oversizeSpace = 0,\n\t\t\t\t    remainingSpace = 0,\n\t\t\t\t    nextColWidth = 0,\n\t\t\t\t    gap = 0,\n\t\t\t\t    changeUnits = 0,\n\t\t\t\t    undersizeCols = [];\n\n\t\t\t\tfunction calcGrow(col) {\n\n\t\t\t\t\treturn colWidth * (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\n\t\t\t\tfunction calcShrink(col) {\n\n\t\t\t\t\treturn calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0);\n\t\t\t\t}\n\n\t\t\t\tcolumns.forEach(function (col, i) {\n\n\t\t\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\n\t\t\t\t\tif (col.column.minWidth >= width) {\n\n\t\t\t\t\t\toversizeCols.push(col);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tundersizeCols.push(col);\n\n\t\t\t\t\t\tchangeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (oversizeCols.length) {\n\n\t\t\t\t\toversizeCols.forEach(function (col) {\n\n\t\t\t\t\t\toversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth;\n\n\t\t\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t\t\t});\n\n\t\t\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace;\n\n\t\t\t\t\tgap = remainingSpace - nextColWidth * changeUnits;\n\n\t\t\t\t\tgap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t\t\t} else {\n\n\t\t\t\t\tgap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace;\n\n\t\t\t\t\tundersizeCols.forEach(function (column) {\n\n\t\t\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn gap;\n\t\t\t}\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\n\t\t\t//adjust for vertical scrollbar if present\n\n\n\t\t\tif (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n\n\t\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t\t}\n\n\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\tvar width, minWidth, colWidth;\n\n\t\t\t\tif (column.visible) {\n\n\t\t\t\t\twidth = column.definition.width;\n\n\t\t\t\t\tminWidth = parseInt(column.minWidth);\n\n\t\t\t\t\tif (width) {\n\n\t\t\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\t\t\tif (column.definition.widthShrink) {\n\n\t\t\t\t\t\t\tfixedShrinkColumns.push({\n\n\t\t\t\t\t\t\t\tcolumn: column,\n\n\t\t\t\t\t\t\t\twidth: colWidth > minWidth ? colWidth : minWidth\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tflexColumns.push({\n\n\t\t\t\t\t\t\tcolumn: column,\n\n\t\t\t\t\t\t\twidth: 0\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//calculate available space\n\n\n\t\t\tflexWidth = totalWidth - fixedWidth;\n\n\t\t\t//calculate correct column size\n\n\n\t\t\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t\t\t//generate column widths\n\n\n\t\t\tvar gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t\t\t//increase width of last column to account for rounding errors\n\n\n\t\t\tif (flexColumns.length && gapFill > 0) {\n\n\t\t\t\tflexColumns[flexColumns.length - 1].width += +gapFill;\n\t\t\t}\n\n\t\t\t//caculate space for columns to be shrunk into\n\n\n\t\t\tflexColumns.forEach(function (col) {\n\n\t\t\t\tflexWidth -= col.width;\n\t\t\t});\n\n\t\t\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t\t\t//shrink oversize columns if there is no available space\n\n\n\t\t\tif (overflowWidth > 0 && flexShrinkUnits) {\n\n\t\t\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t\t\t}\n\n\t\t\t//decrease width of last column to account for rounding errors\n\n\n\t\t\tif (fixedShrinkColumns.length) {\n\n\t\t\t\tfixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill;\n\t\t\t}\n\n\t\t\tflexColumns.forEach(function (col) {\n\n\t\t\t\tcol.column.setWidth(col.width);\n\t\t\t});\n\n\t\t\tfixedShrinkColumns.forEach(function (col) {\n\n\t\t\t\tcol.column.setWidth(col.width);\n\t\t\t});\n\t\t}\n\n\t};\n\n\tTabulator.prototype.registerModule(\"layout\", Layout);\n\n\tvar Localize = function Localize(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.locale = \"default\"; //current locale\n\n\t\tthis.lang = false; //current language\n\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t};\n\n\t//set header placehoder\n\n\tLocalize.prototype.setHeaderFilterPlaceholder = function (placeholder) {\n\n\t\tthis.langs.default.headerFilters.default = placeholder;\n\t};\n\n\t//set header filter placeholder by column\n\n\tLocalize.prototype.setHeaderFilterColumnPlaceholder = function (column, placeholder) {\n\n\t\tthis.langs.default.headerFilters.columns[column] = placeholder;\n\n\t\tif (this.lang && !this.lang.headerFilters.columns[column]) {\n\n\t\t\tthis.lang.headerFilters.columns[column] = placeholder;\n\t\t}\n\t};\n\n\t//setup a lang description object\n\n\tLocalize.prototype.installLang = function (locale, lang) {\n\n\t\tif (this.langs[locale]) {\n\n\t\t\tthis._setLangProp(this.langs[locale], lang);\n\t\t} else {\n\n\t\t\tthis.langs[locale] = lang;\n\t\t}\n\t};\n\n\tLocalize.prototype._setLangProp = function (lang, values) {\n\n\t\tfor (var key in values) {\n\n\t\t\tif (lang[key] && _typeof(lang[key]) == \"object\") {\n\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t} else {\n\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t};\n\n\t//set current locale\n\n\tLocalize.prototype.setLocale = function (desiredLocale) {\n\n\t\tvar self = this;\n\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching languge values\n\n\t\tfunction traverseLang(trans, path) {\n\n\t\t\tfor (var prop in trans) {\n\n\t\t\t\tif (_typeof(trans[prop]) == \"object\") {\n\n\t\t\t\t\tif (!path[prop]) {\n\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t} else {\n\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determing correct locale to load\n\n\t\tif (desiredLocale === true && navigator.language) {\n\n\t\t\t//get local from system\n\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif (desiredLocale) {\n\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\n\t\t\tif (!self.langs[desiredLocale]) {\n\n\t\t\t\tvar prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif (self.langs[prefix]) {\n\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tself.locale = desiredLocale;\n\n\t\t//load default lang template\n\n\t\tself.lang = Tabulator.prototype.helpers.deepClone(self.langs.default || {});\n\n\t\tif (desiredLocale != \"default\") {\n\n\t\t\ttraverseLang(self.langs[desiredLocale], self.lang);\n\t\t}\n\n\t\tself.table.options.localized.call(self.table, self.locale, self.lang);\n\n\t\tself._executeBindings();\n\t};\n\n\t//get current locale\n\n\tLocalize.prototype.getLocale = function (locale) {\n\n\t\treturn self.locale;\n\t};\n\n\t//get lang object for given local or current if none provided\n\n\tLocalize.prototype.getLang = function (locale) {\n\n\t\treturn locale ? this.langs[locale] : this.lang;\n\t};\n\n\t//get text for current locale\n\n\tLocalize.prototype.getText = function (path, value) {\n\n\t\tvar path = value ? path + \"|\" + value : path,\n\t\t    pathArray = path.split(\"|\"),\n\t\t    text = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\n\t\t// }\n\n\n\t\treturn text || \"\";\n\t};\n\n\t//traverse langs object and find localized copy\n\n\tLocalize.prototype._getLangElement = function (path, locale) {\n\n\t\tvar self = this;\n\n\t\tvar root = self.lang;\n\n\t\tpath.forEach(function (level) {\n\n\t\t\tvar rootPath;\n\n\t\t\tif (root) {\n\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif (typeof rootPath != \"undefined\") {\n\n\t\t\t\t\troot = rootPath;\n\t\t\t\t} else {\n\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t};\n\n\t//set update binding\n\n\tLocalize.prototype.bind = function (path, callback) {\n\n\t\tif (!this.bindings[path]) {\n\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t};\n\n\t//itterate through bindings and trigger updates\n\n\tLocalize.prototype._executeBindings = function () {\n\n\t\tvar self = this;\n\n\t\tvar _loop = function _loop(path) {\n\n\t\t\tself.bindings[path].forEach(function (binding) {\n\n\t\t\t\tbinding(self.getText(path), self.lang);\n\t\t\t});\n\t\t};\n\n\t\tfor (var path in self.bindings) {\n\t\t\t_loop(path);\n\t\t}\n\t};\n\n\t//Localized text listings\n\n\tLocalize.prototype.langs = {\n\n\t\t\"default\": { //hold default locale text\n\n\t\t\t\"groups\": {\n\n\t\t\t\t\"item\": \"item\",\n\n\t\t\t\t\"items\": \"items\"\n\n\t\t\t},\n\n\t\t\t\"columns\": {},\n\n\t\t\t\"ajax\": {\n\n\t\t\t\t\"loading\": \"Loading\",\n\n\t\t\t\t\"error\": \"Error\"\n\n\t\t\t},\n\n\t\t\t\"pagination\": {\n\n\t\t\t\t\"page_size\": \"Page Size\",\n\n\t\t\t\t\"first\": \"First\",\n\n\t\t\t\t\"first_title\": \"First Page\",\n\n\t\t\t\t\"last\": \"Last\",\n\n\t\t\t\t\"last_title\": \"Last Page\",\n\n\t\t\t\t\"prev\": \"Prev\",\n\n\t\t\t\t\"prev_title\": \"Prev Page\",\n\n\t\t\t\t\"next\": \"Next\",\n\n\t\t\t\t\"next_title\": \"Next Page\"\n\n\t\t\t},\n\n\t\t\t\"headerFilters\": {\n\n\t\t\t\t\"default\": \"filter column...\",\n\n\t\t\t\t\"columns\": {}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tTabulator.prototype.registerModule(\"localize\", Localize);\n\n\tvar Comms = function Comms(table) {\n\n\t\tthis.table = table;\n\t};\n\n\tComms.prototype.getConnections = function (selectors) {\n\n\t\tvar self = this,\n\t\t    connections = [],\n\t\t    connection;\n\n\t\tconnection = Tabulator.prototype.comms.lookupTable(selectors);\n\n\t\tconnection.forEach(function (con) {\n\n\t\t\tif (self.table !== con) {\n\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t};\n\n\tComms.prototype.send = function (selectors, module, action, data) {\n\n\t\tvar self = this,\n\t\t    connections = this.getConnections(selectors);\n\n\t\tconnections.forEach(function (connection) {\n\n\t\t\tconnection.tableComms(self.table.element, module, action, data);\n\t\t});\n\n\t\tif (!connections.length && selectors) {\n\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t};\n\n\tComms.prototype.receive = function (table, module, action, data) {\n\n\t\tif (this.table.modExists(module)) {\n\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"comms\", Comms);\n\n\tvar Accessor = function Accessor(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\t};\n\n\t//initialize column accessor\n\tAccessor.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    match = false,\n\t\t    config = {};\n\n\t\tthis.allowedTypes.forEach(function (type) {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\t    accessor;\n\n\t\t\tif (column.definition[key]) {\n\t\t\t\taccessor = self.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif (accessor) {\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor: accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (match) {\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t};\n\n\tAccessor.prototype.lookupAccessor = function (value) {\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (this.accessors[value]) {\n\t\t\t\t\taccessor = this.accessors[value];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t};\n\n\t//apply accessor to row\n\tAccessor.prototype.transformRow = function (dataIn, type) {\n\t\tvar self = this,\n\t\t    key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1));\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Tabulator.prototype.helpers.deepClone(dataIn || {});\n\n\t\tself.table.columnManager.traverse(function (column) {\n\t\t\tvar value, accessor, params, component;\n\n\t\t\tif (column.modules.accessor) {\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif (accessor) {\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif (value != \"undefined\") {\n\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, component) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, component));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t},\n\n\t//default accessors\n\tAccessor.prototype.accessors = {};\n\n\tTabulator.prototype.registerModule(\"accessor\", Accessor);\n\tvar Ajax = function Ajax(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.config = false; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\n\t\tthis.loaderElement = this.createLoaderElement(); //loader message div\n\t\tthis.msgElement = this.createMsgElement(); //message element\n\t\tthis.loadingElement = false;\n\t\tthis.errorElement = false;\n\t\tthis.loaderPromise = false;\n\n\t\tthis.progressiveLoad = false;\n\t\tthis.loading = false;\n\n\t\tthis.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\n\t};\n\n\t//initialize setup options\n\tAjax.prototype.initialize = function () {\n\t\tvar template;\n\n\t\tthis.loaderElement.appendChild(this.msgElement);\n\n\t\tif (this.table.options.ajaxLoaderLoading) {\n\t\t\tif (typeof this.table.options.ajaxLoaderLoading == \"string\") {\n\t\t\t\ttemplate = document.createElement('template');\n\t\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderLoading.trim();\n\t\t\t\tthis.loadingElement = template.content.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.loadingElement = this.table.options.ajaxLoaderLoading;\n\t\t\t}\n\t\t}\n\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || this.defaultLoaderPromise;\n\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || this.defaultURLGenerator;\n\n\t\tif (this.table.options.ajaxLoaderError) {\n\t\t\tif (typeof this.table.options.ajaxLoaderError == \"string\") {\n\t\t\t\ttemplate = document.createElement('template');\n\t\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderError.trim();\n\t\t\t\tthis.errorElement = template.content.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.errorElement = this.table.options.ajaxLoaderError;\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.options.ajaxParams) {\n\t\t\tthis.setParams(this.table.options.ajaxParams);\n\t\t}\n\n\t\tif (this.table.options.ajaxConfig) {\n\t\t\tthis.setConfig(this.table.options.ajaxConfig);\n\t\t}\n\n\t\tif (this.table.options.ajaxURL) {\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\t\tif (this.table.options.ajaxProgressiveLoad) {\n\t\t\tif (this.table.options.pagination) {\n\t\t\t\tthis.progressiveLoad = false;\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t} else {\n\t\t\t\tif (this.table.modExists(\"page\")) {\n\t\t\t\t\tthis.progressiveLoad = this.table.options.ajaxProgressiveLoad;\n\t\t\t\t\tthis.table.modules.page.initializeProgressive(this.progressiveLoad);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"Pagination plugin is required for progressive ajax loading\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tAjax.prototype.createLoaderElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-loader\");\n\t\treturn el;\n\t};\n\n\tAjax.prototype.createMsgElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-loader-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\n\t\treturn el;\n\t};\n\n\t//set ajax params\n\tAjax.prototype.setParams = function (params, update) {\n\t\tif (update) {\n\t\t\tthis.params = this.params || {};\n\n\t\t\tfor (var key in params) {\n\t\t\t\tthis.params[key] = params[key];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.params = params;\n\t\t}\n\t};\n\n\tAjax.prototype.getParams = function () {\n\t\treturn this.params || {};\n\t};\n\n\t//load config object\n\tAjax.prototype.setConfig = function (config) {\n\t\tthis._loadDefaultConfig();\n\n\t\tif (typeof config == \"string\") {\n\t\t\tthis.config.method = config;\n\t\t} else {\n\t\t\tfor (var key in config) {\n\t\t\t\tthis.config[key] = config[key];\n\t\t\t}\n\t\t}\n\t};\n\n\t//create config object from default\n\tAjax.prototype._loadDefaultConfig = function (force) {\n\t\tvar self = this;\n\t\tif (!self.config || force) {\n\n\t\t\tself.config = {};\n\n\t\t\t//load base config from defaults\n\t\t\tfor (var key in self.defaultConfig) {\n\t\t\t\tself.config[key] = self.defaultConfig[key];\n\t\t\t}\n\t\t}\n\t};\n\n\t//set request url\n\tAjax.prototype.setUrl = function (url) {\n\t\tthis.url = url;\n\t};\n\n\t//get request url\n\tAjax.prototype.getUrl = function () {\n\t\treturn this.url;\n\t};\n\n\t//lstandard loading function\n\tAjax.prototype.loadData = function (inPosition, columnsChanged) {\n\t\tvar self = this;\n\n\t\tif (this.progressiveLoad) {\n\t\t\treturn this._loadDataProgressive();\n\t\t} else {\n\t\t\treturn this._loadDataStandard(inPosition, columnsChanged);\n\t\t}\n\t};\n\n\tAjax.prototype.nextPage = function (diff) {\n\t\tvar margin;\n\n\t\tif (!this.loading) {\n\n\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.getElement().clientHeight * 2;\n\n\t\t\tif (diff < margin) {\n\t\t\t\tthis.table.modules.page.nextPage().then(function () {}).catch(function () {});\n\t\t\t}\n\t\t}\n\t};\n\n\tAjax.prototype.blockActiveRequest = function () {\n\t\tthis.requestOrder++;\n\t};\n\n\tAjax.prototype._loadDataProgressive = function () {\n\t\tthis.table.rowManager.setData([]);\n\t\treturn this.table.modules.page.setPage(1);\n\t};\n\n\tAjax.prototype._loadDataStandard = function (inPosition, columnsChanged) {\n\t\tvar _this33 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\t_this33.sendRequest(inPosition).then(function (data) {\n\t\t\t\t_this33.table.rowManager.setData(data, inPosition, columnsChanged).then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t});\n\t\t\t}).catch(function (e) {\n\t\t\t\treject(e);\n\t\t\t});\n\t\t});\n\t};\n\n\tAjax.prototype.generateParamsList = function (data, prefix) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tprefix = prefix || \"\";\n\n\t\tif (Array.isArray(data)) {\n\t\t\tdata.forEach(function (item, i) {\n\t\t\t\toutput = output.concat(self.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t\t});\n\t\t} else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === \"object\") {\n\t\t\tfor (var key in data) {\n\t\t\t\toutput = output.concat(self.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push({ key: prefix, value: data });\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tAjax.prototype.serializeParams = function (params) {\n\t\tvar output = this.generateParamsList(params),\n\t\t    encoded = [];\n\n\t\toutput.forEach(function (item) {\n\t\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t\t});\n\n\t\treturn encoded.join(\"&\");\n\t};\n\n\t//send ajax request\n\tAjax.prototype.sendRequest = function (silent) {\n\t\tvar _this34 = this;\n\n\t\tvar self = this,\n\t\t    url = self.url,\n\t\t    requestNo,\n\t\t    esc,\n\t\t    query;\n\n\t\tself.requestOrder++;\n\t\trequestNo = self.requestOrder;\n\n\t\tself._loadDefaultConfig();\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (self.table.options.ajaxRequesting.call(_this34.table, self.url, self.params) !== false) {\n\n\t\t\t\tself.loading = true;\n\n\t\t\t\tif (!silent) {\n\t\t\t\t\tself.showLoader();\n\t\t\t\t}\n\n\t\t\t\t_this34.loaderPromise(url, self.config, self.params).then(function (data) {\n\t\t\t\t\tif (requestNo === self.requestOrder) {\n\t\t\t\t\t\tif (self.table.options.ajaxResponse) {\n\t\t\t\t\t\t\tdata = self.table.options.ajaxResponse.call(self.table, self.url, self.params, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(data);\n\n\t\t\t\t\t\tself.hideLoader();\n\t\t\t\t\t\tself.loading = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t\t}\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\tconsole.error(\"Ajax Load Error: \", error);\n\t\t\t\t\tself.table.options.ajaxError.call(self.table, error);\n\n\t\t\t\t\tself.showError();\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tself.hideLoader();\n\t\t\t\t\t}, 3000);\n\n\t\t\t\t\tself.loading = false;\n\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tAjax.prototype.showLoader = function () {\n\t\tvar shouldLoad = typeof this.table.options.ajaxLoader === \"function\" ? this.table.options.ajaxLoader() : this.table.options.ajaxLoader;\n\n\t\tif (shouldLoad) {\n\n\t\t\tthis.hideLoader();\n\n\t\t\twhile (this.msgElement.firstChild) {\n\t\t\t\tthis.msgElement.removeChild(this.msgElement.firstChild);\n\t\t\t}this.msgElement.classList.remove(\"tabulator-error\");\n\t\t\tthis.msgElement.classList.add(\"tabulator-loading\");\n\n\t\t\tif (this.loadingElement) {\n\t\t\t\tthis.msgElement.appendChild(this.loadingElement);\n\t\t\t} else {\n\t\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|loading\");\n\t\t\t}\n\n\t\t\tthis.table.element.appendChild(this.loaderElement);\n\t\t}\n\t};\n\n\tAjax.prototype.showError = function () {\n\t\tthis.hideLoader();\n\n\t\twhile (this.msgElement.firstChild) {\n\t\t\tthis.msgElement.removeChild(this.msgElement.firstChild);\n\t\t}this.msgElement.classList.remove(\"tabulator-loading\");\n\t\tthis.msgElement.classList.add(\"tabulator-error\");\n\n\t\tif (this.errorElement) {\n\t\t\tthis.msgElement.appendChild(this.errorElement);\n\t\t} else {\n\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|error\");\n\t\t}\n\n\t\tthis.table.element.appendChild(this.loaderElement);\n\t};\n\n\tAjax.prototype.hideLoader = function () {\n\t\tif (this.loaderElement.parentNode) {\n\t\t\tthis.loaderElement.parentNode.removeChild(this.loaderElement);\n\t\t}\n\t};\n\n\t//default ajax config object\n\tAjax.prototype.defaultConfig = {\n\t\tmethod: \"GET\"\n\t};\n\n\tAjax.prototype.defaultURLGenerator = function (url, config, params) {\n\n\t\tif (url) {\n\t\t\tif (params && Object.keys(params).length) {\n\t\t\t\tif (!config.method || config.method.toLowerCase() == \"get\") {\n\t\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + this.serializeParams(params);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t};\n\n\tAjax.prototype.defaultLoaderPromise = function (url, config, params) {\n\t\tvar self = this,\n\t\t    contentType;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t//set url\n\t\t\turl = self.urlGenerator(url, config, params);\n\n\t\t\t//set body content if not GET request\n\t\t\tif (config.method.toUpperCase() != \"GET\") {\n\t\t\t\tcontentType = _typeof(self.table.options.ajaxContentType) === \"object\" ? self.table.options.ajaxContentType : self.contentTypeFormatters[self.table.options.ajaxContentType];\n\t\t\t\tif (contentType) {\n\n\t\t\t\t\tfor (var key in contentType.headers) {\n\t\t\t\t\t\tif (!config.headers) {\n\t\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof config.headers[key] === \"undefined\") {\n\t\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconfig.body = contentType.body.call(self, url, config, params);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", self.table.options.ajaxContentType);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (url) {\n\n\t\t\t\t//configure headers\n\t\t\t\tif (typeof config.headers === \"undefined\") {\n\t\t\t\t\tconfig.headers = {};\n\t\t\t\t}\n\n\t\t\t\tif (typeof config.headers.Accept === \"undefined\") {\n\t\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t\t}\n\n\t\t\t\tif (typeof config.headers[\"X-Requested-With\"] === \"undefined\") {\n\t\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\tif (typeof config.mode === \"undefined\") {\n\t\t\t\t\tconfig.mode = \"cors\";\n\t\t\t\t}\n\n\t\t\t\tif (config.mode == \"cors\") {\n\n\t\t\t\t\tif (typeof config.headers[\"Access-Control-Allow-Origin\"] === \"undefined\") {\n\t\t\t\t\t\tconfig.headers[\"Access-Control-Allow-Origin\"] = window.location.origin;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof config.credentials === \"undefined\") {\n\t\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof config.credentials === \"undefined\") {\n\t\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//send request\n\t\t\t\tfetch(url, config).then(function (response) {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\tresponse.json().then(function (data) {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\t\tresolve([]);\n\t\t\t}\n\t\t});\n\t};\n\n\tAjax.prototype.contentTypeFormatters = {\n\t\t\"json\": {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: function body(url, config, params) {\n\t\t\t\treturn JSON.stringify(params);\n\t\t\t}\n\t\t},\n\t\t\"form\": {\n\t\t\theaders: {},\n\t\t\tbody: function body(url, config, params) {\n\t\t\t\tvar output = this.generateParamsList(params),\n\t\t\t\t    form = new FormData();\n\n\t\t\t\toutput.forEach(function (item) {\n\t\t\t\t\tform.append(item.key, item.value);\n\t\t\t\t});\n\n\t\t\t\treturn form;\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"ajax\", Ajax);\n\n\tvar ColumnCalcs = function ColumnCalcs(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\n\t\tthis.initialize();\n\t};\n\n\tColumnCalcs.prototype.createElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t};\n\n\tColumnCalcs.prototype.initialize = function () {\n\t\tthis.genColumn = new Column({ field: \"value\" }, this);\n\t};\n\n\t//dummy functions to handle being mock column manager\n\tColumnCalcs.prototype.registerColumnField = function () {};\n\n\t//initialize column calcs\n\tColumnCalcs.prototype.initializeColumn = function (column) {\n\t\tvar def = column.definition;\n\n\t\tvar config = {\n\t\t\ttopCalcParams: def.topCalcParams || {},\n\t\t\tbotCalcParams: def.bottomCalcParams || {}\n\t\t};\n\n\t\tif (def.topCalc) {\n\n\t\t\tswitch (_typeof(def.topCalc)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif (this.calculations[def.topCalc]) {\n\t\t\t\t\t\tconfig.topCalc = this.calculations[def.topCalc];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif (config.topCalc) {\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\n\t\t\t\tif (this.table.options.columnCalcs != \"group\") {\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (def.bottomCalc) {\n\t\t\tswitch (_typeof(def.bottomCalc)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif (this.calculations[def.bottomCalc]) {\n\t\t\t\t\t\tconfig.botCalc = this.calculations[def.bottomCalc];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif (config.botCalc) {\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\n\t\t\t\tif (this.table.options.columnCalcs != \"group\") {\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.removeCalcs = function () {\n\t\tvar changed = false;\n\n\t\tif (this.topInitialized) {\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\n\t\tif (this.botInitialized) {\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.table.footerManager.remove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.initializeTopRow = function () {\n\t\tif (!this.topInitialized) {\n\t\t\t// this.table.columnManager.headersElement.after(this.topElement);\n\t\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.initializeBottomRow = function () {\n\t\tif (!this.botInitialized) {\n\t\t\tthis.table.footerManager.prepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.scrollHorizontal = function (left) {\n\t\tvar hozAdjust = 0,\n\t\t    scrollWidth = this.table.columnManager.getElement().scrollWidth - this.table.element.clientWidth;\n\n\t\tif (this.botInitialized) {\n\t\t\tthis.botRow.getElement().style.marginLeft = -left + \"px\";\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.recalc = function (rows) {\n\t\tvar data, row;\n\n\t\tif (this.topInitialized || this.botInitialized) {\n\t\t\tdata = this.rowsToData(rows);\n\n\t\t\tif (this.topInitialized) {\n\t\t\t\tif (this.topRow) {\n\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t}\n\n\t\t\t\trow = this.generateRow(\"top\", this.rowsToData(rows));\n\t\t\t\tthis.topRow = row;\n\t\t\t\twhile (this.topElement.firstChild) {\n\t\t\t\t\tthis.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t}this.topElement.appendChild(row.getElement());\n\t\t\t\trow.initialize(true);\n\t\t\t}\n\n\t\t\tif (this.botInitialized) {\n\t\t\t\tif (this.botRow) {\n\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t}\n\n\t\t\t\trow = this.generateRow(\"bottom\", this.rowsToData(rows));\n\t\t\t\tthis.botRow = row;\n\t\t\t\twhile (this.botElement.firstChild) {\n\t\t\t\t\tthis.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t}this.botElement.appendChild(row.getElement());\n\t\t\t\trow.initialize(true);\n\t\t\t}\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\t//set resizable handles\n\t\t\tif (this.table.modExists(\"frozenColumns\")) {\n\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t}\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.recalcRowGroup = function (row) {\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t};\n\n\tColumnCalcs.prototype.recalcAll = function () {\n\t\tvar _this35 = this;\n\n\t\tif (this.topCalcs.length || this.botCalcs.length) {\n\t\t\tif (this.table.options.columnCalcs !== \"group\") {\n\t\t\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\t}\n\n\t\t\tif (this.table.options.groupBy && this.table.options.columnCalcs !== \"table\") {\n\n\t\t\t\tvar groups = table.modules.groupRows.getChildGroups();\n\n\t\t\t\tgroups.forEach(function (group) {\n\t\t\t\t\t_this35.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.recalcGroup = function (group) {\n\t\tvar data, rowData;\n\n\t\tif (group) {\n\t\t\tif (group.calcs) {\n\t\t\t\tif (group.calcs.bottom) {\n\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\n\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t}\n\n\t\t\t\tif (group.calcs.top) {\n\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\n\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//generate top stats row\n\tColumnCalcs.prototype.generateTopRow = function (rows) {\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t};\n\t//generate bottom stats row\n\tColumnCalcs.prototype.generateBottomRow = function (rows) {\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t};\n\n\tColumnCalcs.prototype.rowsToData = function (rows) {\n\t\tvar _this36 = this;\n\n\t\tvar data = [];\n\n\t\trows.forEach(function (row) {\n\t\t\tdata.push(row.getData());\n\n\t\t\tif (_this36.table.options.dataTree && _this36.table.options.dataTreeChildColumnCalcs) {\n\t\t\t\tif (row.modules.dataTree.open) {\n\t\t\t\t\tvar children = _this36.rowsToData(_this36.table.modules.dataTree.getFilteredTreeChildren(row));\n\t\t\t\t\tdata = data.concat(children);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t};\n\n\t//generate stats row\n\tColumnCalcs.prototype.generateRow = function (pos, data) {\n\t\tvar self = this,\n\t\t    rowData = this.generateRowData(pos, data),\n\t\t    row;\n\n\t\tif (self.table.modExists(\"mutator\")) {\n\t\t\tself.table.modules.mutator.disable();\n\t\t}\n\n\t\trow = new Row(rowData, this, \"calc\");\n\n\t\tif (self.table.modExists(\"mutator\")) {\n\t\t\tself.table.modules.mutator.enable();\n\t\t}\n\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\n\t\trow.generateCells = function () {\n\n\t\t\tvar cells = [];\n\n\t\t\tself.table.columnManager.columnsByIndex.forEach(function (column) {\n\n\t\t\t\t//set field name of mock column\n\t\t\t\tself.genColumn.setField(column.getField());\n\t\t\t\tself.genColumn.hozAlign = column.hozAlign;\n\n\t\t\t\tif (column.definition[pos + \"CalcFormatter\"] && self.table.modExists(\"format\")) {\n\n\t\t\t\t\tself.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: self.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"]\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tself.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: self.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams: {}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t//ensure css class defintion is replicated to calculation cell\n\t\t\t\tself.genColumn.definition.cssClass = column.definition.cssClass;\n\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(self.genColumn, row);\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\n\t\t\t\tif (!column.visible) {\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.cells = cells;\n\t\t};\n\n\t\treturn row;\n\t};\n\n\t//generate stats row\n\tColumnCalcs.prototype.generateRowData = function (pos, data) {\n\t\tvar rowData = {},\n\t\t    calcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\t    type = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\t    params,\n\t\t    paramKey;\n\n\t\tcalcs.forEach(function (column) {\n\t\t\tvar values = [];\n\n\t\t\tif (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\n\t\t\t\tdata.forEach(function (item) {\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t};\n\n\tColumnCalcs.prototype.hasTopCalcs = function () {\n\t\treturn !!this.topCalcs.length;\n\t};\n\n\tColumnCalcs.prototype.hasBottomCalcs = function () {\n\t\treturn !!this.botCalcs.length;\n\t};\n\n\t//handle table redraw\n\tColumnCalcs.prototype.redraw = function () {\n\t\tif (this.topRow) {\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif (this.botRow) {\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t};\n\n\t//return the calculated\n\tColumnCalcs.prototype.getResults = function () {\n\t\tvar self = this,\n\t\t    results = {},\n\t\t    groups;\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tresults[group.getKey()] = self.getGroupResults(group);\n\t\t\t});\n\t\t} else {\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {}\n\t\t\t};\n\t\t}\n\n\t\treturn results;\n\t};\n\n\t//get results from a group\n\tColumnCalcs.prototype.getGroupResults = function (group) {\n\t\tvar self = this,\n\t\t    groupObj = group._getSelf(),\n\t\t    subGroups = group.getSubGroups(),\n\t\t    subGroupResults = {},\n\t\t    results = {};\n\n\t\tsubGroups.forEach(function (subgroup) {\n\t\t\tsubGroupResults[subgroup.getKey()] = self.getGroupResults(subgroup);\n\t\t});\n\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults\n\t\t};\n\n\t\treturn results;\n\t};\n\n\t//default calculations\n\tColumnCalcs.prototype.calculations = {\n\t\t\"avg\": function avg(values, data, calcParams) {\n\t\t\tvar output = 0,\n\t\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\t\tif (values.length) {\n\t\t\t\toutput = values.reduce(function (sum, value) {\n\t\t\t\t\tvalue = Number(value);\n\t\t\t\t\treturn sum + value;\n\t\t\t\t});\n\n\t\t\t\toutput = output / values.length;\n\n\t\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t\t}\n\n\t\t\treturn parseFloat(output).toString();\n\t\t},\n\t\t\"max\": function max(values, data, calcParams) {\n\t\t\tvar output = null,\n\t\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\t\tvalues.forEach(function (value) {\n\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\tif (value > output || output === null) {\n\t\t\t\t\toutput = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n\t\t},\n\t\t\"min\": function min(values, data, calcParams) {\n\t\t\tvar output = null,\n\t\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\t\tvalues.forEach(function (value) {\n\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\tif (value < output || output === null) {\n\t\t\t\t\toutput = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n\t\t},\n\t\t\"sum\": function sum(values, data, calcParams) {\n\t\t\tvar output = 0,\n\t\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\t\tif (values.length) {\n\t\t\t\tvalues.forEach(function (value) {\n\t\t\t\t\tvalue = Number(value);\n\n\t\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t\t},\n\t\t\"concat\": function concat(values, data, calcParams) {\n\t\t\tvar output = 0;\n\n\t\t\tif (values.length) {\n\t\t\t\toutput = values.reduce(function (sum, value) {\n\t\t\t\t\treturn String(sum) + String(value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn output;\n\t\t},\n\t\t\"count\": function count(values, data, calcParams) {\n\t\t\tvar output = 0;\n\n\t\t\tif (values.length) {\n\t\t\t\tvalues.forEach(function (value) {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\toutput++;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn output;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"columnCalcs\", ColumnCalcs);\n\n\tvar Clipboard = function Clipboard(table) {\n\t\tthis.table = table;\n\t\tthis.mode = true;\n\n\t\tthis.pasteParser = function () {};\n\t\tthis.pasteAction = function () {};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\t};\n\n\tClipboard.prototype.initialize = function () {\n\t\tvar _this37 = this;\n\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\t\t\tthis.table.element.addEventListener(\"copy\", function (e) {\n\t\t\t\tvar plain, html;\n\n\t\t\t\tif (!_this37.blocked) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif (_this37.customSelection) {\n\t\t\t\t\t\tplain = _this37.customSelection;\n\n\t\t\t\t\t\tif (_this37.table.options.clipboardCopyFormatter) {\n\t\t\t\t\t\t\tplain = _this37.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\thtml = _this37.table.modules.export.getHtml(_this37.rowRange, _this37.table.options.clipboardCopyStyled, _this37.table.options.clipboardCopyConfig, \"clipboard\");\n\t\t\t\t\t\tplain = html ? _this37.generatePlainContent(html) : \"\";\n\n\t\t\t\t\t\tif (_this37.table.options.clipboardCopyFormatter) {\n\t\t\t\t\t\t\tplain = _this37.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = _this37.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif (html) {\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif (html) {\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t_this37.table.options.clipboardCopied.call(_this37.table, plain, html);\n\n\t\t\t\t\t_this37.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.mode === true || this.mode === \"paste\") {\n\t\t\tthis.table.element.addEventListener(\"paste\", function (e) {\n\t\t\t\t_this37.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\t};\n\n\tClipboard.prototype.reset = function () {\n\t\tthis.blocked = false;\n\t\tthis.originalSelectionText = \"\";\n\t};\n\n\tClipboard.prototype.generatePlainContent = function (html) {\n\t\tvar output = [];\n\n\t\tvar holder = document.createElement(\"div\");\n\t\tholder.innerHTML = html;\n\n\t\tvar table = holder.getElementsByTagName(\"table\")[0];\n\t\tvar rows = Array.prototype.slice.call(table.getElementsByTagName(\"tr\"));\n\n\t\trows.forEach(function (row) {\n\t\t\tvar rowData = [];\n\n\t\t\tvar headers = Array.prototype.slice.call(row.getElementsByTagName(\"th\"));\n\t\t\tvar cells = Array.prototype.slice.call(row.getElementsByTagName(\"td\"));\n\n\t\t\tcells = cells.concat(headers);\n\n\t\t\tcells.forEach(function (cell) {\n\t\t\t\tvar val = cell.innerHTML;\n\n\t\t\t\tval = val == \"&nbsp;\" ? \"\" : val;\n\n\t\t\t\trowData.push(val);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t};\n\n\tClipboard.prototype.copy = function (range, internal) {\n\t\tvar range, sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t};\n\n\t//PASTE EVENT HANDLING\n\n\tClipboard.prototype.setPasteAction = function (action) {\n\n\t\tswitch (typeof action === 'undefined' ? 'undefined' : _typeof(action)) {\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = this.pasteActions[action];\n\n\t\t\t\tif (!this.pasteAction) {\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tClipboard.prototype.setPasteParser = function (parser) {\n\t\tswitch (typeof parser === 'undefined' ? 'undefined' : _typeof(parser)) {\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = this.pasteParsers[parser];\n\n\t\t\t\tif (!this.pasteParser) {\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tClipboard.prototype.paste = function (e) {\n\t\tvar data, rowData, rows;\n\n\t\tif (this.checkPaseOrigin(e)) {\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif (rowData) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (this.table.modExists(\"mutator\")) {\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\t\t\t\tthis.table.options.clipboardPasted.call(this.table, data, rowData, rows);\n\t\t\t} else {\n\t\t\t\tthis.table.options.clipboardPasteError.call(this.table, data);\n\t\t\t}\n\t\t}\n\t};\n\n\tClipboard.prototype.mutateData = function (data) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tif (Array.isArray(data)) {\n\t\t\tdata.forEach(function (row) {\n\t\t\t\toutput.push(self.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t} else {\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tClipboard.prototype.checkPaseOrigin = function (e) {\n\t\tvar valid = true;\n\n\t\tif (e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell) {\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t};\n\n\tClipboard.prototype.getPasteData = function (e) {\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tClipboard.prototype.pasteParsers = {\n\t\ttable: function table(clipboard) {\n\t\t\tvar data = [],\n\t\t\t    success = false,\n\t\t\t    headerFindSuccess = true,\n\t\t\t    columns = this.table.columnManager.columns,\n\t\t\t    columnMap = [],\n\t\t\t    rows = [];\n\n\t\t\t//get data from clipboard into array of columns and rows.\n\t\t\tclipboard = clipboard.split(\"\\n\");\n\n\t\t\tclipboard.forEach(function (row) {\n\t\t\t\tdata.push(row.split(\"\\t\"));\n\t\t\t});\n\n\t\t\tif (data.length && !(data.length === 1 && data[0].length < 2)) {\n\t\t\t\tsuccess = true;\n\n\t\t\t\t//check if headers are present by title\n\t\t\t\tdata[0].forEach(function (value) {\n\t\t\t\t\tvar column = columns.find(function (column) {\n\t\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t\t});\n\n\t\t\t\t\tif (column) {\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t} else {\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//check if column headers are present by field\n\t\t\t\tif (!headerFindSuccess) {\n\t\t\t\t\theaderFindSuccess = true;\n\t\t\t\t\tcolumnMap = [];\n\n\t\t\t\t\tdata[0].forEach(function (value) {\n\t\t\t\t\t\tvar column = columns.find(function (column) {\n\t\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (column) {\n\t\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!headerFindSuccess) {\n\t\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//remove header row if found\n\t\t\t\tif (headerFindSuccess) {\n\t\t\t\t\tdata.shift();\n\t\t\t\t}\n\n\t\t\t\tdata.forEach(function (item) {\n\t\t\t\t\tvar row = {};\n\n\t\t\t\t\titem.forEach(function (value, i) {\n\t\t\t\t\t\tif (columnMap[i]) {\n\t\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\n\t\t\t\treturn rows;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tClipboard.prototype.pasteActions = {\n\t\treplace: function replace(rows) {\n\t\t\treturn this.table.setData(rows);\n\t\t},\n\t\tupdate: function update(rows) {\n\t\t\treturn this.table.updateOrAddData(rows);\n\t\t},\n\t\tinsert: function insert(rows) {\n\t\t\treturn this.table.addData(rows);\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"clipboard\", Clipboard);\n\n\tvar DataTree = function DataTree(table) {\n\t\tthis.table = table;\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function () {};\n\n\t\tthis.displayIndex = 0;\n\t};\n\n\tDataTree.prototype.initialize = function () {\n\t\tvar dummyEl = null,\n\t\t    firstCol = this.table.columnManager.getFirstVisibileColumn(),\n\t\t    options = this.table.options;\n\n\t\tthis.field = options.dataTreeChildField;\n\t\tthis.indent = options.dataTreeChildIndent;\n\t\tthis.elementField = options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\n\t\tif (options.dataTreeBranchElement) {\n\n\t\t\tif (options.dataTreeBranchElement === true) {\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t} else {\n\t\t\t\tif (typeof options.dataTreeBranchElement === \"string\") {\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t} else {\n\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (options.dataTreeCollapseElement) {\n\t\t\tif (typeof options.dataTreeCollapseElement === \"string\") {\n\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t}\n\n\t\tif (options.dataTreeExpandElement) {\n\t\t\tif (typeof options.dataTreeExpandElement === \"string\") {\n\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t}\n\n\t\tswitch (_typeof(options.dataTreeStartExpanded)) {\n\t\t\tcase \"boolean\":\n\t\t\t\tthis.startOpen = function (row, index) {\n\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthis.startOpen = function (row, index) {\n\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tDataTree.prototype.initializeRow = function (row) {\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || !isArray && (typeof childArray === 'undefined' ? 'undefined' : _typeof(childArray)) === \"object\" && childArray !== null;\n\n\t\tif (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren: children\n\t\t};\n\t};\n\n\tDataTree.prototype.layoutRow = function (row) {\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\t    el = cell.getElement(),\n\t\t    config = row.modules.dataTree;\n\n\t\tif (config.branchEl) {\n\t\t\tif (config.branchEl.parentNode) {\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif (config.controlEl) {\n\t\t\tif (config.controlEl.parentNode) {\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.element.classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif (config.index) {\n\t\t\tif (this.branchEl) {\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\t\t\t\tconfig.branchEl.style.marginLeft = (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) + config.index * this.indent + \"px\";\n\t\t\t} else {\n\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + config.index * this.indent + \"px\";\n\t\t\t}\n\t\t}\n\t};\n\n\tDataTree.prototype.generateControlElement = function (row, el) {\n\t\tvar _this38 = this;\n\n\t\tvar config = row.modules.dataTree,\n\t\t    el = el || row.getCells()[0].getElement(),\n\t\t    oldControl = config.controlEl;\n\n\t\tif (config.children !== false) {\n\n\t\t\tif (config.open) {\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t_this38.collapseRow(row);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t_this38.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif (oldControl && oldControl.parentNode === el) {\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl, oldControl);\n\t\t\t} else {\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t};\n\n\tDataTree.prototype.setDisplayIndex = function (index) {\n\t\tthis.displayIndex = index;\n\t};\n\n\tDataTree.prototype.getDisplayIndex = function () {\n\t\treturn this.displayIndex;\n\t};\n\n\tDataTree.prototype.getRows = function (rows) {\n\t\tvar _this39 = this;\n\n\t\tvar output = [];\n\n\t\trows.forEach(function (row, i) {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif (row instanceof Row) {\n\n\t\t\t\tconfig = row.modules.dataTree.children;\n\n\t\t\t\tif (!config.index && config.children !== false) {\n\t\t\t\t\tchildren = _this39.getChildren(row);\n\n\t\t\t\t\tchildren.forEach(function (child) {\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tDataTree.prototype.getChildren = function (row) {\n\t\tvar _this40 = this;\n\n\t\tvar config = row.modules.dataTree,\n\t\t    children = [],\n\t\t    output = [];\n\n\t\tif (config.children !== false && config.open) {\n\t\t\tif (!Array.isArray(config.children)) {\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif (this.table.modExists(\"filter\")) {\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t} else {\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif (this.table.modExists(\"sort\")) {\n\t\t\t\tthis.table.modules.sort.sort(children);\n\t\t\t}\n\n\t\t\tchildren.forEach(function (child) {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = _this40.getChildren(child);\n\n\t\t\t\tsubChildren.forEach(function (sub) {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tDataTree.prototype.generateChildren = function (row) {\n\t\tvar _this41 = this;\n\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif (!Array.isArray(childArray)) {\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach(function (childData) {\n\t\t\tvar childRow = new Row(childData || {}, _this41.table.rowManager);\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\t\t\tif (childRow.modules.dataTree.children) {\n\t\t\t\tchildRow.modules.dataTree.open = _this41.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t};\n\n\tDataTree.prototype.expandRow = function (row, silent) {\n\t\tvar config = row.modules.dataTree;\n\n\t\tif (config.children !== false) {\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\n\t\t\tthis.table.options.dataTreeRowExpanded(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t};\n\n\tDataTree.prototype.collapseRow = function (row) {\n\t\tvar config = row.modules.dataTree;\n\n\t\tif (config.children !== false) {\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\n\t\t\tthis.table.options.dataTreeRowCollapsed(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t};\n\n\tDataTree.prototype.toggleRow = function (row) {\n\t\tvar config = row.modules.dataTree;\n\n\t\tif (config.children !== false) {\n\t\t\tif (config.open) {\n\t\t\t\tthis.collapseRow(row);\n\t\t\t} else {\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t};\n\n\tDataTree.prototype.getTreeParent = function (row) {\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t};\n\n\tDataTree.prototype.getFilteredTreeChildren = function (row) {\n\t\tvar config = row.modules.dataTree,\n\t\t    output = [],\n\t\t    children;\n\n\t\tif (config.children) {\n\n\t\t\tif (!Array.isArray(config.children)) {\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif (this.table.modExists(\"filter\")) {\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t} else {\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach(function (childRow) {\n\t\t\t\tif (childRow instanceof Row) {\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tDataTree.prototype.getTreeChildren = function (row) {\n\t\tvar config = row.modules.dataTree,\n\t\t    output = [];\n\n\t\tif (config.children) {\n\n\t\t\tif (!Array.isArray(config.children)) {\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach(function (childRow) {\n\t\t\t\tif (childRow instanceof Row) {\n\t\t\t\t\toutput.push(childRow.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tDataTree.prototype.checkForRestyle = function (cell) {\n\t\tif (!cell.row.cells.indexOf(cell)) {\n\t\t\tcell.row.reinitialize();\n\t\t}\n\t};\n\n\tDataTree.prototype.getChildField = function () {\n\t\treturn this.field;\n\t};\n\n\tDataTree.prototype.redrawNeeded = function (data) {\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t};\n\n\tTabulator.prototype.registerModule(\"dataTree\", DataTree);\n\n\tvar Download = function Download(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.fields = {}; //hold filed multi dimension arrays\n\t\tthis.columnsByIndex = []; //hold columns in their order in the table\n\t\tthis.columnsByField = {}; //hold columns with lookup by field name\n\t\tthis.config = {};\n\t\tthis.active = false;\n\t};\n\n\t//trigger file download\n\tDownload.prototype.download = function (type, filename, options, active, interceptCallback) {\n\t\tvar self = this,\n\t\t    downloadFunc = false;\n\t\tthis.processConfig();\n\t\tthis.active = active;\n\n\t\tfunction buildLink(data, mime) {\n\t\t\tif (interceptCallback) {\n\t\t\t\tif (interceptCallback === true) {\n\t\t\t\t\tself.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t} else {\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof type == \"function\") {\n\t\t\tdownloadFunc = type;\n\t\t} else {\n\t\t\tif (self.downloaders[type]) {\n\t\t\t\tdownloadFunc = self.downloaders[type];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tthis.processColumns();\n\n\t\tif (downloadFunc) {\n\t\t\tdownloadFunc.call(this, self.processDefinitions(), self.processData(active || \"active\"), options || {}, buildLink, this.config);\n\t\t}\n\t};\n\n\tDownload.prototype.processConfig = function () {\n\t\tvar config = { //download config\n\t\t\tcolumnGroups: true,\n\t\t\trowGroups: true,\n\t\t\tcolumnCalcs: true,\n\t\t\tdataTree: true\n\t\t};\n\n\t\tif (this.table.options.downloadConfig) {\n\t\t\tfor (var key in this.table.options.downloadConfig) {\n\t\t\t\tconfig[key] = this.table.options.downloadConfig[key];\n\t\t\t}\n\t\t}\n\n\t\tthis.config.rowGroups = config.rowGroups && this.table.options.groupBy && this.table.modExists(\"groupRows\");\n\n\t\tif (config.columnGroups && this.table.columnManager.columns.length != this.table.columnManager.columnsByIndex.length) {\n\t\t\tthis.config.columnGroups = true;\n\t\t}\n\n\t\tif (config.columnCalcs && this.table.modExists(\"columnCalcs\")) {\n\t\t\tthis.config.columnCalcs = true;\n\t\t}\n\n\t\tif (config.dataTree && this.table.options.dataTree && this.table.modExists(\"dataTree\")) {\n\t\t\tthis.config.dataTree = true;\n\t\t}\n\t};\n\n\tDownload.prototype.processColumns = function () {\n\t\tvar self = this;\n\n\t\tself.columnsByIndex = [];\n\t\tself.columnsByField = {};\n\n\t\tself.table.columnManager.columnsByIndex.forEach(function (column) {\n\n\t\t\tif (column.field && column.definition.download !== false && (column.visible || !column.visible && column.definition.download)) {\n\t\t\t\tself.columnsByIndex.push(column);\n\t\t\t\tself.columnsByField[column.field] = column;\n\t\t\t}\n\t\t});\n\t};\n\n\tDownload.prototype.processDefinitions = function () {\n\t\tvar self = this,\n\t\t    processedDefinitions = [];\n\n\t\tif (this.config.columnGroups) {\n\t\t\tself.table.columnManager.columns.forEach(function (column) {\n\t\t\t\tvar colData = self.processColumnGroup(column);\n\n\t\t\t\tif (colData) {\n\t\t\t\t\tprocessedDefinitions.push(colData);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tself.columnsByIndex.forEach(function (column) {\n\t\t\t\tif (column.download !== false) {\n\t\t\t\t\t//isolate definiton from defintion object\n\t\t\t\t\tprocessedDefinitions.push(self.processDefinition(column));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn processedDefinitions;\n\t};\n\n\tDownload.prototype.processColumnGroup = function (column) {\n\t\tvar _this42 = this;\n\n\t\tvar subGroups = column.columns,\n\t\t    maxDepth = 0;\n\t\tvar processedColumn = this.processDefinition(column);\n\t\tvar groupData = {\n\t\t\ttype: \"group\",\n\t\t\ttitle: processedColumn.title,\n\t\t\tdepth: 1\n\t\t};\n\n\t\tif (subGroups.length) {\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\n\t\t\tsubGroups.forEach(function (subGroup) {\n\t\t\t\tvar subGroupData = _this42.processColumnGroup(subGroup);\n\n\t\t\t\tif (subGroupData.depth > maxDepth) {\n\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t}\n\n\t\t\t\tif (subGroupData) {\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tgroupData.depth += maxDepth;\n\n\t\t\tif (!groupData.width) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (column.field && column.definition.download !== false && (column.visible || !column.visible && column.definition.download)) {\n\t\t\t\tgroupData.width = 1;\n\t\t\t\tgroupData.definition = processedColumn;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn groupData;\n\t};\n\n\tDownload.prototype.processDefinition = function (column) {\n\t\tvar def = {};\n\n\t\tfor (var key in column.definition) {\n\t\t\tdef[key] = column.definition[key];\n\t\t}\n\n\t\tif (typeof column.definition.downloadTitle != \"undefined\") {\n\t\t\tdef.title = column.definition.downloadTitle;\n\t\t}\n\n\t\treturn def;\n\t};\n\n\tDownload.prototype.processData = function (active) {\n\t\tvar _this43 = this;\n\n\t\tvar self = this,\n\t\t    data = [],\n\t\t    groups = [],\n\t\t    rows = false,\n\t\t    calcs = {};\n\n\t\tif (this.config.rowGroups) {\n\n\t\t\tif (active == \"visible\") {\n\n\t\t\t\trows = self.table.rowManager.getRows(active);\n\n\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\tif (row.type == \"row\") {\n\t\t\t\t\t\tvar group = row.getGroup();\n\n\t\t\t\t\t\tif (groups.indexOf(group) === -1) {\n\t\t\t\t\t\t\tgroups.push(group);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgroups = this.table.modules.groupRows.getGroups();\n\t\t\t}\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tdata.push(_this43.processGroupData(group, rows));\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.config.dataTree) {\n\t\t\t\tactive = active = \"active\" ? \"display\" : active;\n\t\t\t}\n\t\t\tdata = self.table.rowManager.getData(active, \"download\");\n\t\t}\n\n\t\tif (this.config.columnCalcs) {\n\t\t\tcalcs = this.table.getCalcResults();\n\n\t\t\tdata = {\n\t\t\t\tcalcs: calcs,\n\t\t\t\tdata: data\n\t\t\t};\n\t\t}\n\n\t\t//bulk data processing\n\t\tif (typeof self.table.options.downloadDataFormatter == \"function\") {\n\t\t\tdata = self.table.options.downloadDataFormatter(data);\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tDownload.prototype.processGroupData = function (group, visRows) {\n\t\tvar _this44 = this;\n\n\t\tvar subGroups = group.getSubGroups();\n\n\t\tvar groupData = {\n\t\t\ttype: \"group\",\n\t\t\tkey: group.key\n\t\t};\n\n\t\tif (subGroups.length) {\n\t\t\tgroupData.subGroups = [];\n\n\t\t\tsubGroups.forEach(function (subGroup) {\n\t\t\t\tgroupData.subGroups.push(_this44.processGroupData(subGroup, visRows));\n\t\t\t});\n\t\t} else {\n\t\t\tif (visRows) {\n\t\t\t\tgroupData.rows = [];\n\n\t\t\t\tgroup.rows.forEach(function (row) {\n\t\t\t\t\tif (visRows.indexOf(row) > -1) {\n\t\t\t\t\t\tgroupData.rows.push(row.getData(\"download\"));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgroupData.rows = group.getData(true, \"download\");\n\t\t\t}\n\t\t}\n\n\t\treturn groupData;\n\t};\n\n\tDownload.prototype.triggerDownload = function (data, mime, type, filename, newTab) {\n\t\tvar element = document.createElement('a'),\n\t\t    blob = new Blob([data], { type: mime }),\n\t\t    filename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\n\t\tblob = this.table.options.downloadReady.call(this.table, data, blob);\n\n\t\tif (blob) {\n\n\t\t\tif (newTab) {\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t} else {\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t} else {\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.table.options.downloadComplete) {\n\t\t\t\tthis.table.options.downloadComplete();\n\t\t\t}\n\t\t}\n\t};\n\n\t//nested field lookup\n\tDownload.prototype.getFieldValue = function (field, data) {\n\t\tvar column = this.columnsByField[field];\n\n\t\tif (column) {\n\t\t\treturn column.getFieldValue(data);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tDownload.prototype.commsReceived = function (table, action, data) {\n\t\tswitch (action) {\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t//downloaders\n\tDownload.prototype.downloaders = {\n\t\tcsv: function csv(columns, data, options, setFileContents, config) {\n\t\t\tvar self = this,\n\t\t\t    titles = [],\n\t\t\t    fields = [],\n\t\t\t    delimiter = options && options.delimiter ? options.delimiter : \",\",\n\t\t\t    fileContents,\n\t\t\t    output;\n\n\t\t\t//build column headers\n\t\t\tfunction parseSimpleTitles() {\n\t\t\t\tcolumns.forEach(function (column) {\n\t\t\t\t\ttitles.push('\"' + String(column.title).split('\"').join('\"\"') + '\"');\n\t\t\t\t\tfields.push(column.field);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction parseColumnGroup(column, level) {\n\t\t\t\tif (column.subGroups) {\n\t\t\t\t\tcolumn.subGroups.forEach(function (subGroup) {\n\t\t\t\t\t\tparseColumnGroup(subGroup, level + 1);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttitles.push('\"' + String(column.title).split('\"').join('\"\"') + '\"');\n\t\t\t\t\tfields.push(column.definition.field);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.columnGroups) {\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column groups\");\n\n\t\t\t\tcolumns.forEach(function (column) {\n\t\t\t\t\tparseColumnGroup(column, 0);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tparseSimpleTitles();\n\t\t\t}\n\n\t\t\t//generate header row\n\t\t\tfileContents = [titles.join(delimiter)];\n\n\t\t\tfunction parseRows(data) {\n\t\t\t\t//generate each row of the table\n\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\tvar rowData = [];\n\n\t\t\t\t\tfields.forEach(function (field) {\n\t\t\t\t\t\tvar value = self.getFieldValue(field, row);\n\n\t\t\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//escape quotation marks\n\t\t\t\t\t\trowData.push('\"' + String(value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t});\n\n\t\t\t\t\tfileContents.push(rowData.join(delimiter));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction parseGroup(group) {\n\t\t\t\tif (group.subGroups) {\n\t\t\t\t\tgroup.subGroups.forEach(function (subGroup) {\n\t\t\t\t\t\tparseGroup(subGroup);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tparseRows(group.rows);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.columnCalcs) {\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tdata = data.data;\n\t\t\t}\n\n\t\t\tif (config.rowGroups) {\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\n\t\t\t\tdata.forEach(function (group) {\n\t\t\t\t\tparseGroup(group);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tparseRows(data);\n\t\t\t}\n\n\t\t\toutput = fileContents.join(\"\\n\");\n\n\t\t\tif (options.bom) {\n\t\t\t\toutput = '\\uFEFF' + output;\n\t\t\t}\n\n\t\t\tsetFileContents(output, \"text/csv\");\n\t\t},\n\n\t\tjson: function json(columns, data, options, setFileContents, config) {\n\t\t\tvar fileContents;\n\n\t\t\tif (config.columnCalcs) {\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tdata = data.data;\n\t\t\t}\n\n\t\t\tfileContents = JSON.stringify(data, null, '\\t');\n\n\t\t\tsetFileContents(fileContents, \"application/json\");\n\t\t},\n\n\t\tpdf: function pdf(columns, data, options, setFileContents, config) {\n\t\t\tvar self = this,\n\t\t\t    fields = [],\n\t\t\t    header = [],\n\t\t\t    body = [],\n\t\t\t    calcs = {},\n\t\t\t    headerDepth = 1,\n\t\t\t    table = \"\",\n\t\t\t    autoTableParams = {},\n\t\t\t    rowGroupStyles = options.rowGroupStyles || {\n\t\t\t\tfontStyle: \"bold\",\n\t\t\t\tfontSize: 12,\n\t\t\t\tcellPadding: 6,\n\t\t\t\tfillColor: 220\n\t\t\t},\n\t\t\t    rowCalcStyles = options.rowCalcStyles || {\n\t\t\t\tfontStyle: \"bold\",\n\t\t\t\tfontSize: 10,\n\t\t\t\tcellPadding: 4,\n\t\t\t\tfillColor: 232\n\t\t\t},\n\t\t\t    jsPDFParams = options.jsPDF || {},\n\t\t\t    title = options && options.title ? options.title : \"\";\n\n\t\t\tif (config.columnCalcs) {\n\t\t\t\tcalcs = data.calcs;\n\t\t\t\tdata = data.data;\n\t\t\t}\n\n\t\t\tif (!jsPDFParams.orientation) {\n\t\t\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t\t\t}\n\n\t\t\tif (!jsPDFParams.unit) {\n\t\t\t\tjsPDFParams.unit = \"pt\";\n\t\t\t}\n\n\t\t\t//build column headers\n\t\t\tfunction parseSimpleTitles() {\n\t\t\t\tcolumns.forEach(function (column) {\n\t\t\t\t\tif (column.field) {\n\t\t\t\t\t\theader.push(column.title || \"\");\n\t\t\t\t\t\tfields.push(column.field);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\theader = [header];\n\t\t\t}\n\n\t\t\tfunction parseColumnGroup(column, level) {\n\t\t\t\tvar colSpan = column.width,\n\t\t\t\t    rowSpan = 1,\n\t\t\t\t    col = {\n\t\t\t\t\tcontent: column.title || \"\"\n\t\t\t\t};\n\n\t\t\t\tif (column.subGroups) {\n\t\t\t\t\tcolumn.subGroups.forEach(function (subGroup) {\n\t\t\t\t\t\tparseColumnGroup(subGroup, level + 1);\n\t\t\t\t\t});\n\t\t\t\t\trowSpan = 1;\n\t\t\t\t} else {\n\t\t\t\t\tfields.push(column.definition.field);\n\t\t\t\t\trowSpan = headerDepth - level;\n\t\t\t\t}\n\n\t\t\t\tcol.rowSpan = rowSpan;\n\t\t\t\t// col.colSpan = colSpan;\n\n\t\t\t\theader[level].push(col);\n\n\t\t\t\tcolSpan--;\n\n\t\t\t\tif (rowSpan > 1) {\n\t\t\t\t\tfor (var i = level + 1; i < headerDepth; i++) {\n\t\t\t\t\t\theader[i].push(\"\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < colSpan; i++) {\n\t\t\t\t\theader[level].push(\"\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.columnGroups) {\n\t\t\t\tcolumns.forEach(function (column) {\n\t\t\t\t\tif (column.depth > headerDepth) {\n\t\t\t\t\t\theaderDepth = column.depth;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfor (var i = 0; i < headerDepth; i++) {\n\t\t\t\t\theader.push([]);\n\t\t\t\t}\n\n\t\t\t\tcolumns.forEach(function (column) {\n\t\t\t\t\tparseColumnGroup(column, 0);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tparseSimpleTitles();\n\t\t\t}\n\n\t\t\tfunction parseValue(value) {\n\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tvalue = JSON.stringify(value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = value;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tfunction parseRows(data) {\n\t\t\t\t//build table rows\n\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\tbody.push(parseRow(row));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction parseRow(row, styles) {\n\t\t\t\tvar rowData = [];\n\n\t\t\t\tfields.forEach(function (field) {\n\t\t\t\t\tvar value = self.getFieldValue(field, row);\n\t\t\t\t\tvalue = parseValue(value);\n\n\t\t\t\t\tif (styles) {\n\t\t\t\t\t\trowData.push({\n\t\t\t\t\t\t\tcontent: value,\n\t\t\t\t\t\t\tstyles: styles\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowData.push(value);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn rowData;\n\t\t\t}\n\n\t\t\tfunction parseGroup(group, calcObj) {\n\t\t\t\tvar groupData = [];\n\n\t\t\t\tgroupData.push({ content: parseValue(group.key), colSpan: fields.length, styles: rowGroupStyles });\n\n\t\t\t\tbody.push(groupData);\n\n\t\t\t\tif (group.subGroups) {\n\t\t\t\t\tgroup.subGroups.forEach(function (subGroup) {\n\t\t\t\t\t\tparseGroup(subGroup, calcObj[group.key] ? calcObj[group.key].groups || {} : {});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\tif (config.columnCalcs) {\n\t\t\t\t\t\taddCalcRow(calcObj, group.key, \"top\");\n\t\t\t\t\t}\n\n\t\t\t\t\tparseRows(group.rows);\n\n\t\t\t\t\tif (config.columnCalcs) {\n\t\t\t\t\t\taddCalcRow(calcObj, group.key, \"bottom\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction addCalcRow(calcs, selector, pos) {\n\t\t\t\tvar calcData = calcs[selector];\n\n\t\t\t\tif (calcData) {\n\t\t\t\t\tif (pos) {\n\t\t\t\t\t\tcalcData = calcData[pos];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Object.keys(calcData).length) {\n\t\t\t\t\t\tbody.push(parseRow(calcData, rowCalcStyles));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.rowGroups) {\n\t\t\t\tdata.forEach(function (group) {\n\t\t\t\t\tparseGroup(group, calcs);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (config.columnCalcs) {\n\t\t\t\t\taddCalcRow(calcs, \"top\");\n\t\t\t\t}\n\n\t\t\t\tparseRows(data);\n\n\t\t\t\tif (config.columnCalcs) {\n\t\t\t\t\taddCalcRow(calcs, \"bottom\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar doc = new jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\t\t\tif (options && options.autoTable) {\n\t\t\t\tif (typeof options.autoTable === \"function\") {\n\t\t\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t\t\t} else {\n\t\t\t\t\tautoTableParams = options.autoTable;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (title) {\n\t\t\t\tautoTableParams.addPageContent = function (data) {\n\t\t\t\t\tdoc.text(title, 40, 30);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tautoTableParams.head = header;\n\t\t\tautoTableParams.body = body;\n\n\t\t\tdoc.autoTable(autoTableParams);\n\n\t\t\tif (options && options.documentProcessing) {\n\t\t\t\toptions.documentProcessing(doc);\n\t\t\t}\n\n\t\t\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n\t\t},\n\n\t\txlsx: function xlsx(columns, data, options, setFileContents, config) {\n\t\t\tvar self = this,\n\t\t\t    sheetName = options.sheetName || \"Sheet1\",\n\t\t\t    workbook = XLSX.utils.book_new(),\n\t\t\t    calcs = {},\n\t\t\t    groupRowIndexs = [],\n\t\t\t    groupColumnIndexs = [],\n\t\t\t    calcRowIndexs = [],\n\t\t\t    output;\n\n\t\t\tworkbook.SheetNames = [];\n\t\t\tworkbook.Sheets = {};\n\n\t\t\tif (config.columnCalcs) {\n\t\t\t\tcalcs = data.calcs;\n\t\t\t\tdata = data.data;\n\t\t\t}\n\n\t\t\tfunction generateSheet() {\n\t\t\t\tvar titles = [],\n\t\t\t\t    fields = [],\n\t\t\t\t    rows = [],\n\t\t\t\t    worksheet;\n\n\t\t\t\t//convert rows to worksheet\n\t\t\t\tfunction rowsToSheet() {\n\t\t\t\t\tvar sheet = {};\n\t\t\t\t\tvar range = { s: { c: 0, r: 0 }, e: { c: fields.length, r: rows.length } };\n\n\t\t\t\t\tXLSX.utils.sheet_add_aoa(sheet, rows);\n\n\t\t\t\t\tsheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\t\t\t\tvar merges = generateMerges();\n\n\t\t\t\t\tif (merges.length) {\n\t\t\t\t\t\tsheet[\"!merges\"] = merges;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn sheet;\n\t\t\t\t}\n\n\t\t\t\tfunction parseSimpleTitles() {\n\t\t\t\t\t//get field lists\n\t\t\t\t\tcolumns.forEach(function (column) {\n\t\t\t\t\t\ttitles.push(column.title);\n\t\t\t\t\t\tfields.push(column.field);\n\t\t\t\t\t});\n\n\t\t\t\t\trows.push(titles);\n\t\t\t\t}\n\n\t\t\t\tfunction parseColumnGroup(column, level) {\n\n\t\t\t\t\tif (typeof titles[level] === \"undefined\") {\n\t\t\t\t\t\ttitles[level] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof groupColumnIndexs[level] === \"undefined\") {\n\t\t\t\t\t\tgroupColumnIndexs[level] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (column.width > 1) {\n\n\t\t\t\t\t\tgroupColumnIndexs[level].push({\n\t\t\t\t\t\t\ttype: \"hoz\",\n\t\t\t\t\t\t\tstart: titles[level].length,\n\t\t\t\t\t\t\tend: titles[level].length + column.width - 1\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttitles[level].push(column.title);\n\n\t\t\t\t\tif (column.subGroups) {\n\t\t\t\t\t\tcolumn.subGroups.forEach(function (subGroup) {\n\t\t\t\t\t\t\tparseColumnGroup(subGroup, level + 1);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfields.push(column.definition.field);\n\t\t\t\t\t\tpadColumnTitles(fields.length - 1, level);\n\n\t\t\t\t\t\tgroupColumnIndexs[level].push({\n\t\t\t\t\t\t\ttype: \"vert\",\n\t\t\t\t\t\t\tstart: fields.length - 1\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction padColumnTitles() {\n\t\t\t\t\tvar max = 0;\n\n\t\t\t\t\ttitles.forEach(function (title) {\n\t\t\t\t\t\tvar len = title.length;\n\t\t\t\t\t\tif (len > max) {\n\t\t\t\t\t\t\tmax = len;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\ttitles.forEach(function (title) {\n\t\t\t\t\t\tvar len = title.length;\n\t\t\t\t\t\tif (len < max) {\n\t\t\t\t\t\t\tfor (var i = len; i < max; i++) {\n\t\t\t\t\t\t\t\ttitle.push(\"\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (config.columnGroups) {\n\t\t\t\t\tcolumns.forEach(function (column) {\n\t\t\t\t\t\tparseColumnGroup(column, 0);\n\t\t\t\t\t});\n\n\t\t\t\t\ttitles.forEach(function (title) {\n\t\t\t\t\t\trows.push(title);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tparseSimpleTitles();\n\t\t\t\t}\n\n\t\t\t\tfunction generateMerges() {\n\t\t\t\t\tvar output = [];\n\n\t\t\t\t\tgroupRowIndexs.forEach(function (index) {\n\t\t\t\t\t\toutput.push({ s: { r: index, c: 0 }, e: { r: index, c: fields.length - 1 } });\n\t\t\t\t\t});\n\n\t\t\t\t\tgroupColumnIndexs.forEach(function (merges, level) {\n\t\t\t\t\t\tmerges.forEach(function (merge) {\n\t\t\t\t\t\t\tif (merge.type === \"hoz\") {\n\t\t\t\t\t\t\t\toutput.push({ s: { r: level, c: merge.start }, e: { r: level, c: merge.end } });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (level != titles.length - 1) {\n\t\t\t\t\t\t\t\t\toutput.push({ s: { r: level, c: merge.start }, e: { r: titles.length - 1, c: merge.start } });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\treturn output;\n\t\t\t\t}\n\n\t\t\t\t//generate each row of the table\n\t\t\t\tfunction parseRows(data) {\n\t\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\t\trows.push(parseRow(row));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction parseRow(row) {\n\t\t\t\t\tvar rowData = [];\n\n\t\t\t\t\tfields.forEach(function (field) {\n\t\t\t\t\t\tvar value = self.getFieldValue(field, row);\n\t\t\t\t\t\trowData.push(!(value instanceof Date) && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\" ? JSON.stringify(value) : value);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn rowData;\n\t\t\t\t}\n\n\t\t\t\tfunction addCalcRow(calcs, selector, pos) {\n\t\t\t\t\tvar calcData = calcs[selector];\n\n\t\t\t\t\tif (calcData) {\n\t\t\t\t\t\tif (pos) {\n\t\t\t\t\t\t\tcalcData = calcData[pos];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Object.keys(calcData).length) {\n\t\t\t\t\t\t\tcalcRowIndexs.push(rows.length);\n\t\t\t\t\t\t\trows.push(parseRow(calcData));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction parseGroup(group, calcObj) {\n\t\t\t\t\tvar groupData = [];\n\n\t\t\t\t\tgroupData.push(group.key);\n\n\t\t\t\t\tgroupRowIndexs.push(rows.length);\n\n\t\t\t\t\trows.push(groupData);\n\n\t\t\t\t\tif (group.subGroups) {\n\t\t\t\t\t\tgroup.subGroups.forEach(function (subGroup) {\n\t\t\t\t\t\t\tparseGroup(subGroup, calcObj[group.key] ? calcObj[group.key].groups || {} : {});\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (config.columnCalcs) {\n\t\t\t\t\t\t\taddCalcRow(calcObj, group.key, \"top\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparseRows(group.rows);\n\n\t\t\t\t\t\tif (config.columnCalcs) {\n\t\t\t\t\t\t\taddCalcRow(calcObj, group.key, \"bottom\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (config.rowGroups) {\n\t\t\t\t\tdata.forEach(function (group) {\n\t\t\t\t\t\tparseGroup(group, calcs);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (config.columnCalcs) {\n\t\t\t\t\t\taddCalcRow(calcs, \"top\");\n\t\t\t\t\t}\n\n\t\t\t\t\tparseRows(data);\n\n\t\t\t\t\tif (config.columnCalcs) {\n\t\t\t\t\t\taddCalcRow(calcs, \"bottom\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tworksheet = rowsToSheet();\n\n\t\t\t\treturn worksheet;\n\t\t\t}\n\n\t\t\tif (options.sheetOnly) {\n\t\t\t\tsetFileContents(generateSheet());\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (options.sheets) {\n\t\t\t\tfor (var sheet in options.sheets) {\n\n\t\t\t\t\tif (options.sheets[sheet] === true) {\n\t\t\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\t\t\tthis.table.modules.comms.send(options.sheets[sheet], \"download\", \"intercept\", {\n\t\t\t\t\t\t\ttype: \"xlsx\",\n\t\t\t\t\t\t\toptions: { sheetOnly: true },\n\t\t\t\t\t\t\tactive: self.active,\n\t\t\t\t\t\t\tintercept: function intercept(data) {\n\t\t\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tworkbook.SheetNames.push(sheetName);\n\t\t\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t\t\t}\n\n\t\t\tif (options.documentProcessing) {\n\t\t\t\tworkbook = options.documentProcessing(workbook);\n\t\t\t}\n\n\t\t\t//convert workbook to binary array\n\t\t\tfunction s2ab(s) {\n\t\t\t\tvar buf = new ArrayBuffer(s.length);\n\t\t\t\tvar view = new Uint8Array(buf);\n\t\t\t\tfor (var i = 0; i != s.length; ++i) {\n\t\t\t\t\tview[i] = s.charCodeAt(i) & 0xFF;\n\t\t\t\t}return buf;\n\t\t\t}\n\n\t\t\toutput = XLSX.write(workbook, { bookType: 'xlsx', bookSST: true, type: 'binary' });\n\n\t\t\tsetFileContents(s2ab(output), \"application/octet-stream\");\n\t\t},\n\n\t\thtml: function html(columns, data, options, setFileContents, config) {\n\t\t\tif (this.table.modExists(\"export\", true)) {\n\t\t\t\tsetFileContents(this.table.modules.export.getHtml(true, options.style, config), \"text/html\");\n\t\t\t}\n\t\t}\n\n\t};\n\n\tTabulator.prototype.registerModule(\"download\", Download);\n\n\tvar Edit = function Edit(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t};\n\n\t//initialize column editor\n\tEdit.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    config = {\n\t\t\teditor: false,\n\t\t\tblocked: false,\n\t\t\tcheck: column.definition.editable,\n\t\t\tparams: column.definition.editorParams || {}\n\t\t};\n\n\t\t//set column editor\n\t\tswitch (_typeof(column.definition.editor)) {\n\t\t\tcase \"string\":\n\n\t\t\t\tif (column.definition.editor === \"tick\") {\n\t\t\t\t\tcolumn.definition.editor = \"tickCross\";\n\t\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n\t\t\t\t}\n\n\t\t\t\tif (self.editors[column.definition.editor]) {\n\t\t\t\t\tconfig.editor = self.editors[column.definition.editor];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tconfig.editor = column.definition.editor;\n\t\t\t\tbreak;\n\n\t\t\tcase \"boolean\":\n\n\t\t\t\tif (column.definition.editor === true) {\n\n\t\t\t\t\tif (typeof column.definition.formatter !== \"function\") {\n\n\t\t\t\t\t\tif (column.definition.formatter === \"tick\") {\n\t\t\t\t\t\t\tcolumn.definition.formatter = \"tickCross\";\n\t\t\t\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (self.editors[column.definition.formatter]) {\n\t\t\t\t\t\t\tconfig.editor = self.editors[column.definition.formatter];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconfig.editor = self.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (config.editor) {\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t};\n\n\tEdit.prototype.getCurrentCell = function () {\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t};\n\n\tEdit.prototype.clearEditor = function () {\n\t\tvar cell = this.currentCell,\n\t\t    cellEl;\n\n\t\tthis.invalidEdit = false;\n\n\t\tif (cell) {\n\t\t\tthis.currentCell = false;\n\n\t\t\tcellEl = cell.getElement();\n\t\t\tcellEl.classList.remove(\"tabulator-validation-fail\");\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\twhile (cellEl.firstChild) {\n\t\t\t\tcellEl.removeChild(cellEl.firstChild);\n\t\t\t}cell.row.getElement().classList.remove(\"tabulator-row-editing\");\n\t\t}\n\t};\n\n\tEdit.prototype.cancelEdit = function () {\n\n\t\tif (this.currentCell) {\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\n\t\t\tthis.clearEditor();\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\n\t\t\tif (cell.column.cellEvents.cellEditCancelled) {\n\t\t\t\tcell.column.cellEvents.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\n\t\t\tthis.table.options.cellEditCancelled.call(this.table, component);\n\t\t}\n\t};\n\n\t//return a formatted value for a cell\n\tEdit.prototype.bindEditor = function (cell) {\n\t\tvar self = this,\n\t\t    element = cell.getElement();\n\n\t\telement.setAttribute(\"tabindex\", 0);\n\n\t\telement.addEventListener(\"click\", function (e) {\n\t\t\tif (!element.classList.contains(\"tabulator-editing\")) {\n\t\t\t\telement.focus({ preventScroll: true });\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"mousedown\", function (e) {\n\t\t\tself.mouseClick = true;\n\t\t});\n\n\t\telement.addEventListener(\"focus\", function (e) {\n\t\t\tif (!self.recursionBlock) {\n\t\t\t\tself.edit(cell, e, false);\n\t\t\t}\n\t\t});\n\t};\n\n\tEdit.prototype.focusCellNoEvent = function (cell, block) {\n\t\tthis.recursionBlock = true;\n\t\tif (!(block && this.table.browser === \"ie\")) {\n\t\t\tcell.getElement().focus({ preventScroll: true });\n\t\t}\n\t\tthis.recursionBlock = false;\n\t};\n\n\tEdit.prototype.editCell = function (cell, forceEdit) {\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t};\n\n\tEdit.prototype.focusScrollAdjust = function (cell) {\n\t\tif (this.table.rowManager.getRenderMode() == \"virtual\") {\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\t    bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\t    rowEl = cell.row.getElement(),\n\t\t\t    offset = rowEl.offsetTop;\n\n\t\t\tif (rowEl.offsetTop < topEdge) {\n\t\t\t\tthis.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop;\n\t\t\t} else {\n\t\t\t\tif (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tEdit.prototype.edit = function (cell, e, forceEdit) {\n\t\tvar self = this,\n\t\t    allowEdit = true,\n\t\t    rendered = function rendered() {},\n\t\t    element = cell.getElement(),\n\t\t    cellEditor,\n\t\t    component,\n\t\t    params;\n\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\t\tif (this.currentCell) {\n\t\t\tif (!this.invalidEdit) {\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t//handle successfull value change\n\t\tfunction success(value) {\n\t\t\tif (self.currentCell === cell) {\n\t\t\t\tvar valid = true;\n\n\t\t\t\tif (cell.column.modules.validate && self.table.modExists(\"validate\")) {\n\t\t\t\t\tvalid = self.table.modules.validate.validate(cell.column.modules.validate, cell.getComponent(), value);\n\t\t\t\t}\n\n\t\t\t\tif (valid === true) {\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\tcell.setValue(value, true);\n\n\t\t\t\t\tif (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n\t\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\t\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\n\t\t//handle aborted edit\n\t\tfunction cancel() {\n\t\t\tif (self.currentCell === cell) {\n\t\t\t\tself.cancelEdit();\n\n\t\t\t\tif (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\n\t\tfunction onRendered(callback) {\n\t\t\trendered = callback;\n\t\t}\n\n\t\tif (!cell.column.modules.edit.blocked) {\n\t\t\tif (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\n\t\t\tswitch (_typeof(cell.column.modules.edit.check)) {\n\t\t\t\tcase \"function\":\n\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tallowEdit = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (allowEdit || forceEdit) {\n\n\t\t\t\tself.cancelEdit();\n\n\t\t\t\tself.currentCell = cell;\n\n\t\t\t\tthis.focusScrollAdjust(cell);\n\n\t\t\t\tcomponent = cell.getComponent();\n\n\t\t\t\tif (this.mouseClick) {\n\t\t\t\t\tthis.mouseClick = false;\n\n\t\t\t\t\tif (cell.column.cellEvents.cellClick) {\n\t\t\t\t\t\tcell.column.cellEvents.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (cell.column.cellEvents.cellEditing) {\n\t\t\t\t\tcell.column.cellEvents.cellEditing.call(this.table, component);\n\t\t\t\t}\n\n\t\t\t\tself.table.options.cellEditing.call(this.table, component);\n\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif (cellEditor !== false) {\n\n\t\t\t\t\tif (cellEditor instanceof Node) {\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-row-editing\");\n\t\t\t\t\t\twhile (element.firstChild) {\n\t\t\t\t\t\t\telement.removeChild(element.firstChild);\n\t\t\t\t\t\t}element.appendChild(cellEditor);\n\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function (e) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\telement.blur();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\telement.blur();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.mouseClick = false;\n\t\t\telement.blur();\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tEdit.prototype.maskInput = function (el, options) {\n\t\tvar mask = options.mask,\n\t\t    maskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\t\t    maskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\t\t    maskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\n\t\t    success = false;\n\n\t\tfunction fillSymbols(index) {\n\t\t\tvar symbol = mask[index];\n\t\t\tif (typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\n\t\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\t\tfillSymbols(index + 1);\n\t\t\t}\n\t\t}\n\n\t\tel.addEventListener(\"keydown\", function (e) {\n\t\t\tvar index = el.value.length,\n\t\t\t    char = e.key;\n\n\t\t\tif (e.keyCode > 46) {\n\t\t\t\tif (index >= mask.length) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tsuccess = false;\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tswitch (mask[index]) {\n\t\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\t\tif (char.toUpperCase() == char.toLowerCase()) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\t\tif (isNaN(char)) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (char !== mask[index]) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsuccess = true;\n\t\t\t}\n\n\t\t\treturn;\n\t\t});\n\n\t\tel.addEventListener(\"keyup\", function (e) {\n\t\t\tif (e.keyCode > 46) {\n\t\t\t\tif (options.maskAutoFill) {\n\t\t\t\t\tfillSymbols(el.value.length);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (!el.placeholder) {\n\t\t\tel.placeholder = mask;\n\t\t}\n\n\t\tif (options.maskAutoFill) {\n\t\t\tfillSymbols(el.value.length);\n\t\t}\n\t};\n\n\t//default data editors\n\tEdit.prototype.editors = {\n\n\t\t//input element\n\t\tinput: function input(cell, onRendered, success, cancel, editorParams) {\n\n\t\t\t//create and style input\n\t\t\tvar cellValue = cell.getValue(),\n\t\t\t    input = document.createElement(\"input\");\n\n\t\t\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t});\n\n\t\t\tfunction onChange(e) {\n\t\t\t\tif ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n\t\t\t\t\tif (success(input.value)) {\n\t\t\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on blur or change\n\t\t\tinput.addEventListener(\"change\", onChange);\n\t\t\tinput.addEventListener(\"blur\", onChange);\n\n\t\t\t//submit new value on enter\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\t// case 9:\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (editorParams.mask) {\n\t\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t\t}\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//resizable text area element\n\t\ttextarea: function textarea(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar self = this,\n\t\t\t    cellValue = cell.getValue(),\n\t\t\t    vertNav = editorParams.verticalNavigation || \"hybrid\",\n\t\t\t    value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\n\t\t\t    count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\n\t\t\t    input = document.createElement(\"textarea\"),\n\t\t\t    scrollHeight = 0;\n\n\t\t\t//create and style input\n\t\t\tinput.style.display = \"block\";\n\t\t\tinput.style.padding = \"2px\";\n\t\t\tinput.style.height = \"100%\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\t\t\tinput.style.whiteSpace = \"pre-wrap\";\n\t\t\tinput.style.resize = \"none\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = value;\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t});\n\n\t\t\tfunction onChange(e) {\n\n\t\t\t\tif ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n\n\t\t\t\t\tif (success(input.value)) {\n\t\t\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t\t\t}, 300);\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on blur or change\n\t\t\tinput.addEventListener(\"change\", onChange);\n\t\t\tinput.addEventListener(\"blur\", onChange);\n\n\t\t\tinput.addEventListener(\"keyup\", function () {\n\n\t\t\t\tinput.style.height = \"\";\n\n\t\t\t\tvar heightNow = input.scrollHeight;\n\n\t\t\t\tinput.style.height = heightNow + \"px\";\n\n\t\t\t\tif (heightNow != scrollHeight) {\n\t\t\t\t\tscrollHeight = heightNow;\n\t\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\t//up arrow\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t//down arrow\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart !== input.value.length) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (editorParams.mask) {\n\t\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t\t}\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//input element with type of number\n\t\tnumber: function number(cell, onRendered, success, cancel, editorParams) {\n\n\t\t\tvar cellValue = cell.getValue(),\n\t\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t\t    input = document.createElement(\"input\");\n\n\t\t\tinput.setAttribute(\"type\", \"number\");\n\n\t\t\tif (typeof editorParams.max != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"max\", editorParams.max);\n\t\t\t}\n\n\t\t\tif (typeof editorParams.min != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"min\", editorParams.min);\n\t\t\t}\n\n\t\t\tif (typeof editorParams.step != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"step\", editorParams.step);\n\t\t\t}\n\n\t\t\t//create and style input\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = cellValue;\n\n\t\t\tvar blurFunc = function blurFunc(e) {\n\t\t\t\tonChange();\n\t\t\t};\n\n\t\t\tonRendered(function () {\n\t\t\t\t//submit new value on blur\n\t\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\tinput.style.height = \"100%\";\n\n\t\t\t\t//submit new value on blur\n\t\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\t\t\t});\n\n\t\t\tfunction onChange() {\n\t\t\t\tvar value = input.value;\n\n\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\t\tvalue = Number(value);\n\t\t\t\t}\n\n\t\t\t\tif (value !== cellValue) {\n\t\t\t\t\tif (success(value)) {\n\t\t\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on enter\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t// case 9:\n\t\t\t\t\t\tonChange();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 38: //up arrow\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t//down arrow\n\t\t\t\t\t\tif (vertNav == \"editor\") {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (editorParams.mask) {\n\t\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t\t}\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//input element with type of number\n\t\trange: function range(cell, onRendered, success, cancel, editorParams) {\n\n\t\t\tvar cellValue = cell.getValue(),\n\t\t\t    input = document.createElement(\"input\");\n\n\t\t\tinput.setAttribute(\"type\", \"range\");\n\n\t\t\tif (typeof editorParams.max != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"max\", editorParams.max);\n\t\t\t}\n\n\t\t\tif (typeof editorParams.min != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"min\", editorParams.min);\n\t\t\t}\n\n\t\t\tif (typeof editorParams.step != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"step\", editorParams.step);\n\t\t\t}\n\n\t\t\t//create and style input\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = cellValue;\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t});\n\n\t\t\tfunction onChange() {\n\t\t\t\tvar value = input.value;\n\n\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\t\tvalue = Number(value);\n\t\t\t\t}\n\n\t\t\t\tif (value != cellValue) {\n\t\t\t\t\tif (success(value)) {\n\t\t\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\t\tonChange();\n\t\t\t});\n\n\t\t\t//submit new value on enter\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 13:\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\tonChange();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//select\n\t\tselect: function select(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar self = this,\n\t\t\t    cellEl = cell.getElement(),\n\t\t\t    initialValue = cell.getValue(),\n\t\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t\t    initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\",\n\t\t\t    input = document.createElement(\"input\"),\n\t\t\t    listEl = document.createElement(\"div\"),\n\t\t\t    dataItems = [],\n\t\t\t    displayItems = [],\n\t\t\t    currentItem = {},\n\t\t\t    blurable = true;\n\n\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n\n\t\t\tif (Array.isArray(editorParams) || !Array.isArray(editorParams) && (typeof editorParams === 'undefined' ? 'undefined' : _typeof(editorParams)) === \"object\" && !editorParams.values) {\n\t\t\t\tconsole.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\n\t\t\t\teditorParams = { values: editorParams };\n\t\t\t}\n\n\t\t\tfunction getUniqueColumnValues(field) {\n\t\t\t\tvar output = {},\n\t\t\t\t    data = self.table.getData(),\n\t\t\t\t    column;\n\n\t\t\t\tif (field) {\n\t\t\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\n\t\t\t\t} else {\n\t\t\t\t\tcolumn = cell.getColumn()._getSelf();\n\t\t\t\t}\n\n\t\t\t\tif (column) {\n\t\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\t\tvar val = column.getFieldValue(row);\n\n\t\t\t\t\t\tif (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n\t\t\t\t\t\t\toutput[val] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (editorParams.sortValuesList) {\n\t\t\t\t\t\tif (editorParams.sortValuesList == \"asc\") {\n\t\t\t\t\t\t\toutput = Object.keys(output).sort();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toutput = Object.keys(output).sort().reverse();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = Object.keys(output);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\n\t\t\tfunction parseItems(inputValues, curentValue) {\n\t\t\t\tvar dataList = [];\n\t\t\t\tvar displayList = [];\n\n\t\t\t\tfunction processComplexListItem(item) {\n\t\t\t\t\tvar item = {\n\t\t\t\t\t\tlabel: editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label) : item.label,\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t\telement: false\n\t\t\t\t\t};\n\n\t\t\t\t\tif (item.value === curentValue || !isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue)) {\n\t\t\t\t\t\tsetCurrentItem(item);\n\t\t\t\t\t}\n\n\t\t\t\t\tdataList.push(item);\n\t\t\t\t\tdisplayList.push(item);\n\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\n\t\t\t\tif (typeof inputValues == \"function\") {\n\t\t\t\t\tinputValues = inputValues(cell);\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(inputValues)) {\n\t\t\t\t\tinputValues.forEach(function (value) {\n\t\t\t\t\t\tvar item;\n\n\t\t\t\t\t\tif ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n\n\t\t\t\t\t\t\tif (value.options) {\n\t\t\t\t\t\t\t\titem = {\n\t\t\t\t\t\t\t\t\tlabel: value.label,\n\t\t\t\t\t\t\t\t\tgroup: true,\n\t\t\t\t\t\t\t\t\telement: false\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tdisplayList.push(item);\n\n\t\t\t\t\t\t\t\tvalue.options.forEach(function (item) {\n\t\t\t\t\t\t\t\t\tprocessComplexListItem(item);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tprocessComplexListItem(value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\titem = {\n\t\t\t\t\t\t\t\tlabel: editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value,\n\t\t\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t\t\telement: false\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (item.value === curentValue || !isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue)) {\n\t\t\t\t\t\t\t\tsetCurrentItem(item);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdataList.push(item);\n\t\t\t\t\t\t\tdisplayList.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tfor (var key in inputValues) {\n\t\t\t\t\t\tvar item = {\n\t\t\t\t\t\t\tlabel: editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\n\t\t\t\t\t\t\tvalue: key,\n\t\t\t\t\t\t\telement: false\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (item.value === curentValue || !isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue)) {\n\t\t\t\t\t\t\tsetCurrentItem(item);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataList.push(item);\n\t\t\t\t\t\tdisplayList.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataItems = dataList;\n\t\t\t\tdisplayItems = displayList;\n\n\t\t\t\tfillList();\n\t\t\t}\n\n\t\t\tfunction fillList() {\n\t\t\t\twhile (listEl.firstChild) {\n\t\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t\t}displayItems.forEach(function (item) {\n\t\t\t\t\tvar el = item.element;\n\n\t\t\t\t\tif (!el) {\n\n\t\t\t\t\t\tif (item.group) {\n\t\t\t\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-group\");\n\t\t\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\n\t\t\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n\n\t\t\t\t\t\t\tel.addEventListener(\"click\", function () {\n\t\t\t\t\t\t\t\tsetCurrentItem(item);\n\t\t\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (item === currentItem) {\n\t\t\t\t\t\t\t\tel.classList.add(\"active\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tel.addEventListener(\"mousedown\", function () {\n\t\t\t\t\t\t\tblurable = false;\n\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\titem.element = el;\n\t\t\t\t\t}\n\n\t\t\t\t\tlistEl.appendChild(el);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction setCurrentItem(item) {\n\n\t\t\t\tif (currentItem && currentItem.element) {\n\t\t\t\t\tcurrentItem.element.classList.remove(\"active\");\n\t\t\t\t}\n\n\t\t\t\tcurrentItem = item;\n\t\t\t\tinput.value = item.label === \"&nbsp;\" ? \"\" : item.label;\n\n\t\t\t\tif (item.element) {\n\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction chooseItem() {\n\t\t\t\thideList();\n\n\t\t\t\tif (initialValue !== currentItem.value) {\n\t\t\t\t\tinitialValue = currentItem.value;\n\t\t\t\t\tsuccess(currentItem.value);\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction cancelItem() {\n\t\t\t\thideList();\n\t\t\t\tcancel();\n\t\t\t}\n\n\t\t\tfunction showList() {\n\t\t\t\tif (!listEl.parentNode) {\n\n\t\t\t\t\tif (editorParams.values === true) {\n\t\t\t\t\t\tparseItems(getUniqueColumnValues(), initialDisplayValue);\n\t\t\t\t\t} else if (typeof editorParams.values === \"string\") {\n\t\t\t\t\t\tparseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparseItems(editorParams.values || [], initialDisplayValue);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar offset = Tabulator.prototype.helpers.elOffset(cellEl);\n\n\t\t\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\n\n\t\t\t\t\tlistEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n\t\t\t\t\tlistEl.style.left = offset.left + \"px\";\n\n\t\t\t\t\tlistEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\tblurable = false;\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t\t}, 10);\n\t\t\t\t\t});\n\n\t\t\t\t\tdocument.body.appendChild(listEl);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction hideList() {\n\t\t\t\tif (listEl.parentNode) {\n\t\t\t\t\tlistEl.parentNode.removeChild(listEl);\n\t\t\t\t}\n\n\t\t\t\tremoveScrollListener();\n\t\t\t}\n\n\t\t\tfunction removeScrollListener() {\n\t\t\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n\t\t\t}\n\n\t\t\t//style input\n\t\t\tinput.setAttribute(\"type\", \"text\");\n\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.readOnly = this.currentCell != false;\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\";\n\n\t\t\t// if(editorParams.values === true){\n\t\t\t// \tparseItems(getUniqueColumnValues(), initialValue);\n\t\t\t// }else if(typeof editorParams.values === \"string\"){\n\t\t\t// \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\n\t\t\t// }else{\n\t\t\t// \tparseItems(editorParams.values || [], initialValue);\n\t\t\t// }\n\n\t\t\t//allow key based navigation\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tvar index;\n\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\t//up arrow\n\t\t\t\t\t\tindex = dataItems.indexOf(currentItem);\n\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\tsetCurrentItem(dataItems[index - 1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t//down arrow\n\t\t\t\t\t\tindex = dataItems.indexOf(currentItem);\n\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index < dataItems.length - 1) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tif (index < dataItems.length - 1) {\n\t\t\t\t\t\t\t\tif (index == -1) {\n\t\t\t\t\t\t\t\t\tsetCurrentItem(dataItems[0]);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetCurrentItem(dataItems[index + 1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37: //left arrow\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\t//right arrow\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t//enter\n\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tcancelItem();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\t\tif (blurable) {\n\t\t\t\t\tcancelItem();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"focus\", function (e) {\n\t\t\t\tshowList();\n\t\t\t});\n\n\t\t\t//style list element\n\t\t\tlistEl = document.createElement(\"div\");\n\t\t\tlistEl.classList.add(\"tabulator-edit-select-list\");\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t});\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//autocomplete\n\t\tautocomplete: function autocomplete(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar self = this,\n\t\t\t    cellEl = cell.getElement(),\n\t\t\t    initialValue = cell.getValue(),\n\t\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t\t    initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\",\n\t\t\t    input = document.createElement(\"input\"),\n\t\t\t    listEl = document.createElement(\"div\"),\n\t\t\t    allItems = [],\n\t\t\t    displayItems = [],\n\t\t\t    values = [],\n\t\t\t    currentItem = false,\n\t\t\t    blurable = true;\n\n\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n\n\t\t\t//style input\n\t\t\tinput.setAttribute(\"type\", \"search\");\n\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//style list element\n\t\t\tlistEl.classList.add(\"tabulator-edit-select-list\");\n\n\t\t\tlistEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\tblurable = false;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tblurable = true;\n\t\t\t\t}, 10);\n\t\t\t});\n\n\t\t\tfunction getUniqueColumnValues(field) {\n\t\t\t\tvar output = {},\n\t\t\t\t    data = self.table.getData(),\n\t\t\t\t    column;\n\n\t\t\t\tif (field) {\n\t\t\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\n\t\t\t\t} else {\n\t\t\t\t\tcolumn = cell.getColumn()._getSelf();\n\t\t\t\t}\n\n\t\t\t\tif (column) {\n\t\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\t\tvar val = column.getFieldValue(row);\n\n\t\t\t\t\t\tif (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n\t\t\t\t\t\t\toutput[val] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (editorParams.sortValuesList) {\n\t\t\t\t\t\tif (editorParams.sortValuesList == \"asc\") {\n\t\t\t\t\t\t\toutput = Object.keys(output).sort();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toutput = Object.keys(output).sort().reverse();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = Object.keys(output);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\n\t\t\tfunction filterList(term, intialLoad) {\n\t\t\t\tvar matches = [],\n\t\t\t\t    values,\n\t\t\t\t    items,\n\t\t\t\t    searchEl;\n\n\t\t\t\t//lookup base values list\n\t\t\t\tif (editorParams.values === true) {\n\t\t\t\t\tvalues = getUniqueColumnValues();\n\t\t\t\t} else if (typeof editorParams.values === \"string\") {\n\t\t\t\t\tvalues = getUniqueColumnValues(editorParams.values);\n\t\t\t\t} else {\n\t\t\t\t\tvalues = editorParams.values || [];\n\t\t\t\t}\n\n\t\t\t\tif (editorParams.searchFunc) {\n\t\t\t\t\tmatches = editorParams.searchFunc(term, values);\n\n\t\t\t\t\tif (matches instanceof Promise) {\n\n\t\t\t\t\t\taddNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\n\n\t\t\t\t\t\tmatches.then(function (result) {\n\t\t\t\t\t\t\tfillListIfNotEmpty(parseItems(result), intialLoad);\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\tconsole.err(\"error in autocomplete search promise:\", err);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfillListIfNotEmpty(parseItems(matches), intialLoad);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\titems = parseItems(values);\n\n\t\t\t\t\tif (term === \"\") {\n\t\t\t\t\t\tif (editorParams.showListOnEmpty) {\n\t\t\t\t\t\t\tmatches = items;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\titems.forEach(function (item) {\n\t\t\t\t\t\t\tif (item.value !== null || typeof item.value !== \"undefined\") {\n\t\t\t\t\t\t\t\tif (String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1) {\n\t\t\t\t\t\t\t\t\tmatches.push(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tfillListIfNotEmpty(matches, intialLoad);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction addNotice(notice) {\n\t\t\t\tvar searchEl = document.createElement(\"div\");\n\n\t\t\t\tclearList();\n\n\t\t\t\tif (notice !== false) {\n\t\t\t\t\tsearchEl.classList.add(\"tabulator-edit-select-list-notice\");\n\t\t\t\t\tsearchEl.tabIndex = 0;\n\n\t\t\t\t\tif (notice instanceof Node) {\n\t\t\t\t\t\tsearchEl.appendChild(notice);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchEl.innerHTML = notice;\n\t\t\t\t\t}\n\n\t\t\t\t\tlistEl.appendChild(searchEl);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseItems(inputValues) {\n\t\t\t\tvar itemList = [];\n\n\t\t\t\tif (Array.isArray(inputValues)) {\n\t\t\t\t\tinputValues.forEach(function (value) {\n\t\t\t\t\t\tvar item = {\n\t\t\t\t\t\t\ttitle: editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value,\n\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\titemList.push(item);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tfor (var key in inputValues) {\n\t\t\t\t\t\tvar item = {\n\t\t\t\t\t\t\ttitle: editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\n\t\t\t\t\t\t\tvalue: key\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\titemList.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn itemList;\n\t\t\t}\n\n\t\t\tfunction clearList() {\n\t\t\t\twhile (listEl.firstChild) {\n\t\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction fillListIfNotEmpty(items, intialLoad) {\n\t\t\t\tif (items.length) {\n\t\t\t\t\tfillList(items, intialLoad);\n\t\t\t\t} else {\n\t\t\t\t\tif (editorParams.emptyPlaceholder) {\n\t\t\t\t\t\taddNotice(editorParams.emptyPlaceholder);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction fillList(items, intialLoad) {\n\t\t\t\tvar current = false;\n\n\t\t\t\tclearList();\n\n\t\t\t\tdisplayItems = items;\n\n\t\t\t\tdisplayItems.forEach(function (item) {\n\t\t\t\t\tvar el = item.element;\n\n\t\t\t\t\tif (!el) {\n\t\t\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\n\t\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\t\tel.innerHTML = item.title;\n\n\t\t\t\t\t\tel.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\t\tsetCurrentItem(item);\n\t\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tel.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\t\tblurable = false;\n\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\titem.element = el;\n\n\t\t\t\t\t\tif (intialLoad && item.value == initialValue) {\n\t\t\t\t\t\t\tinput.value = item.title;\n\t\t\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t\t\t\tcurrent = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (item === currentItem) {\n\t\t\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t\t\t\tcurrent = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlistEl.appendChild(el);\n\t\t\t\t});\n\n\t\t\t\tif (!current) {\n\t\t\t\t\tsetCurrentItem(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction chooseItem() {\n\t\t\t\thideList();\n\n\t\t\t\tif (currentItem) {\n\t\t\t\t\tif (initialValue !== currentItem.value) {\n\t\t\t\t\t\tinitialValue = currentItem.value;\n\t\t\t\t\t\tinput.value = currentItem.title;\n\t\t\t\t\t\tsuccess(currentItem.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (editorParams.freetext) {\n\t\t\t\t\t\tinitialValue = input.value;\n\t\t\t\t\t\tsuccess(input.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (editorParams.allowEmpty && input.value === \"\") {\n\t\t\t\t\t\t\tinitialValue = input.value;\n\t\t\t\t\t\t\tsuccess(input.value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction showList() {\n\t\t\t\tif (!listEl.parentNode) {\n\t\t\t\t\twhile (listEl.firstChild) {\n\t\t\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t\t\t}var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n\n\t\t\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\n\n\t\t\t\t\tlistEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n\t\t\t\t\tlistEl.style.left = offset.left + \"px\";\n\t\t\t\t\tdocument.body.appendChild(listEl);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction setCurrentItem(item, showInputValue) {\n\t\t\t\tif (currentItem && currentItem.element) {\n\t\t\t\t\tcurrentItem.element.classList.remove(\"active\");\n\t\t\t\t}\n\n\t\t\t\tcurrentItem = item;\n\n\t\t\t\tif (item && item.element) {\n\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction hideList() {\n\t\t\t\tif (listEl.parentNode) {\n\t\t\t\t\tlistEl.parentNode.removeChild(listEl);\n\t\t\t\t}\n\n\t\t\t\tremoveScrollListener();\n\t\t\t}\n\n\t\t\tfunction cancelItem() {\n\t\t\t\thideList();\n\t\t\t\tcancel();\n\t\t\t}\n\n\t\t\tfunction removeScrollListener() {\n\t\t\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n\t\t\t}\n\n\t\t\t//allow key based navigation\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tvar index;\n\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\t//up arrow\n\t\t\t\t\t\tindex = displayItems.indexOf(currentItem);\n\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\tsetCurrentItem(displayItems[index - 1]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetCurrentItem(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t//down arrow\n\n\t\t\t\t\t\tindex = displayItems.indexOf(currentItem);\n\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index < displayItems.length - 1) {\n\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tif (index < displayItems.length - 1) {\n\t\t\t\t\t\t\t\tif (index == -1) {\n\t\t\t\t\t\t\t\t\tsetCurrentItem(displayItems[0]);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetCurrentItem(displayItems[index + 1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37: //left arrow\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\t//right arrow\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t//enter\n\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tcancelItem();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 36: //home\n\t\t\t\t\tcase 35:\n\t\t\t\t\t\t//end\n\t\t\t\t\t\t//prevent table navigation while using input element\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"keyup\", function (e) {\n\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 38: //up arrow\n\t\t\t\t\tcase 37: //left arrow\n\t\t\t\t\tcase 39: //up arrow\n\t\t\t\t\tcase 40: //right arrow\n\t\t\t\t\tcase 13: //enter\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfilterList(input.value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"search\", function (e) {\n\t\t\t\tfilterList(input.value);\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\t\tif (blurable) {\n\t\t\t\t\tchooseItem();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"focus\", function (e) {\n\t\t\t\tvar value = initialDisplayValue;\n\t\t\t\tshowList();\n\t\t\t\tinput.value = value;\n\t\t\t\tfilterList(value, true);\n\t\t\t});\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t});\n\n\t\t\tif (editorParams.mask) {\n\t\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t\t}\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//start rating\n\t\tstar: function star(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar self = this,\n\t\t\t    element = cell.getElement(),\n\t\t\t    value = cell.getValue(),\n\t\t\t    maxStars = element.getElementsByTagName(\"svg\").length || 5,\n\t\t\t    size = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\t\t\t    stars = [],\n\t\t\t    starsHolder = document.createElement(\"div\"),\n\t\t\t    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\t\t\t//change star type\n\t\t\tfunction starChange(val) {\n\t\t\t\tstars.forEach(function (star, i) {\n\t\t\t\t\tif (i < val) {\n\t\t\t\t\t\tif (self.table.browser == \"ie\") {\n\t\t\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (self.table.browser == \"ie\") {\n\t\t\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//build stars\n\t\t\tfunction buildStar(i) {\n\n\t\t\t\tvar starHolder = document.createElement(\"span\");\n\t\t\t\tvar nextStar = star.cloneNode(true);\n\n\t\t\t\tstars.push(nextStar);\n\n\t\t\t\tstarHolder.addEventListener(\"mouseenter\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\tstarChange(i);\n\t\t\t\t});\n\n\t\t\t\tstarHolder.addEventListener(\"mousemove\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t});\n\n\t\t\t\tstarHolder.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\tsuccess(i);\n\t\t\t\t});\n\n\t\t\t\tstarHolder.appendChild(nextStar);\n\t\t\t\tstarsHolder.appendChild(starHolder);\n\t\t\t}\n\n\t\t\t//handle keyboard navigation value change\n\t\t\tfunction changeValue(val) {\n\t\t\t\tvalue = val;\n\t\t\t\tstarChange(val);\n\t\t\t}\n\n\t\t\t//style cell\n\t\t\telement.style.whiteSpace = \"nowrap\";\n\t\t\telement.style.overflow = \"hidden\";\n\t\t\telement.style.textOverflow = \"ellipsis\";\n\n\t\t\t//style holding element\n\t\t\tstarsHolder.style.verticalAlign = \"middle\";\n\t\t\tstarsHolder.style.display = \"inline-block\";\n\t\t\tstarsHolder.style.padding = \"4px\";\n\n\t\t\t//style star\n\t\t\tstar.setAttribute(\"width\", size);\n\t\t\tstar.setAttribute(\"height\", size);\n\t\t\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\t\t\tstar.setAttribute(\"xml:space\", \"preserve\");\n\t\t\tstar.style.padding = \"0 1px\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//create correct number of stars\n\t\t\tfor (var i = 1; i <= maxStars; i++) {\n\t\t\t\tbuildStar(i);\n\t\t\t}\n\n\t\t\t//ensure value does not exceed number of stars\n\t\t\tvalue = Math.min(parseInt(value), maxStars);\n\n\t\t\t// set initial styling of stars\n\t\t\tstarChange(value);\n\n\t\t\tstarsHolder.addEventListener(\"mousemove\", function (e) {\n\t\t\t\tstarChange(0);\n\t\t\t});\n\n\t\t\tstarsHolder.addEventListener(\"click\", function (e) {\n\t\t\t\tsuccess(0);\n\t\t\t});\n\n\t\t\telement.addEventListener(\"blur\", function (e) {\n\t\t\t\tcancel();\n\t\t\t});\n\n\t\t\t//allow key based navigation\n\t\t\telement.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\t//right arrow\n\t\t\t\t\t\tchangeValue(value + 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37:\n\t\t\t\t\t\t//left arrow\n\t\t\t\t\t\tchangeValue(value - 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t//enter\n\t\t\t\t\t\tsuccess(value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn starsHolder;\n\t\t},\n\n\t\t//draggable progress bar\n\t\tprogress: function progress(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar element = cell.getElement(),\n\t\t\t    max = typeof editorParams.max === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : editorParams.max,\n\t\t\t    min = typeof editorParams.min === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : editorParams.min,\n\t\t\t    percent = (max - min) / 100,\n\t\t\t    value = cell.getValue() || 0,\n\t\t\t    handle = document.createElement(\"div\"),\n\t\t\t    bar = document.createElement(\"div\"),\n\t\t\t    mouseDrag,\n\t\t\t    mouseDragWidth;\n\n\t\t\t//set new value\n\t\t\tfunction updateValue() {\n\t\t\t\tvar calcVal = percent * Math.round(bar.offsetWidth / (element.clientWidth / 100)) + min;\n\t\t\t\tsuccess(calcVal);\n\t\t\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\t\t\telement.setAttribute(\"aria-label\", value);\n\t\t\t}\n\n\t\t\t//style handle\n\t\t\thandle.style.position = \"absolute\";\n\t\t\thandle.style.right = \"0\";\n\t\t\thandle.style.top = \"0\";\n\t\t\thandle.style.bottom = \"0\";\n\t\t\thandle.style.width = \"5px\";\n\t\t\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t\t\t//style bar\n\t\t\tbar.style.display = \"inline-block\";\n\t\t\tbar.style.position = \"relative\";\n\t\t\t// bar.style.top = \"8px\";\n\t\t\t// bar.style.bottom = \"8px\";\n\t\t\t// bar.style.left = \"4px\";\n\t\t\t// bar.style.marginRight = \"4px\";\n\t\t\tbar.style.height = \"100%\";\n\t\t\tbar.style.backgroundColor = \"#488CE9\";\n\t\t\tbar.style.maxWidth = \"100%\";\n\t\t\tbar.style.minWidth = \"0%\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//style cell\n\t\t\telement.style.padding = \"4px 4px\";\n\n\t\t\t//make sure value is in range\n\t\t\tvalue = Math.min(parseFloat(value), max);\n\t\t\tvalue = Math.max(parseFloat(value), min);\n\n\t\t\t//workout percentage\n\t\t\tvalue = Math.round((value - min) / percent);\n\t\t\t// bar.style.right = value + \"%\";\n\t\t\tbar.style.width = value + \"%\";\n\n\t\t\telement.setAttribute(\"aria-valuemin\", min);\n\t\t\telement.setAttribute(\"aria-valuemax\", max);\n\n\t\t\tbar.appendChild(handle);\n\n\t\t\thandle.addEventListener(\"mousedown\", function (e) {\n\t\t\t\tmouseDrag = e.screenX;\n\t\t\t\tmouseDragWidth = bar.offsetWidth;\n\t\t\t});\n\n\t\t\thandle.addEventListener(\"mouseover\", function () {\n\t\t\t\thandle.style.cursor = \"ew-resize\";\n\t\t\t});\n\n\t\t\telement.addEventListener(\"mousemove\", function (e) {\n\t\t\t\tif (mouseDrag) {\n\t\t\t\t\tbar.style.width = mouseDragWidth + e.screenX - mouseDrag + \"px\";\n\t\t\t\t}\n\t\t\t});\n\n\t\t\telement.addEventListener(\"mouseup\", function (e) {\n\t\t\t\tif (mouseDrag) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\n\t\t\t\t\tmouseDrag = false;\n\t\t\t\t\tmouseDragWidth = false;\n\n\t\t\t\t\tupdateValue();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//allow key based navigation\n\t\t\telement.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\t//right arrow\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tbar.style.width = bar.clientWidth + element.clientWidth / 100 + \"px\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37:\n\t\t\t\t\t\t//left arrow\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tbar.style.width = bar.clientWidth - element.clientWidth / 100 + \"px\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9: //tab\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t//enter\n\t\t\t\t\t\tupdateValue();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\telement.addEventListener(\"blur\", function () {\n\t\t\t\tcancel();\n\t\t\t});\n\n\t\t\treturn bar;\n\t\t},\n\n\t\t//checkbox\n\t\ttickCross: function tickCross(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar value = cell.getValue(),\n\t\t\t    input = document.createElement(\"input\"),\n\t\t\t    tristate = editorParams.tristate,\n\t\t\t    indetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\t\t\t    indetermState = false;\n\n\t\t\tinput.setAttribute(\"type\", \"checkbox\");\n\t\t\tinput.style.marginTop = \"5px\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = value;\n\n\t\t\tif (tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")) {\n\t\t\t\tindetermState = true;\n\t\t\t\tinput.indeterminate = true;\n\t\t\t}\n\n\t\t\tif (this.table.browser != \"firefox\") {\n\t\t\t\t//prevent blur issue on mac firefox\n\t\t\t\tonRendered(function () {\n\t\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinput.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\n\n\t\t\tfunction setValue(blur) {\n\t\t\t\tif (tristate) {\n\t\t\t\t\tif (!blur) {\n\t\t\t\t\t\tif (input.checked && !indetermState) {\n\t\t\t\t\t\t\tinput.checked = false;\n\t\t\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\t\t\tindetermState = true;\n\t\t\t\t\t\t\treturn indetermValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindetermState = false;\n\t\t\t\t\t\t\treturn input.checked;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (indetermState) {\n\t\t\t\t\t\t\treturn indetermValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn input.checked;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn input.checked;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"change\", function (e) {\n\t\t\t\tsuccess(setValue());\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\t\tsuccess(setValue(true));\n\t\t\t});\n\n\t\t\t//submit new value on enter\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\tsuccess(setValue());\n\t\t\t\t}\n\t\t\t\tif (e.keyCode == 27) {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn input;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"edit\", Edit);\n\n\tvar Export = function Export(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t};\n\n\tExport.prototype.genereateTable = function (config, style, range, colVisProp) {\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\n\t\tvar table = document.createElement(\"table\");\n\t\ttable.classList.add(\"tabulator-print-table\");\n\n\t\tif (this.config.columnHeaders !== false) {\n\t\t\ttable.appendChild(this.generateHeaderElements());\n\t\t}\n\n\t\ttable.appendChild(this.generateBodyElements(this.rowLookup(range)));\n\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\n\t\treturn table;\n\t};\n\n\tExport.prototype.rowLookup = function (range) {\n\t\tvar _this45 = this;\n\n\t\tvar rows = [];\n\n\t\tif (typeof range == \"function\") {\n\t\t\trange.call(this.table).forEach(function (row) {\n\t\t\t\trow = _this45.table.rowManager.findRow(row);\n\n\t\t\t\tif (row) {\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tswitch (range) {\n\t\t\t\tcase true:\n\t\t\t\tcase \"visible\":\n\t\t\t\t\trows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"all\":\n\t\t\t\t\trows = this.table.rowManager.rows;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"selected\":\n\t\t\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"active\":\n\t\t\t\tdefault:\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t}\n\t\t}\n\n\t\treturn Object.assign([], rows);\n\t};\n\n\tExport.prototype.generateColumnGroupHeaders = function () {\n\t\tvar _this46 = this;\n\n\t\tvar output = [];\n\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\n\t\tcolumns.forEach(function (column) {\n\t\t\tvar colData = _this46.processColumnGroup(column);\n\n\t\t\tif (colData) {\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tExport.prototype.processColumnGroup = function (column) {\n\t\tvar _this47 = this;\n\n\t\tvar subGroups = column.columns,\n\t\t    maxDepth = 0;\n\n\t\tvar groupData = {\n\t\t\ttitle: column.definition.title,\n\t\t\tcolumn: column,\n\t\t\tdepth: 1\n\t\t};\n\n\t\tif (subGroups.length) {\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\n\t\t\tsubGroups.forEach(function (subGroup) {\n\t\t\t\tvar subGroupData = _this47.processColumnGroup(subGroup);\n\n\t\t\t\tif (subGroupData) {\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\n\t\t\t\t\tif (subGroupData.depth > maxDepth) {\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tgroupData.depth += maxDepth;\n\n\t\t\tif (!groupData.width) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\tgroupData.width = 1;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn groupData;\n\t};\n\n\tExport.prototype.groupHeadersToRows = function (columns) {\n\n\t\tvar headers = [],\n\t\t    headerDepth = 0;\n\n\t\tfunction parseColumnGroup(column, level) {\n\n\t\t\tvar depth = headerDepth - level;\n\n\t\t\tif (typeof headers[level] === \"undefined\") {\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\n\t\t\tcolumn.height = column.subGroups ? 1 : depth - column.depth + 1;\n\n\t\t\theaders[level].push(column);\n\n\t\t\tif (column.subGroups) {\n\t\t\t\tcolumn.subGroups.forEach(function (subGroup) {\n\t\t\t\t\tparseColumnGroup(subGroup, level + 1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//calculate maximum header debth\n\t\tcolumns.forEach(function (column) {\n\t\t\tif (column.depth > headerDepth) {\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\n\t\tcolumns.forEach(function (column) {\n\t\t\tparseColumnGroup(column, 0);\n\t\t});\n\n\t\treturn headers;\n\t};\n\n\tExport.prototype.generateHeaderElements = function () {\n\t\tvar _this48 = this;\n\n\t\tvar headerEl = document.createElement(\"thead\");\n\n\t\tvar rows = this.groupHeadersToRows(this.generateColumnGroupHeaders());\n\n\t\trows.forEach(function (row) {\n\t\t\tvar rowEl = document.createElement(\"tr\");\n\n\t\t\t_this48.mapElementStyles(_this48.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\t\t\trow.forEach(function (column) {\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.column.definition.cssClass ? column.column.definition.cssClass.split(\" \") : [];\n\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\n\t\t\t\tcellEl.innerHTML = column.column.definition.title;\n\n\t\t\t\tif (_this48.cloneTableStyle) {\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\n\t\t\t\tclassNames.forEach(function (className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\n\t\t\t\t_this48.mapElementStyles(column.column.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\t_this48.mapElementStyles(column.column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n\t\t\t\tif (column.column.visible) {\n\t\t\t\t\t_this48.mapElementStyles(column.column.getElement(), cellEl, [\"width\"]);\n\t\t\t\t} else {\n\t\t\t\t\tif (column.column.definition.width) {\n\t\t\t\t\t\tcellEl.style.width = column.column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (column.column.parent) {\n\t\t\t\t\t_this48.mapElementStyles(column.column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}\n\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t});\n\n\t\t\theaderEl.appendChild(rowEl);\n\t\t});\n\n\t\treturn headerEl;\n\t};\n\n\tExport.prototype.generateBodyElements = function (rows) {};\n\n\tExport.prototype.generateBodyElements = function (rows) {\n\t\tvar _this49 = this;\n\n\t\tvar oddRow, evenRow, calcRow, firstRow, firstCell, firstGroup, lastCell, styleCells, styleRow, treeElementField, rowFormatter;\n\n\t\t//assign row formatter\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\t\trowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\n\t\t//lookup row styles\n\t\tif (this.cloneTableStyle && window.getComputedStyle) {\n\t\t\toddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tevenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tcalcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tfirstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tfirstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\n\t\t\tif (firstRow) {\n\t\t\t\tstyleCells = firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tfirstCell = styleCells[0];\n\t\t\t\tlastCell = styleCells[styleCells.length - 1];\n\t\t\t}\n\t\t}\n\n\t\tvar bodyEl = document.createElement(\"tbody\");\n\n\t\tvar columns = [];\n\n\t\tif (this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")) {\n\t\t\tif (this.table.modules.columnCalcs.topInitialized) {\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\n\t\t\tif (this.table.modules.columnCalcs.botInitialized) {\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\t\tif (_this49.columnVisCheck(column)) {\n\t\t\t\tcolumns.push(column);\n\t\t\t}\n\t\t});\n\n\t\tif (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")) {\n\t\t\ttreeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\n\t\trows = rows.filter(function (row) {\n\t\t\tswitch (row.type) {\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn _this49.config.rowGroups !== false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn _this49.config.columnCalcs !== false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\tif (rows.length > 1000) {\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\n\t\trows.forEach(function (row, i) {\n\t\t\tvar rowData = row.getData(_this49.colVisProp);\n\n\t\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\n\t\t\tswitch (row.type) {\n\t\t\t\tcase \"group\":\n\t\t\t\t\tvar cellEl = document.createElement(\"td\");\n\t\t\t\t\tcellEl.colSpan = columns.length;\n\t\t\t\t\tcellEl.innerHTML = row.key;\n\n\t\t\t\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\n\t\t\t\t\t_this49.mapElementStyles(firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\t_this49.mapElementStyles(firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\n\t\t\t\tcase \"row\":\n\n\t\t\t\t\tif (_this49.table.options.dataTree && _this49.config.dataTree === false && row.modules.dataTree.parent) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcolumns.forEach(function (column, i) {\n\t\t\t\t\t\tvar cellEl = document.createElement(\"td\");\n\n\t\t\t\t\t\tvar value = column.getFieldValue(rowData);\n\n\t\t\t\t\t\tvar cellWrapper = {\n\t\t\t\t\t\t\tmodules: {},\n\t\t\t\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgetField: function getField() {\n\t\t\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgetData: function getData() {\n\t\t\t\t\t\t\t\treturn rowData;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgetComponent: function getComponent() {\n\t\t\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolumn: column\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\n\t\t\t\t\t\tclassNames.forEach(function (className) {\n\t\t\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (_this49.table.modExists(\"format\") && _this49.config.formatCells !== false) {\n\t\t\t\t\t\t\tvalue = _this49.table.modules.format.formatExportValue(cellWrapper, _this49.colVisProp);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\tvalue = JSON.stringify(value);\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tvalue = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (value instanceof Node) {\n\t\t\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (firstCell) {\n\t\t\t\t\t\t\t_this49.mapElementStyles(firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\t\t\t\t\t\t\tif (column.definition.align) {\n\t\t\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (_this49.table.options.dataTree && _this49.config.dataTree !== false) {\n\t\t\t\t\t\t\tif (treeElementField && treeElementField == column.field || !treeElementField && i == 0) {\n\t\t\t\t\t\t\t\tif (row.modules.dataTree.controlEl) {\n\t\t\t\t\t\t\t\t\tcellEl.insertBefore(row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (row.modules.dataTree.branchEl) {\n\t\t\t\t\t\t\t\t\tcellEl.insertBefore(row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trowEl.appendChild(cellEl);\n\n\t\t\t\t\t\tif (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\n\t\t\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tstyleRow = row.type == \"calc\" ? calcRow : i % 2 && evenRow ? evenRow : oddRow;\n\n\t\t\t\t\t_this49.mapElementStyles(styleRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\n\t\t\t\t\tif (rowFormatter && _this49.config.formatCells !== false) {\n\t\t\t\t\t\tvar rowComponent = row.getComponent();\n\n\t\t\t\t\t\trowComponent.getElement = function () {\n\t\t\t\t\t\t\treturn rowEl;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\trowFormatter(rowComponent);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tbodyEl.appendChild(rowEl);\n\t\t});\n\n\t\treturn bodyEl;\n\t};\n\n\tExport.prototype.columnVisCheck = function (column) {\n\t\treturn column.definition[this.colVisProp] !== false && (column.visible || !column.visible && column.definition[this.colVisProp]);\n\t};\n\n\tExport.prototype.getHtml = function (visible, style, config, colVisProp) {\n\t\tvar holder = document.createElement(\"div\");\n\n\t\tholder.appendChild(this.genereateTable(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\"));\n\n\t\treturn holder.innerHTML;\n\t};\n\n\tExport.prototype.mapElementStyles = function (from, to, props) {\n\t\tif (this.cloneTableStyle && from && to) {\n\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\": \"backgroundColor\",\n\t\t\t\t\"color\": \"fontColor\",\n\t\t\t\t\"width\": \"width\",\n\t\t\t\t\"font-weight\": \"fontWeight\",\n\t\t\t\t\"font-family\": \"fontFamily\",\n\t\t\t\t\"font-size\": \"fontSize\",\n\t\t\t\t\"text-align\": \"textAlign\",\n\t\t\t\t\"border-top\": \"borderTop\",\n\t\t\t\t\"border-left\": \"borderLeft\",\n\t\t\t\t\"border-right\": \"borderRight\",\n\t\t\t\t\"border-bottom\": \"borderBottom\",\n\t\t\t\t\"padding-top\": \"paddingTop\",\n\t\t\t\t\"padding-left\": \"paddingLeft\",\n\t\t\t\t\"padding-right\": \"paddingRight\",\n\t\t\t\t\"padding-bottom\": \"paddingBottom\"\n\t\t\t};\n\n\t\t\tif (window.getComputedStyle) {\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\n\t\t\t\tprops.forEach(function (prop) {\n\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"export\", Export);\n\n\tvar Filter = function Filter(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t};\n\n\t//initialize column header filter\n\tFilter.prototype.initializeColumn = function (column, value) {\n\t\tvar self = this,\n\t\t    field = column.getField(),\n\t\t    params;\n\n\t\t//handle successfull value change\n\t\tfunction success(value) {\n\t\t\tvar filterType = column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\" || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\t    type = \"\",\n\t\t\t    filterChangeCheck = \"\",\n\t\t\t    filterFunc;\n\n\t\t\tif (typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value) {\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif (!column.modules.filter.emptyFunc(value)) {\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch (_typeof(column.definition.headerFilterFunc)) {\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif (self.filters[column.definition.headerFilterFunc]) {\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn self.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!filterFunc) {\n\t\t\t\t\t\tswitch (filterType) {\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif (typeof colVal !== 'undefined' && colVal !== null) {\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = { value: value, func: filterFunc, type: type };\n\t\t\t\t} else {\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.changed = true;\n\t\t\t\t\tself.table.rowManager.filterRefresh();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess: success,\n\t\t\tattrType: false,\n\t\t\ttagType: false,\n\t\t\temptyFunc: false\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t};\n\n\tFilter.prototype.generateHeaderFilterElement = function (column, initialValue, reinitialize) {\n\t\tvar _this50 = this;\n\n\t\tvar self = this,\n\t\t    success = column.modules.filter.success,\n\t\t    field = column.getField(),\n\t\t    filterElement,\n\t\t    editor,\n\t\t    editorElement,\n\t\t    cellWrapper,\n\t\t    typingTimer,\n\t\t    searchTrigger,\n\t\t    params;\n\n\t\t//handle aborted edit\n\t\tfunction cancel() {}\n\n\t\tif (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif (field) {\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function (value) {\n\t\t\t\treturn !value && value !== \"0\";\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch (_typeof(column.definition.headerFilter)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif (self.table.modules.edit.editors[column.definition.headerFilter]) {\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif ((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function (value) {\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif (column.modules.edit && column.modules.edit.editor) {\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif ((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function (value) {\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (editor) {\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField: function getField() {\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight: function normalizeHeight() {}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, function () {}, success, cancel, params);\n\n\t\t\t\tif (!editorElement) {\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!(editorElement instanceof Node)) {\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tif (field) {\n\t\t\t\t\tself.table.modules.localize.bind(\"headerFilters|columns|\" + column.definition.field, function (value) {\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.table.modules.localize.getText(\"headerFilters|default\"));\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tself.table.modules.localize.bind(\"headerFilters|default\", function (value) {\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof self.column.definition.headerFilterPlaceholder !== \"undefined\" && self.column.definition.headerFilterPlaceholder ? self.column.definition.headerFilterPlaceholder : value);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", function (e) {\n\t\t\t\t\tvar left = _this50.table.columnManager.element.scrollLeft;\n\n\t\t\t\t\tif (left !== _this50.table.rowManager.element.scrollLeft) {\n\t\t\t\t\t\t_this50.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\t_this50.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function searchTrigger(e) {\n\t\t\t\t\tif (typingTimer) {\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function () {\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t}, self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\";\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif (column.definition.headerFilterLiveFilter !== false) {\n\n\t\t\t\t\tif (!(column.definition.headerFilter === 'autocomplete' || column.definition.headerFilter === 'tickCross' || (column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') && column.definition.headerFilter === true)) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif (column.modules.filter.attrType == \"number\") {\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function (e) {\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif (column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\") {\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propegating click to column sorters etc\n\t\t\t\t\tif (column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\") {\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif (!reinitialize) {\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t};\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tFilter.prototype.hideHeaderFilterElements = function () {\n\t\tthis.headerFilterColumns.forEach(function (column) {\n\t\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t};\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tFilter.prototype.showHeaderFilterElements = function () {\n\t\tthis.headerFilterColumns.forEach(function (column) {\n\t\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t};\n\n\t//programatically set focus of header filter\n\tFilter.prototype.setHeaderFilterFocus = function (column) {\n\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t};\n\n\t//programmatically get value of header filter\n\tFilter.prototype.getHeaderFilterValue = function (column) {\n\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\treturn column.modules.filter.headerElement.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t};\n\n\t//programatically set value of header filter\n\tFilter.prototype.setHeaderFilterValue = function (column, value) {\n\t\tif (column) {\n\t\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t};\n\n\tFilter.prototype.reloadHeaderFilter = function (column) {\n\t\tif (column) {\n\t\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t};\n\n\t//check if the filters has changed since last use\n\tFilter.prototype.hasChanged = function () {\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t};\n\n\t//set standard filters\n\tFilter.prototype.setFilter = function (field, type, value) {\n\t\tvar self = this;\n\n\t\tself.filterList = [];\n\n\t\tif (!Array.isArray(field)) {\n\t\t\tfield = [{ field: field, type: type, value: value }];\n\t\t}\n\n\t\tself.addFilter(field);\n\t};\n\n\t//add filter to array\n\tFilter.prototype.addFilter = function (field, type, value) {\n\t\tvar self = this;\n\n\t\tif (!Array.isArray(field)) {\n\t\t\tfield = [{ field: field, type: type, value: value }];\n\t\t}\n\n\t\tfield.forEach(function (filter) {\n\n\t\t\tfilter = self.findFilter(filter);\n\n\t\t\tif (filter) {\n\t\t\t\tself.filterList.push(filter);\n\n\t\t\t\tself.changed = true;\n\t\t\t}\n\t\t});\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\t\tthis.table.modules.persistence.save(\"filter\");\n\t\t}\n\t};\n\n\tFilter.prototype.findFilter = function (filter) {\n\t\tvar self = this,\n\t\t    column;\n\n\t\tif (Array.isArray(filter)) {\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif (typeof filter.field == \"function\") {\n\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\treturn filter.field(data, filter.type || {}); // pass params to custom filter function\n\t\t\t};\n\t\t} else {\n\n\t\t\tif (self.filters[filter.type]) {\n\n\t\t\t\tcolumn = self.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif (column) {\n\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\treturn self.filters[filter.type](filter.value, column.getFieldValue(data));\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\treturn self.filters[filter.type](filter.value, data[filter.field]);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t};\n\n\tFilter.prototype.findSubFilters = function (filters) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tfilters.forEach(function (filter) {\n\t\t\tfilter = self.findFilter(filter);\n\n\t\t\tif (filter) {\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t};\n\n\t//get all filters\n\tFilter.prototype.getFilters = function (all, ajax) {\n\t\tvar output = [];\n\n\t\tif (all) {\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif (ajax) {\n\t\t\toutput.forEach(function (item) {\n\t\t\t\tif (typeof item.type == \"function\") {\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t};\n\n\t//filter to Object\n\tFilter.prototype.filtersToArray = function (filterList, ajax) {\n\t\tvar _this51 = this;\n\n\t\tvar output = [];\n\n\t\tfilterList.forEach(function (filter) {\n\t\t\tvar item;\n\n\t\t\tif (Array.isArray(filter)) {\n\t\t\t\toutput.push(_this51.filtersToArray(filter, ajax));\n\t\t\t} else {\n\t\t\t\titem = { field: filter.field, type: filter.type, value: filter.value };\n\n\t\t\t\tif (ajax) {\n\t\t\t\t\tif (typeof item.type == \"function\") {\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\t//get all filters\n\tFilter.prototype.getHeaderFilters = function () {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tfor (var key in this.headerFilters) {\n\t\t\toutput.push({ field: key, type: this.headerFilters[key].type, value: this.headerFilters[key].value });\n\t\t}\n\n\t\treturn output;\n\t};\n\n\t//remove filter from array\n\tFilter.prototype.removeFilter = function (field, type, value) {\n\t\tvar self = this;\n\n\t\tif (!Array.isArray(field)) {\n\t\t\tfield = [{ field: field, type: type, value: value }];\n\t\t}\n\n\t\tfield.forEach(function (filter) {\n\t\t\tvar index = -1;\n\n\t\t\tif (_typeof(filter.field) == \"object\") {\n\t\t\t\tindex = self.filterList.findIndex(function (element) {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tindex = self.filterList.findIndex(function (element) {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (index > -1) {\n\t\t\t\tself.filterList.splice(index, 1);\n\t\t\t\tself.changed = true;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\t\tthis.table.modules.persistence.save(\"filter\");\n\t\t}\n\t};\n\n\t//clear filters\n\tFilter.prototype.clearFilter = function (all) {\n\t\tthis.filterList = [];\n\n\t\tif (all) {\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.changed = true;\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\t\tthis.table.modules.persistence.save(\"filter\");\n\t\t}\n\t};\n\n\t//clear header filters\n\tFilter.prototype.clearHeaderFilter = function () {\n\t\tvar self = this;\n\n\t\tthis.headerFilters = {};\n\t\tself.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach(function (column) {\n\t\t\tcolumn.modules.filter.value = null;\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tself.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.changed = true;\n\t};\n\n\t//search data and return matching rows\n\tFilter.prototype.search = function (searchType, field, type, value) {\n\t\tvar self = this,\n\t\t    activeRows = [],\n\t\t    filterList = [];\n\n\t\tif (!Array.isArray(field)) {\n\t\t\tfield = [{ field: field, type: type, value: value }];\n\t\t}\n\n\t\tfield.forEach(function (filter) {\n\t\t\tfilter = self.findFilter(filter);\n\n\t\t\tif (filter) {\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach(function (row) {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach(function (filter) {\n\t\t\t\tif (!self.filterRecurse(filter, row.getData())) {\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (match) {\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\t\t});\n\n\t\treturn activeRows;\n\t};\n\n\t//filter row array\n\tFilter.prototype.filter = function (rowList, filters) {\n\t\tvar self = this,\n\t\t    activeRows = [],\n\t\t    activeRowComponents = [];\n\n\t\tif (self.table.options.dataFiltering) {\n\t\t\tself.table.options.dataFiltering.call(self.table, self.getFilters());\n\t\t}\n\n\t\tif (!self.table.options.ajaxFiltering && (self.filterList.length || Object.keys(self.headerFilters).length)) {\n\n\t\t\trowList.forEach(function (row) {\n\t\t\t\tif (self.filterRow(row)) {\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif (self.table.options.dataFiltered) {\n\n\t\t\tactiveRows.forEach(function (row) {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tself.table.options.dataFiltered.call(self.table, self.getFilters(), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t};\n\n\t//filter individual row\n\tFilter.prototype.filterRow = function (row, filters) {\n\t\tvar self = this,\n\t\t    match = true,\n\t\t    data = row.getData();\n\n\t\tself.filterList.forEach(function (filter) {\n\t\t\tif (!self.filterRecurse(filter, data)) {\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\t\tfor (var field in self.headerFilters) {\n\t\t\tif (!self.headerFilters[field].func(data)) {\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t};\n\n\tFilter.prototype.filterRecurse = function (filter, data) {\n\t\tvar self = this,\n\t\t    match = false;\n\n\t\tif (Array.isArray(filter)) {\n\t\t\tfilter.forEach(function (subFilter) {\n\t\t\t\tif (self.filterRecurse(subFilter, data)) {\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t};\n\n\t//list of available filters\n\tFilter.prototype.filters = {\n\n\t\t//equal to\n\t\t\"=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal == filterVal ? true : false;\n\t\t},\n\n\t\t//less than\n\t\t\"<\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal < filterVal ? true : false;\n\t\t},\n\n\t\t//less than or equal to\n\t\t\"<=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal <= filterVal ? true : false;\n\t\t},\n\n\t\t//greater than\n\t\t\">\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal > filterVal ? true : false;\n\t\t},\n\n\t\t//greater than or equal to\n\t\t\">=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal >= filterVal ? true : false;\n\t\t},\n\n\t\t//not equal to\n\t\t\"!=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal != filterVal ? true : false;\n\t\t},\n\n\t\t\"regex\": function regex(filterVal, rowVal, rowData, filterParams) {\n\n\t\t\tif (typeof filterVal == \"string\") {\n\t\t\t\tfilterVal = new RegExp(filterVal);\n\t\t\t}\n\n\t\t\treturn filterVal.test(rowVal);\n\t\t},\n\n\t\t//contains the string\n\t\t\"like\": function like(filterVal, rowVal, rowData, filterParams) {\n\t\t\tif (filterVal === null || typeof filterVal === \"undefined\") {\n\t\t\t\treturn rowVal === filterVal ? true : false;\n\t\t\t} else {\n\t\t\t\tif (typeof rowVal !== 'undefined' && rowVal !== null) {\n\t\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//in array\n\t\t\"in\": function _in(filterVal, rowVal, rowData, filterParams) {\n\t\t\tif (Array.isArray(filterVal)) {\n\t\t\t\treturn filterVal.indexOf(rowVal) > -1;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"filter\", Filter);\n\n\tvar Format = function Format(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t};\n\n\t//initialize column formatter\n\tFormat.prototype.initializeColumn = function (column) {\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\n\t\tif (typeof column.definition.formatterPrint !== \"undefined\") {\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t\t}\n\n\t\tif (typeof column.definition.formatterClipboard !== \"undefined\") {\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t\t}\n\n\t\tif (typeof column.definition.formatterHtmlOutput !== \"undefined\") {\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t\t}\n\t};\n\n\tFormat.prototype.lookupFormatter = function (column, type) {\n\t\tvar config = { params: column.definition[\"formatter\" + type + \"Params\"] || {} },\n\t\t    formatter = column.definition[\"formatter\" + type];\n\n\t\t//set column formatter\n\t\tswitch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n\t\t\tcase \"string\":\n\n\t\t\t\tif (formatter === \"tick\") {\n\t\t\t\t\tformatter = \"tickCross\";\n\n\t\t\t\t\tif (typeof config.params.crossElement == \"undefined\") {\n\t\t\t\t\t\tconfig.params.crossElement = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false\");\n\t\t\t\t}\n\n\t\t\t\tif (this.formatters[formatter]) {\n\t\t\t\t\tconfig.formatter = this.formatters[formatter];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tconfig.formatter = this.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tconfig.formatter = formatter;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconfig.formatter = this.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn config;\n\t};\n\n\tFormat.prototype.cellRendered = function (cell) {\n\t\tif (cell.modules.format && cell.modules.format.renderedCallback) {\n\t\t\tcell.modules.format.renderedCallback();\n\t\t}\n\t};\n\n\t//return a formatted value for a cell\n\tFormat.prototype.formatValue = function (cell) {\n\t\tvar component = cell.getComponent(),\n\t\t    params = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\n\t\tfunction onRendered(callback) {\n\t\t\tif (!cell.modules.format) {\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t}\n\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t};\n\n\tFormat.prototype.formatExportValue = function (cell, type) {\n\t\tvar formatter = cell.column.modules.format[type],\n\t\t    params;\n\n\t\tif (formatter) {\n\t\t\tvar onRendered = function onRendered(callback) {\n\t\t\t\tif (!cell.modules.format) {\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t};\n\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\n\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t} else {\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t};\n\n\tFormat.prototype.sanitizeHTML = function (value) {\n\t\tif (value) {\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\n\t\t\treturn String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t};\n\n\tFormat.prototype.emptyToSpace = function (value) {\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t};\n\n\t//get formatter for cell\n\tFormat.prototype.getFormatter = function (formatter) {\n\t\tvar formatter;\n\n\t\tswitch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (this.formatters[formatter]) {\n\t\t\t\t\tformatter = this.formatters[formatter];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatter = this.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tformatter = formatter;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tformatter = this.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn formatter;\n\t};\n\n\t//default data formatters\n\tFormat.prototype.formatters = {\n\t\t//plain text value\n\t\tplaintext: function plaintext(cell, formatterParams, onRendered) {\n\t\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t\t},\n\n\t\t//html text value\n\t\thtml: function html(cell, formatterParams, onRendered) {\n\t\t\treturn cell.getValue();\n\t\t},\n\n\t\t//multiline text area\n\t\ttextarea: function textarea(cell, formatterParams, onRendered) {\n\t\t\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\t\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t\t},\n\n\t\t//currency formatting\n\t\tmoney: function money(cell, formatterParams, onRendered) {\n\t\t\tvar floatVal = parseFloat(cell.getValue()),\n\t\t\t    number,\n\t\t\t    integer,\n\t\t\t    decimal,\n\t\t\t    rgx;\n\n\t\t\tvar decimalSym = formatterParams.decimal || \".\";\n\t\t\tvar thousandSym = formatterParams.thousand || \",\";\n\t\t\tvar symbol = formatterParams.symbol || \"\";\n\t\t\tvar after = !!formatterParams.symbolAfter;\n\t\t\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\t\t\tif (isNaN(floatVal)) {\n\t\t\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t\t\t}\n\n\t\t\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\t\t\tnumber = String(number).split(\".\");\n\n\t\t\tinteger = number[0];\n\t\t\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\t\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\t\twhile (rgx.test(integer)) {\n\t\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t\t}\n\n\t\t\treturn after ? integer + decimal + symbol : symbol + integer + decimal;\n\t\t},\n\n\t\t//clickable anchor tag\n\t\tlink: function link(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue(),\n\t\t\t    urlPrefix = formatterParams.urlPrefix || \"\",\n\t\t\t    download = formatterParams.download,\n\t\t\t    label = value,\n\t\t\t    el = document.createElement(\"a\"),\n\t\t\t    data;\n\n\t\t\tif (formatterParams.labelField) {\n\t\t\t\tdata = cell.getData();\n\t\t\t\tlabel = data[formatterParams.labelField];\n\t\t\t}\n\n\t\t\tif (formatterParams.label) {\n\t\t\t\tswitch (_typeof(formatterParams.label)) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tlabel = formatterParams.label;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (label) {\n\t\t\t\tif (formatterParams.urlField) {\n\t\t\t\t\tdata = cell.getData();\n\t\t\t\t\tvalue = data[formatterParams.urlField];\n\t\t\t\t}\n\n\t\t\t\tif (formatterParams.url) {\n\t\t\t\t\tswitch (_typeof(formatterParams.url)) {\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\t\t\tif (formatterParams.target) {\n\t\t\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t\t\t}\n\n\t\t\t\tif (formatterParams.download) {\n\n\t\t\t\t\tif (typeof download == \"function\") {\n\t\t\t\t\t\tdownload = download(cell);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t\t\t}\n\n\t\t\t\t\tel.setAttribute(\"download\", download);\n\t\t\t\t}\n\n\t\t\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\t\t\treturn el;\n\t\t\t} else {\n\t\t\t\treturn \"&nbsp;\";\n\t\t\t}\n\t\t},\n\n\t\t//image element\n\t\timage: function image(cell, formatterParams, onRendered) {\n\t\t\tvar el = document.createElement(\"img\");\n\t\t\tel.setAttribute(\"src\", cell.getValue());\n\n\t\t\tswitch (_typeof(formatterParams.height)) {\n\t\t\t\tcase \"number\":\n\t\t\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"string\":\n\t\t\t\t\tel.style.height = formatterParams.height;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch (_typeof(formatterParams.width)) {\n\t\t\t\tcase \"number\":\n\t\t\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"string\":\n\t\t\t\t\tel.style.width = formatterParams.width;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tel.addEventListener(\"load\", function () {\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t});\n\n\t\t\treturn el;\n\t\t},\n\n\t\t//tick or cross\n\t\ttickCross: function tickCross(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue(),\n\t\t\t    element = cell.getElement(),\n\t\t\t    empty = formatterParams.allowEmpty,\n\t\t\t    truthy = formatterParams.allowTruthy,\n\t\t\t    tick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\t\t\t    cross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\t\t\tif (truthy && value || value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\") {\n\t\t\t\telement.setAttribute(\"aria-checked\", true);\n\t\t\t\treturn tick || \"\";\n\t\t\t} else {\n\t\t\t\tif (empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")) {\n\t\t\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\t\t\treturn \"\";\n\t\t\t\t} else {\n\t\t\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\t\t\treturn cross || \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdatetime: function datetime(cell, formatterParams, onRendered) {\n\t\t\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n\t\t\tvar outputFormat = formatterParams.outputFormat || \"DD/MM/YYYY hh:mm:ss\";\n\t\t\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\t\t\tvar value = cell.getValue();\n\n\t\t\tvar newDatetime = moment(value, inputFormat);\n\n\t\t\tif (newDatetime.isValid()) {\n\t\t\t\treturn newDatetime.format(outputFormat);\n\t\t\t} else {\n\n\t\t\t\tif (invalid === true) {\n\t\t\t\t\treturn value;\n\t\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\t\treturn invalid(value);\n\t\t\t\t} else {\n\t\t\t\t\treturn invalid;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdatetimediff: function datetime(cell, formatterParams, onRendered) {\n\t\t\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n\t\t\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\t\t\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\t\t\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : undefined;\n\t\t\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\t\t\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : moment();\n\t\t\tvar value = cell.getValue();\n\n\t\t\tvar newDatetime = moment(value, inputFormat);\n\n\t\t\tif (newDatetime.isValid()) {\n\t\t\t\tif (humanize) {\n\t\t\t\t\treturn moment.duration(newDatetime.diff(date)).humanize(suffix);\n\t\t\t\t} else {\n\t\t\t\t\treturn newDatetime.diff(date, unit) + (suffix ? \" \" + suffix : \"\");\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (invalid === true) {\n\t\t\t\t\treturn value;\n\t\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\t\treturn invalid(value);\n\t\t\t\t} else {\n\t\t\t\t\treturn invalid;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//select\n\t\tlookup: function lookup(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue();\n\n\t\t\tif (typeof formatterParams[value] === \"undefined\") {\n\t\t\t\tconsole.warn('Missing display value for ' + value);\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\treturn formatterParams[value];\n\t\t},\n\n\t\t//star rating\n\t\tstar: function star(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue(),\n\t\t\t    element = cell.getElement(),\n\t\t\t    maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\t\t\t    stars = document.createElement(\"span\"),\n\t\t\t    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\t\t\t    starActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\t\t\t    starInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t\t\t//style stars holder\n\t\t\tstars.style.verticalAlign = \"middle\";\n\n\t\t\t//style star\n\t\t\tstar.setAttribute(\"width\", \"14\");\n\t\t\tstar.setAttribute(\"height\", \"14\");\n\t\t\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\t\t\tstar.setAttribute(\"xml:space\", \"preserve\");\n\t\t\tstar.style.padding = \"0 1px\";\n\n\t\t\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\t\t\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\t\t\tfor (var i = 1; i <= maxStars; i++) {\n\t\t\t\tvar nextStar = star.cloneNode(true);\n\t\t\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\t\t\tstars.appendChild(nextStar);\n\t\t\t}\n\n\t\t\telement.style.whiteSpace = \"nowrap\";\n\t\t\telement.style.overflow = \"hidden\";\n\t\t\telement.style.textOverflow = \"ellipsis\";\n\n\t\t\telement.setAttribute(\"aria-label\", value);\n\n\t\t\treturn stars;\n\t\t},\n\n\t\ttraffic: function traffic(cell, formatterParams, onRendered) {\n\t\t\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\t\t\t    el = document.createElement(\"span\"),\n\t\t\t    max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\t\t\t    min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\t\t\t    colors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\t\t\t    color = \"#666666\",\n\t\t\t    percent,\n\t\t\t    percentValue;\n\n\t\t\tif (isNaN(value) || typeof cell.getValue() === \"undefined\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tel.classList.add(\"tabulator-traffic-light\");\n\n\t\t\t//make sure value is in range\n\t\t\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\t\t\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t\t\t//workout percentage\n\t\t\tpercent = (max - min) / 100;\n\t\t\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t\t\t//set color\n\t\t\tswitch (typeof colors === 'undefined' ? 'undefined' : _typeof(colors)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcolor = colors;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tcolor = colors(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif (Array.isArray(colors)) {\n\t\t\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\t\tcolor = colors[index];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tel.style.backgroundColor = color;\n\n\t\t\treturn el;\n\t\t},\n\n\t\t//progress bar\n\t\tprogress: function progress(cell, formatterParams, onRendered) {\n\t\t\t//progress bar\n\t\t\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\t\t\t    element = cell.getElement(),\n\t\t\t    max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\t\t\t    min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\t\t\t    legendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\t\t\t    percent,\n\t\t\t    percentValue,\n\t\t\t    color,\n\t\t\t    legend,\n\t\t\t    legendColor,\n\t\t\t    top,\n\t\t\t    left,\n\t\t\t    right,\n\t\t\t    bottom;\n\n\t\t\t//make sure value is in range\n\t\t\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\t\t\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t\t\t//workout percentage\n\t\t\tpercent = (max - min) / 100;\n\t\t\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t\t\t//set bar color\n\t\t\tswitch (_typeof(formatterParams.color)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcolor = formatterParams.color;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tcolor = formatterParams.color(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif (Array.isArray(formatterParams.color)) {\n\t\t\t\t\t\tvar unit = 100 / formatterParams.color.length;\n\t\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tcolor = \"#2DC214\";\n\t\t\t}\n\n\t\t\t//generate legend\n\t\t\tswitch (_typeof(formatterParams.legend)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tlegend = formatterParams.legend;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tlegend = formatterParams.legend(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tlegend = value;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlegend = false;\n\t\t\t}\n\n\t\t\t//set legend color\n\t\t\tswitch (_typeof(formatterParams.legendColor)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif (Array.isArray(formatterParams.legendColor)) {\n\t\t\t\t\t\tvar unit = 100 / formatterParams.legendColor.length;\n\t\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlegendColor = \"#000\";\n\t\t\t}\n\n\t\t\telement.style.minWidth = \"30px\";\n\t\t\telement.style.position = \"relative\";\n\n\t\t\telement.setAttribute(\"aria-label\", percentValue);\n\n\t\t\tvar barEl = document.createElement(\"div\");\n\t\t\tbarEl.style.display = \"inline-block\";\n\t\t\tbarEl.style.position = \"relative\";\n\t\t\tbarEl.style.width = percentValue + \"%\";\n\t\t\tbarEl.style.backgroundColor = color;\n\t\t\tbarEl.style.height = \"100%\";\n\n\t\t\tbarEl.setAttribute('data-max', max);\n\t\t\tbarEl.setAttribute('data-min', min);\n\n\t\t\tif (legend) {\n\t\t\t\tvar legendEl = document.createElement(\"div\");\n\t\t\t\tlegendEl.style.position = \"absolute\";\n\t\t\t\tlegendEl.style.top = \"4px\";\n\t\t\t\tlegendEl.style.left = 0;\n\t\t\t\tlegendEl.style.textAlign = legendAlign;\n\t\t\t\tlegendEl.style.width = \"100%\";\n\t\t\t\tlegendEl.style.color = legendColor;\n\t\t\t\tlegendEl.innerHTML = legend;\n\t\t\t}\n\n\t\t\tonRendered(function () {\n\n\t\t\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\t\t\tif (!(cell instanceof CellComponent)) {\n\t\t\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\t\t\tholderEl.style.position = \"absolute\";\n\t\t\t\t\tholderEl.style.top = \"4px\";\n\t\t\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\t\t\tholderEl.style.left = \"4px\";\n\t\t\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\t\t\telement.appendChild(holderEl);\n\n\t\t\t\t\telement = holderEl;\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(barEl);\n\n\t\t\t\tif (legend) {\n\t\t\t\t\telement.appendChild(legendEl);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn \"\";\n\t\t},\n\n\t\t//background color\n\t\tcolor: function color(cell, formatterParams, onRendered) {\n\t\t\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\t\t\treturn \"\";\n\t\t},\n\n\t\t//tick icon\n\t\tbuttonTick: function buttonTick(cell, formatterParams, onRendered) {\n\t\t\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n\t\t},\n\n\t\t//cross icon\n\t\tbuttonCross: function buttonCross(cell, formatterParams, onRendered) {\n\t\t\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\t\t},\n\n\t\t//current row number\n\t\trownum: function rownum(cell, formatterParams, onRendered) {\n\t\t\treturn this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\n\t\t},\n\n\t\t//row handle\n\t\thandle: function handle(cell, formatterParams, onRendered) {\n\t\t\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\t\t\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n\t\t},\n\n\t\tresponsiveCollapse: function responsiveCollapse(cell, formatterParams, onRendered) {\n\t\t\tvar self = this,\n\t\t\t    open = false,\n\t\t\t    el = document.createElement(\"div\"),\n\t\t\t    config = cell.getRow()._row.modules.responsiveLayout;\n\n\t\t\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\t\tel.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\n\n\t\t\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\t\t\tfunction toggleList(isOpen) {\n\t\t\t\tvar collapseEl = config.element;\n\n\t\t\t\tconfig.open = isOpen;\n\n\t\t\t\tif (collapseEl) {\n\n\t\t\t\t\tif (config.open) {\n\t\t\t\t\t\tel.classList.add(\"open\");\n\t\t\t\t\t\tcollapseEl.style.display = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tel.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\ttoggleList(!config.open);\n\t\t\t});\n\n\t\t\ttoggleList(config.open);\n\n\t\t\treturn el;\n\t\t},\n\n\t\trowSelection: function rowSelection(cell) {\n\t\t\tvar _this52 = this;\n\n\t\t\tvar checkbox = document.createElement(\"input\");\n\n\t\t\tcheckbox.type = 'checkbox';\n\n\t\t\tif (this.table.modExists(\"selectRow\", true)) {\n\n\t\t\t\tcheckbox.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\n\t\t\t\tif (typeof cell.getRow == 'function') {\n\t\t\t\t\tvar row = cell.getRow();\n\n\t\t\t\t\tcheckbox.addEventListener(\"change\", function (e) {\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t});\n\n\t\t\t\t\tcheckbox.checked = row.isSelected();\n\t\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t\t} else {\n\t\t\t\t\tcheckbox.addEventListener(\"change\", function (e) {\n\t\t\t\t\t\tif (_this52.table.modules.selectRow.selectedRows.length) {\n\t\t\t\t\t\t\t_this52.table.deselectRow();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this52.table.selectRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn checkbox;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"format\", Format);\n\n\tvar FrozenColumns = function FrozenColumns(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.leftMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.rightPadding = 0;\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.scrollEndTimer = false;\n\t};\n\n\t//reset initial state\n\tFrozenColumns.prototype.reset = function () {\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.leftMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.active = false;\n\n\t\tthis.table.columnManager.headersElement.style.marginLeft = 0;\n\t\tthis.table.columnManager.element.style.paddingRight = 0;\n\t};\n\n\t//initialize specific column\n\tFrozenColumns.prototype.initializeColumn = function (column) {\n\t\tvar config = { margin: 0, edge: false };\n\n\t\tif (!column.isGroup) {\n\n\t\t\tif (this.frozenCheck(column)) {\n\n\t\t\t\tconfig.position = this.initializationMode;\n\n\t\t\t\tif (this.initializationMode == \"left\") {\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t} else {\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\n\t\t\t\tthis.active = true;\n\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t} else {\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t};\n\n\tFrozenColumns.prototype.frozenCheck = function (column) {\n\t\tvar frozen = false;\n\n\t\tif (column.parent.isGroup && column.definition.frozen) {\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\n\t\tif (column.parent.isGroup) {\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t} else {\n\t\t\treturn column.definition.frozen;\n\t\t}\n\n\t\treturn frozen;\n\t};\n\n\t//quick layout to smooth horizontal scrolling\n\tFrozenColumns.prototype.scrollHorizontal = function () {\n\t\tvar _this53 = this;\n\n\t\tvar rows;\n\n\t\tif (this.active) {\n\t\t\tclearTimeout(this.scrollEndTimer);\n\n\t\t\t//layout all rows after scroll is complete\n\t\t\tthis.scrollEndTimer = setTimeout(function () {\n\t\t\t\t_this53.layout();\n\t\t\t}, 100);\n\n\t\t\trows = this.table.rowManager.getVisibleRows();\n\n\t\t\tthis.calcMargins();\n\n\t\t\tthis.layoutColumnPosition();\n\n\t\t\tthis.layoutCalcRows();\n\n\t\t\trows.forEach(function (row) {\n\t\t\t\tif (row.type === \"row\") {\n\t\t\t\t\t_this53.layoutRow(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n\t\t}\n\t};\n\n\t//calculate margins for rows\n\tFrozenColumns.prototype.calcMargins = function () {\n\t\tthis.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\n\t\tthis.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\n\n\t\tthis.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\n\t\tthis.table.columnManager.element.style.paddingRight = this.rightMargin;\n\n\t\t//calculate right frozen columns\n\t\tthis.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\n\t};\n\n\t//layout calculation rows\n\tFrozenColumns.prototype.layoutCalcRows = function () {\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\t\t\tif (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\tif (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\t};\n\n\t//calculate column positions and layout headers\n\tFrozenColumns.prototype.layoutColumnPosition = function (allCells) {\n\t\tvar _this54 = this;\n\n\t\tvar leftParents = [];\n\n\t\tthis.leftColumns.forEach(function (column, i) {\n\t\t\tcolumn.modules.frozen.margin = _this54._calcSpace(_this54.leftColumns, i) + _this54.table.columnManager.scrollLeft + \"px\";\n\n\t\t\tif (i == _this54.leftColumns.length - 1) {\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t} else {\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\n\t\t\tif (column.parent.isGroup) {\n\t\t\t\tvar parentEl = _this54.getColGroupParentElement(column);\n\t\t\t\tif (!leftParents.includes(parentEl)) {\n\t\t\t\t\t_this54.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\n\t\t\t\tif (column.modules.frozen.edge) {\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_this54.layoutElement(column.getElement(), column);\n\t\t\t}\n\n\t\t\tif (allCells) {\n\t\t\t\tcolumn.cells.forEach(function (cell) {\n\t\t\t\t\t_this54.layoutElement(cell.getElement(), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.rightColumns.forEach(function (column, i) {\n\t\t\tcolumn.modules.frozen.margin = _this54.rightPadding - _this54._calcSpace(_this54.rightColumns, i + 1) + \"px\";\n\n\t\t\tif (i == _this54.rightColumns.length - 1) {\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t} else {\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\n\t\t\tif (column.parent.isGroup) {\n\t\t\t\t_this54.layoutElement(_this54.getColGroupParentElement(column), column);\n\t\t\t} else {\n\t\t\t\t_this54.layoutElement(column.getElement(), column);\n\t\t\t}\n\n\t\t\tif (allCells) {\n\t\t\t\tcolumn.cells.forEach(function (cell) {\n\t\t\t\t\t_this54.layoutElement(cell.getElement(), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tFrozenColumns.prototype.getColGroupParentElement = function (column) {\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t};\n\n\t//layout columns appropropriatly\n\tFrozenColumns.prototype.layout = function () {\n\t\tvar self = this,\n\t\t    rightMargin = 0;\n\n\t\tif (self.active) {\n\n\t\t\t//calculate row padding\n\t\t\tthis.calcMargins();\n\n\t\t\t// self.table.rowManager.activeRows.forEach(function(row){\n\t\t\t// \tself.layoutRow(row);\n\t\t\t// });\n\n\t\t\t// if(self.table.options.dataTree){\n\t\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\t\tif (row.type === \"row\") {\n\t\t\t\t\tself.layoutRow(row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// }\n\n\t\t\tthis.layoutCalcRows();\n\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition(true);\n\n\t\t\t// if(tableHolder.scrollHeight > tableHolder.clientHeight){\n\t\t\t// \trightMargin -= tableHolder.offsetWidth - tableHolder.clientWidth;\n\t\t\t// }\n\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n\t\t}\n\t};\n\n\tFrozenColumns.prototype.layoutRow = function (row) {\n\t\tvar _this55 = this;\n\n\t\tvar rowEl = row.getElement();\n\n\t\trowEl.style.paddingLeft = this.leftMargin;\n\t\t// rowEl.style.paddingRight = this.rightMargin + \"px\";\n\n\t\tthis.leftColumns.forEach(function (column) {\n\t\t\tvar cell = row.getCell(column);\n\n\t\t\tif (cell) {\n\t\t\t\t_this55.layoutElement(cell.getElement(), column);\n\t\t\t}\n\t\t});\n\n\t\tthis.rightColumns.forEach(function (column) {\n\t\t\tvar cell = row.getCell(column);\n\n\t\t\tif (cell) {\n\t\t\t\t_this55.layoutElement(cell.getElement(), column);\n\t\t\t}\n\t\t});\n\t};\n\n\tFrozenColumns.prototype.layoutElement = function (element, column) {\n\n\t\tif (column.modules.frozen) {\n\t\t\telement.style.position = \"absolute\";\n\t\t\telement.style.left = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\n\t\t\tif (column.modules.frozen.edge) {\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t}\n\t\t}\n\t};\n\n\tFrozenColumns.prototype._calcSpace = function (columns, index) {\n\t\tvar width = 0;\n\n\t\tfor (var i = 0; i < index; i++) {\n\t\t\tif (columns[i].visible) {\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\n\t\treturn width;\n\t};\n\n\tTabulator.prototype.registerModule(\"frozenColumns\", FrozenColumns);\n\tvar FrozenRows = function FrozenRows(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\t\tthis.displayIndex = 0; //index in display pipeline\n\t};\n\n\tFrozenRows.prototype.initialize = function () {\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t};\n\n\tFrozenRows.prototype.setDisplayIndex = function (index) {\n\t\tthis.displayIndex = index;\n\t};\n\n\tFrozenRows.prototype.getDisplayIndex = function () {\n\t\treturn this.displayIndex;\n\t};\n\n\tFrozenRows.prototype.isFrozen = function () {\n\t\treturn !!this.rows.length;\n\t};\n\n\t//filter frozen rows out of display data\n\tFrozenRows.prototype.getRows = function (rows) {\n\t\tvar self = this,\n\t\t    frozen = [],\n\t\t    output = rows.slice(0);\n\n\t\tthis.rows.forEach(function (row) {\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif (index > -1) {\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tFrozenRows.prototype.freezeRow = function (row) {\n\t\tif (!row.modules.frozen) {\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\");\n\n\t\t\tthis.styleRows();\n\t\t} else {\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t};\n\n\tFrozenRows.prototype.unfreezeRow = function (row) {\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif (row.modules.frozen) {\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tvar rowEl = row.getElement();\n\t\t\trowEl.parentNode.removeChild(rowEl);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.rows.splice(index, 1);\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\");\n\n\t\t\tif (this.rows.length) {\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t};\n\n\tFrozenRows.prototype.styleRows = function (row) {\n\t\tvar self = this;\n\n\t\tthis.rows.forEach(function (row, i) {\n\t\t\tself.table.rowManager.styleRow(row, i);\n\t\t});\n\t};\n\n\tTabulator.prototype.registerModule(\"frozenRows\", FrozenRows);\n\n\t//public group object\n\tvar GroupComponent = function GroupComponent(group) {\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\t};\n\n\tGroupComponent.prototype.getKey = function () {\n\t\treturn this._group.key;\n\t};\n\n\tGroupComponent.prototype.getField = function () {\n\t\treturn this._group.field;\n\t};\n\n\tGroupComponent.prototype.getElement = function () {\n\t\treturn this._group.element;\n\t};\n\n\tGroupComponent.prototype.getRows = function () {\n\t\treturn this._group.getRows(true);\n\t};\n\n\tGroupComponent.prototype.getSubGroups = function () {\n\t\treturn this._group.getSubGroups(true);\n\t};\n\n\tGroupComponent.prototype.getParentGroup = function () {\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t};\n\n\tGroupComponent.prototype.getVisibility = function () {\n\t\treturn this._group.visible;\n\t};\n\n\tGroupComponent.prototype.show = function () {\n\t\tthis._group.show();\n\t};\n\n\tGroupComponent.prototype.hide = function () {\n\t\tthis._group.hide();\n\t};\n\n\tGroupComponent.prototype.toggle = function () {\n\t\tthis._group.toggleVisibility();\n\t};\n\n\tGroupComponent.prototype._getSelf = function () {\n\t\treturn this._group;\n\t};\n\n\tGroupComponent.prototype.getTable = function () {\n\t\treturn this._group.groupManager.table;\n\t};\n\n\t//////////////////////////////////////////////////\n\t//////////////// Group Functions /////////////////\n\t//////////////////////////////////////////////////\n\n\tvar Group = function Group(groupManager, parent, level, key, field, generator, oldGroup) {\n\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < groupManager.groupIDLookups.length - 1;\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\n\t\tthis.visible = oldGroup ? oldGroup.visible : typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0];\n\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\n\t\tthis.createValueGroups();\n\t};\n\n\tGroup.prototype.wipe = function () {\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.element = false;\n\t\t\tthis.arrowElement = false;\n\t\t\tthis.elementContents = false;\n\t\t}\n\t};\n\n\tGroup.prototype.createElements = function () {\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\n\t\t//setup movable rows\n\t\tif (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")) {\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t};\n\n\tGroup.prototype.createValueGroups = function () {\n\t\tvar _this56 = this;\n\n\t\tvar level = this.level + 1;\n\t\tif (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n\t\t\tthis.groupManager.allowedValues[level].forEach(function (value) {\n\t\t\t\t_this56._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t};\n\n\tGroup.prototype.addBindings = function () {\n\t\tvar self = this,\n\t\t    dblTap,\n\t\t    tapHold,\n\t\t    tap,\n\t\t    toggleElement;\n\n\t\t//handle group click events\n\t\tif (self.groupManager.table.options.groupClick) {\n\t\t\tself.element.addEventListener(\"click\", function (e) {\n\t\t\t\tself.groupManager.table.options.groupClick.call(self.groupManager.table, e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupDblClick) {\n\t\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\t\t\t\tself.groupManager.table.options.groupDblClick.call(self.groupManager.table, e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupContext) {\n\t\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\t\t\t\tself.groupManager.table.options.groupContext.call(self.groupManager.table, e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupTap) {\n\n\t\t\ttap = false;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\t\ttap = true;\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\t\tif (tap) {\n\t\t\t\t\tself.groupManager.table.options.groupTap(e, self.getComponent());\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupDblTap) {\n\n\t\t\tdblTap = null;\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (dblTap) {\n\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tself.groupManager.table.options.groupDblTap(e, self.getComponent());\n\t\t\t\t} else {\n\n\t\t\t\t\tdblTap = setTimeout(function () {\n\t\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupTapHold) {\n\n\t\t\ttapHold = null;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function () {\n\t\t\t\t\tclearTimeout(tapHold);\n\t\t\t\t\ttapHold = null;\n\t\t\t\t\ttap = false;\n\t\t\t\t\tself.groupManager.table.options.groupTapHold(e, self.getComponent());\n\t\t\t\t}, 1000);\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\t\tclearTimeout(tapHold);\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupToggleElement) {\n\t\t\ttoggleElement = self.groupManager.table.options.groupToggleElement == \"arrow\" ? self.arrowElement : self.element;\n\n\t\t\ttoggleElement.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tself.toggleVisibility();\n\t\t\t});\n\t\t}\n\t};\n\n\tGroup.prototype._createGroup = function (groupID, level) {\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID, this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t};\n\n\tGroup.prototype._addRowToGroup = function (row) {\n\n\t\tvar level = this.level + 1;\n\n\t\tif (this.hasSubGroups) {\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\t    groupKey = level + \"_\" + groupID;\n\n\t\t\tif (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n\t\t\t\tif (this.groups[groupKey]) {\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!this.groups[groupKey]) {\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t};\n\n\tGroup.prototype._addRow = function (row) {\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t};\n\n\tGroup.prototype.insertRow = function (row, to, after) {\n\t\tvar data = this.conformRowData({});\n\n\t\trow.updateData(data);\n\n\t\tvar toIndex = this.rows.indexOf(to);\n\n\t\tif (toIndex > -1) {\n\t\t\tif (after) {\n\t\t\t\tthis.rows.splice(toIndex + 1, 0, row);\n\t\t\t} else {\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t} else {\n\t\t\tif (after) {\n\t\t\t\tthis.rows.push(row);\n\t\t\t} else {\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\n\t\trow.modules.group = this;\n\n\t\tthis.generateGroupHeaderContents();\n\n\t\tif (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\n\t\tthis.groupManager.updateGroupRows(true);\n\t};\n\n\tGroup.prototype.scrollHeader = function (left) {\n\t\tthis.arrowElement.style.marginLeft = left;\n\n\t\tthis.groupList.forEach(function (child) {\n\t\t\tchild.scrollHeader(left);\n\t\t});\n\t};\n\n\tGroup.prototype.getRowIndex = function (row) {};\n\n\t//update row data to match grouping contraints\n\tGroup.prototype.conformRowData = function (data) {\n\t\tif (this.field) {\n\t\t\tdata[this.field] = this.key;\n\t\t} else {\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\n\t\tif (this.parent) {\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tGroup.prototype.removeRow = function (row) {\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\n\t\tif (index > -1) {\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\n\t\tif (!this.groupManager.table.options.groupValues && !this.rows.length) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t} else {\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\n\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t} else {\n\n\t\t\tif (el.parentNode) {\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\n\t\t\tthis.generateGroupHeaderContents();\n\n\t\t\tif (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t}\n\t\t}\n\t};\n\n\tGroup.prototype.removeGroup = function (group) {\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\t    index;\n\n\t\tif (this.groups[groupKey]) {\n\t\t\tdelete this.groups[groupKey];\n\n\t\t\tindex = this.groupList.indexOf(group);\n\n\t\t\tif (index > -1) {\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\n\t\t\tif (!this.groupList.length) {\n\t\t\t\tif (this.parent) {\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t} else {\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tGroup.prototype.getHeadersAndRows = function (noCalc) {\n\t\tvar output = [];\n\n\t\toutput.push(this);\n\n\t\tthis._visSet();\n\n\t\tif (this.visible) {\n\t\t\tif (this.groupList.length) {\n\t\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows(noCalc));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n\t\t\t\t\tif (this.calcs.top) {\n\t\t\t\t\t\tthis.calcs.top.detachElement();\n\t\t\t\t\t\tthis.calcs.top.deleteCells();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\n\t\t\t\toutput = output.concat(this.rows);\n\n\t\t\t\tif (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n\t\t\t\t\tif (this.calcs.bottom) {\n\t\t\t\t\t\tthis.calcs.bottom.detachElement();\n\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\") {\n\n\t\t\t\tif (this.groupManager.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\tif (!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n\t\t\t\t\t\tif (this.calcs.top) {\n\t\t\t\t\t\t\tthis.calcs.top.detachElement();\n\t\t\t\t\t\t\tthis.calcs.top.deleteCells();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.groupManager.table.options.groupClosedShowCalcs) {\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n\t\t\t\t\t\tif (this.calcs.bottom) {\n\t\t\t\t\t\t\tthis.calcs.bottom.detachElement();\n\t\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.groupManager.table.options.groupClosedShowCalcs) {\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tGroup.prototype.getData = function (visible, transform) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tthis._visSet();\n\n\t\tif (!visible || visible && this.visible) {\n\t\t\tthis.rows.forEach(function (row) {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\t// Group.prototype.getRows = function(){\n\t// \tthis._visSet();\n\n\t// \treturn this.visible ? this.rows : [];\n\t// };\n\n\tGroup.prototype.getRowCount = function () {\n\t\tvar count = 0;\n\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t} else {\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t};\n\n\tGroup.prototype.toggleVisibility = function () {\n\t\tif (this.visible) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tthis.show();\n\t\t}\n\t};\n\n\tGroup.prototype.hide = function () {\n\t\tthis.visible = false;\n\n\t\tif (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\n\t\t\tif (this.groupList.length) {\n\t\t\t\tthis.groupList.forEach(function (group) {\n\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\n\t\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.rows.forEach(function (row) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n\t\t} else {\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\n\t\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), false);\n\t};\n\n\tGroup.prototype.show = function () {\n\t\tvar self = this;\n\n\t\tself.visible = true;\n\n\t\tif (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\n\t\t\tvar prev = self.getElement();\n\n\t\t\tif (this.groupList.length) {\n\t\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\n\t\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.rows.forEach(function (row) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n\t\t} else {\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\n\t\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), true);\n\t};\n\n\tGroup.prototype._visSet = function () {\n\t\tvar data = [];\n\n\t\tif (typeof this.visible == \"function\") {\n\n\t\t\tthis.rows.forEach(function (row) {\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t};\n\n\tGroup.prototype.getRowGroup = function (row) {\n\t\tvar match = false;\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\tvar result = group.getRowGroup(row);\n\n\t\t\t\tif (result) {\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.rows.find(function (item) {\n\t\t\t\treturn item === row;\n\t\t\t})) {\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t};\n\n\tGroup.prototype.getSubGroups = function (component) {\n\t\tvar output = [];\n\n\t\tthis.groupList.forEach(function (child) {\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tGroup.prototype.getRows = function (compoment) {\n\t\tvar output = [];\n\n\t\tthis.rows.forEach(function (row) {\n\t\t\toutput.push(compoment ? row.getComponent() : row);\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tGroup.prototype.generateGroupHeaderContents = function () {\n\t\tvar data = [];\n\n\t\tthis.rows.forEach(function (row) {\n\t\t\tdata.push(row.getData());\n\t\t});\n\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\n\t\twhile (this.element.firstChild) {\n\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t}if (typeof this.elementContents === \"string\") {\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t} else {\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t};\n\n\t////////////// Standard Row Functions //////////////\n\n\tGroup.prototype.getElement = function () {\n\t\tthis.addBindingsd = false;\n\n\t\tthis._visSet();\n\n\t\tif (this.visible) {\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t} else {\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\n\t\tfor (var i = 0; i < this.element.childNodes.length; ++i) {\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\n\t\tthis.generateGroupHeaderContents();\n\n\t\t// this.addBindings();\n\n\t\treturn this.element;\n\t};\n\n\tGroup.prototype.detachElement = function () {\n\t\tif (this.element && this.element.parentNode) {\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t};\n\n\t//normalize the height of elements in the row\n\tGroup.prototype.normalizeHeight = function () {\n\t\tthis.setHeight(this.element.clientHeight);\n\t};\n\n\tGroup.prototype.initialize = function (force) {\n\t\tif (!this.initialized || force) {\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t};\n\n\tGroup.prototype.reinitialize = function () {\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\n\t\tif (Tabulator.prototype.helpers.elVisible(this.element)) {\n\t\t\tthis.initialize(true);\n\t\t}\n\t};\n\n\tGroup.prototype.setHeight = function (height) {\n\t\tif (this.height != height) {\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t};\n\n\t//return rows outer height\n\tGroup.prototype.getHeight = function () {\n\t\treturn this.outerHeight;\n\t};\n\n\tGroup.prototype.getGroup = function () {\n\t\treturn this;\n\t};\n\n\tGroup.prototype.reinitializeHeight = function () {};\n\tGroup.prototype.calcHeight = function () {};\n\tGroup.prototype.setCellHeight = function () {};\n\tGroup.prototype.clearCellHeight = function () {};\n\n\t//////////////// Object Generation /////////////////\n\tGroup.prototype.getComponent = function () {\n\t\treturn new GroupComponent(this);\n\t};\n\n\t//////////////////////////////////////////////////\n\t////////////// Group Row Extension ///////////////\n\t//////////////////////////////////////////////////\n\n\tvar GroupRows = function GroupRows(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function () {\n\t\t\treturn false;\n\t\t}]; //starting state of group\n\t\tthis.headerGenerator = [function () {\n\t\t\treturn \"\";\n\t\t}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\tthis.displayIndex = 0; //index in display pipeline\n\t};\n\n\t//initialize group configuration\n\tGroupRows.prototype.initialize = function () {\n\t\tvar self = this,\n\t\t    groupBy = self.table.options.groupBy,\n\t\t    startOpen = self.table.options.groupStartOpen,\n\t\t    groupHeader = self.table.options.groupHeader;\n\n\t\tthis.allowedValues = self.table.options.groupValues;\n\n\t\tif (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\n\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t}\n\n\t\tself.headerGenerator = [function () {\n\t\t\treturn \"\";\n\t\t}];\n\t\tthis.startOpen = [function () {\n\t\t\treturn false;\n\t\t}]; //starting state of group\n\n\t\tself.table.modules.localize.bind(\"groups|item\", function (langValue, lang) {\n\t\t\tself.headerGenerator[0] = function (value, count, data) {\n\t\t\t\t//header layout function\n\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + (count === 1 ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t};\n\t\t});\n\n\t\tthis.groupIDLookups = [];\n\n\t\tif (Array.isArray(groupBy) || groupBy) {\n\t\t\tif (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\") {\n\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\") {\n\n\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\n\t\t\t\tcols.forEach(function (col) {\n\t\t\t\t\tif (col.definition.topCalc) {\n\t\t\t\t\t\tself.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (col.definition.bottomCalc) {\n\t\t\t\t\t\tself.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!Array.isArray(groupBy)) {\n\t\t\tgroupBy = [groupBy];\n\t\t}\n\n\t\tgroupBy.forEach(function (group, i) {\n\t\t\tvar lookupFunc, column;\n\n\t\t\tif (typeof group == \"function\") {\n\t\t\t\tlookupFunc = group;\n\t\t\t} else {\n\t\t\t\tcolumn = self.table.columnManager.getColumnByField(group);\n\n\t\t\t\tif (column) {\n\t\t\t\t\tlookupFunc = function lookupFunc(data) {\n\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tlookupFunc = function lookupFunc(data) {\n\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself.groupIDLookups.push({\n\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\tfunc: lookupFunc,\n\t\t\t\tvalues: self.allowedValues ? self.allowedValues[i] : false\n\t\t\t});\n\t\t});\n\n\t\tif (startOpen) {\n\n\t\t\tif (!Array.isArray(startOpen)) {\n\t\t\t\tstartOpen = [startOpen];\n\t\t\t}\n\n\t\t\tstartOpen.forEach(function (level) {\n\t\t\t\tlevel = typeof level == \"function\" ? level : function () {\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tself.startOpen = startOpen;\n\t\t}\n\n\t\tif (groupHeader) {\n\t\t\tself.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t}\n\n\t\tthis.initialized = true;\n\t};\n\n\tGroupRows.prototype.setDisplayIndex = function (index) {\n\t\tthis.displayIndex = index;\n\t};\n\n\tGroupRows.prototype.getDisplayIndex = function () {\n\t\treturn this.displayIndex;\n\t};\n\n\t//return appropriate rows with group headers\n\tGroupRows.prototype.getRows = function (rows) {\n\t\tif (this.groupIDLookups.length) {\n\n\t\t\tthis.table.options.dataGrouping.call(this.table);\n\n\t\t\tthis.generateGroups(rows);\n\n\t\t\tif (this.table.options.dataGrouped) {\n\t\t\t\tthis.table.options.dataGrouped.call(this.table, this.getGroups(true));\n\t\t\t}\n\n\t\t\treturn this.updateGroupRows();\n\t\t} else {\n\t\t\treturn rows.slice(0);\n\t\t}\n\t};\n\n\tGroupRows.prototype.getGroups = function (compoment) {\n\t\tvar groupComponents = [];\n\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tgroupComponents.push(compoment ? group.getComponent() : group);\n\t\t});\n\n\t\treturn groupComponents;\n\t};\n\n\tGroupRows.prototype.getChildGroups = function (group) {\n\t\tvar _this57 = this;\n\n\t\tvar groupComponents = [];\n\n\t\tif (!group) {\n\t\t\tgroup = this;\n\t\t}\n\n\t\tgroup.groupList.forEach(function (child) {\n\t\t\tif (child.groupList.length) {\n\t\t\t\tgroupComponents = groupComponents.concat(_this57.getChildGroups(child));\n\t\t\t} else {\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\n\t\treturn groupComponents;\n\t};\n\n\tGroupRows.prototype.wipe = function () {\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tgroup.wipe();\n\t\t});\n\t};\n\n\tGroupRows.prototype.pullGroupListData = function (groupList) {\n\t\tvar self = this;\n\t\tvar groupListData = [];\n\n\t\tgroupList.forEach(function (group) {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = self.pullGroupListData(group.groupList);\n\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t} else {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\n\t\t\t\tgroupListData.push(groupHeader);\n\n\t\t\t\tgroup.getRows().forEach(function (row) {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn groupListData;\n\t};\n\n\tGroupRows.prototype.getGroupedData = function () {\n\n\t\treturn this.pullGroupListData(this.groupList);\n\t};\n\n\tGroupRows.prototype.getRowGroup = function (row) {\n\t\tvar match = false;\n\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tvar result = group.getRowGroup(row);\n\n\t\t\tif (result) {\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\n\t\treturn match;\n\t};\n\n\tGroupRows.prototype.countGroups = function () {\n\t\treturn this.groupList.length;\n\t};\n\n\tGroupRows.prototype.generateGroups = function (rows) {\n\t\tvar self = this,\n\t\t    oldGroups = self.groups;\n\n\t\tself.groups = {};\n\t\tself.groupList = [];\n\n\t\tif (this.allowedValues && this.allowedValues[0]) {\n\t\t\tthis.allowedValues[0].forEach(function (value) {\n\t\t\t\tself.createGroup(value, 0, oldGroups);\n\t\t\t});\n\n\t\t\trows.forEach(function (row) {\n\t\t\t\tself.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t} else {\n\t\t\trows.forEach(function (row) {\n\t\t\t\tself.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t};\n\n\tGroupRows.prototype.createGroup = function (groupID, level, oldGroups) {\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\t    group;\n\n\t\toldGroups = oldGroups || [];\n\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t};\n\n\t// GroupRows.prototype.assignRowToGroup = function(row, oldGroups){\n\t// \tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t// \tgroupKey = \"0_\" + groupID;\n\n\t// \tif(!this.groups[groupKey]){\n\t// \t\tthis.createGroup(groupID, 0, oldGroups);\n\t// \t}\n\n\t// \tthis.groups[groupKey].addRow(row);\n\t// };\n\n\tGroupRows.prototype.assignRowToExistingGroup = function (row, oldGroups) {\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\t    groupKey = \"0_\" + groupID;\n\n\t\tif (this.groups[groupKey]) {\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t};\n\n\tGroupRows.prototype.assignRowToGroup = function (row, oldGroups) {\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\t    newGroupNeeded = !this.groups[\"0_\" + groupID];\n\n\t\tif (newGroupNeeded) {\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\n\t\treturn !newGroupNeeded;\n\t};\n\n\tGroupRows.prototype.updateGroupRows = function (force) {\n\t\tvar self = this,\n\t\t    output = [],\n\t\t    oldRowCount;\n\n\t\tself.groupList.forEach(function (group) {\n\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t});\n\n\t\t//force update of table display\n\t\tif (force) {\n\n\t\t\tvar displayIndex = self.table.rowManager.setDisplayRows(output, this.getDisplayIndex());\n\n\t\t\tif (displayIndex !== true) {\n\t\t\t\tthis.setDisplayIndex(displayIndex);\n\t\t\t}\n\n\t\t\tself.table.rowManager.refreshActiveData(\"group\", true, true);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tGroupRows.prototype.scrollHeaders = function (left) {\n\t\tleft = left + \"px\";\n\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tgroup.scrollHeader(left);\n\t\t});\n\t};\n\n\tGroupRows.prototype.removeGroup = function (group) {\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\t    index;\n\n\t\tif (this.groups[groupKey]) {\n\t\t\tdelete this.groups[groupKey];\n\n\t\t\tindex = this.groupList.indexOf(group);\n\n\t\t\tif (index > -1) {\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"groupRows\", GroupRows);\n\tvar History = function History(table) {\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t};\n\n\tHistory.prototype.clear = function () {\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t};\n\n\tHistory.prototype.action = function (type, component, data) {\n\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype: type,\n\t\t\tcomponent: component,\n\t\t\tdata: data\n\t\t});\n\n\t\tthis.index++;\n\t};\n\n\tHistory.prototype.getHistoryUndoSize = function () {\n\t\treturn this.index + 1;\n\t};\n\n\tHistory.prototype.getHistoryRedoSize = function () {\n\t\treturn this.history.length - (this.index + 1);\n\t};\n\n\tHistory.prototype.undo = function () {\n\n\t\tif (this.index > -1) {\n\t\t\tvar action = this.history[this.index];\n\n\t\t\tthis.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.table.options.historyUndo.call(this.table, action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tHistory.prototype.redo = function () {\n\t\tif (this.history.length - 1 > this.index) {\n\n\t\t\tthis.index++;\n\n\t\t\tvar action = this.history[this.index];\n\n\t\t\tthis.redoers[action.type].call(this, action);\n\n\t\t\tthis.table.options.historyRedo.call(this.table, action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tHistory.prototype.undoers = {\n\t\tcellEdit: function cellEdit(action) {\n\t\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\t},\n\n\t\trowAdd: function rowAdd(action) {\n\t\t\taction.component.deleteActual();\n\t\t},\n\n\t\trowDelete: function rowDelete(action) {\n\t\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t\t}\n\n\t\t\tthis._rebindRow(action.component, newRow);\n\t\t},\n\n\t\trowMove: function rowMove(action) {\n\t\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n\t\t\tthis.table.rowManager.redraw();\n\t\t}\n\t};\n\n\tHistory.prototype.redoers = {\n\t\tcellEdit: function cellEdit(action) {\n\t\t\taction.component.setValueProcessData(action.data.newValue);\n\t\t},\n\n\t\trowAdd: function rowAdd(action) {\n\t\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t\t}\n\n\t\t\tthis._rebindRow(action.component, newRow);\n\t\t},\n\n\t\trowDelete: function rowDelete(action) {\n\t\t\taction.component.deleteActual();\n\t\t},\n\n\t\trowMove: function rowMove(action) {\n\t\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n\t\t\tthis.table.rowManager.redraw();\n\t\t}\n\t};\n\n\t//rebind rows to new element after deletion\n\tHistory.prototype._rebindRow = function (oldRow, newRow) {\n\t\tthis.history.forEach(function (action) {\n\t\t\tif (action.component instanceof Row) {\n\t\t\t\tif (action.component === oldRow) {\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t} else if (action.component instanceof Cell) {\n\t\t\t\tif (action.component.row === oldRow) {\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif (field) {\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.registerModule(\"history\", History);\n\tvar HtmlTableImport = function HtmlTableImport(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t};\n\n\tHtmlTableImport.prototype.parseTable = function () {\n\t\tvar self = this,\n\t\t    element = self.table.element,\n\t\t    options = self.table.options,\n\t\t    columns = options.columns,\n\t\t    headers = element.getElementsByTagName(\"th\"),\n\t\t    rows = element.getElementsByTagName(\"tbody\")[0],\n\t\t    data = [],\n\t\t    newTable;\n\n\t\tself.hasIndex = false;\n\n\t\tself.table.options.htmlImporting.call(this.table);\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for tablator inline options\n\t\tself._extractOptions(element, options);\n\n\t\tif (headers.length) {\n\t\t\tself._extractHeaders(headers, rows);\n\t\t} else {\n\t\t\tself._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor (var index = 0; index < rows.length; index++) {\n\t\t\tvar row = rows[index],\n\t\t\t    cells = row.getElementsByTagName(\"td\"),\n\t\t\t    item = {};\n\n\t\t\t//create index if the dont exist in table\n\t\t\tif (!self.hasIndex) {\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < cells.length; i++) {\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif (typeof this.fieldIndex[i] !== \"undefined\") {\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\t//create new element\n\t\tvar newElement = document.createElement(\"div\");\n\n\t\t//transfer attributes to new element\n\t\tvar attributes = element.attributes;\n\n\t\t// loop through attributes and apply them on div\n\n\t\tfor (var i in attributes) {\n\t\t\tif (_typeof(attributes[i]) == \"object\") {\n\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t}\n\t\t}\n\n\t\t// replace table with div element\n\t\telement.parentNode.replaceChild(newElement, element);\n\n\t\toptions.data = data;\n\n\t\tself.table.options.htmlImported.call(this.table);\n\n\t\t// // newElement.tabulator(options);\n\n\t\tthis.table.element = newElement;\n\t};\n\n\t//extract tabulator attribute options\n\tHtmlTableImport.prototype._extractOptions = function (element, options, defaultOptions) {\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.assign([], defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach(function (item) {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor (var index in attributes) {\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif (attrib && (typeof attrib === 'undefined' ? 'undefined' : _typeof(attrib)) == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0) {\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif (typeof optionsList[name] !== \"undefined\") {\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//get value of attribute\n\tHtmlTableImport.prototype._attribValue = function (value) {\n\t\tif (value === \"true\") {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (value === \"false\") {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t};\n\n\t//find column if it has already been defined\n\tHtmlTableImport.prototype._findCol = function (title) {\n\t\tvar match = this.table.options.columns.find(function (column) {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t};\n\n\t//extract column from headers\n\tHtmlTableImport.prototype._extractHeaders = function (headers, rows) {\n\t\tfor (var index = 0; index < headers.length; index++) {\n\t\t\tvar header = headers[index],\n\t\t\t    exists = false,\n\t\t\t    col = this._findCol(header.textContent),\n\t\t\t    width,\n\t\t\t    attributes;\n\n\t\t\tif (col) {\n\t\t\t\texists = true;\n\t\t\t} else {\n\t\t\t\tcol = { title: header.textContent.trim() };\n\t\t\t}\n\n\t\t\tif (!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif (width && !col.width) {\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for tablator inline options\n\t\t\tattributes = header.attributes;\n\n\t\t\t// //check for tablator inline options\n\t\t\tthis._extractOptions(header, col, Column.prototype.defaultOptionList);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif (col.field == this.table.options.index) {\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif (!exists) {\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\t\t}\n\t};\n\n\t//generate blank headers\n\tHtmlTableImport.prototype._generateBlankHeaders = function (headers, rows) {\n\t\tfor (var index = 0; index < headers.length; index++) {\n\t\t\tvar header = headers[index],\n\t\t\t    col = { title: \"\", field: \"col\" + index };\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif (width) {\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"htmlTableImport\", HtmlTableImport);\n\tvar Keybindings = function Keybindings(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\t};\n\n\tKeybindings.prototype.initialize = function () {\n\t\tvar bindings = this.table.options.keybindings,\n\t\t    mergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif (bindings !== false) {\n\n\t\t\tfor (var key in this.bindings) {\n\t\t\t\tmergedBindings[key] = this.bindings[key];\n\t\t\t}\n\n\t\t\tif (Object.keys(bindings).length) {\n\n\t\t\t\tfor (var _key in bindings) {\n\t\t\t\t\tmergedBindings[_key] = bindings[_key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\t};\n\n\tKeybindings.prototype.mapBindings = function (bindings) {\n\t\tvar _this58 = this;\n\n\t\tvar self = this;\n\n\t\tvar _loop2 = function _loop2(key) {\n\n\t\t\tif (_this58.actions[key]) {\n\n\t\t\t\tif (bindings[key]) {\n\n\t\t\t\t\tif (_typeof(bindings[key]) !== \"object\") {\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach(function (binding) {\n\t\t\t\t\t\tself.mapBinding(key, binding);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t};\n\n\t\tfor (var key in bindings) {\n\t\t\t_loop2(key);\n\t\t}\n\t};\n\n\tKeybindings.prototype.mapBinding = function (action, symbolsList) {\n\t\tvar self = this;\n\n\t\tvar binding = {\n\t\t\taction: this.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach(function (symbol) {\n\t\t\tswitch (symbol) {\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif (!self.watchKeys[symbol]) {\n\t\t\t\t\t\tself.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tself.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t};\n\n\tKeybindings.prototype.bindEvents = function () {\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function (e) {\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif (bindings) {\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function (binding) {\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function (e) {\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif (bindings) {\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t};\n\n\tKeybindings.prototype.clearBindings = function () {\n\t\tif (this.keyupBinding) {\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif (this.keydownBinding) {\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t};\n\n\tKeybindings.prototype.checkBinding = function (e, binding) {\n\t\tvar self = this,\n\t\t    match = true;\n\n\t\tif (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\n\t\t\tbinding.keys.forEach(function (key) {\n\t\t\t\tvar index = self.pressedKeys.indexOf(key);\n\n\t\t\t\tif (index == -1) {\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (match) {\n\t\t\t\tbinding.action.call(self, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t//default bindings\n\tKeybindings.prototype.bindings = {\n\t\tnavPrev: \"shift + 9\",\n\t\tnavNext: 9,\n\t\tnavUp: 38,\n\t\tnavDown: 40,\n\t\tscrollPageUp: 33,\n\t\tscrollPageDown: 34,\n\t\tscrollToStart: 36,\n\t\tscrollToEnd: 35,\n\t\tundo: \"ctrl + 90\",\n\t\tredo: \"ctrl + 89\",\n\t\tcopyToClipboard: \"ctrl + 67\"\n\t};\n\n\t//default actions\n\tKeybindings.prototype.actions = {\n\t\tkeyBlock: function keyBlock(e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t},\n\t\tscrollPageUp: function scrollPageUp(e) {\n\t\t\tvar rowManager = this.table.rowManager,\n\t\t\t    newPos = rowManager.scrollTop - rowManager.height,\n\t\t\t    scrollMax = rowManager.element.scrollHeight;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (rowManager.displayRowsCount) {\n\t\t\t\tif (newPos >= 0) {\n\t\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t\t} else {\n\t\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.table.element.focus();\n\t\t},\n\t\tscrollPageDown: function scrollPageDown(e) {\n\t\t\tvar rowManager = this.table.rowManager,\n\t\t\t    newPos = rowManager.scrollTop + rowManager.height,\n\t\t\t    scrollMax = rowManager.element.scrollHeight;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (rowManager.displayRowsCount) {\n\t\t\t\tif (newPos <= scrollMax) {\n\t\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t\t} else {\n\t\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.table.element.focus();\n\t\t},\n\t\tscrollToStart: function scrollToStart(e) {\n\t\t\tvar rowManager = this.table.rowManager;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (rowManager.displayRowsCount) {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\n\t\t\tthis.table.element.focus();\n\t\t},\n\t\tscrollToEnd: function scrollToEnd(e) {\n\t\t\tvar rowManager = this.table.rowManager;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (rowManager.displayRowsCount) {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\n\t\t\tthis.table.element.focus();\n\t\t},\n\t\tnavPrev: function navPrev(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().prev();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavNext: function navNext(e) {\n\t\t\tvar cell = false;\n\t\t\tvar newRow = this.table.options.tabEndNewRow;\n\t\t\tvar nav;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tnav = cell.nav();\n\n\t\t\t\t\tif (!nav.next()) {\n\t\t\t\t\t\tif (newRow) {\n\n\t\t\t\t\t\t\tcell.getElement().firstChild.blur();\n\n\t\t\t\t\t\t\tif (newRow === true) {\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (typeof newRow == \"function\") {\n\t\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnewRow.then(function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\tnav.next();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavLeft: function navLeft(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().left();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavRight: function navRight(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().right();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavUp: function navUp(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().up();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavDown: function navDown(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().down();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tundo: function undo(e) {\n\t\t\tvar cell = false;\n\t\t\tif (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (!cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.table.modules.history.undo();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tredo: function redo(e) {\n\t\t\tvar cell = false;\n\t\t\tif (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (!cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.table.modules.history.redo();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcopyToClipboard: function copyToClipboard(e) {\n\t\t\tif (!this.table.modules.edit.currentCell) {\n\t\t\t\tif (this.table.modExists(\"clipboard\", true)) {\n\t\t\t\t\tthis.table.modules.clipboard.copy(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"keybindings\", Keybindings);\n\tvar Menu = function Menu(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.menuEl = false;\n\t\tthis.blurEvent = this.hideMenu.bind(this);\n\t};\n\n\tMenu.prototype.initializeColumnHeader = function (column) {\n\t\tvar _this59 = this;\n\n\t\tvar headerMenuEl;\n\n\t\tif (column.definition.headerContextMenu) {\n\t\t\tcolumn.getElement().addEventListener(\"contextmenu\", function (e) {\n\t\t\t\tvar menu = typeof column.definition.headerContextMenu == \"function\" ? column.definition.headerContextMenu(column.getComponent()) : column.definition.headerContextMenu;\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\t_this59.loadMenu(e, column, menu);\n\t\t\t});\n\t\t}\n\n\t\tif (column.definition.headerMenu) {\n\n\t\t\theaderMenuEl = document.createElement(\"span\");\n\t\t\theaderMenuEl.classList.add(\"tabulator-header-menu-button\");\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\n\t\t\theaderMenuEl.addEventListener(\"click\", function (e) {\n\t\t\t\tvar menu = typeof column.definition.headerMenu == \"function\" ? column.definition.headerMenu(column.getComponent()) : column.definition.headerMenu;\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\t_this59.loadMenu(e, column, menu);\n\t\t\t});\n\n\t\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t\t}\n\t};\n\n\tMenu.prototype.initializeCell = function (cell) {\n\t\tvar _this60 = this;\n\n\t\tcell.getElement().addEventListener(\"contextmenu\", function (e) {\n\t\t\tvar menu = typeof cell.column.definition.contextMenu == \"function\" ? cell.column.definition.contextMenu(cell.getComponent()) : cell.column.definition.contextMenu;\n\n\t\t\te.preventDefault();\n\n\t\t\t_this60.loadMenu(e, cell, menu);\n\t\t});\n\t};\n\n\tMenu.prototype.initializeRow = function (row) {\n\t\tvar _this61 = this;\n\n\t\trow.getElement().addEventListener(\"contextmenu\", function (e) {\n\t\t\tvar menu = typeof _this61.table.options.rowContextMenu == \"function\" ? _this61.table.options.rowContextMenu(row.getComponent()) : _this61.table.options.rowContextMenu;\n\n\t\t\te.preventDefault();\n\n\t\t\t_this61.loadMenu(e, row, menu);\n\t\t});\n\t};\n\n\tMenu.prototype.loadMenu = function (e, component, menu) {\n\t\tvar _this62 = this;\n\n\t\tvar docHeight = Math.max(document.body.offsetHeight, window.innerHeight);\n\n\t\t//abort if no menu set\n\t\tif (!menu || !menu.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hideMenu();\n\n\t\tthis.menuEl = document.createElement(\"div\");\n\t\tthis.menuEl.classList.add(\"tabulator-menu\");\n\n\t\tmenu.forEach(function (item) {\n\t\t\tvar itemEl = document.createElement(\"div\");\n\t\t\tvar label = item.label;\n\t\t\tvar disabled = item.disabled;\n\n\t\t\tif (item.separator) {\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t} else {\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\n\t\t\t\tif (typeof label == \"function\") {\n\t\t\t\t\tlabel = label(component.getComponent());\n\t\t\t\t}\n\n\t\t\t\tif (label instanceof Node) {\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t} else {\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\n\t\t\t\tif (typeof disabled == \"function\") {\n\t\t\t\t\tdisabled = disabled(component.getComponent());\n\t\t\t\t}\n\n\t\t\t\tif (disabled) {\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\titemEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\t_this62.hideMenu();\n\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this62.menuEl.appendChild(itemEl);\n\t\t});\n\n\t\tthis.menuEl.style.top = e.pageY + \"px\";\n\t\tthis.menuEl.style.left = e.pageX + \"px\";\n\n\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\n\t\tsetTimeout(function () {\n\t\t\tdocument.body.addEventListener(\"contextmenu\", _this62.blurEvent);\n\t\t}, 100);\n\n\t\tdocument.body.appendChild(this.menuEl);\n\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif (e.pageX + this.menuEl.offsetWidth >= document.body.offsetWidth) {\n\t\t\tthis.menuEl.style.left = \"\";\n\t\t\tthis.menuEl.style.right = document.body.offsetWidth - e.pageX + \"px\";\n\t\t}\n\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tif (e.pageY + this.menuEl.offsetHeight >= docHeight) {\n\t\t\tthis.menuEl.style.top = \"\";\n\t\t\tthis.menuEl.style.bottom = docHeight - e.pageY + \"px\";\n\t\t}\n\t};\n\n\tMenu.prototype.hideMenu = function () {\n\t\tif (this.menuEl.parentNode) {\n\t\t\tthis.menuEl.parentNode.removeChild(this.menuEl);\n\t\t}\n\n\t\tif (this.blurEvent) {\n\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t}\n\t};\n\n\t//default accessors\n\tMenu.prototype.menus = {};\n\n\tTabulator.prototype.registerModule(\"menu\", Menu);\n\tvar MoveColumns = function MoveColumns(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the desitnation column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t};\n\n\tMoveColumns.prototype.createPlaceholderElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\n\t\treturn el;\n\t};\n\n\tMoveColumns.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    config = {},\n\t\t    colEl;\n\n\t\tif (!column.modules.frozen) {\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tconfig.mousemove = function (e) {\n\t\t\t\tif (column.parent === self.moving.parent) {\n\t\t\t\t\tif ((self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(colEl).left + self.table.columnManager.element.scrollLeft > column.getWidth() / 2) {\n\t\t\t\t\t\tif (self.toCol !== column || !self.toColAfter) {\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (self.toCol !== column || self.toColAfter) {\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\n\t\t\tcolEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcolEl.addEventListener(\"mouseup\", function (e) {\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\tif (self.checkTimeout) {\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\n\t\tcolumn.modules.moveColumn = config;\n\t};\n\n\tMoveColumns.prototype.bindTouchEvents = function (column) {\n\t\tvar self = this,\n\t\t    colEl = column.getElement(),\n\t\t    startXMove = false,\n\t\t    //shifting center position of the cell\n\t\tdir = false,\n\t\t    currentCol,\n\t\t    nextCol,\n\t\t    prevCol,\n\t\t    nextColWidth,\n\t\t    prevColWidth,\n\t\t    nextColWidthLast,\n\t\t    prevColWidthLast;\n\n\t\tcolEl.addEventListener(\"touchstart\", function (e) {\n\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\tself.touchMove = true;\n\t\t\t\tcurrentCol = column;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\n\t\t\t\tself.startMove(e, column);\n\t\t\t}, self.checkPeriod);\n\t\t}, { passive: true });\n\n\t\tcolEl.addEventListener(\"touchmove\", function (e) {\n\t\t\tvar halfCol, diff, moveToCol;\n\n\t\t\tif (self.moving) {\n\t\t\t\tself.moveHover(e);\n\n\t\t\t\tif (!startXMove) {\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\n\t\t\t\tif (diff > 0) {\n\t\t\t\t\tif (nextCol && diff - nextColWidthLast > nextColWidth) {\n\t\t\t\t\t\tmoveToCol = nextCol;\n\n\t\t\t\t\t\tif (moveToCol !== column) {\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (prevCol && -diff - prevColWidthLast > prevColWidth) {\n\t\t\t\t\t\tmoveToCol = prevCol;\n\n\t\t\t\t\t\tif (moveToCol !== column) {\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tself.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (moveToCol) {\n\t\t\t\t\tcurrentCol = moveToCol;\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, { passive: true });\n\n\t\tcolEl.addEventListener(\"touchend\", function (e) {\n\t\t\tif (self.checkTimeout) {\n\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t}\n\t\t\tif (self.moving) {\n\t\t\t\tself.endMove(e);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveColumns.prototype.startMove = function (e, column) {\n\t\tvar element = column.getElement();\n\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(element).left;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tthis.table.columnManager.getElement().appendChild(this.hoverElement);\n\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = \"0\";\n\n\t\tif (!this.touchMove) {\n\t\t\tthis._bindMouseMove();\n\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\n\t\tthis.moveHover(e);\n\t};\n\n\tMoveColumns.prototype._bindMouseMove = function () {\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\t\tif (column.modules.moveColumn.mousemove) {\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveColumns.prototype._unbindMouseMove = function () {\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\t\tif (column.modules.moveColumn.mousemove) {\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveColumns.prototype.moveColumn = function (column, after) {\n\t\tvar movingCells = this.moving.getCells();\n\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\n\t\tif (after) {\n\t\t\tcolumn.getCells().forEach(function (cell, i) {\n\t\t\t\tvar cellEl = cell.getElement();\n\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t});\n\t\t} else {\n\t\t\tcolumn.getCells().forEach(function (cell, i) {\n\t\t\t\tvar cellEl = cell.getElement();\n\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t});\n\t\t}\n\t};\n\n\tMoveColumns.prototype.endMove = function (e) {\n\t\tif (e.which === 1 || this.touchMove) {\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif (this.toCol) {\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\n\t\t\tif (!this.touchMove) {\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t};\n\n\tMoveColumns.prototype.moveHover = function (e) {\n\t\tvar self = this,\n\t\t    columnHolder = self.table.columnManager.getElement(),\n\t\t    scrollLeft = columnHolder.scrollLeft,\n\t\t    xPos = (self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(columnHolder).left + scrollLeft,\n\t\t    scrollPos;\n\n\t\tself.hoverElement.style.left = xPos - self.startX + \"px\";\n\n\t\tif (xPos - scrollLeft < self.autoScrollMargin) {\n\t\t\tif (!self.autoScrollTimeout) {\n\t\t\t\tself.autoScrollTimeout = setTimeout(function () {\n\t\t\t\t\tscrollPos = Math.max(0, scrollLeft - 5);\n\t\t\t\t\tself.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tself.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (scrollLeft + columnHolder.clientWidth - xPos < self.autoScrollMargin) {\n\t\t\tif (!self.autoScrollTimeout) {\n\t\t\t\tself.autoScrollTimeout = setTimeout(function () {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5);\n\t\t\t\t\tself.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tself.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"moveColumn\", MoveColumns);\n\n\tvar MoveRows = function MoveRows(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the desitnation row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\t};\n\n\tMoveRows.prototype.createPlaceholderElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t};\n\n\tMoveRows.prototype.initialize = function (handle) {\n\t\tthis.connection = this.table.options.movableRowsConnectedTables;\n\t};\n\n\tMoveRows.prototype.setHandle = function (handle) {\n\t\tthis.hasHandle = handle;\n\t};\n\n\tMoveRows.prototype.initializeGroupHeader = function (group) {\n\t\tvar self = this,\n\t\t    config = {},\n\t\t    rowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function (e) {\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function (e) {\n\t\t\tif (e.pageY - Tabulator.prototype.helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop > group.getHeight() / 2) {\n\t\t\t\tif (self.toRow !== group || !self.toRowAfter) {\n\t\t\t\t\tvar rowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (self.toRow !== group || self.toRowAfter) {\n\t\t\t\t\tvar rowEl = group.getElement();\n\t\t\t\t\tif (rowEl.previousSibling) {\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t};\n\n\tMoveRows.prototype.initializeRow = function (row) {\n\t\tvar self = this,\n\t\t    config = {},\n\t\t    rowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function (e) {\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function (e) {\n\t\t\tif (e.pageY - Tabulator.prototype.helpers.elOffset(row.element).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\n\t\t\t\tif (self.toRow !== row || !self.toRowAfter) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (self.toRow !== row || self.toRowAfter) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tif (!this.hasHandle) {\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function (e) {\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\tif (self.checkTimeout) {\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t};\n\n\tMoveRows.prototype.initializeCell = function (cell) {\n\t\tvar self = this,\n\t\t    cellEl = cell.getElement();\n\n\t\tcellEl.addEventListener(\"mousedown\", function (e) {\n\t\t\tif (e.which === 1) {\n\t\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t}, self.checkPeriod);\n\t\t\t}\n\t\t});\n\n\t\tcellEl.addEventListener(\"mouseup\", function (e) {\n\t\t\tif (e.which === 1) {\n\t\t\t\tif (self.checkTimeout) {\n\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.bindTouchEvents(cell.row, cell.getElement());\n\t};\n\n\tMoveRows.prototype.bindTouchEvents = function (row, element) {\n\t\tvar self = this,\n\t\t    startYMove = false,\n\t\t    //shifting center position of the cell\n\t\tdir = false,\n\t\t    currentRow,\n\t\t    nextRow,\n\t\t    prevRow,\n\t\t    nextRowHeight,\n\t\t    prevRowHeight,\n\t\t    nextRowHeightLast,\n\t\t    prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", function (e) {\n\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\tself.touchMove = true;\n\t\t\t\tcurrentRow = row;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tself.startMove(e, row);\n\t\t\t}, self.checkPeriod);\n\t\t}, { passive: true });\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", function (e) {\n\n\t\t\tvar halfCol, diff, moveToRow;\n\n\t\t\tif (self.moving) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tself.moveHover(e);\n\n\t\t\t\tif (!startYMove) {\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif (diff > 0) {\n\t\t\t\t\tif (nextRow && diff - nextRowHeightLast > nextRowHeight) {\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif (moveToRow !== row) {\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tself.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif (moveToRow !== row) {\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tself.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (moveToRow) {\n\t\t\t\t\tcurrentRow = moveToRow;\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", function (e) {\n\t\t\tif (self.checkTimeout) {\n\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t}\n\t\t\tif (self.moving) {\n\t\t\t\tself.endMove(e);\n\t\t\t\tself.touchMove = false;\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveRows.prototype._bindMouseMove = function () {\n\t\tvar self = this;\n\n\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\tif ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveRows.prototype._unbindMouseMove = function () {\n\t\tvar self = this;\n\n\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\tif ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveRows.prototype.startMove = function (e, row) {\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif (!this.connection) {\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t} else {\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif (this.connection) {\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t} else {\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.moveHover(e);\n\t};\n\n\tMoveRows.prototype.setStartPosition = function (e, row) {\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\t    pageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\t    element,\n\t\t    position;\n\n\t\telement = row.getElement();\n\t\tif (this.connection) {\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t} else {\n\t\t\tthis.startY = pageY - element.getBoundingClientRect().top;\n\t\t}\n\t};\n\n\tMoveRows.prototype.endMove = function (e) {\n\t\tif (!e || e.which === 1 || this.touchMove) {\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif (!this.connection) {\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif (this.toRow) {\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif (this.connection) {\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t};\n\n\tMoveRows.prototype.moveRow = function (row, after) {\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t};\n\n\tMoveRows.prototype.moveHover = function (e) {\n\t\tif (this.connection) {\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t} else {\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t};\n\n\tMoveRows.prototype.moveHoverTable = function (e) {\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\t    scrollTop = rowHolder.scrollTop,\n\t\t    yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop,\n\t\t    scrollPos;\n\n\t\tthis.hoverElement.style.top = yPos - this.startY + \"px\";\n\t};\n\n\tMoveRows.prototype.moveHoverConnections = function (e) {\n\t\tthis.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\";\n\t\tthis.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n\t};\n\n\t//establish connection with other tables\n\tMoveRows.prototype.connectToTables = function (row) {\n\t\tvar self = this,\n\t\t    connections = this.table.modules.comms.getConnections(this.connection);\n\n\t\tthis.table.options.movableRowsSendingStart.call(this.table, connections);\n\n\t\tthis.table.modules.comms.send(this.connection, \"moveRow\", \"connect\", {\n\t\t\trow: row\n\t\t});\n\t};\n\n\t//disconnect from other tables\n\tMoveRows.prototype.disconnectFromTables = function () {\n\t\tvar self = this,\n\t\t    connections = this.table.modules.comms.getConnections(this.connection);\n\n\t\tthis.table.options.movableRowsSendingStop.call(this.table, connections);\n\n\t\tthis.table.modules.comms.send(this.connection, \"moveRow\", \"disconnect\");\n\t};\n\n\t//accept incomming connection\n\tMoveRows.prototype.connect = function (table, row) {\n\t\tvar self = this;\n\t\tif (!this.connectedTable) {\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\t\tif (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.tableRowDropEvent = self.tableRowDrop.bind(self);\n\n\t\t\tself.table.element.addEventListener(\"mouseup\", self.tableRowDropEvent);\n\n\t\t\tthis.table.options.movableRowsReceivingStart.call(this.table, row, table);\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//close incomming connection\n\tMoveRows.prototype.disconnect = function (table) {\n\t\tvar self = this;\n\t\tif (table === this.connectedTable) {\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\t\tif (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.table.element.removeEventListener(\"mouseup\", self.tableRowDropEvent);\n\n\t\t\tthis.table.options.movableRowsReceivingStop.call(this.table, table);\n\t\t} else {\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t};\n\n\tMoveRows.prototype.dropComplete = function (table, row, success) {\n\t\tvar sender = false;\n\n\t\tif (success) {\n\n\t\t\tswitch (_typeof(this.table.options.movableRowsSender)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (sender) {\n\t\t\t\tsender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t\t} else {\n\t\t\t\tif (this.table.options.movableRowsSender) {\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.table.options.movableRowsSent.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t} else {\n\t\t\tthis.table.options.movableRowsSentFailed.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t};\n\n\tMoveRows.prototype.tableRowDrop = function (e, row) {\n\t\tvar receiver = false,\n\t\t    success = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch (_typeof(this.table.options.movableRowsReceiver)) {\n\t\t\tcase \"string\":\n\t\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (receiver) {\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t} else {\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif (success) {\n\t\t\tthis.table.options.movableRowsReceived.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t} else {\n\t\t\tthis.table.options.movableRowsReceivedFailed.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.table.modules.comms.send(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow: row,\n\t\t\tsuccess: success\n\t\t});\n\t};\n\n\tMoveRows.prototype.receivers = {\n\t\tinsert: function insert(fromRow, toRow, fromTable) {\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\treturn true;\n\t\t},\n\n\t\tadd: function add(fromRow, toRow, fromTable) {\n\t\t\tthis.table.addRow(fromRow.getData());\n\t\t\treturn true;\n\t\t},\n\n\t\tupdate: function update(fromRow, toRow, fromTable) {\n\t\t\tif (toRow) {\n\t\t\t\ttoRow.update(fromRow.getData());\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\treplace: function replace(fromRow, toRow, fromTable) {\n\t\t\tif (toRow) {\n\t\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\t\ttoRow.delete();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tMoveRows.prototype.senders = {\n\t\tdelete: function _delete(fromRow, toRow, toTable) {\n\t\t\tfromRow.delete();\n\t\t}\n\t};\n\n\tMoveRows.prototype.commsReceived = function (table, action, data) {\n\t\tswitch (action) {\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\t\t\t\tbreak;\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\t\t\t\tbreak;\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"moveRow\", MoveRows);\n\tvar Mutator = function Mutator(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\n\t\tthis.enabled = true;\n\t};\n\n\t//initialize column mutator\n\tMutator.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    match = false,\n\t\t    config = {};\n\n\t\tthis.allowedTypes.forEach(function (type) {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\t    mutator;\n\n\t\t\tif (column.definition[key]) {\n\t\t\t\tmutator = self.lookupMutator(column.definition[key]);\n\n\t\t\t\tif (mutator) {\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator: mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (match) {\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t};\n\n\tMutator.prototype.lookupMutator = function (value) {\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (this.mutators[value]) {\n\t\t\t\t\tmutator = this.mutators[value];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t};\n\n\t//apply mutator to row\n\tMutator.prototype.transformRow = function (data, type, updatedData) {\n\t\tvar self = this,\n\t\t    key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t    value;\n\n\t\tif (this.enabled) {\n\n\t\t\tself.table.columnManager.traverse(function (column) {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif (column.modules.mutate) {\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif (mutator) {\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif (type == \"data\" || typeof value !== \"undefined\") {\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t};\n\n\t//apply mutator to new cell value\n\tMutator.prototype.transformCell = function (cell, value) {\n\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t    tempData = {};\n\n\t\tif (mutator) {\n\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t};\n\n\tMutator.prototype.enable = function () {\n\t\tthis.enabled = true;\n\t};\n\n\tMutator.prototype.disable = function () {\n\t\tthis.enabled = false;\n\t};\n\n\t//default mutators\n\tMutator.prototype.mutators = {};\n\n\tTabulator.prototype.registerModule(\"mutator\", Mutator);\n\tvar Page = function Page(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.displayIndex = 0; //index in display pipeline\n\n\t\tthis.initialLoad = true;\n\n\t\tthis.pageSizes = [];\n\n\t\tthis.dataReceivedNames = {};\n\t\tthis.dataSentNames = {};\n\n\t\tthis.createElements();\n\t};\n\n\tPage.prototype.createElements = function () {\n\n\t\tvar button;\n\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\n\t\tif (this.table.options.paginationSizeSelector) {\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t};\n\n\tPage.prototype.generatePageSizeSelectList = function () {\n\t\tvar _this63 = this;\n\n\t\tvar pageSizes = [];\n\n\t\tif (this.pageSizeSelect) {\n\n\t\t\tif (Array.isArray(this.table.options.paginationSizeSelector)) {\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\n\t\t\t\tif (this.pageSizes.indexOf(this.size) == -1) {\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (this.pageSizes.indexOf(this.size) == -1) {\n\t\t\t\t\tpageSizes = [];\n\n\t\t\t\t\tfor (var i = 1; i < 5; i++) {\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t} else {\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile (this.pageSizeSelect.firstChild) {\n\t\t\t\tthis.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t}pageSizes.forEach(function (item) {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\titemEl.innerHTML = item;\n\n\t\t\t\t_this63.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t};\n\n\t//setup pageination\n\tPage.prototype.initialize = function (hidden) {\n\t\tvar self = this,\n\t\t    pageSelectLabel,\n\t\t    testElRow,\n\t\t    testElCell;\n\n\t\t//update param names\n\t\tthis.dataSentNames = Object.assign({}, this.paginationDataSentNames);\n\t\tthis.dataSentNames = Object.assign(this.dataSentNames, this.table.options.paginationDataSent);\n\n\t\tthis.dataReceivedNames = Object.assign({}, this.paginationDataReceivedNames);\n\t\tthis.dataReceivedNames = Object.assign(this.dataReceivedNames, this.table.options.paginationDataReceived);\n\n\t\t//build pagination element\n\n\t\t//bind localizations\n\t\tself.table.modules.localize.bind(\"pagination|first\", function (value) {\n\t\t\tself.firstBut.innerHTML = value;\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|first_title\", function (value) {\n\t\t\tself.firstBut.setAttribute(\"aria-label\", value);\n\t\t\tself.firstBut.setAttribute(\"title\", value);\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|prev\", function (value) {\n\t\t\tself.prevBut.innerHTML = value;\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|prev_title\", function (value) {\n\t\t\tself.prevBut.setAttribute(\"aria-label\", value);\n\t\t\tself.prevBut.setAttribute(\"title\", value);\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|next\", function (value) {\n\t\t\tself.nextBut.innerHTML = value;\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|next_title\", function (value) {\n\t\t\tself.nextBut.setAttribute(\"aria-label\", value);\n\t\t\tself.nextBut.setAttribute(\"title\", value);\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|last\", function (value) {\n\t\t\tself.lastBut.innerHTML = value;\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|last_title\", function (value) {\n\t\t\tself.lastBut.setAttribute(\"aria-label\", value);\n\t\t\tself.lastBut.setAttribute(\"title\", value);\n\t\t});\n\n\t\t//click bindings\n\t\tself.firstBut.addEventListener(\"click\", function () {\n\t\t\tself.setPage(1);\n\t\t});\n\n\t\tself.prevBut.addEventListener(\"click\", function () {\n\t\t\tself.previousPage();\n\t\t});\n\n\t\tself.nextBut.addEventListener(\"click\", function () {\n\t\t\tself.nextPage().then(function () {}).catch(function () {});\n\t\t});\n\n\t\tself.lastBut.addEventListener(\"click\", function () {\n\t\t\tself.setPage(self.max);\n\t\t});\n\n\t\tif (self.table.options.paginationElement) {\n\t\t\tself.element = self.table.options.paginationElement;\n\t\t}\n\n\t\tif (this.pageSizeSelect) {\n\t\t\tpageSelectLabel = document.createElement(\"label\");\n\n\t\t\tself.table.modules.localize.bind(\"pagination|page_size\", function (value) {\n\t\t\t\tself.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\tself.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t});\n\n\t\t\tself.element.appendChild(pageSelectLabel);\n\t\t\tself.element.appendChild(self.pageSizeSelect);\n\n\t\t\tself.pageSizeSelect.addEventListener(\"change\", function (e) {\n\t\t\t\tself.setPageSize(self.pageSizeSelect.value);\n\t\t\t\tself.setPage(1).then(function () {}).catch(function () {});\n\t\t\t});\n\t\t}\n\n\t\t//append to DOM\n\t\tself.element.appendChild(self.firstBut);\n\t\tself.element.appendChild(self.prevBut);\n\t\tself.element.appendChild(self.pagesElement);\n\t\tself.element.appendChild(self.nextBut);\n\t\tself.element.appendChild(self.lastBut);\n\n\t\tif (!self.table.options.paginationElement && !hidden) {\n\t\t\tself.table.footerManager.append(self.element, self);\n\t\t}\n\n\t\t//set default values\n\t\tself.mode = self.table.options.pagination;\n\n\t\tif (self.table.options.paginationSize) {\n\t\t\tself.size = self.table.options.paginationSize;\n\t\t} else {\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = hidden;\n\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\n\t\t\ttestElRow.appendChild(testElCell);\n\n\t\t\tself.table.rowManager.getTableElement().appendChild(testElRow);\n\n\t\t\tself.size = Math.floor(self.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\n\t\t\tself.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\t// self.page = self.table.options.paginationInitialPage || 1;\n\t\tself.count = self.table.options.paginationButtonCount;\n\n\t\tself.generatePageSizeSelectList();\n\t};\n\n\tPage.prototype.initializeProgressive = function (mode) {\n\t\tthis.initialize(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t};\n\n\tPage.prototype.setDisplayIndex = function (index) {\n\t\tthis.displayIndex = index;\n\t};\n\n\tPage.prototype.getDisplayIndex = function () {\n\t\treturn this.displayIndex;\n\t};\n\n\t//calculate maximum page from number of rows\n\tPage.prototype.setMaxRows = function (rowCount) {\n\t\tif (!rowCount) {\n\t\t\tthis.max = 1;\n\t\t} else {\n\t\t\tthis.max = Math.ceil(rowCount / this.size);\n\t\t}\n\n\t\tif (this.page > this.max) {\n\t\t\tthis.page = this.max;\n\t\t}\n\t};\n\n\t//reset to first page without triggering action\n\tPage.prototype.reset = function (force, columnsChanged) {\n\t\tif (this.mode == \"local\" || force) {\n\t\t\tthis.page = 1;\n\t\t}\n\n\t\tif (columnsChanged) {\n\t\t\tthis.initialLoad = true;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\t//set the maxmum page\n\tPage.prototype.setMaxPage = function (max) {\n\n\t\tmax = parseInt(max);\n\n\t\tthis.max = max || 1;\n\n\t\tif (this.page > this.max) {\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t};\n\n\t//set current page number\n\tPage.prototype.setPage = function (page) {\n\t\tvar _this64 = this;\n\n\t\tvar self = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tpage = parseInt(page);\n\n\t\t\tif (page > 0 && page <= _this64.max) {\n\t\t\t\t_this64.page = page;\n\t\t\t\t_this64.trigger().then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\n\t\t\t\tif (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.page) {\n\t\t\t\t\tself.table.modules.persistence.save(\"page\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + _this64.max + \":\", page);\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tPage.prototype.setPageToRow = function (row) {\n\t\tvar _this65 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar rows = _this65.table.rowManager.getDisplayRows(_this65.displayIndex - 1);\n\t\t\tvar index = rows.indexOf(row);\n\n\t\t\tif (index > -1) {\n\t\t\t\tvar page = Math.ceil((index + 1) / _this65.size);\n\n\t\t\t\t_this65.setPage(page).then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tPage.prototype.setPageSize = function (size) {\n\t\tsize = parseInt(size);\n\n\t\tif (size > 0) {\n\t\t\tthis.size = size;\n\t\t}\n\n\t\tif (this.pageSizeSelect) {\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page) {\n\t\t\tthis.table.modules.persistence.save(\"page\");\n\t\t}\n\t};\n\n\t//setup the pagination buttons\n\tPage.prototype._setPageButtons = function () {\n\t\tvar self = this;\n\n\t\tvar leftSize = Math.floor((this.count - 1) / 2);\n\t\tvar rightSize = Math.ceil((this.count - 1) / 2);\n\t\tvar min = this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1);\n\t\tvar max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max);\n\n\t\twhile (self.pagesElement.firstChild) {\n\t\t\tself.pagesElement.removeChild(self.pagesElement.firstChild);\n\t\t}if (self.page == 1) {\n\t\t\tself.firstBut.disabled = true;\n\t\t\tself.prevBut.disabled = true;\n\t\t} else {\n\t\t\tself.firstBut.disabled = false;\n\t\t\tself.prevBut.disabled = false;\n\t\t}\n\n\t\tif (self.page == self.max) {\n\t\t\tself.lastBut.disabled = true;\n\t\t\tself.nextBut.disabled = true;\n\t\t} else {\n\t\t\tself.lastBut.disabled = false;\n\t\t\tself.nextBut.disabled = false;\n\t\t}\n\n\t\tfor (var i = min; i <= max; i++) {\n\t\t\tif (i > 0 && i <= self.max) {\n\t\t\t\tself.pagesElement.appendChild(self._generatePageButton(i));\n\t\t\t}\n\t\t}\n\n\t\tthis.footerRedraw();\n\t};\n\n\tPage.prototype._generatePageButton = function (page) {\n\t\tvar self = this,\n\t\t    button = document.createElement(\"button\");\n\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif (page == self.page) {\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"Show Page \" + page);\n\t\tbutton.setAttribute(\"title\", \"Show Page \" + page);\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\n\t\tbutton.addEventListener(\"click\", function (e) {\n\t\t\tself.setPage(page);\n\t\t});\n\n\t\treturn button;\n\t};\n\n\t//previous page\n\tPage.prototype.previousPage = function () {\n\t\tvar _this66 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (_this66.page > 1) {\n\t\t\t\t_this66.page--;\n\t\t\t\t_this66.trigger().then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\n\t\t\t\tif (_this66.table.options.persistence && _this66.table.modExists(\"persistence\", true) && _this66.table.modules.persistence.config.page) {\n\t\t\t\t\t_this66.table.modules.persistence.save(\"page\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\t//next page\n\tPage.prototype.nextPage = function () {\n\t\tvar _this67 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (_this67.page < _this67.max) {\n\t\t\t\t_this67.page++;\n\t\t\t\t_this67.trigger().then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\n\t\t\t\tif (_this67.table.options.persistence && _this67.table.modExists(\"persistence\", true) && _this67.table.modules.persistence.config.page) {\n\t\t\t\t\t_this67.table.modules.persistence.save(\"page\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!_this67.progressiveLoad) {\n\t\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + _this67.max + \":\", _this67.max + 1);\n\t\t\t\t}\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\t//return current page number\n\tPage.prototype.getPage = function () {\n\t\treturn this.page;\n\t};\n\n\t//return max page number\n\tPage.prototype.getPageMax = function () {\n\t\treturn this.max;\n\t};\n\n\tPage.prototype.getPageSize = function (size) {\n\t\treturn this.size;\n\t};\n\n\tPage.prototype.getMode = function () {\n\t\treturn this.mode;\n\t};\n\n\t//return appropriate rows for current page\n\tPage.prototype.getRows = function (data) {\n\t\tvar output, start, end;\n\n\t\tif (this.mode == \"local\") {\n\t\t\toutput = [];\n\t\t\tstart = this.size * (this.page - 1);\n\t\t\tend = start + parseInt(this.size);\n\n\t\t\tthis._setPageButtons();\n\n\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\tif (data[i]) {\n\t\t\t\t\toutput.push(data[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn output;\n\t\t} else {\n\n\t\t\tthis._setPageButtons();\n\n\t\t\treturn data.slice(0);\n\t\t}\n\t};\n\n\tPage.prototype.trigger = function () {\n\t\tvar _this68 = this;\n\n\t\tvar left;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tswitch (_this68.mode) {\n\t\t\t\tcase \"local\":\n\t\t\t\t\tleft = _this68.table.rowManager.scrollLeft;\n\n\t\t\t\t\t_this68.table.rowManager.refreshActiveData(\"page\");\n\t\t\t\t\t_this68.table.rowManager.scrollHorizontal(left);\n\n\t\t\t\t\t_this68.table.options.pageLoaded.call(_this68.table, _this68.getPage());\n\t\t\t\t\tresolve();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"remote\":\n\t\t\t\tcase \"progressive_load\":\n\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t_this68.table.modules.ajax.blockActiveRequest();\n\t\t\t\t\t_this68._getRemotePage().then(function () {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).catch(function () {\n\t\t\t\t\t\treject();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", _this68.mode);\n\t\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tPage.prototype._getRemotePage = function () {\n\t\tvar _this69 = this;\n\n\t\tvar self = this,\n\t\t    oldParams,\n\t\t    pageParams;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (!self.table.modExists(\"ajax\", true)) {\n\t\t\t\treject();\n\t\t\t}\n\n\t\t\t//record old params and restore after request has been made\n\t\t\toldParams = Tabulator.prototype.helpers.deepClone(self.table.modules.ajax.getParams() || {});\n\t\t\tpageParams = self.table.modules.ajax.getParams();\n\n\t\t\t//configure request params\n\t\t\tpageParams[_this69.dataSentNames.page] = self.page;\n\n\t\t\t//set page size if defined\n\t\t\tif (_this69.size) {\n\t\t\t\tpageParams[_this69.dataSentNames.size] = _this69.size;\n\t\t\t}\n\n\t\t\t//set sort data if defined\n\t\t\tif (_this69.table.options.ajaxSorting && _this69.table.modExists(\"sort\")) {\n\t\t\t\tvar sorters = self.table.modules.sort.getSort();\n\n\t\t\t\tsorters.forEach(function (item) {\n\t\t\t\t\tdelete item.column;\n\t\t\t\t});\n\n\t\t\t\tpageParams[_this69.dataSentNames.sorters] = sorters;\n\t\t\t}\n\n\t\t\t//set filter data if defined\n\t\t\tif (_this69.table.options.ajaxFiltering && _this69.table.modExists(\"filter\")) {\n\t\t\t\tvar filters = self.table.modules.filter.getFilters(true, true);\n\t\t\t\tpageParams[_this69.dataSentNames.filters] = filters;\n\t\t\t}\n\n\t\t\tself.table.modules.ajax.setParams(pageParams);\n\n\t\t\tself.table.modules.ajax.sendRequest(_this69.progressiveLoad).then(function (data) {\n\t\t\t\tself._parseRemoteData(data);\n\t\t\t\tresolve();\n\t\t\t}).catch(function (e) {\n\t\t\t\treject();\n\t\t\t});\n\n\t\t\tself.table.modules.ajax.setParams(oldParams);\n\t\t});\n\t};\n\n\tPage.prototype._parseRemoteData = function (data) {\n\t\tvar self = this,\n\t\t    left,\n\t\t    data,\n\t\t    margin;\n\n\t\tif (typeof data[this.dataReceivedNames.last_page] === \"undefined\") {\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.last_page + \"' property\");\n\t\t}\n\n\t\tif (data[this.dataReceivedNames.data]) {\n\t\t\tthis.max = parseInt(data[this.dataReceivedNames.last_page]) || 1;\n\n\t\t\tif (this.progressiveLoad) {\n\t\t\t\tswitch (this.mode) {\n\t\t\t\t\tcase \"progressive_load\":\n\n\t\t\t\t\t\tif (this.page == 1) {\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data[this.dataReceivedNames.data]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.page < this.max) {\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tself.nextPage().then(function () {}).catch(function () {});\n\t\t\t\t\t\t\t}, self.table.options.ajaxProgressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.table.rowManager.getData().concat(data[this.dataReceivedNames.data]);\n\n\t\t\t\t\t\tthis.table.rowManager.setData(data, true, this.initialLoad && this.page == 1);\n\n\t\t\t\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2;\n\n\t\t\t\t\t\tif (self.table.rowManager.element.scrollHeight <= self.table.rowManager.element.clientHeight + margin) {\n\t\t\t\t\t\t\tself.nextPage().then(function () {}).catch(function () {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\n\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\n\t\t\t\tthis.table.options.pageLoaded.call(this.table, this.getPage());\n\t\t\t}\n\n\t\t\tthis.initialLoad = false;\n\t\t} else {\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.data + \"' property\");\n\t\t}\n\t};\n\n\t//handle the footer element being redrawn\n\tPage.prototype.footerRedraw = function () {\n\t\tvar footer = this.table.footerManager.element;\n\n\t\tif (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t} else {\n\t\t\tthis.pagesElement.style.display = '';\n\n\t\t\tif (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t};\n\n\t//set the paramter names for pagination requests\n\tPage.prototype.paginationDataSentNames = {\n\t\t\"page\": \"page\",\n\t\t\"size\": \"size\",\n\t\t\"sorters\": \"sorters\",\n\t\t// \"sort_dir\":\"sort_dir\",\n\t\t\"filters\": \"filters\"\n\t\t// \"filter_value\":\"filter_value\",\n\t\t// \"filter_type\":\"filter_type\",\n\t};\n\n\t//set the property names for pagination responses\n\tPage.prototype.paginationDataReceivedNames = {\n\t\t\"current_page\": \"current_page\",\n\t\t\"last_page\": \"last_page\",\n\t\t\"data\": \"data\"\n\t};\n\n\tTabulator.prototype.registerModule(\"page\", Page);\n\n\tvar Persistence = function Persistence(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\t};\n\n\t// Test for whether localStorage is available for use.\n\tPersistence.prototype.localStorageTest = function () {\n\t\tvar testKey = \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem(testKey, testKey);\n\t\t\twindow.localStorage.removeItem(testKey);\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//setup parameters\n\tPersistence.prototype.initialize = function () {\n\t\t//determine persistent layout storage type\n\n\t\tvar mode = this.table.options.persistenceMode,\n\t\t    id = this.table.options.persistenceID,\n\t\t    retreivedData;\n\n\t\tthis.mode = mode !== true ? mode : this.localStorageTest() ? \"local\" : \"cookie\";\n\n\t\tif (this.table.options.persistenceReaderFunc) {\n\t\t\tif (typeof this.table.options.persistenceReaderFunc === \"function\") {\n\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t} else {\n\t\t\t\tif (this.readers[this.table.options.persistenceReaderFunc]) {\n\t\t\t\t\tthis.readFunc = this.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.readers[this.mode]) {\n\t\t\t\tthis.readFunc = this.readers[this.mode];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.options.persistenceWriterFunc) {\n\t\t\tif (typeof this.table.options.persistenceWriterFunc === \"function\") {\n\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t} else {\n\t\t\t\tif (this.readers[this.table.options.persistenceWriterFunc]) {\n\t\t\t\t\tthis.writeFunc = this.readers[this.table.options.persistenceWriterFunc];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.writers[this.mode]) {\n\t\t\t\tthis.writeFunc = this.writers[this.mode];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t}\n\t\t}\n\n\t\t//set storage tag\n\t\tthis.id = \"tabulator-\" + (id || this.table.element.getAttribute(\"id\") || \"\");\n\n\t\tthis.config = {\n\t\t\tsort: this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\tfilter: this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\tgroup: this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\tpage: this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\tcolumns: this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n\t\t};\n\n\t\t//load pagination data if needed\n\t\tif (this.config.page) {\n\t\t\tretreivedData = this.retreiveData(\"page\");\n\n\t\t\tif (retreivedData) {\n\t\t\t\tif (typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)) {\n\t\t\t\t\tthis.table.options.paginationSize = retreivedData.paginationSize;\n\t\t\t\t}\n\n\t\t\t\tif (typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)) {\n\t\t\t\t\tthis.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//load group data if needed\n\t\tif (this.config.group) {\n\t\t\tretreivedData = this.retreiveData(\"group\");\n\n\t\t\tif (retreivedData) {\n\t\t\t\tif (typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)) {\n\t\t\t\t\tthis.table.options.groupBy = retreivedData.groupBy;\n\t\t\t\t}\n\t\t\t\tif (typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)) {\n\t\t\t\t\tthis.table.options.groupStartOpen = retreivedData.groupStartOpen;\n\t\t\t\t}\n\t\t\t\tif (typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)) {\n\t\t\t\t\tthis.table.options.groupHeader = retreivedData.groupHeader;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tPersistence.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    def,\n\t\t    keys;\n\n\t\tif (this.config.columns) {\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach(function (key) {\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\t\t\t\tif (props) {\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: function set(newValue) {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif (!self.defWatcherBlock) {\n\t\t\t\t\t\t\t\tself.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (props.set) {\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget: function get() {\n\t\t\t\t\t\t\tif (props.get) {\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t};\n\n\t//load saved definitions\n\tPersistence.prototype.load = function (type, current) {\n\t\tvar data = this.retreiveData(type);\n\n\t\tif (current) {\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t};\n\n\t//retreive data from memory\n\tPersistence.prototype.retreiveData = function (type) {\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t};\n\n\t//merge old and new column definitions\n\tPersistence.prototype.mergeDefinition = function (oldCols, newCols) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\t// oldCols = oldCols || [];\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach(function (column, to) {\n\n\t\t\tvar from = self._findColumn(oldCols, column),\n\t\t\t    keys;\n\n\t\t\tif (from) {\n\n\t\t\t\tif (self.config.columns === true || self.config.columns == undefined) {\n\t\t\t\t\tkeys = Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t} else {\n\t\t\t\t\tkeys = self.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach(function (key) {\n\t\t\t\t\tif (typeof column[key] !== \"undefined\") {\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (from.columns) {\n\t\t\t\t\tfrom.columns = self.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach(function (column, i) {\n\t\t\tvar from = self._findColumn(newCols, column);\n\t\t\tif (!from) {\n\t\t\t\tif (output.length > i) {\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\t//find matching columns\n\tPersistence.prototype._findColumn = function (columns, subject) {\n\t\tvar type = subject.columns ? \"group\" : subject.field ? \"field\" : \"object\";\n\n\t\treturn columns.find(function (col) {\n\t\t\tswitch (type) {\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t};\n\n\t//save data\n\tPersistence.prototype.save = function (type) {\n\t\tvar data = {};\n\n\t\tswitch (type) {\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (this.writeFunc) {\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\t};\n\n\t//ensure sorters contain no function data\n\tPersistence.prototype.validateSorters = function (data) {\n\t\tdata.forEach(function (item) {\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t};\n\n\tPersistence.prototype.getGroupConfig = function () {\n\t\tif (this.config.group) {\n\t\t\tif (this.config.group === true || this.config.group.groupBy) {\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif (this.config.group === true || this.config.group.groupStartOpen) {\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif (this.config.group === true || this.config.group.groupHeader) {\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tPersistence.prototype.getPageConfig = function () {\n\t\tvar data = {};\n\n\t\tif (this.config.page) {\n\t\t\tif (this.config.page === true || this.config.page.size) {\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif (this.config.page === true || this.config.page.page) {\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t};\n\n\t//parse columns for data to store\n\tPersistence.prototype.parseColumns = function (columns) {\n\t\tvar self = this,\n\t\t    definitions = [];\n\n\t\tcolumns.forEach(function (column) {\n\t\t\tvar defStore = {},\n\t\t\t    colDef = column.getDefinition(),\n\t\t\t    keys;\n\n\t\t\tif (column.isGroup) {\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = self.parseColumns(column.getColumns());\n\t\t\t} else {\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif (self.config.columns === true || self.config.columns == undefined) {\n\t\t\t\t\tkeys = Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t} else {\n\t\t\t\t\tkeys = self.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach(function (key) {\n\n\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t};\n\n\t// read peristence information from storage\n\tPersistence.prototype.readers = {\n\t\tlocal: function local(id, type) {\n\t\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\t\treturn data ? JSON.parse(data) : false;\n\t\t},\n\t\tcookie: function cookie(id, type) {\n\t\t\tvar cookie = document.cookie,\n\t\t\t    key = id + \"-\" + type,\n\t\t\t    cookiePos = cookie.indexOf(key + \"=\"),\n\t\t\t    end,\n\t\t\t    data;\n\n\t\t\t//if cookie exists, decode and load column data into tabulator\n\t\t\tif (cookiePos > -1) {\n\t\t\t\tcookie = cookie.substr(cookiePos);\n\n\t\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\t\tif (end > -1) {\n\t\t\t\t\tcookie = cookie.substr(0, end);\n\t\t\t\t}\n\n\t\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t\t}\n\n\t\t\treturn data ? JSON.parse(data) : false;\n\t\t}\n\t};\n\n\t//write persistence information to storage\n\tPersistence.prototype.writers = {\n\t\tlocal: function local(id, type, data) {\n\t\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t\t},\n\t\tcookie: function cookie(id, type, data) {\n\t\t\tvar expireDate = new Date();\n\n\t\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"persistence\", Persistence);\n\n\tvar Print = function Print(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t};\n\n\tPrint.prototype.initialize = function () {\n\t\twindow.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\n\t\twindow.addEventListener(\"afterprint\", this.cleanup.bind(this));\n\t};\n\n\tPrint.prototype.replaceTable = function () {\n\t\tif (!this.manualBlock) {\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t};\n\n\tPrint.prototype.cleanup = function () {\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif (this.element && this.element.parentNode) {\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t};\n\n\tPrint.prototype.printFullscreen = function (visible, style, config) {\n\t\tvar scrollX = window.scrollX,\n\t\t    scrollY = window.scrollY,\n\t\t    headerEl = document.createElement(\"div\"),\n\t\t    footerEl = document.createElement(\"div\"),\n\t\t    tableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible, \"print\"),\n\t\t    headerContent,\n\t\t    footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif (this.table.options.printHeader) {\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif (typeof headerContent == \"string\") {\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t} else {\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif (this.table.options.printFooter) {\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\t\t\tif (typeof footerContent == \"string\") {\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t} else {\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif (this.table.options.printFormatter) {\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t};\n\n\tTabulator.prototype.registerModule(\"print\", Print);\n\tvar ReactiveData = function ReactiveData(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t};\n\n\tReactiveData.prototype.watchData = function (data) {\n\t\tvar self = this,\n\t\t    pushFunc,\n\t\t    version;\n\n\t\tthis.currentVersion++;\n\n\t\tversion = this.currentVersion;\n\n\t\tself.unwatchData();\n\n\t\tself.data = data;\n\n\t\t//override array push function\n\t\tself.origFuncs.push = data.push;\n\n\t\tObject.defineProperty(self.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar args = Array.from(arguments);\n\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\targs.forEach(function (arg) {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.push.apply(data, arguments);\n\t\t\t}\n\t\t});\n\n\t\t//override array unshift function\n\t\tself.origFuncs.unshift = data.unshift;\n\n\t\tObject.defineProperty(self.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar args = Array.from(arguments);\n\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\targs.forEach(function (arg) {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.unshift.apply(data, arguments);\n\t\t\t}\n\t\t});\n\n\t\t//override array shift function\n\t\tself.origFuncs.shift = data.shift;\n\n\t\tObject.defineProperty(self.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar row;\n\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\tif (self.data.length) {\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\n\t\t\t\t\t\tif (row) {\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.shift.call(data);\n\t\t\t}\n\t\t});\n\n\t\t//override array pop function\n\t\tself.origFuncs.pop = data.pop;\n\n\t\tObject.defineProperty(self.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar row;\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\tif (self.data.length) {\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\n\t\t\t\t\t\tif (row) {\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn self.origFuncs.pop.call(data);\n\t\t\t}\n\t\t});\n\n\t\t//override array splice function\n\t\tself.origFuncs.splice = data.splice;\n\n\t\tObject.defineProperty(self.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\t    start = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\t    end = args[1],\n\t\t\t\t    newRows = args[2] ? args.slice(2) : false,\n\t\t\t\t    startRow;\n\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif (newRows) {\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\n\t\t\t\t\t\tif (startRow) {\n\t\t\t\t\t\t\tnewRows.forEach(function (rowData) {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\n\t\t\t\t\t\t\tnewRows.forEach(function (rowData) {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif (end !== 0) {\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\n\t\t\t\t\t\toldRows.forEach(function (rowData, i) {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\n\t\t\t\t\t\t\tif (row) {\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (newRows || end !== 0) {\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.splice.apply(data, arguments);\n\t\t\t}\n\t\t});\n\t};\n\n\tReactiveData.prototype.unwatchData = function () {\n\t\tif (this.data !== false) {\n\t\t\tfor (var key in this.origFuncs) {\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: this.origFuncs.key\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tReactiveData.prototype.watchRow = function (row) {\n\t\tvar self = this,\n\t\t    data = row.getData();\n\n\t\tthis.blocked = true;\n\n\t\tfor (var key in data) {\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\n\t\tthis.blocked = false;\n\t};\n\n\tReactiveData.prototype.watchKey = function (row, data, key) {\n\t\tvar self = this,\n\t\t    props = Object.getOwnPropertyDescriptor(data, key),\n\t\t    value = data[key],\n\t\t    version = this.currentVersion;\n\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: function set(newValue) {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t}\n\n\t\t\t\tif (props.set) {\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: function get() {\n\n\t\t\t\tif (props.get) {\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t};\n\n\tReactiveData.prototype.unwatchRow = function (row) {\n\t\tvar data = row.getData();\n\n\t\tfor (var key in data) {\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue: data[key]\n\t\t\t});\n\t\t}\n\t};\n\n\tReactiveData.prototype.block = function () {\n\t\tthis.blocked = true;\n\t};\n\n\tReactiveData.prototype.unblock = function () {\n\t\tthis.blocked = false;\n\t};\n\n\tTabulator.prototype.registerModule(\"reactiveData\", ReactiveData);\n\n\tvar ResizeColumns = function ResizeColumns(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\t};\n\n\tResizeColumns.prototype.initializeColumn = function (type, column, element) {\n\t\tvar self = this,\n\t\t    variableHeight = false,\n\t\t    mode = this.table.options.resizableColumns;\n\n\t\t//set column resize mode\n\t\tif (type === \"header\") {\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tcolumn.modules.resize = { variableHeight: variableHeight };\n\t\t}\n\n\t\tif (mode === true || mode == type) {\n\n\t\t\tvar handle = document.createElement('div');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\n\t\t\tvar prevHandle = document.createElement('div');\n\t\t\tprevHandle.className = \"tabulator-col-resize-handle prev\";\n\n\t\t\thandle.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tvar handleDown = function handleDown(e) {\n\t\t\t\tvar nearestColumn = column.getLastColumn();\n\n\t\t\t\tif (nearestColumn && self._checkResizability(nearestColumn)) {\n\t\t\t\t\tself.startColumn = column;\n\t\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, { passive: true });\n\n\t\t\t//reszie column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", function (e) {\n\t\t\t\tvar col = column.getLastColumn();\n\n\t\t\t\tif (col && self._checkResizability(col)) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tcol.reinitializeWidth(true);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tprevHandle.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tvar prevHandleDown = function prevHandleDown(e) {\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\n\n\t\t\t\tnearestColumn = column.getFirstColumn();\n\n\t\t\t\tif (nearestColumn) {\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n\t\t\t\t\tif (prevColumn && self._checkResizability(prevColumn)) {\n\t\t\t\t\t\tself.startColumn = column;\n\t\t\t\t\t\tself._mouseDown(e, prevColumn, prevHandle);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\n\t\t\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, { passive: true });\n\n\t\t\t//resize column on double click\n\t\t\tprevHandle.addEventListener(\"dblclick\", function (e) {\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\n\n\t\t\t\tnearestColumn = column.getFirstColumn();\n\n\t\t\t\tif (nearestColumn) {\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n\t\t\t\t\tif (prevColumn && self._checkResizability(prevColumn)) {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tprevColumn.reinitializeWidth(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\telement.appendChild(handle);\n\t\t\telement.appendChild(prevHandle);\n\t\t}\n\t};\n\n\tResizeColumns.prototype._checkResizability = function (column) {\n\t\treturn typeof column.definition.resizable != \"undefined\" ? column.definition.resizable : this.table.options.resizableColumns;\n\t};\n\n\tResizeColumns.prototype._mouseDown = function (e, column, handle) {\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e) {\n\t\t\t// self.table.columnManager.tempScrollBlock();\n\n\t\t\tcolumn.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\n\n\t\t\tif (!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t}\n\n\t\tfunction mouseUp(e) {\n\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif (self.startColumn.modules.edit) {\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\n\t\t\tif (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.columns) {\n\t\t\t\tself.table.modules.persistence.save(\"columns\");\n\t\t\t}\n\n\t\t\tself.table.options.columnResized.call(self.table, column.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\tif (self.startColumn.modules.edit) {\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n\t\tself.startWidth = column.getWidth();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, { passive: true });\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t};\n\n\tTabulator.prototype.registerModule(\"resizeColumns\", ResizeColumns);\n\tvar ResizeRows = function ResizeRows(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\t};\n\n\tResizeRows.prototype.initializeRow = function (row) {\n\t\tvar self = this,\n\t\t    rowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function (e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function handleDown(e) {\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, { passive: true });\n\n\t\tprevHandle.addEventListener(\"click\", function (e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown = function prevHandleDown(e) {\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif (prevRow) {\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, { passive: true });\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t};\n\n\tResizeRows.prototype._mouseDown = function (e, row, handle) {\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e) {\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n\t\t}\n\n\t\tfunction mouseUp(e) {\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.table.options.rowResized.call(this.table, row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, { passive: true });\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t};\n\n\tTabulator.prototype.registerModule(\"resizeRows\", ResizeRows);\n\tvar ResizeTable = function ResizeTable(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.binding = false;\n\t\tthis.observer = false;\n\t\tthis.containerObserver = false;\n\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\n\t\tthis.autoResize = false;\n\t};\n\n\tResizeTable.prototype.initialize = function (row) {\n\t\tvar _this70 = this;\n\n\t\tvar table = this.table,\n\t\t    tableStyle;\n\n\t\tthis.tableHeight = table.element.clientHeight;\n\t\tthis.tableWidth = table.element.clientWidth;\n\n\t\tif (table.element.parentNode) {\n\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t}\n\n\t\tif (typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\") {\n\n\t\t\tthis.autoResize = true;\n\n\t\t\tthis.observer = new ResizeObserver(function (entry) {\n\t\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\n\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\n\t\t\t\t\tif (_this70.tableHeight != nodeHeight || _this70.tableWidth != nodeWidth) {\n\t\t\t\t\t\t_this70.tableHeight = nodeHeight;\n\t\t\t\t\t\t_this70.tableWidth = nodeWidth;\n\n\t\t\t\t\t\tif (table.element.parentNode) {\n\t\t\t\t\t\t\t_this70.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t_this70.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.observer.observe(table.element);\n\n\t\t\ttableStyle = window.getComputedStyle(table.element);\n\n\t\t\tif (this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))) {\n\n\t\t\t\tthis.containerObserver = new ResizeObserver(function (entry) {\n\t\t\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\n\t\t\t\t\t\tif (_this70.containerHeight != nodeHeight || _this70.containerWidth != nodeWidth) {\n\t\t\t\t\t\t\t_this70.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t_this70.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t_this70.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t_this70.tableWidth = table.element.clientWidth;\n\n\t\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.binding = function () {\n\t\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\t\t\t\t\ttable.redraw();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t}\n\t};\n\n\tResizeTable.prototype.clearBindings = function (row) {\n\t\tif (this.binding) {\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\n\t\tif (this.observer) {\n\t\t\tthis.observer.unobserve(this.table.element);\n\t\t}\n\n\t\tif (this.containerObserver) {\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"resizeTable\", ResizeTable);\n\tvar ResponsiveLayout = function ResponsiveLayout(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\t};\n\n\t//generate resposive columns list\n\tResponsiveLayout.prototype.initialize = function () {\n\t\tvar self = this,\n\t\t    columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\t//detemine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column, i) {\n\t\t\tif (column.modules.responsive) {\n\t\t\t\tif (column.modules.responsive.order && column.modules.responsive.visible) {\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif (!column.visible && self.mode === \"collapse\") {\n\t\t\t\t\t\tself.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort(function (a, b) {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || b.modules.responsive.index - a.modules.responsive.index;\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif (this.mode === \"collapse\") {\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (var _iterator = this.table.columnManager.columnsByIndex, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t\t\tvar _ref;\n\n\t\t\tif (_isArray) {\n\t\t\t\tif (_i >= _iterator.length) break;\n\t\t\t\t_ref = _iterator[_i++];\n\t\t\t} else {\n\t\t\t\t_i = _iterator.next();\n\t\t\t\tif (_i.done) break;\n\t\t\t\t_ref = _i.value;\n\t\t\t}\n\n\t\t\tvar col = _ref;\n\n\t\t\tif (col.definition.formatter == \"responsiveCollapse\") {\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.collapseHandleColumn) {\n\t\t\tif (this.hiddenColumns.length) {\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t} else {\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t};\n\n\t//define layout information\n\tResponsiveLayout.prototype.initializeColumn = function (column) {\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = { order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible: def.visible === false ? false : true };\n\t};\n\n\tResponsiveLayout.prototype.initializeRow = function (row) {\n\t\tvar el;\n\n\t\tif (row.type !== \"calc\") {\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement: el,\n\t\t\t\topen: this.collapseStartOpen\n\t\t\t};\n\n\t\t\tif (!this.collapseStartOpen) {\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.layoutRow = function (row) {\n\t\tvar rowEl = row.getElement();\n\n\t\tif (row.modules.responsiveLayout) {\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t};\n\n\t//update column visibility\n\tResponsiveLayout.prototype.updateColumnVisibility = function (column, visible) {\n\t\tvar index;\n\t\tif (column.modules.responsive) {\n\t\t\tcolumn.modules.responsive.visible = visible;\n\t\t\tthis.initialize();\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.hideColumn = function (column) {\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif (this.mode === \"collapse\") {\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif (this.collapseHandleColumn && !colCount) {\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.showColumn = function (column) {\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif (this.mode === \"collapse\") {\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif (index > -1) {\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif (this.collapseHandleColumn && !this.hiddenColumns.length) {\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t};\n\n\t//redraw columns to fit space\n\tResponsiveLayout.prototype.update = function () {\n\t\tvar self = this,\n\t\t    working = true;\n\n\t\twhile (working) {\n\n\t\t\tvar width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\n\n\t\t\tvar diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\n\n\t\t\tif (diff < 0) {\n\t\t\t\t//table is too wide\n\t\t\t\tvar column = self.columns[self.index];\n\n\t\t\t\tif (column) {\n\t\t\t\t\tself.hideColumn(column);\n\t\t\t\t\tself.index++;\n\t\t\t\t} else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t//table has spare space\n\t\t\t\tvar _column = self.columns[self.index - 1];\n\n\t\t\t\tif (_column) {\n\t\t\t\t\tif (diff > 0) {\n\t\t\t\t\t\tif (diff >= _column.getWidth()) {\n\t\t\t\t\t\t\tself.showColumn(_column);\n\t\t\t\t\t\t\tself.index--;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!self.table.rowManager.activeRowsCount) {\n\t\t\t\tself.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.generateCollapsedContent = function () {\n\t\tvar self = this,\n\t\t    rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach(function (row) {\n\t\t\tself.generateCollapsedRowContent(row);\n\t\t});\n\t};\n\n\tResponsiveLayout.prototype.generateCollapsedRowContent = function (row) {\n\t\tvar el, contents;\n\n\t\tif (row.modules.responsiveLayout) {\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile (el.firstChild) {\n\t\t\t\tel.removeChild(el.firstChild);\n\t\t\t}contents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif (contents) {\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.generateCollapsedRowData = function (row) {\n\t\tvar self = this,\n\t\t    data = row.getData(),\n\t\t    output = [],\n\t\t    mockCellComponent;\n\n\t\tthis.hiddenColumns.forEach(function (column) {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif (column.definition.title && column.field) {\n\t\t\t\tif (column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters) {\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue: false,\n\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData: function getData() {\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tResponsiveLayout.prototype.formatCollapsedData = function (data) {\n\t\tvar list = document.createElement(\"table\"),\n\t\t    listContents = \"\";\n\n\t\tdata.forEach(function (item) {\n\t\t\tvar div = document.createElement(\"div\");\n\n\t\t\tif (item.value instanceof Node) {\n\t\t\t\tdiv.appendChild(item.value);\n\t\t\t\titem.value = div.innerHTML;\n\t\t\t}\n\n\t\t\tlistContents += \"<tr><td><strong>\" + item.title + \"</strong></td><td>\" + item.value + \"</td></tr>\";\n\t\t});\n\n\t\tlist.innerHTML = listContents;\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t};\n\n\tTabulator.prototype.registerModule(\"responsiveLayout\", ResponsiveLayout);\n\n\tvar SelectRow = function SelectRow(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t};\n\n\tSelectRow.prototype.clearSelectionData = function (silent) {\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\n\t\tif (!silent) {\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t};\n\n\tSelectRow.prototype.initializeRow = function (row) {\n\t\tvar self = this,\n\t\t    element = row.getElement();\n\n\t\t// trigger end of row selection\n\t\tvar endSelect = function endSelect() {\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\n\t\trow.modules.select = { selected: false };\n\n\t\t//set row selection class\n\t\tif (self.table.options.selectableCheck.call(this.table, row.getComponent())) {\n\t\t\telement.classList.add(\"tabulator-selectable\");\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\n\n\t\t\tif (self.table.options.selectable && self.table.options.selectable != \"highlight\") {\n\t\t\t\tif (self.table.options.selectableRangeMode === \"click\") {\n\t\t\t\t\telement.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.lastClickedRow = self.lastClickedRow || row;\n\n\t\t\t\t\t\t\tvar lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\n\t\t\t\t\t\t\tvar rowIdx = self.table.rowManager.getDisplayRowIndex(row);\n\n\t\t\t\t\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\t\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\n\t\t\t\t\t\t\tvar rows = self.table.rowManager.getDisplayRows().slice(0);\n\t\t\t\t\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\n\t\t\t\t\t\t\tif (e.ctrlKey || e.metaKey) {\n\t\t\t\t\t\t\t\ttoggledRows.forEach(function (toggledRow) {\n\t\t\t\t\t\t\t\t\tif (toggledRow !== self.lastClickedRow) {\n\n\t\t\t\t\t\t\t\t\t\tif (self.table.options.selectable !== true && !self.isRowSelected(row)) {\n\t\t\t\t\t\t\t\t\t\t\tif (self.selectedRows.length < self.table.options.selectable) {\n\t\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tself.deselectRows(undefined, true);\n\n\t\t\t\t\t\t\t\tif (self.table.options.selectable !== true) {\n\t\t\t\t\t\t\t\t\tif (toggledRows.length > self.table.options.selectable) {\n\t\t\t\t\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, self.table.options.selectable);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tself.selectRows(toggledRows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t} else if (e.ctrlKey || e.metaKey) {\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.deselectRows(undefined, true);\n\t\t\t\t\t\t\tself.selectRows(row);\n\t\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\telement.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\tif (!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!self.selecting) {\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\telement.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\n\t\t\t\t\t\t\tself.selecting = true;\n\n\t\t\t\t\t\t\tself.selectPrev = [];\n\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\n\t\t\t\t\t\t\tself.toggleRow(row);\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function (e) {\n\t\t\t\t\t\tif (self.selecting) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\n\t\t\t\t\t\t\tif (self.selectPrev[1] == row) {\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\telement.addEventListener(\"mouseout\", function (e) {\n\t\t\t\t\t\tif (self.selecting) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\telement.classList.add(\"tabulator-unselectable\");\n\t\t\telement.classList.remove(\"tabulator-selectable\");\n\t\t}\n\t};\n\n\t//toggle row selection\n\tSelectRow.prototype.toggleRow = function (row) {\n\t\tif (this.table.options.selectableCheck.call(this.table, row.getComponent())) {\n\t\t\tif (row.modules.select && row.modules.select.selected) {\n\t\t\t\tthis._deselectRow(row);\n\t\t\t} else {\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t};\n\n\t//select a number of rows\n\tSelectRow.prototype.selectRows = function (rows) {\n\t\tvar _this71 = this;\n\n\t\tvar rowMatch;\n\n\t\tswitch (typeof rows === 'undefined' ? 'undefined' : _typeof(rows)) {\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.table.rowManager.rows.forEach(function (row) {\n\t\t\t\t\t_this71._selectRow(row, true, true);\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\tbreak;\n\n\t\t\tcase \"string\":\n\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\n\t\t\t\tif (rowMatch) {\n\t\t\t\t\tthis._selectRow(rowMatch, true, true);\n\t\t\t\t} else {\n\t\t\t\t\tthis.table.rowManager.getRows(rows).forEach(function (row) {\n\t\t\t\t\t\t_this71._selectRow(row, true, true);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tif (Array.isArray(rows)) {\n\t\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\t\t_this71._selectRow(row, true, true);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\t} else {\n\t\t\t\t\tthis._selectRow(rows, false, true);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t//select an individual row\n\tSelectRow.prototype._selectRow = function (rowInfo, silent, force) {\n\t\tvar index;\n\n\t\t//handle max row count\n\t\tif (!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force) {\n\t\t\tif (this.selectedRows.length >= this.table.options.selectable) {\n\t\t\t\tif (this.table.options.selectableRollingSelection) {\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\n\t\tif (row) {\n\t\t\tif (this.selectedRows.indexOf(row) == -1) {\n\t\t\t\tif (!row.modules.select) {\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif (row.modules.select.checkboxEl) {\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\n\t\t\t\tthis.selectedRows.push(row);\n\n\t\t\t\tif (this.table.options.dataTreeSelectPropagate) {\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\n\t\t\t\tif (!silent) {\n\t\t\t\t\tthis.table.options.rowSelected.call(this.table, row.getComponent());\n\t\t\t\t}\n\n\t\t\t\tthis._rowSelectionChanged(silent);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!silent) {\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t};\n\n\tSelectRow.prototype.isRowSelected = function (row) {\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t};\n\n\t//deselect a number of rows\n\tSelectRow.prototype.deselectRows = function (rows, silent) {\n\t\tvar self = this,\n\t\t    rowCount;\n\n\t\tif (typeof rows == \"undefined\") {\n\n\t\t\trowCount = self.selectedRows.length;\n\n\t\t\tfor (var i = 0; i < rowCount; i++) {\n\t\t\t\tself._deselectRow(self.selectedRows[0], true);\n\t\t\t}\n\n\t\t\tself._rowSelectionChanged(silent);\n\t\t} else {\n\t\t\tif (Array.isArray(rows)) {\n\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\tself._deselectRow(row, true);\n\t\t\t\t});\n\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t} else {\n\t\t\t\tself._deselectRow(rows, silent);\n\t\t\t}\n\t\t}\n\t};\n\n\t//deselect an individual row\n\tSelectRow.prototype._deselectRow = function (rowInfo, silent) {\n\t\tvar self = this,\n\t\t    row = self.table.rowManager.findRow(rowInfo),\n\t\t    index;\n\n\t\tif (row) {\n\t\t\tindex = self.selectedRows.findIndex(function (selectedRow) {\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\n\t\t\tif (index > -1) {\n\n\t\t\t\tif (!row.modules.select) {\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif (row.modules.select.checkboxEl) {\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\n\t\t\t\tself.selectedRows.splice(index, 1);\n\n\t\t\t\tif (this.table.options.dataTreeSelectPropagate) {\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\n\t\t\t\tif (!silent) {\n\t\t\t\t\tself.table.options.rowDeselected.call(this.table, row.getComponent());\n\t\t\t\t}\n\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!silent) {\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t};\n\n\tSelectRow.prototype.getSelectedData = function () {\n\t\tvar data = [];\n\n\t\tthis.selectedRows.forEach(function (row) {\n\t\t\tdata.push(row.getData());\n\t\t});\n\n\t\treturn data;\n\t};\n\n\tSelectRow.prototype.getSelectedRows = function () {\n\n\t\tvar rows = [];\n\n\t\tthis.selectedRows.forEach(function (row) {\n\t\t\trows.push(row.getComponent());\n\t\t});\n\n\t\treturn rows;\n\t};\n\n\tSelectRow.prototype._rowSelectionChanged = function (silent) {\n\t\tif (this.headerCheckboxElement) {\n\t\t\tif (this.selectedRows.length === 0) {\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if (this.table.rowManager.rows.length === this.selectedRows.length) {\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\n\t\tif (!silent) {\n\t\t\tthis.table.options.rowSelectionChanged.call(this.table, this.getSelectedData(), this.getSelectedRows());\n\t\t}\n\t};\n\n\tSelectRow.prototype.registerRowSelectCheckbox = function (row, element) {\n\t\tif (!row._row.modules.select) {\n\t\t\trow._row.modules.select = {};\n\t\t}\n\n\t\trow._row.modules.select.checkboxEl = element;\n\t};\n\n\tSelectRow.prototype.registerHeaderSelectCheckbox = function (element) {\n\t\tthis.headerCheckboxElement = element;\n\t};\n\n\tSelectRow.prototype.childRowSelection = function (row, select) {\n\t\tvar children = this.table.modules.dataTree.getChildren(row);\n\n\t\tif (select) {\n\t\t\tfor (var _iterator2 = children, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n\t\t\t\tvar _ref2;\n\n\t\t\t\tif (_isArray2) {\n\t\t\t\t\tif (_i2 >= _iterator2.length) break;\n\t\t\t\t\t_ref2 = _iterator2[_i2++];\n\t\t\t\t} else {\n\t\t\t\t\t_i2 = _iterator2.next();\n\t\t\t\t\tif (_i2.done) break;\n\t\t\t\t\t_ref2 = _i2.value;\n\t\t\t\t}\n\n\t\t\t\tvar child = _ref2;\n\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var _iterator3 = children, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n\t\t\t\tvar _ref3;\n\n\t\t\t\tif (_isArray3) {\n\t\t\t\t\tif (_i3 >= _iterator3.length) break;\n\t\t\t\t\t_ref3 = _iterator3[_i3++];\n\t\t\t\t} else {\n\t\t\t\t\t_i3 = _iterator3.next();\n\t\t\t\t\tif (_i3.done) break;\n\t\t\t\t\t_ref3 = _i3.value;\n\t\t\t\t}\n\n\t\t\t\tvar _child = _ref3;\n\n\t\t\t\tthis._deselectRow(_child, true);\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"selectRow\", SelectRow);\n\n\tvar Sort = function Sort(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\t};\n\n\t//initialize column header for sorting\n\tSort.prototype.initializeColumn = function (column, content) {\n\t\tvar self = this,\n\t\t    sorter = false,\n\t\t    colEl,\n\t\t    arrowEl;\n\n\t\tswitch (_typeof(column.definition.sorter)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (self.sorters[column.definition.sorter]) {\n\t\t\t\t\tsorter = self.sorters[column.definition.sorter];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tcolumn.modules.sort = {\n\t\t\tsorter: sorter, dir: \"none\",\n\t\t\tparams: column.definition.sorterParams || {},\n\t\t\tstartingDir: column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: typeof column.definition.headerSortTristate !== \"undefined\" ? column.definition.headerSortTristate : this.table.options.headerSortTristate\n\t\t};\n\n\t\tif (typeof column.definition.headerSort === \"undefined\" ? this.table.options.headerSort !== false : column.definition.headerSort !== false) {\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-arrow\");\n\t\t\t//create sorter arrow\n\t\t\tcontent.appendChild(arrowEl);\n\n\t\t\t//sort on click\n\t\t\tcolEl.addEventListener(\"click\", function (e) {\n\t\t\t\tvar dir = \"\",\n\t\t\t\t    sorters = [],\n\t\t\t\t    match = false;\n\n\t\t\t\tif (column.modules.sort) {\n\t\t\t\t\tif (column.modules.sort.tristate) {\n\t\t\t\t\t\tif (column.modules.sort.dir == \"none\") {\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (column.modules.sort.dir == column.modules.sort.startingDir) {\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswitch (column.modules.sort.dir) {\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = self.getSort();\n\n\t\t\t\t\t\tmatch = sorters.findIndex(function (sorter) {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (match > -1) {\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\n\t\t\t\t\t\t\tif (match != sorters.length - 1) {\n\t\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\t\tif (dir != \"none\") {\n\t\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (dir != \"none\") {\n\t\t\t\t\t\t\t\tsorters.push({ column: column, dir: dir });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tself.setSort(sorters);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dir == \"none\") {\n\t\t\t\t\t\t\tself.clear();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tself.setSort(column, dir);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.table.rowManager.sorterRefresh(!self.sortList.length);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t//check if the sorters have changed since last use\n\tSort.prototype.hasChanged = function () {\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t};\n\n\t//return current sorters\n\tSort.prototype.getSort = function () {\n\t\tvar self = this,\n\t\t    sorters = [];\n\n\t\tself.sortList.forEach(function (item) {\n\t\t\tif (item.column) {\n\t\t\t\tsorters.push({ column: item.column.getComponent(), field: item.column.getField(), dir: item.dir });\n\t\t\t}\n\t\t});\n\n\t\treturn sorters;\n\t};\n\n\t//change sort list and trigger sort\n\tSort.prototype.setSort = function (sortList, dir) {\n\t\tvar self = this,\n\t\t    newSortList = [];\n\n\t\tif (!Array.isArray(sortList)) {\n\t\t\tsortList = [{ column: sortList, dir: dir }];\n\t\t}\n\n\t\tsortList.forEach(function (item) {\n\t\t\tvar column;\n\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\n\t\t\tif (column) {\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\t\t});\n\n\t\tself.sortList = newSortList;\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.sort) {\n\t\t\tthis.table.modules.persistence.save(\"sort\");\n\t\t}\n\t};\n\n\t//clear sorters\n\tSort.prototype.clear = function () {\n\t\tthis.setSort([]);\n\t};\n\n\t//find appropriate sorter for column\n\tSort.prototype.findSorter = function (column) {\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\t    sorter = \"string\",\n\t\t    field,\n\t\t    value;\n\n\t\tif (row) {\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\n\t\t\tif (field) {\n\n\t\t\t\tvalue = column.getFieldValue(row);\n\n\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.sorters[sorter];\n\t};\n\n\t//work through sort list sorting data\n\tSort.prototype.sort = function (data) {\n\t\tvar self = this,\n\t\t    sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\t    sortListActual = [],\n\t\t    lastSort;\n\n\t\tif (self.table.options.dataSorting) {\n\t\t\tself.table.options.dataSorting.call(self.table, self.getSort());\n\t\t}\n\n\t\tself.clearColumnHeaders();\n\n\t\tif (!self.table.options.ajaxSorting) {\n\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function (item, i) {\n\t\t\t\tvar sortObj = item.column.modules.sort;\n\n\t\t\t\tif (item.column && sortObj) {\n\n\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\tif (!sortObj.sorter) {\n\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t}\n\n\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\n\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t}\n\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\t\t} else {\n\t\t\tsortList.forEach(function (item, i) {\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.dataSorted) {\n\t\t\tself.table.options.dataSorted.call(self.table, self.getSort(), self.table.rowManager.getComponents(\"active\"));\n\t\t}\n\t};\n\n\t//clear sort arrows on columns\n\tSort.prototype.clearColumnHeaders = function () {\n\t\tthis.table.columnManager.getRealColumns().forEach(function (column) {\n\t\t\tif (column.modules.sort) {\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//set the column header sort direction\n\tSort.prototype.setColumnHeader = function (column, dir) {\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir);\n\t};\n\n\t//sort each item in sort list\n\tSort.prototype._sortItems = function (data, sortList) {\n\t\tvar _this72 = this;\n\n\t\tvar sorterCount = sortList.length - 1;\n\n\t\tdata.sort(function (a, b) {\n\t\t\tvar result;\n\n\t\t\tfor (var i = sorterCount; i >= 0; i--) {\n\t\t\t\tvar sortItem = sortList[i];\n\n\t\t\t\tresult = _this72._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n\t\t\t\tif (result !== 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t};\n\n\t//process individual rows for a sort function on active data\n\tSort.prototype._sortRow = function (a, b, column, dir, params) {\n\t\tvar el1Comp, el2Comp, colComp;\n\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t};\n\n\t//default data sorters\n\tSort.prototype.sorters = {\n\n\t\t//sort numbers\n\t\tnumber: function number(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\t\tvar decimal = params.decimalSeparator || \".\";\n\t\t\tvar thousand = params.thousandSeparator || \",\";\n\t\t\tvar emptyAlign = 0;\n\n\t\t\ta = parseFloat(String(a).split(thousand).join(\"\").split(decimal).join(\".\"));\n\t\t\tb = parseFloat(String(b).split(thousand).join(\"\").split(decimal).join(\".\"));\n\n\t\t\t//handle non numeric values\n\t\t\tif (isNaN(a)) {\n\t\t\t\temptyAlign = isNaN(b) ? 0 : -1;\n\t\t\t} else if (isNaN(b)) {\n\t\t\t\temptyAlign = 1;\n\t\t\t} else {\n\t\t\t\t//compare valid values\n\t\t\t\treturn a - b;\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t},\n\n\t\t//sort strings\n\t\tstring: function string(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\t\tvar emptyAlign = 0;\n\t\t\tvar locale;\n\n\t\t\t//handle empty values\n\t\t\tif (!a) {\n\t\t\t\temptyAlign = !b ? 0 : -1;\n\t\t\t} else if (!b) {\n\t\t\t\temptyAlign = 1;\n\t\t\t} else {\n\t\t\t\t//compare valid values\n\t\t\t\tswitch (_typeof(params.locale)) {\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tif (params.locale) {\n\t\t\t\t\t\t\tlocale = this.table.modules.localize.getLocale();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tlocale = params.locale;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t},\n\n\t\t//sort date\n\t\tdate: function date(a, b, aRow, bRow, column, dir, params) {\n\t\t\tif (!params.format) {\n\t\t\t\tparams.format = \"DD/MM/YYYY\";\n\t\t\t}\n\n\t\t\treturn this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n\t\t},\n\n\t\t//sort hh:mm formatted times\n\t\ttime: function time(a, b, aRow, bRow, column, dir, params) {\n\t\t\tif (!params.format) {\n\t\t\t\tparams.format = \"hh:mm\";\n\t\t\t}\n\n\t\t\treturn this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n\t\t},\n\n\t\t//sort datetime\n\t\tdatetime: function datetime(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar format = params.format || \"DD/MM/YYYY hh:mm:ss\",\n\t\t\t    alignEmptyValues = params.alignEmptyValues,\n\t\t\t    emptyAlign = 0;\n\n\t\t\tif (typeof moment != \"undefined\") {\n\t\t\t\ta = moment(a, format);\n\t\t\t\tb = moment(b, format);\n\n\t\t\t\tif (!a.isValid()) {\n\t\t\t\t\temptyAlign = !b.isValid() ? 0 : -1;\n\t\t\t\t} else if (!b.isValid()) {\n\t\t\t\t\temptyAlign = 1;\n\t\t\t\t} else {\n\t\t\t\t\t//compare valid values\n\t\t\t\t\treturn a - b;\n\t\t\t\t}\n\n\t\t\t\t//fix empty values in position\n\t\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\t\temptyAlign *= -1;\n\t\t\t\t}\n\n\t\t\t\treturn emptyAlign;\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on moment.js\");\n\t\t\t}\n\t\t},\n\n\t\t//sort booleans\n\t\tboolean: function boolean(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\t\t\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\t\t\treturn el1 - el2;\n\t\t},\n\n\t\t//sort if element contains any data\n\t\tarray: function array(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar el1 = 0;\n\t\t\tvar el2 = 0;\n\t\t\tvar type = params.type || \"length\";\n\t\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\t\tvar emptyAlign = 0;\n\n\t\t\tfunction calc(value) {\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase \"length\":\n\t\t\t\t\t\treturn value.length;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"sum\":\n\t\t\t\t\t\treturn value.reduce(function (c, d) {\n\t\t\t\t\t\t\treturn c + d;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"max\":\n\t\t\t\t\t\treturn Math.max.apply(null, value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"min\":\n\t\t\t\t\t\treturn Math.min.apply(null, value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"avg\":\n\t\t\t\t\t\treturn value.reduce(function (c, d) {\n\t\t\t\t\t\t\treturn c + d;\n\t\t\t\t\t\t}) / value.length;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//handle non array values\n\t\t\tif (!Array.isArray(a)) {\n\t\t\t\talignEmptyValues = !Array.isArray(b) ? 0 : -1;\n\t\t\t} else if (!Array.isArray(b)) {\n\t\t\t\talignEmptyValues = 1;\n\t\t\t} else {\n\n\t\t\t\t//compare valid values\n\t\t\t\tel1 = a ? calc(a) : 0;\n\t\t\t\tel2 = b ? calc(b) : 0;\n\n\t\t\t\treturn el1 - el2;\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t},\n\n\t\t//sort if element contains any data\n\t\texists: function exists(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\t\t\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\t\t\treturn el1 - el2;\n\t\t},\n\n\t\t//sort alpha numeric strings\n\t\talphanum: function alphanum(as, bs, aRow, bRow, column, dir, params) {\n\t\t\tvar a,\n\t\t\t    b,\n\t\t\t    a1,\n\t\t\t    b1,\n\t\t\t    i = 0,\n\t\t\t    L,\n\t\t\t    rx = /(\\d+)|(\\D+)/g,\n\t\t\t    rd = /\\d/;\n\t\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\t\tvar emptyAlign = 0;\n\n\t\t\t//handle empty values\n\t\t\tif (!as && as !== 0) {\n\t\t\t\temptyAlign = !bs && bs !== 0 ? 0 : -1;\n\t\t\t} else if (!bs && bs !== 0) {\n\t\t\t\temptyAlign = 1;\n\t\t\t} else {\n\n\t\t\t\tif (isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\t\ta = String(as).toLowerCase();\n\t\t\t\tb = String(bs).toLowerCase();\n\t\t\t\tif (a === b) return 0;\n\t\t\t\tif (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\t\ta = a.match(rx);\n\t\t\t\tb = b.match(rx);\n\t\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\t\twhile (i < L) {\n\t\t\t\t\ta1 = a[i];\n\t\t\t\t\tb1 = b[i++];\n\t\t\t\t\tif (a1 !== b1) {\n\t\t\t\t\t\tif (isFinite(a1) && isFinite(b1)) {\n\t\t\t\t\t\t\tif (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\t\tif (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t\t} else return a1 > b1 ? 1 : -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn a.length > b.length;\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"sort\", Sort);\n\n\tvar Validate = function Validate(table) {\n\t\tthis.table = table;\n\t};\n\n\t//validate\n\tValidate.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    config = [],\n\t\t    validator;\n\n\t\tif (column.definition.validator) {\n\n\t\t\tif (Array.isArray(column.definition.validator)) {\n\t\t\t\tcolumn.definition.validator.forEach(function (item) {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\n\t\t\t\t\tif (validator) {\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\n\t\t\t\tif (validator) {\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t};\n\n\tValidate.prototype._extractValidator = function (value) {\n\t\tvar type, params, pos;\n\n\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\n\t\t\t\tif (pos > -1) {\n\t\t\t\t\ttype = value.substring(0, pos);\n\t\t\t\t\tparams = value.substring(pos + 1);\n\t\t\t\t} else {\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\tbreak;\n\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tValidate.prototype._buildValidator = function (type, params) {\n\n\t\tvar func = typeof type == \"function\" ? type : this.validators[type];\n\n\t\tif (!func) {\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttype: typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc: func,\n\t\t\t\tparams: params\n\t\t\t};\n\t\t}\n\t};\n\n\tValidate.prototype.validate = function (validators, cell, value) {\n\t\tvar self = this,\n\t\t    valid = [];\n\n\t\tif (validators) {\n\t\t\tvalidators.forEach(function (item) {\n\t\t\t\tif (!item.func.call(self, cell, value, item.params)) {\n\t\t\t\t\tvalid.push({\n\t\t\t\t\t\ttype: item.type,\n\t\t\t\t\t\tparameters: item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn valid.length ? valid : true;\n\t};\n\n\tValidate.prototype.validators = {\n\n\t\t//is integer\n\t\tinteger: function integer(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvalue = Number(value);\n\t\t\treturn typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n\t\t},\n\n\t\t//is float\n\t\tfloat: function float(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvalue = Number(value);\n\t\t\treturn typeof value === 'number' && isFinite(value) && value % 1 !== 0;\n\t\t},\n\n\t\t//must be a number\n\t\tnumeric: function numeric(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn !isNaN(value);\n\t\t},\n\n\t\t//must be a string\n\t\tstring: function string(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn isNaN(value);\n\t\t},\n\n\t\t//maximum value\n\t\tmax: function max(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn parseFloat(value) <= parameters;\n\t\t},\n\n\t\t//minimum value\n\t\tmin: function min(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn parseFloat(value) >= parameters;\n\t\t},\n\n\t\t//minimum string length\n\t\tminLength: function minLength(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String(value).length >= parameters;\n\t\t},\n\n\t\t//maximum string length\n\t\tmaxLength: function maxLength(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String(value).length <= parameters;\n\t\t},\n\n\t\t//in provided value list\n\t\tin: function _in(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (typeof parameters == \"string\") {\n\t\t\t\tparameters = parameters.split(\"|\");\n\t\t\t}\n\n\t\t\treturn value === \"\" || parameters.indexOf(value) > -1;\n\t\t},\n\n\t\t//must match provided regex\n\t\tregex: function regex(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar reg = new RegExp(parameters);\n\n\t\t\treturn reg.test(value);\n\t\t},\n\n\t\t//value must be unique in this column\n\t\tunique: function unique(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar unique = true;\n\n\t\t\tvar cellData = cell.getData();\n\t\t\tvar column = cell.getColumn()._getSelf();\n\n\t\t\tthis.table.rowManager.rows.forEach(function (row) {\n\t\t\t\tvar data = row.getData();\n\n\t\t\t\tif (data !== cellData) {\n\t\t\t\t\tif (value == column.getFieldValue(data)) {\n\t\t\t\t\t\tunique = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn unique;\n\t\t},\n\n\t\t//must have a value\n\t\trequired: function required(cell, value, parameters) {\n\t\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"validate\", Validate);\n\n\treturn Tabulator;\n});"]},"metadata":{},"sourceType":"script"}