{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar dates = _interopRequireWildcard(require(\"../../utils/dates\"));\n\nvar _selection = require(\"../../utils/selection\");\n\nvar _reactDom = require(\"react-dom\");\n\nvar _eventLevels = require(\"../../utils/eventLevels\");\n\nvar _Selection = _interopRequireWildcard(require(\"../../Selection\"));\n\nvar _EventRow = _interopRequireDefault(require(\"../../EventRow\"));\n\nvar _common = require(\"./common\");\n\nvar propTypes = process.env.NODE_ENV !== \"production\" ? {} : {};\n\nvar eventTimes = function eventTimes(event, accessors) {\n  var start = accessors.start(event);\n  var end = accessors.end(event);\n  var isZeroDuration = dates.eq(start, end, 'minutes') && start.getMinutes() === 0; // make zero duration midnight events at least one day long\n\n  if (isZeroDuration) end = dates.add(end, 1, 'day');\n  return {\n    start: start,\n    end: end\n  };\n};\n\nvar WeekWrapper = /*#__PURE__*/function (_React$Component) {\n  (0, _inheritsLoose2.default)(WeekWrapper, _React$Component);\n\n  function WeekWrapper() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _this.handleMove = function (_ref, node, draggedEvent) {\n      var x = _ref.x,\n          y = _ref.y;\n      var _this$context$draggab = _this.context.draggable.dragAndDropAction.event,\n          event = _this$context$draggab === void 0 ? draggedEvent : _this$context$draggab;\n      var metrics = _this.props.slotMetrics;\n      var accessors = _this.props.accessors;\n      if (!event) return;\n      var rowBox = (0, _Selection.getBoundsForNode)(node);\n\n      if (!(0, _selection.pointInBox)(rowBox, {\n        x: x,\n        y: y\n      })) {\n        _this.reset();\n\n        return;\n      } // Make sure to maintain the time of the start date while moving it to the new slot\n\n\n      var start = dates.merge(metrics.getDateForSlot((0, _selection.getSlotAtX)(rowBox, x, false, metrics.slots)), accessors.start(event));\n      var end = dates.add(start, dates.diff(accessors.start(event), accessors.end(event), 'minutes'), 'minutes');\n\n      _this.update(event, start, end);\n    };\n\n    _this.handleDropFromOutside = function (point, rowBox) {\n      if (!_this.context.draggable.onDropFromOutside) return;\n      var metrics = _this.props.slotMetrics;\n      var start = metrics.getDateForSlot((0, _selection.getSlotAtX)(rowBox, point.x, false, metrics.slots));\n\n      _this.context.draggable.onDropFromOutside({\n        start: start,\n        end: dates.add(start, 1, 'day'),\n        allDay: false\n      });\n    };\n\n    _this.handleDragOverFromOutside = function (_ref2, node) {\n      var x = _ref2.x,\n          y = _ref2.y;\n      if (!_this.context.draggable.dragFromOutsideItem) return;\n\n      _this.handleMove({\n        x: x,\n        y: y\n      }, node, _this.context.draggable.dragFromOutsideItem());\n    };\n\n    _this._selectable = function () {\n      var node = (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)).closest('.rbc-month-row, .rbc-allday-cell');\n      var container = node.closest('.rbc-month-view, .rbc-time-view');\n      var selector = _this._selector = new _Selection.default(function () {\n        return container;\n      });\n      selector.on('beforeSelect', function (point) {\n        var isAllDay = _this.props.isAllDay;\n        var action = _this.context.draggable.dragAndDropAction.action;\n        return action === 'move' || action === 'resize' && (!isAllDay || (0, _selection.pointInBox)((0, _Selection.getBoundsForNode)(node), point));\n      });\n      selector.on('selecting', function (box) {\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        var dragAndDropAction = _this.context.draggable.dragAndDropAction;\n        if (dragAndDropAction.action === 'move') _this.handleMove(box, bounds);\n        if (dragAndDropAction.action === 'resize') _this.handleResize(box, bounds);\n      });\n      selector.on('selectStart', function () {\n        return _this.context.draggable.onStart();\n      });\n      selector.on('select', function (point) {\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        if (!_this.state.segment || !(0, _selection.pointInBox)(bounds, point)) return;\n\n        _this.handleInteractionEnd();\n      });\n      selector.on('dropFromOutside', function (point) {\n        if (!_this.context.draggable.onDropFromOutside) return;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        if (!(0, _selection.pointInBox)(bounds, point)) return;\n\n        _this.handleDropFromOutside(point, bounds);\n      });\n      selector.on('dragOverFromOutside', function (point) {\n        if (!_this.context.draggable.dragFromOutsideItem) return;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n\n        _this.handleDragOverFromOutside(point, bounds);\n      });\n      selector.on('click', function () {\n        return _this.context.draggable.onEnd(null);\n      });\n      selector.on('reset', function () {\n        _this.reset();\n\n        _this.context.draggable.onEnd(null);\n      });\n    };\n\n    _this.handleInteractionEnd = function () {\n      var _this$props = _this.props,\n          resourceId = _this$props.resourceId,\n          isAllDay = _this$props.isAllDay;\n      var event = _this.state.segment.event;\n\n      _this.reset();\n\n      _this.context.draggable.onEnd({\n        start: event.start,\n        end: event.end,\n        resourceId: resourceId,\n        isAllDay: isAllDay\n      });\n    };\n\n    _this._teardownSelectable = function () {\n      if (!_this._selector) return;\n\n      _this._selector.teardown();\n\n      _this._selector = null;\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  var _proto = WeekWrapper.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this._selectable();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._teardownSelectable();\n  };\n\n  _proto.reset = function reset() {\n    if (this.state.segment) this.setState({\n      segment: null\n    });\n  };\n\n  _proto.update = function update(event, start, end) {\n    var segment = (0, _eventLevels.eventSegments)((0, _extends2.default)({}, event, {\n      end: end,\n      start: start,\n      __isPreview: true\n    }), this.props.slotMetrics.range, _common.dragAccessors);\n    var lastSegment = this.state.segment;\n\n    if (lastSegment && segment.span === lastSegment.span && segment.left === lastSegment.left && segment.right === lastSegment.right) {\n      return;\n    }\n\n    this.setState({\n      segment: segment\n    });\n  };\n\n  _proto.handleResize = function handleResize(point, node) {\n    var _this$context$draggab2 = this.context.draggable.dragAndDropAction,\n        event = _this$context$draggab2.event,\n        direction = _this$context$draggab2.direction;\n    var _this$props2 = this.props,\n        accessors = _this$props2.accessors,\n        metrics = _this$props2.slotMetrics;\n\n    var _eventTimes = eventTimes(event, accessors),\n        start = _eventTimes.start,\n        end = _eventTimes.end;\n\n    var rowBox = (0, _Selection.getBoundsForNode)(node);\n    var cursorInRow = (0, _selection.pointInBox)(rowBox, point);\n\n    if (direction === 'RIGHT') {\n      if (cursorInRow) {\n        if (metrics.last < start) return this.reset(); // add min\n\n        end = dates.add(metrics.getDateForSlot((0, _selection.getSlotAtX)(rowBox, point.x, false, metrics.slots)), 1, 'day');\n      } else if (dates.inRange(start, metrics.first, metrics.last) || rowBox.bottom < point.y && +metrics.first > +start) {\n        end = dates.add(metrics.last, 1, 'milliseconds');\n      } else {\n        this.setState({\n          segment: null\n        });\n        return;\n      }\n\n      end = dates.max(end, dates.add(start, 1, 'day'));\n    } else if (direction === 'LEFT') {\n      // inbetween Row\n      if (cursorInRow) {\n        if (metrics.first > end) return this.reset();\n        start = metrics.getDateForSlot((0, _selection.getSlotAtX)(rowBox, point.x, false, metrics.slots));\n      } else if (dates.inRange(end, metrics.first, metrics.last) || rowBox.top > point.y && +metrics.last < +end) {\n        start = dates.add(metrics.first, -1, 'milliseconds');\n      } else {\n        this.reset();\n        return;\n      }\n\n      start = dates.min(dates.add(end, -1, 'day'), start);\n    }\n\n    this.update(event, start, end);\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        children = _this$props3.children,\n        accessors = _this$props3.accessors;\n    var segment = this.state.segment;\n    return _react.default.createElement(\"div\", {\n      className: \"rbc-addons-dnd-row-body\"\n    }, children, segment && _react.default.createElement(_EventRow.default, (0, _extends2.default)({}, this.props, {\n      selected: null,\n      className: \"rbc-addons-dnd-drag-row\",\n      segments: [segment],\n      accessors: (0, _extends2.default)({}, accessors, _common.dragAccessors)\n    })));\n  };\n\n  return WeekWrapper;\n}(_react.default.Component);\n\nWeekWrapper.contextTypes = {\n  draggable: _propTypes.default.shape({\n    onStart: _propTypes.default.func,\n    onEnd: _propTypes.default.func,\n    dragAndDropAction: _propTypes.default.object,\n    onDropFromOutside: _propTypes.default.func,\n    onBeginAction: _propTypes.default.func,\n    dragFromOutsideItem: _propTypes.default.func\n  })\n};\nWeekWrapper.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  isAllDay: _propTypes.default.bool,\n  slotMetrics: _propTypes.default.object.isRequired,\n  accessors: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  resourceId: _propTypes.default.any\n} : {};\nWeekWrapper.propTypes = process.env.NODE_ENV !== \"production\" ? propTypes : {};\nvar _default = WeekWrapper;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["D:/TraniningGlobits/baitap_level2/client/react/node_modules/react-big-calendar/lib/addons/dragAndDrop/WeekWrapper.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","exports","__esModule","default","_extends2","_assertThisInitialized2","_inheritsLoose2","_propTypes","_react","dates","_selection","_reactDom","_eventLevels","_Selection","_EventRow","_common","propTypes","process","env","NODE_ENV","eventTimes","event","accessors","start","end","isZeroDuration","eq","getMinutes","add","WeekWrapper","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","handleMove","_ref","node","draggedEvent","x","y","_this$context$draggab","context","draggable","dragAndDropAction","metrics","props","slotMetrics","rowBox","getBoundsForNode","pointInBox","reset","merge","getDateForSlot","getSlotAtX","slots","diff","update","handleDropFromOutside","point","onDropFromOutside","allDay","handleDragOverFromOutside","_ref2","dragFromOutsideItem","_selectable","findDOMNode","closest","container","selector","_selector","on","isAllDay","action","box","bounds","handleResize","onStart","state","segment","handleInteractionEnd","onEnd","_this$props","resourceId","_teardownSelectable","teardown","_proto","prototype","componentDidMount","componentWillUnmount","setState","eventSegments","__isPreview","range","dragAccessors","lastSegment","span","left","right","_this$context$draggab2","direction","_this$props2","_eventTimes","cursorInRow","last","inRange","first","bottom","max","top","min","render","_this$props3","children","createElement","className","selected","segments","Component","contextTypes","shape","func","object","onBeginAction","bool","isRequired","getters","components","any","_default","module"],"mappings":"AAAA;;AAEA,IAAIA,uBAAuB,GAAGC,OAAO,CAAC,+CAAD,CAArC;;AAEA,IAAIC,sBAAsB,GAAGD,OAAO,CAAC,8CAAD,CAApC;;AAEAE,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,SAAS,GAAGJ,sBAAsB,CAACD,OAAO,CAAC,gCAAD,CAAR,CAAtC;;AAEA,IAAIM,uBAAuB,GAAGL,sBAAsB,CAACD,OAAO,CAAC,8CAAD,CAAR,CAApD;;AAEA,IAAIO,eAAe,GAAGN,sBAAsB,CAACD,OAAO,CAAC,sCAAD,CAAR,CAA5C;;AAEA,IAAIQ,UAAU,GAAGP,sBAAsB,CAACD,OAAO,CAAC,YAAD,CAAR,CAAvC;;AAEA,IAAIS,MAAM,GAAGR,sBAAsB,CAACD,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,IAAIU,KAAK,GAAGX,uBAAuB,CAACC,OAAO,CAAC,mBAAD,CAAR,CAAnC;;AAEA,IAAIW,UAAU,GAAGX,OAAO,CAAC,uBAAD,CAAxB;;AAEA,IAAIY,SAAS,GAAGZ,OAAO,CAAC,WAAD,CAAvB;;AAEA,IAAIa,YAAY,GAAGb,OAAO,CAAC,yBAAD,CAA1B;;AAEA,IAAIc,UAAU,GAAGf,uBAAuB,CAACC,OAAO,CAAC,iBAAD,CAAR,CAAxC;;AAEA,IAAIe,SAAS,GAAGd,sBAAsB,CAACD,OAAO,CAAC,gBAAD,CAAR,CAAtC;;AAEA,IAAIgB,OAAO,GAAGhB,OAAO,CAAC,UAAD,CAArB;;AAEA,IAAIiB,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,EAAxC,GAA6C,EAA7D;;AAEA,IAAIC,UAAU,GAAG,SAASA,UAAT,CAAoBC,KAApB,EAA2BC,SAA3B,EAAsC;AACrD,MAAIC,KAAK,GAAGD,SAAS,CAACC,KAAV,CAAgBF,KAAhB,CAAZ;AACA,MAAIG,GAAG,GAAGF,SAAS,CAACE,GAAV,CAAcH,KAAd,CAAV;AACA,MAAII,cAAc,GAAGhB,KAAK,CAACiB,EAAN,CAASH,KAAT,EAAgBC,GAAhB,EAAqB,SAArB,KAAmCD,KAAK,CAACI,UAAN,OAAuB,CAA/E,CAHqD,CAG6B;;AAElF,MAAIF,cAAJ,EAAoBD,GAAG,GAAGf,KAAK,CAACmB,GAAN,CAAUJ,GAAV,EAAe,CAAf,EAAkB,KAAlB,CAAN;AACpB,SAAO;AACLD,IAAAA,KAAK,EAAEA,KADF;AAELC,IAAAA,GAAG,EAAEA;AAFA,GAAP;AAID,CAVD;;AAYA,IAAIK,WAAW,GACf,aACA,UAAUC,gBAAV,EAA4B;AAC1B,GAAC,GAAGxB,eAAe,CAACH,OAApB,EAA6B0B,WAA7B,EAA0CC,gBAA1C;;AAEA,WAASD,WAAT,GAAuB;AACrB,QAAIE,KAAJ;;AAEA,SAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;AACD;;AAEDN,IAAAA,KAAK,GAAGD,gBAAgB,CAACQ,IAAjB,CAAsBC,KAAtB,CAA4BT,gBAA5B,EAA8C,CAAC,IAAD,EAAOU,MAAP,CAAcL,IAAd,CAA9C,KAAsE,IAA9E;;AAEAJ,IAAAA,KAAK,CAACU,UAAN,GAAmB,UAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,YAAtB,EAAoC;AACrD,UAAIC,CAAC,GAAGH,IAAI,CAACG,CAAb;AAAA,UACIC,CAAC,GAAGJ,IAAI,CAACI,CADb;AAEA,UAAIC,qBAAqB,GAAGhB,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBC,iBAAxB,CAA0C7B,KAAtE;AAAA,UACIA,KAAK,GAAG0B,qBAAqB,KAAK,KAAK,CAA/B,GAAmCH,YAAnC,GAAkDG,qBAD9D;AAEA,UAAII,OAAO,GAAGpB,KAAK,CAACqB,KAAN,CAAYC,WAA1B;AACA,UAAI/B,SAAS,GAAGS,KAAK,CAACqB,KAAN,CAAY9B,SAA5B;AACA,UAAI,CAACD,KAAL,EAAY;AACZ,UAAIiC,MAAM,GAAG,CAAC,GAAGzC,UAAU,CAAC0C,gBAAf,EAAiCZ,IAAjC,CAAb;;AAEA,UAAI,CAAC,CAAC,GAAGjC,UAAU,CAAC8C,UAAf,EAA2BF,MAA3B,EAAmC;AACtCT,QAAAA,CAAC,EAAEA,CADmC;AAEtCC,QAAAA,CAAC,EAAEA;AAFmC,OAAnC,CAAL,EAGI;AACFf,QAAAA,KAAK,CAAC0B,KAAN;;AAEA;AACD,OAjBoD,CAiBnD;;;AAGF,UAAIlC,KAAK,GAAGd,KAAK,CAACiD,KAAN,CAAYP,OAAO,CAACQ,cAAR,CAAuB,CAAC,GAAGjD,UAAU,CAACkD,UAAf,EAA2BN,MAA3B,EAAmCT,CAAnC,EAAsC,KAAtC,EAA6CM,OAAO,CAACU,KAArD,CAAvB,CAAZ,EAAiGvC,SAAS,CAACC,KAAV,CAAgBF,KAAhB,CAAjG,CAAZ;AACA,UAAIG,GAAG,GAAGf,KAAK,CAACmB,GAAN,CAAUL,KAAV,EAAiBd,KAAK,CAACqD,IAAN,CAAWxC,SAAS,CAACC,KAAV,CAAgBF,KAAhB,CAAX,EAAmCC,SAAS,CAACE,GAAV,CAAcH,KAAd,CAAnC,EAAyD,SAAzD,CAAjB,EAAsF,SAAtF,CAAV;;AAEAU,MAAAA,KAAK,CAACgC,MAAN,CAAa1C,KAAb,EAAoBE,KAApB,EAA2BC,GAA3B;AACD,KAxBD;;AA0BAO,IAAAA,KAAK,CAACiC,qBAAN,GAA8B,UAAUC,KAAV,EAAiBX,MAAjB,EAAyB;AACrD,UAAI,CAACvB,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBiB,iBAA7B,EAAgD;AAChD,UAAIf,OAAO,GAAGpB,KAAK,CAACqB,KAAN,CAAYC,WAA1B;AACA,UAAI9B,KAAK,GAAG4B,OAAO,CAACQ,cAAR,CAAuB,CAAC,GAAGjD,UAAU,CAACkD,UAAf,EAA2BN,MAA3B,EAAmCW,KAAK,CAACpB,CAAzC,EAA4C,KAA5C,EAAmDM,OAAO,CAACU,KAA3D,CAAvB,CAAZ;;AAEA9B,MAAAA,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBiB,iBAAxB,CAA0C;AACxC3C,QAAAA,KAAK,EAAEA,KADiC;AAExCC,QAAAA,GAAG,EAAEf,KAAK,CAACmB,GAAN,CAAUL,KAAV,EAAiB,CAAjB,EAAoB,KAApB,CAFmC;AAGxC4C,QAAAA,MAAM,EAAE;AAHgC,OAA1C;AAKD,KAVD;;AAYApC,IAAAA,KAAK,CAACqC,yBAAN,GAAkC,UAAUC,KAAV,EAAiB1B,IAAjB,EAAuB;AACvD,UAAIE,CAAC,GAAGwB,KAAK,CAACxB,CAAd;AAAA,UACIC,CAAC,GAAGuB,KAAK,CAACvB,CADd;AAEA,UAAI,CAACf,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBqB,mBAA7B,EAAkD;;AAElDvC,MAAAA,KAAK,CAACU,UAAN,CAAiB;AACfI,QAAAA,CAAC,EAAEA,CADY;AAEfC,QAAAA,CAAC,EAAEA;AAFY,OAAjB,EAGGH,IAHH,EAGSZ,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBqB,mBAAxB,EAHT;AAID,KATD;;AAWAvC,IAAAA,KAAK,CAACwC,WAAN,GAAoB,YAAY;AAC9B,UAAI5B,IAAI,GAAG,CAAC,GAAGhC,SAAS,CAAC6D,WAAd,EAA2B,CAAC,GAAGnE,uBAAuB,CAACF,OAA5B,EAAqC4B,KAArC,CAA3B,EAAwE0C,OAAxE,CAAgF,kCAAhF,CAAX;AACA,UAAIC,SAAS,GAAG/B,IAAI,CAAC8B,OAAL,CAAa,iCAAb,CAAhB;AACA,UAAIE,QAAQ,GAAG5C,KAAK,CAAC6C,SAAN,GAAkB,IAAI/D,UAAU,CAACV,OAAf,CAAuB,YAAY;AAClE,eAAOuE,SAAP;AACD,OAFgC,CAAjC;AAGAC,MAAAA,QAAQ,CAACE,EAAT,CAAY,cAAZ,EAA4B,UAAUZ,KAAV,EAAiB;AAC3C,YAAIa,QAAQ,GAAG/C,KAAK,CAACqB,KAAN,CAAY0B,QAA3B;AACA,YAAIC,MAAM,GAAGhD,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBC,iBAAxB,CAA0C6B,MAAvD;AACA,eAAOA,MAAM,KAAK,MAAX,IAAqBA,MAAM,KAAK,QAAX,KAAwB,CAACD,QAAD,IAAa,CAAC,GAAGpE,UAAU,CAAC8C,UAAf,EAA2B,CAAC,GAAG3C,UAAU,CAAC0C,gBAAf,EAAiCZ,IAAjC,CAA3B,EAAmEsB,KAAnE,CAArC,CAA5B;AACD,OAJD;AAKAU,MAAAA,QAAQ,CAACE,EAAT,CAAY,WAAZ,EAAyB,UAAUG,GAAV,EAAe;AACtC,YAAIC,MAAM,GAAG,CAAC,GAAGpE,UAAU,CAAC0C,gBAAf,EAAiCZ,IAAjC,CAAb;AACA,YAAIO,iBAAiB,GAAGnB,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBC,iBAAhD;AACA,YAAIA,iBAAiB,CAAC6B,MAAlB,KAA6B,MAAjC,EAAyChD,KAAK,CAACU,UAAN,CAAiBuC,GAAjB,EAAsBC,MAAtB;AACzC,YAAI/B,iBAAiB,CAAC6B,MAAlB,KAA6B,QAAjC,EAA2ChD,KAAK,CAACmD,YAAN,CAAmBF,GAAnB,EAAwBC,MAAxB;AAC5C,OALD;AAMAN,MAAAA,QAAQ,CAACE,EAAT,CAAY,aAAZ,EAA2B,YAAY;AACrC,eAAO9C,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBkC,OAAxB,EAAP;AACD,OAFD;AAGAR,MAAAA,QAAQ,CAACE,EAAT,CAAY,QAAZ,EAAsB,UAAUZ,KAAV,EAAiB;AACrC,YAAIgB,MAAM,GAAG,CAAC,GAAGpE,UAAU,CAAC0C,gBAAf,EAAiCZ,IAAjC,CAAb;AACA,YAAI,CAACZ,KAAK,CAACqD,KAAN,CAAYC,OAAb,IAAwB,CAAC,CAAC,GAAG3E,UAAU,CAAC8C,UAAf,EAA2ByB,MAA3B,EAAmChB,KAAnC,CAA7B,EAAwE;;AAExElC,QAAAA,KAAK,CAACuD,oBAAN;AACD,OALD;AAMAX,MAAAA,QAAQ,CAACE,EAAT,CAAY,iBAAZ,EAA+B,UAAUZ,KAAV,EAAiB;AAC9C,YAAI,CAAClC,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBiB,iBAA7B,EAAgD;AAChD,YAAIe,MAAM,GAAG,CAAC,GAAGpE,UAAU,CAAC0C,gBAAf,EAAiCZ,IAAjC,CAAb;AACA,YAAI,CAAC,CAAC,GAAGjC,UAAU,CAAC8C,UAAf,EAA2ByB,MAA3B,EAAmChB,KAAnC,CAAL,EAAgD;;AAEhDlC,QAAAA,KAAK,CAACiC,qBAAN,CAA4BC,KAA5B,EAAmCgB,MAAnC;AACD,OAND;AAOAN,MAAAA,QAAQ,CAACE,EAAT,CAAY,qBAAZ,EAAmC,UAAUZ,KAAV,EAAiB;AAClD,YAAI,CAAClC,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBqB,mBAA7B,EAAkD;AAClD,YAAIW,MAAM,GAAG,CAAC,GAAGpE,UAAU,CAAC0C,gBAAf,EAAiCZ,IAAjC,CAAb;;AAEAZ,QAAAA,KAAK,CAACqC,yBAAN,CAAgCH,KAAhC,EAAuCgB,MAAvC;AACD,OALD;AAMAN,MAAAA,QAAQ,CAACE,EAAT,CAAY,OAAZ,EAAqB,YAAY;AAC/B,eAAO9C,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBsC,KAAxB,CAA8B,IAA9B,CAAP;AACD,OAFD;AAGAZ,MAAAA,QAAQ,CAACE,EAAT,CAAY,OAAZ,EAAqB,YAAY;AAC/B9C,QAAAA,KAAK,CAAC0B,KAAN;;AAEA1B,QAAAA,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBsC,KAAxB,CAA8B,IAA9B;AACD,OAJD;AAKD,KA/CD;;AAiDAxD,IAAAA,KAAK,CAACuD,oBAAN,GAA6B,YAAY;AACvC,UAAIE,WAAW,GAAGzD,KAAK,CAACqB,KAAxB;AAAA,UACIqC,UAAU,GAAGD,WAAW,CAACC,UAD7B;AAAA,UAEIX,QAAQ,GAAGU,WAAW,CAACV,QAF3B;AAGA,UAAIzD,KAAK,GAAGU,KAAK,CAACqD,KAAN,CAAYC,OAAZ,CAAoBhE,KAAhC;;AAEAU,MAAAA,KAAK,CAAC0B,KAAN;;AAEA1B,MAAAA,KAAK,CAACiB,OAAN,CAAcC,SAAd,CAAwBsC,KAAxB,CAA8B;AAC5BhE,QAAAA,KAAK,EAAEF,KAAK,CAACE,KADe;AAE5BC,QAAAA,GAAG,EAAEH,KAAK,CAACG,GAFiB;AAG5BiE,QAAAA,UAAU,EAAEA,UAHgB;AAI5BX,QAAAA,QAAQ,EAAEA;AAJkB,OAA9B;AAMD,KAdD;;AAgBA/C,IAAAA,KAAK,CAAC2D,mBAAN,GAA4B,YAAY;AACtC,UAAI,CAAC3D,KAAK,CAAC6C,SAAX,EAAsB;;AAEtB7C,MAAAA,KAAK,CAAC6C,SAAN,CAAgBe,QAAhB;;AAEA5D,MAAAA,KAAK,CAAC6C,SAAN,GAAkB,IAAlB;AACD,KAND;;AAQA7C,IAAAA,KAAK,CAACqD,KAAN,GAAc,EAAd;AACA,WAAOrD,KAAP;AACD;;AAED,MAAI6D,MAAM,GAAG/D,WAAW,CAACgE,SAAzB;;AAEAD,EAAAA,MAAM,CAACE,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,SAAKvB,WAAL;AACD,GAFD;;AAIAqB,EAAAA,MAAM,CAACG,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,SAAKL,mBAAL;AACD,GAFD;;AAIAE,EAAAA,MAAM,CAACnC,KAAP,GAAe,SAASA,KAAT,GAAiB;AAC9B,QAAI,KAAK2B,KAAL,CAAWC,OAAf,EAAwB,KAAKW,QAAL,CAAc;AACpCX,MAAAA,OAAO,EAAE;AAD2B,KAAd;AAGzB,GAJD;;AAMAO,EAAAA,MAAM,CAAC7B,MAAP,GAAgB,SAASA,MAAT,CAAgB1C,KAAhB,EAAuBE,KAAvB,EAA8BC,GAA9B,EAAmC;AACjD,QAAI6D,OAAO,GAAG,CAAC,GAAGzE,YAAY,CAACqF,aAAjB,EAAgC,CAAC,GAAG7F,SAAS,CAACD,OAAd,EAAuB,EAAvB,EAA2BkB,KAA3B,EAAkC;AAC9EG,MAAAA,GAAG,EAAEA,GADyE;AAE9ED,MAAAA,KAAK,EAAEA,KAFuE;AAG9E2E,MAAAA,WAAW,EAAE;AAHiE,KAAlC,CAAhC,EAIV,KAAK9C,KAAL,CAAWC,WAAX,CAAuB8C,KAJb,EAIoBpF,OAAO,CAACqF,aAJ5B,CAAd;AAKA,QAAIC,WAAW,GAAG,KAAKjB,KAAL,CAAWC,OAA7B;;AAEA,QAAIgB,WAAW,IAAIhB,OAAO,CAACiB,IAAR,KAAiBD,WAAW,CAACC,IAA5C,IAAoDjB,OAAO,CAACkB,IAAR,KAAiBF,WAAW,CAACE,IAAjF,IAAyFlB,OAAO,CAACmB,KAAR,KAAkBH,WAAW,CAACG,KAA3H,EAAkI;AAChI;AACD;;AAED,SAAKR,QAAL,CAAc;AACZX,MAAAA,OAAO,EAAEA;AADG,KAAd;AAGD,GAfD;;AAiBAO,EAAAA,MAAM,CAACV,YAAP,GAAsB,SAASA,YAAT,CAAsBjB,KAAtB,EAA6BtB,IAA7B,EAAmC;AACvD,QAAI8D,sBAAsB,GAAG,KAAKzD,OAAL,CAAaC,SAAb,CAAuBC,iBAApD;AAAA,QACI7B,KAAK,GAAGoF,sBAAsB,CAACpF,KADnC;AAAA,QAEIqF,SAAS,GAAGD,sBAAsB,CAACC,SAFvC;AAGA,QAAIC,YAAY,GAAG,KAAKvD,KAAxB;AAAA,QACI9B,SAAS,GAAGqF,YAAY,CAACrF,SAD7B;AAAA,QAEI6B,OAAO,GAAGwD,YAAY,CAACtD,WAF3B;;AAIA,QAAIuD,WAAW,GAAGxF,UAAU,CAACC,KAAD,EAAQC,SAAR,CAA5B;AAAA,QACIC,KAAK,GAAGqF,WAAW,CAACrF,KADxB;AAAA,QAEIC,GAAG,GAAGoF,WAAW,CAACpF,GAFtB;;AAIA,QAAI8B,MAAM,GAAG,CAAC,GAAGzC,UAAU,CAAC0C,gBAAf,EAAiCZ,IAAjC,CAAb;AACA,QAAIkE,WAAW,GAAG,CAAC,GAAGnG,UAAU,CAAC8C,UAAf,EAA2BF,MAA3B,EAAmCW,KAAnC,CAAlB;;AAEA,QAAIyC,SAAS,KAAK,OAAlB,EAA2B;AACzB,UAAIG,WAAJ,EAAiB;AACf,YAAI1D,OAAO,CAAC2D,IAAR,GAAevF,KAAnB,EAA0B,OAAO,KAAKkC,KAAL,EAAP,CADX,CACgC;;AAE/CjC,QAAAA,GAAG,GAAGf,KAAK,CAACmB,GAAN,CAAUuB,OAAO,CAACQ,cAAR,CAAuB,CAAC,GAAGjD,UAAU,CAACkD,UAAf,EAA2BN,MAA3B,EAAmCW,KAAK,CAACpB,CAAzC,EAA4C,KAA5C,EAAmDM,OAAO,CAACU,KAA3D,CAAvB,CAAV,EAAqG,CAArG,EAAwG,KAAxG,CAAN;AACD,OAJD,MAIO,IAAIpD,KAAK,CAACsG,OAAN,CAAcxF,KAAd,EAAqB4B,OAAO,CAAC6D,KAA7B,EAAoC7D,OAAO,CAAC2D,IAA5C,KAAqDxD,MAAM,CAAC2D,MAAP,GAAgBhD,KAAK,CAACnB,CAAtB,IAA2B,CAACK,OAAO,CAAC6D,KAAT,GAAiB,CAACzF,KAAtG,EAA6G;AAClHC,QAAAA,GAAG,GAAGf,KAAK,CAACmB,GAAN,CAAUuB,OAAO,CAAC2D,IAAlB,EAAwB,CAAxB,EAA2B,cAA3B,CAAN;AACD,OAFM,MAEA;AACL,aAAKd,QAAL,CAAc;AACZX,UAAAA,OAAO,EAAE;AADG,SAAd;AAGA;AACD;;AAED7D,MAAAA,GAAG,GAAGf,KAAK,CAACyG,GAAN,CAAU1F,GAAV,EAAef,KAAK,CAACmB,GAAN,CAAUL,KAAV,EAAiB,CAAjB,EAAoB,KAApB,CAAf,CAAN;AACD,KAfD,MAeO,IAAImF,SAAS,KAAK,MAAlB,EAA0B;AAC/B;AACA,UAAIG,WAAJ,EAAiB;AACf,YAAI1D,OAAO,CAAC6D,KAAR,GAAgBxF,GAApB,EAAyB,OAAO,KAAKiC,KAAL,EAAP;AACzBlC,QAAAA,KAAK,GAAG4B,OAAO,CAACQ,cAAR,CAAuB,CAAC,GAAGjD,UAAU,CAACkD,UAAf,EAA2BN,MAA3B,EAAmCW,KAAK,CAACpB,CAAzC,EAA4C,KAA5C,EAAmDM,OAAO,CAACU,KAA3D,CAAvB,CAAR;AACD,OAHD,MAGO,IAAIpD,KAAK,CAACsG,OAAN,CAAcvF,GAAd,EAAmB2B,OAAO,CAAC6D,KAA3B,EAAkC7D,OAAO,CAAC2D,IAA1C,KAAmDxD,MAAM,CAAC6D,GAAP,GAAalD,KAAK,CAACnB,CAAnB,IAAwB,CAACK,OAAO,CAAC2D,IAAT,GAAgB,CAACtF,GAAhG,EAAqG;AAC1GD,QAAAA,KAAK,GAAGd,KAAK,CAACmB,GAAN,CAAUuB,OAAO,CAAC6D,KAAlB,EAAyB,CAAC,CAA1B,EAA6B,cAA7B,CAAR;AACD,OAFM,MAEA;AACL,aAAKvD,KAAL;AACA;AACD;;AAEDlC,MAAAA,KAAK,GAAGd,KAAK,CAAC2G,GAAN,CAAU3G,KAAK,CAACmB,GAAN,CAAUJ,GAAV,EAAe,CAAC,CAAhB,EAAmB,KAAnB,CAAV,EAAqCD,KAArC,CAAR;AACD;;AAED,SAAKwC,MAAL,CAAY1C,KAAZ,EAAmBE,KAAnB,EAA0BC,GAA1B;AACD,GA9CD;;AAgDAoE,EAAAA,MAAM,CAACyB,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,YAAY,GAAG,KAAKlE,KAAxB;AAAA,QACImE,QAAQ,GAAGD,YAAY,CAACC,QAD5B;AAAA,QAEIjG,SAAS,GAAGgG,YAAY,CAAChG,SAF7B;AAGA,QAAI+D,OAAO,GAAG,KAAKD,KAAL,CAAWC,OAAzB;AACA,WAAO7E,MAAM,CAACL,OAAP,CAAeqH,aAAf,CAA6B,KAA7B,EAAoC;AACzCC,MAAAA,SAAS,EAAE;AAD8B,KAApC,EAEJF,QAFI,EAEMlC,OAAO,IAAI7E,MAAM,CAACL,OAAP,CAAeqH,aAAf,CAA6B1G,SAAS,CAACX,OAAvC,EAAgD,CAAC,GAAGC,SAAS,CAACD,OAAd,EAAuB,EAAvB,EAA2B,KAAKiD,KAAhC,EAAuC;AAC7GsE,MAAAA,QAAQ,EAAE,IADmG;AAE7GD,MAAAA,SAAS,EAAE,yBAFkG;AAG7GE,MAAAA,QAAQ,EAAE,CAACtC,OAAD,CAHmG;AAI7G/D,MAAAA,SAAS,EAAE,CAAC,GAAGlB,SAAS,CAACD,OAAd,EAAuB,EAAvB,EAA2BmB,SAA3B,EAAsCP,OAAO,CAACqF,aAA9C;AAJkG,KAAvC,CAAhD,CAFjB,CAAP;AAQD,GAbD;;AAeA,SAAOvE,WAAP;AACD,CA3OD,CA2OErB,MAAM,CAACL,OAAP,CAAeyH,SA3OjB,CAFA;;AA+OA/F,WAAW,CAACgG,YAAZ,GAA2B;AACzB5E,EAAAA,SAAS,EAAE1C,UAAU,CAACJ,OAAX,CAAmB2H,KAAnB,CAAyB;AAClC3C,IAAAA,OAAO,EAAE5E,UAAU,CAACJ,OAAX,CAAmB4H,IADM;AAElCxC,IAAAA,KAAK,EAAEhF,UAAU,CAACJ,OAAX,CAAmB4H,IAFQ;AAGlC7E,IAAAA,iBAAiB,EAAE3C,UAAU,CAACJ,OAAX,CAAmB6H,MAHJ;AAIlC9D,IAAAA,iBAAiB,EAAE3D,UAAU,CAACJ,OAAX,CAAmB4H,IAJJ;AAKlCE,IAAAA,aAAa,EAAE1H,UAAU,CAACJ,OAAX,CAAmB4H,IALA;AAMlCzD,IAAAA,mBAAmB,EAAE/D,UAAU,CAACJ,OAAX,CAAmB4H;AANN,GAAzB;AADc,CAA3B;AAUAlG,WAAW,CAACb,SAAZ,GAAwBC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC;AAC9D2D,EAAAA,QAAQ,EAAEvE,UAAU,CAACJ,OAAX,CAAmB+H,IADiC;AAE9D7E,EAAAA,WAAW,EAAE9C,UAAU,CAACJ,OAAX,CAAmB6H,MAAnB,CAA0BG,UAFuB;AAG9D7G,EAAAA,SAAS,EAAEf,UAAU,CAACJ,OAAX,CAAmB6H,MAAnB,CAA0BG,UAHyB;AAI9DC,EAAAA,OAAO,EAAE7H,UAAU,CAACJ,OAAX,CAAmB6H,MAAnB,CAA0BG,UAJ2B;AAK9DE,EAAAA,UAAU,EAAE9H,UAAU,CAACJ,OAAX,CAAmB6H,MAAnB,CAA0BG,UALwB;AAM9D1C,EAAAA,UAAU,EAAElF,UAAU,CAACJ,OAAX,CAAmBmI;AAN+B,CAAxC,GAOpB,EAPJ;AAQAzG,WAAW,CAACb,SAAZ,GAAwBC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCH,SAAxC,GAAoD,EAA5E;AACA,IAAIuH,QAAQ,GAAG1G,WAAf;AACA5B,OAAO,CAACE,OAAR,GAAkBoI,QAAlB;AACAC,MAAM,CAACvI,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar dates = _interopRequireWildcard(require(\"../../utils/dates\"));\n\nvar _selection = require(\"../../utils/selection\");\n\nvar _reactDom = require(\"react-dom\");\n\nvar _eventLevels = require(\"../../utils/eventLevels\");\n\nvar _Selection = _interopRequireWildcard(require(\"../../Selection\"));\n\nvar _EventRow = _interopRequireDefault(require(\"../../EventRow\"));\n\nvar _common = require(\"./common\");\n\nvar propTypes = process.env.NODE_ENV !== \"production\" ? {} : {};\n\nvar eventTimes = function eventTimes(event, accessors) {\n  var start = accessors.start(event);\n  var end = accessors.end(event);\n  var isZeroDuration = dates.eq(start, end, 'minutes') && start.getMinutes() === 0; // make zero duration midnight events at least one day long\n\n  if (isZeroDuration) end = dates.add(end, 1, 'day');\n  return {\n    start: start,\n    end: end\n  };\n};\n\nvar WeekWrapper =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(WeekWrapper, _React$Component);\n\n  function WeekWrapper() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _this.handleMove = function (_ref, node, draggedEvent) {\n      var x = _ref.x,\n          y = _ref.y;\n      var _this$context$draggab = _this.context.draggable.dragAndDropAction.event,\n          event = _this$context$draggab === void 0 ? draggedEvent : _this$context$draggab;\n      var metrics = _this.props.slotMetrics;\n      var accessors = _this.props.accessors;\n      if (!event) return;\n      var rowBox = (0, _Selection.getBoundsForNode)(node);\n\n      if (!(0, _selection.pointInBox)(rowBox, {\n        x: x,\n        y: y\n      })) {\n        _this.reset();\n\n        return;\n      } // Make sure to maintain the time of the start date while moving it to the new slot\n\n\n      var start = dates.merge(metrics.getDateForSlot((0, _selection.getSlotAtX)(rowBox, x, false, metrics.slots)), accessors.start(event));\n      var end = dates.add(start, dates.diff(accessors.start(event), accessors.end(event), 'minutes'), 'minutes');\n\n      _this.update(event, start, end);\n    };\n\n    _this.handleDropFromOutside = function (point, rowBox) {\n      if (!_this.context.draggable.onDropFromOutside) return;\n      var metrics = _this.props.slotMetrics;\n      var start = metrics.getDateForSlot((0, _selection.getSlotAtX)(rowBox, point.x, false, metrics.slots));\n\n      _this.context.draggable.onDropFromOutside({\n        start: start,\n        end: dates.add(start, 1, 'day'),\n        allDay: false\n      });\n    };\n\n    _this.handleDragOverFromOutside = function (_ref2, node) {\n      var x = _ref2.x,\n          y = _ref2.y;\n      if (!_this.context.draggable.dragFromOutsideItem) return;\n\n      _this.handleMove({\n        x: x,\n        y: y\n      }, node, _this.context.draggable.dragFromOutsideItem());\n    };\n\n    _this._selectable = function () {\n      var node = (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)).closest('.rbc-month-row, .rbc-allday-cell');\n      var container = node.closest('.rbc-month-view, .rbc-time-view');\n      var selector = _this._selector = new _Selection.default(function () {\n        return container;\n      });\n      selector.on('beforeSelect', function (point) {\n        var isAllDay = _this.props.isAllDay;\n        var action = _this.context.draggable.dragAndDropAction.action;\n        return action === 'move' || action === 'resize' && (!isAllDay || (0, _selection.pointInBox)((0, _Selection.getBoundsForNode)(node), point));\n      });\n      selector.on('selecting', function (box) {\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        var dragAndDropAction = _this.context.draggable.dragAndDropAction;\n        if (dragAndDropAction.action === 'move') _this.handleMove(box, bounds);\n        if (dragAndDropAction.action === 'resize') _this.handleResize(box, bounds);\n      });\n      selector.on('selectStart', function () {\n        return _this.context.draggable.onStart();\n      });\n      selector.on('select', function (point) {\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        if (!_this.state.segment || !(0, _selection.pointInBox)(bounds, point)) return;\n\n        _this.handleInteractionEnd();\n      });\n      selector.on('dropFromOutside', function (point) {\n        if (!_this.context.draggable.onDropFromOutside) return;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        if (!(0, _selection.pointInBox)(bounds, point)) return;\n\n        _this.handleDropFromOutside(point, bounds);\n      });\n      selector.on('dragOverFromOutside', function (point) {\n        if (!_this.context.draggable.dragFromOutsideItem) return;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n\n        _this.handleDragOverFromOutside(point, bounds);\n      });\n      selector.on('click', function () {\n        return _this.context.draggable.onEnd(null);\n      });\n      selector.on('reset', function () {\n        _this.reset();\n\n        _this.context.draggable.onEnd(null);\n      });\n    };\n\n    _this.handleInteractionEnd = function () {\n      var _this$props = _this.props,\n          resourceId = _this$props.resourceId,\n          isAllDay = _this$props.isAllDay;\n      var event = _this.state.segment.event;\n\n      _this.reset();\n\n      _this.context.draggable.onEnd({\n        start: event.start,\n        end: event.end,\n        resourceId: resourceId,\n        isAllDay: isAllDay\n      });\n    };\n\n    _this._teardownSelectable = function () {\n      if (!_this._selector) return;\n\n      _this._selector.teardown();\n\n      _this._selector = null;\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  var _proto = WeekWrapper.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this._selectable();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._teardownSelectable();\n  };\n\n  _proto.reset = function reset() {\n    if (this.state.segment) this.setState({\n      segment: null\n    });\n  };\n\n  _proto.update = function update(event, start, end) {\n    var segment = (0, _eventLevels.eventSegments)((0, _extends2.default)({}, event, {\n      end: end,\n      start: start,\n      __isPreview: true\n    }), this.props.slotMetrics.range, _common.dragAccessors);\n    var lastSegment = this.state.segment;\n\n    if (lastSegment && segment.span === lastSegment.span && segment.left === lastSegment.left && segment.right === lastSegment.right) {\n      return;\n    }\n\n    this.setState({\n      segment: segment\n    });\n  };\n\n  _proto.handleResize = function handleResize(point, node) {\n    var _this$context$draggab2 = this.context.draggable.dragAndDropAction,\n        event = _this$context$draggab2.event,\n        direction = _this$context$draggab2.direction;\n    var _this$props2 = this.props,\n        accessors = _this$props2.accessors,\n        metrics = _this$props2.slotMetrics;\n\n    var _eventTimes = eventTimes(event, accessors),\n        start = _eventTimes.start,\n        end = _eventTimes.end;\n\n    var rowBox = (0, _Selection.getBoundsForNode)(node);\n    var cursorInRow = (0, _selection.pointInBox)(rowBox, point);\n\n    if (direction === 'RIGHT') {\n      if (cursorInRow) {\n        if (metrics.last < start) return this.reset(); // add min\n\n        end = dates.add(metrics.getDateForSlot((0, _selection.getSlotAtX)(rowBox, point.x, false, metrics.slots)), 1, 'day');\n      } else if (dates.inRange(start, metrics.first, metrics.last) || rowBox.bottom < point.y && +metrics.first > +start) {\n        end = dates.add(metrics.last, 1, 'milliseconds');\n      } else {\n        this.setState({\n          segment: null\n        });\n        return;\n      }\n\n      end = dates.max(end, dates.add(start, 1, 'day'));\n    } else if (direction === 'LEFT') {\n      // inbetween Row\n      if (cursorInRow) {\n        if (metrics.first > end) return this.reset();\n        start = metrics.getDateForSlot((0, _selection.getSlotAtX)(rowBox, point.x, false, metrics.slots));\n      } else if (dates.inRange(end, metrics.first, metrics.last) || rowBox.top > point.y && +metrics.last < +end) {\n        start = dates.add(metrics.first, -1, 'milliseconds');\n      } else {\n        this.reset();\n        return;\n      }\n\n      start = dates.min(dates.add(end, -1, 'day'), start);\n    }\n\n    this.update(event, start, end);\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        children = _this$props3.children,\n        accessors = _this$props3.accessors;\n    var segment = this.state.segment;\n    return _react.default.createElement(\"div\", {\n      className: \"rbc-addons-dnd-row-body\"\n    }, children, segment && _react.default.createElement(_EventRow.default, (0, _extends2.default)({}, this.props, {\n      selected: null,\n      className: \"rbc-addons-dnd-drag-row\",\n      segments: [segment],\n      accessors: (0, _extends2.default)({}, accessors, _common.dragAccessors)\n    })));\n  };\n\n  return WeekWrapper;\n}(_react.default.Component);\n\nWeekWrapper.contextTypes = {\n  draggable: _propTypes.default.shape({\n    onStart: _propTypes.default.func,\n    onEnd: _propTypes.default.func,\n    dragAndDropAction: _propTypes.default.object,\n    onDropFromOutside: _propTypes.default.func,\n    onBeginAction: _propTypes.default.func,\n    dragFromOutsideItem: _propTypes.default.func\n  })\n};\nWeekWrapper.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  isAllDay: _propTypes.default.bool,\n  slotMetrics: _propTypes.default.object.isRequired,\n  accessors: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  resourceId: _propTypes.default.any\n} : {};\nWeekWrapper.propTypes = process.env.NODE_ENV !== \"production\" ? propTypes : {};\nvar _default = WeekWrapper;\nexports.default = _default;\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}