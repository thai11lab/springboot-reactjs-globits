{"ast":null,"code":"import _isNil from \"lodash/isNil\";\nimport _assign from \"lodash/assign\";\nimport { Helpers, LabelHelpers, Scale, Domain, Data } from \"victory-core\";\n\nvar getData = function getData(props) {\n  var accessorTypes = [\"x\", \"high\", \"low\", \"close\", \"open\"];\n  return Data.formatData(props.data, props, accessorTypes);\n};\n\nvar reduceData = function reduceData(dataset, axis, type) {\n  var yDataTypes = {\n    min: \"_low\",\n    max: \"_high\"\n  };\n  var dataType = axis === \"x\" ? \"_x\" : yDataTypes[type];\n  var baseCondition = type === \"min\" ? Infinity : -Infinity;\n  return dataset.reduce(function (memo, datum) {\n    var current = datum[dataType];\n    return memo < current && type === \"min\" || memo > current && type === \"max\" ? memo : current;\n  }, baseCondition);\n};\n\nvar getDomainFromData = function getDomainFromData(props, axis) {\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var dataset = getData(props);\n\n  if (dataset.length < 1) {\n    return minDomain !== undefined && maxDomain !== undefined ? Domain.getDomainFromMinMax(minDomain, maxDomain) : undefined;\n  }\n\n  var min = minDomain !== undefined ? minDomain : reduceData(dataset, axis, \"min\");\n  var max = maxDomain !== undefined ? maxDomain : reduceData(dataset, axis, \"max\");\n  return Domain.getDomainFromMinMax(min, max);\n};\n\nvar getDomain = function getDomain(props, axis) {\n  return Domain.createDomainFunction(getDomainFromData)(props, axis);\n};\n\nvar getCalculatedValues = function getCalculatedValues(props) {\n  var theme = props.theme,\n      polar = props.polar;\n  var defaultStyle = theme && theme.candlestick && theme.candlestick.style ? theme.candlestick.style : {};\n  var style = Helpers.getStyles(props.style, defaultStyle);\n  var data = getData(props);\n  var range = {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var domain = {\n    x: getDomain(props, \"x\"),\n    y: getDomain(props, \"y\")\n  };\n  var scale = {\n    x: Scale.getBaseScale(props, \"x\").domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: Scale.getBaseScale(props, \"y\").domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var origin = polar ? props.origin || Helpers.getPolarOrigin(props) : undefined;\n  return {\n    domain: domain,\n    data: data,\n    scale: scale,\n    style: style,\n    origin: origin\n  };\n};\n\nvar isTransparent = function isTransparent(attr) {\n  return attr === \"none\" || attr === \"transparent\";\n};\n\nvar getDataStyles = function getDataStyles(datum, style, props) {\n  style = style || {};\n  var candleColor = datum.open > datum.close ? props.candleColors.negative : props.candleColors.positive;\n  var fill = style.fill || candleColor;\n  var strokeColor = style.stroke;\n  var stroke = isTransparent(strokeColor) ? fill : strokeColor || \"black\";\n  return _assign({}, style, {\n    stroke: stroke,\n    fill: fill\n  });\n};\n\nvar getLabelProps = function getLabelProps(dataProps, text, style) {\n  var x = dataProps.x,\n      high = dataProps.high,\n      index = dataProps.index,\n      scale = dataProps.scale,\n      datum = dataProps.datum,\n      data = dataProps.data,\n      horizontal = dataProps.horizontal;\n  var labelStyle = style.labels || {};\n  var defaultAnchors = {\n    vertical: horizontal ? \"middle\" : \"end\",\n    text: horizontal ? \"start\" : \"middle\"\n  };\n  return {\n    style: labelStyle,\n    y: horizontal ? x : high - (labelStyle.padding || 0),\n    x: horizontal ? high + (labelStyle.padding || 0) : x,\n    text: text,\n    index: index,\n    scale: scale,\n    datum: datum,\n    data: data,\n    textAnchor: labelStyle.textAnchor || defaultAnchors.text,\n    verticalAnchor: labelStyle.verticalAnchor || defaultAnchors.vertical,\n    angle: labelStyle.angle,\n    horizontal: horizontal\n  };\n};\n\nvar getBaseProps = function getBaseProps(props, fallbackProps) {\n  // eslint-disable-line max-statements\n  props = Helpers.modifyProps(props, fallbackProps, \"candlestick\");\n  var calculatedValues = getCalculatedValues(props);\n  var data = calculatedValues.data,\n      style = calculatedValues.style,\n      scale = calculatedValues.scale,\n      domain = calculatedValues.domain,\n      origin = calculatedValues.origin;\n  var _props = props,\n      groupComponent = _props.groupComponent,\n      width = _props.width,\n      height = _props.height,\n      padding = _props.padding,\n      standalone = _props.standalone,\n      name = _props.name,\n      candleWidth = _props.candleWidth,\n      candleRatio = _props.candleRatio,\n      theme = _props.theme,\n      polar = _props.polar,\n      wickStrokeWidth = _props.wickStrokeWidth,\n      labels = _props.labels,\n      events = _props.events,\n      sharedEvents = _props.sharedEvents,\n      horizontal = _props.horizontal;\n  var initialChildProps = {\n    parent: {\n      domain: domain,\n      scale: scale,\n      width: width,\n      height: height,\n      data: data,\n      standalone: standalone,\n      theme: theme,\n      polar: polar,\n      origin: origin,\n      name: name,\n      style: style.parent,\n      padding: padding,\n      horizontal: horizontal\n    }\n  };\n  return data.reduce(function (childProps, datum, index) {\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n    var x = scale.x(datum._x1 !== undefined ? datum._x1 : datum._x);\n    var high = scale.y(datum._high);\n    var close = scale.y(datum._close);\n    var open = scale.y(datum._open);\n    var low = scale.y(datum._low);\n    var dataStyle = getDataStyles(datum, style.data, props);\n    var dataProps = {\n      x: x,\n      high: high,\n      low: low,\n      candleWidth: candleWidth,\n      candleRatio: candleRatio,\n      scale: scale,\n      data: data,\n      datum: datum,\n      groupComponent: groupComponent,\n      index: index,\n      style: dataStyle,\n      width: width,\n      polar: polar,\n      origin: origin,\n      wickStrokeWidth: wickStrokeWidth,\n      open: open,\n      close: close,\n      horizontal: horizontal\n    };\n    childProps[eventKey] = {\n      data: dataProps\n    };\n    var text = LabelHelpers.getText(props, datum, index);\n\n    if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n      childProps[eventKey].labels = getLabelProps(dataProps, text, style);\n    }\n\n    return childProps;\n  }, initialChildProps);\n};\n\nexport { getBaseProps, getDomain, getData };","map":{"version":3,"sources":["D:/TraniningGlobits/baitap_level2/client/react/node_modules/victory-candlestick/es/helper-methods.js"],"names":["_isNil","_assign","Helpers","LabelHelpers","Scale","Domain","Data","getData","props","accessorTypes","formatData","data","reduceData","dataset","axis","type","yDataTypes","min","max","dataType","baseCondition","Infinity","reduce","memo","datum","current","getDomainFromData","minDomain","getMinFromProps","maxDomain","getMaxFromProps","length","undefined","getDomainFromMinMax","getDomain","createDomainFunction","getCalculatedValues","theme","polar","defaultStyle","candlestick","style","getStyles","range","x","getRange","y","domain","scale","getBaseScale","horizontal","origin","getPolarOrigin","isTransparent","attr","getDataStyles","candleColor","open","close","candleColors","negative","positive","fill","strokeColor","stroke","getLabelProps","dataProps","text","high","index","labelStyle","labels","defaultAnchors","vertical","padding","textAnchor","verticalAnchor","angle","getBaseProps","fallbackProps","modifyProps","calculatedValues","_props","groupComponent","width","height","standalone","name","candleWidth","candleRatio","wickStrokeWidth","events","sharedEvents","initialChildProps","parent","childProps","eventKey","_x1","_x","_high","_close","_open","low","_low","dataStyle","getText"],"mappings":"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","sourcesContent":["import _isNil from \"lodash/isNil\";\nimport _assign from \"lodash/assign\";\nimport { Helpers, LabelHelpers, Scale, Domain, Data } from \"victory-core\";\n\nvar getData = function (props) {\n  var accessorTypes = [\"x\", \"high\", \"low\", \"close\", \"open\"];\n  return Data.formatData(props.data, props, accessorTypes);\n};\n\nvar reduceData = function (dataset, axis, type) {\n  var yDataTypes = {\n    min: \"_low\",\n    max: \"_high\"\n  };\n  var dataType = axis === \"x\" ? \"_x\" : yDataTypes[type];\n  var baseCondition = type === \"min\" ? Infinity : -Infinity;\n  return dataset.reduce(function (memo, datum) {\n    var current = datum[dataType];\n    return memo < current && type === \"min\" || memo > current && type === \"max\" ? memo : current;\n  }, baseCondition);\n};\n\nvar getDomainFromData = function (props, axis) {\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var dataset = getData(props);\n\n  if (dataset.length < 1) {\n    return minDomain !== undefined && maxDomain !== undefined ? Domain.getDomainFromMinMax(minDomain, maxDomain) : undefined;\n  }\n\n  var min = minDomain !== undefined ? minDomain : reduceData(dataset, axis, \"min\");\n  var max = maxDomain !== undefined ? maxDomain : reduceData(dataset, axis, \"max\");\n  return Domain.getDomainFromMinMax(min, max);\n};\n\nvar getDomain = function (props, axis) {\n  return Domain.createDomainFunction(getDomainFromData)(props, axis);\n};\n\nvar getCalculatedValues = function (props) {\n  var theme = props.theme,\n      polar = props.polar;\n  var defaultStyle = theme && theme.candlestick && theme.candlestick.style ? theme.candlestick.style : {};\n  var style = Helpers.getStyles(props.style, defaultStyle);\n  var data = getData(props);\n  var range = {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var domain = {\n    x: getDomain(props, \"x\"),\n    y: getDomain(props, \"y\")\n  };\n  var scale = {\n    x: Scale.getBaseScale(props, \"x\").domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: Scale.getBaseScale(props, \"y\").domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var origin = polar ? props.origin || Helpers.getPolarOrigin(props) : undefined;\n  return {\n    domain: domain,\n    data: data,\n    scale: scale,\n    style: style,\n    origin: origin\n  };\n};\n\nvar isTransparent = function (attr) {\n  return attr === \"none\" || attr === \"transparent\";\n};\n\nvar getDataStyles = function (datum, style, props) {\n  style = style || {};\n  var candleColor = datum.open > datum.close ? props.candleColors.negative : props.candleColors.positive;\n  var fill = style.fill || candleColor;\n  var strokeColor = style.stroke;\n  var stroke = isTransparent(strokeColor) ? fill : strokeColor || \"black\";\n  return _assign({}, style, {\n    stroke: stroke,\n    fill: fill\n  });\n};\n\nvar getLabelProps = function (dataProps, text, style) {\n  var x = dataProps.x,\n      high = dataProps.high,\n      index = dataProps.index,\n      scale = dataProps.scale,\n      datum = dataProps.datum,\n      data = dataProps.data,\n      horizontal = dataProps.horizontal;\n  var labelStyle = style.labels || {};\n  var defaultAnchors = {\n    vertical: horizontal ? \"middle\" : \"end\",\n    text: horizontal ? \"start\" : \"middle\"\n  };\n  return {\n    style: labelStyle,\n    y: horizontal ? x : high - (labelStyle.padding || 0),\n    x: horizontal ? high + (labelStyle.padding || 0) : x,\n    text: text,\n    index: index,\n    scale: scale,\n    datum: datum,\n    data: data,\n    textAnchor: labelStyle.textAnchor || defaultAnchors.text,\n    verticalAnchor: labelStyle.verticalAnchor || defaultAnchors.vertical,\n    angle: labelStyle.angle,\n    horizontal: horizontal\n  };\n};\n\nvar getBaseProps = function (props, fallbackProps) {\n  // eslint-disable-line max-statements\n  props = Helpers.modifyProps(props, fallbackProps, \"candlestick\");\n  var calculatedValues = getCalculatedValues(props);\n  var data = calculatedValues.data,\n      style = calculatedValues.style,\n      scale = calculatedValues.scale,\n      domain = calculatedValues.domain,\n      origin = calculatedValues.origin;\n  var _props = props,\n      groupComponent = _props.groupComponent,\n      width = _props.width,\n      height = _props.height,\n      padding = _props.padding,\n      standalone = _props.standalone,\n      name = _props.name,\n      candleWidth = _props.candleWidth,\n      candleRatio = _props.candleRatio,\n      theme = _props.theme,\n      polar = _props.polar,\n      wickStrokeWidth = _props.wickStrokeWidth,\n      labels = _props.labels,\n      events = _props.events,\n      sharedEvents = _props.sharedEvents,\n      horizontal = _props.horizontal;\n  var initialChildProps = {\n    parent: {\n      domain: domain,\n      scale: scale,\n      width: width,\n      height: height,\n      data: data,\n      standalone: standalone,\n      theme: theme,\n      polar: polar,\n      origin: origin,\n      name: name,\n      style: style.parent,\n      padding: padding,\n      horizontal: horizontal\n    }\n  };\n  return data.reduce(function (childProps, datum, index) {\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n    var x = scale.x(datum._x1 !== undefined ? datum._x1 : datum._x);\n    var high = scale.y(datum._high);\n    var close = scale.y(datum._close);\n    var open = scale.y(datum._open);\n    var low = scale.y(datum._low);\n    var dataStyle = getDataStyles(datum, style.data, props);\n    var dataProps = {\n      x: x,\n      high: high,\n      low: low,\n      candleWidth: candleWidth,\n      candleRatio: candleRatio,\n      scale: scale,\n      data: data,\n      datum: datum,\n      groupComponent: groupComponent,\n      index: index,\n      style: dataStyle,\n      width: width,\n      polar: polar,\n      origin: origin,\n      wickStrokeWidth: wickStrokeWidth,\n      open: open,\n      close: close,\n      horizontal: horizontal\n    };\n    childProps[eventKey] = {\n      data: dataProps\n    };\n    var text = LabelHelpers.getText(props, datum, index);\n\n    if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n      childProps[eventKey].labels = getLabelProps(dataProps, text, style);\n    }\n\n    return childProps;\n  }, initialChildProps);\n};\n\nexport { getBaseProps, getDomain, getData };"]},"metadata":{},"sourceType":"module"}